local a,b=...local c=HeroDBC.DBC;local d=HeroLib;local e=HeroCache;local f=d.Unit;local g=f.Player;local h=f.Target;local i=d.Spell;local j=d.Item;local k=HeroRotation;local l=k.Cast;local m=k.CDsON;local n=k.AoEON;local o=HeroRotationCharDB.Toggles[4]local p=HeroRotationCharDB.Toggles[5]local q=HeroRotationCharDB.Toggles[6]local r=HeroRotationCharDB.Toggles[15]local s=HeroRotationCharDB.Toggles[12]local t=GetInventoryItemID("player",13)local u=GetInventoryItemID("player",14)local v;local w;local x=i.Warrior.Fury;local y=j.Warrior.Fury;local z={y.FlameofBattle:ID(),y.InscrutableQuantumDevice:ID(),y.InstructorsDivineBell:ID(),y.MacabreSheetMusic:ID(),y.OverwhelmingPowerCrystal:ID(),y.WakenersFrond:ID(),y.SinfulGladiatorsBadge:ID(),y.UnchainedGladiatorsBadge:ID()}local A;local B;local C;local D=0;local E=0;local F,G;local H;local I={0,0,0,0,0,0,0}local J=g:HasLegendaryEquipped(181)local K=g:HasLegendaryEquipped(189)local L=g:HasLegendaryEquipped(263)local M=g:HasLegendaryEquipped(215)local N=k.Commons.Everyone;local O={General=k.GUISettings.General,Commons=k.GUISettings.APL.Warrior.Commons,Fury=k.GUISettings.APL.Warrior.Fury}local P={{x.StormBolt,"Cast Storm Bolt (Interrupt)",function()return true end}}function addToSet(Q,R)Q[R]=true end;function removeFromSet(Q,R)Q[R]=nil end;function setContains(S,T)for U,V in ipairs(S)do if V==T then return true end end;return false end;d:RegisterForEvent(function()J=g:HasLegendaryEquipped(181)K=g:HasLegendaryEquipped(189)L=g:HasLegendaryEquipped(263)or g:HasUnity()and x.SpearofBastion:IsAvailable()M=g:HasLegendaryEquipped(215)end,"PLAYER_EQUIPMENT_CHANGED")local W=0;local X=0;local Y={335114,335304,326430,328890,329742,331573,342321,330968,347350,327773,326851,320008,332678,332707,332705,332605,334076,332196,328707,333250,332234,333711,323544,323569,328322,323538,338003,325876,325872,325700,326891,326829,323057,326319,322767,322557,325021,325223,325224,325418,326092,322486,322487,329110,328002,328180,328094,334926,320512,322554,328593,334660,326712,321249,326827,346537,326837,326952,321038,323195,324608,317661,323804,333602,320171,320788,334748,320462,333479,320120,320300,319669,324079,324589,330784,330700,330703,330784,333299,330875,345245,332550,330810,340678,330926,116858,203286,167385}local function Z(self,_,a0,a1,a2)if a0 and a1 then if UnitIsUnit(a0 .."target","player")then local a3,a4,a4,a5,a6,a4,a4,a4,a7=UnitCastingInfo(a0)if setContains(Y,a7)then sourceName=a0;X=a6 end end end end;local a8=CreateFrame("Frame")a8:RegisterEvent("UNIT_SPELLCAST_START")a8:SetScript("OnEvent",Z)local function a9(T)if T then return 1 else return 0 end end;local function aa(T)return T~=0 end;local function ab(ac)return setcontains(I,ac:GUID())end;local function ad(ac)return ac:HealthPercentage()end;local function ae(af)local ag=0;for ah in pairs(af)do local ai=af[ah]if setContains(I,ai:GUID())then ag=ag+1 end end;return ag end;local function aj(ac)if(ac:HealthPercentage()<20 or x.Massacre:IsAvailable()and ac:HealthPercentage()<35)and x.Execute:CooldownRemains()<=0 and g:Covenant()~="Venthyr"and ac:GUID()==f("mouseover"):GUID()then D=1280735;return true elseif(ac:HealthPercentage()<20 or x.Massacre:IsAvailable()and ac:HealthPercentage()<35)and x.Execute:CooldownRemains()<=0 and g:Covenant()~="Venthyr"and O.Fury.TargetSwap=="AutoSwap"and(ac:GUID()~=h:GUID()and not s)then D=999;return true elseif(ac:HealthPercentage()<20 or x.Massacre:IsAvailable()and ac:HealthPercentage()<35)and x.Execute:CooldownRemains()<=0 and g:Covenant()~="Venthyr"and ac:GUID()==h:GUID()then E=280735;return true elseif(ac:HealthPercentage()<20 or x.Massacre:IsAvailable()and ac:HealthPercentage()<35)and x.Execute:CooldownRemains()<=0 and g:Covenant()~="Venthyr"and(g:Rage()>20 or g:BuffUp(x.SuddenDeathBuff))then return true end end;local function ak(ac)if x.Bloodthirst:IsCastable()and ac:IsInRange(8)and(not A or x.ViciousContempt:ConduitRank()>5 and ac:HealthPercentage()<35)and not setContains(I,ac:GUID())and ac:GUID()==f("mouseover"):GUID()then D=123881;w=ac:GUID()return true elseif x.Bloodthirst:IsCastable()and ac:IsInRange(8)and(not A or x.ViciousContempt:ConduitRank()>5 and ac:HealthPercentage()<35)and not setContains(I,ac:GUID())and O.Fury.TargetSwap=="AutoSwap"and(ac:GUID()~=h:GUID()and not s)then D=999;return true elseif x.Bloodthirst:IsCastable()and ac:IsInRange(8)and(not A or x.ViciousContempt:ConduitRank()>5 and ac:HealthPercentage()<35)and not setContains(I,ac:GUID())and x.Execute:CooldownRemains()<=0 and ac:GUID()==h:GUID()then E=23881;return true elseif x.Bloodthirst:IsCastable()and ac:IsInRange(8)and(not A or x.ViciousContempt:ConduitRank()>5 and ac:HealthPercentage()<35)and not setContains(I,ac:GUID())then return true end end;local function al(ac)if x.Bloodthirst:IsCastable()and ac:IsInRange(8)and not setContains(I,ac:GUID())and ac:GUID()==f("mouseover"):GUID()then D=123881;w=ac:GUID()return true elseif x.Bloodthirst:IsCastable()and ac:IsInRange(8)and not setContains(I,ac:GUID())and O.Fury.TargetSwap=="AutoSwap"and(ac:GUID()~=h:GUID()and not s)then D=999;return true elseif x.Bloodthirst:IsCastable()and ac:IsInRange(8)and not setContains(I,ac:GUID())and x.Execute:CooldownRemains()<=0 and ac:GUID()==h:GUID()then E=23881;return true elseif x.Bloodthirst:IsCastable()and ac:IsInRange(8)and not setContains(I,ac:GUID())then return true end end;local function am()if N.TargetIsValid()then if x.BattleShout:IsCastable()and g:BuffRemains(x.BattleShoutBuff,true)<60 then if l(x.BattleShout,nil)then E=6673;return"battle_shout precombat 2"end end;if x.Recklessness:IsCastable()and h:IsInMeleeRange(10)and m()and not J then if l(x.Recklessness,nil)then E=1719;return"recklessness precombat 4"end end;if x.Charge:IsCastable()and h:IsInMeleeRange(25)and O.Fury.UseCharge then if l(x.Charge,nil,nil,not h:IsSpellInRange(x.Charge))then E=100;return"charge precombat 6"end end;if x.Bloodthirst:IsCastable()and h:IsInMeleeRange(8)then if l(x.Bloodthirst,nil,nil,not H)then E=23881;return"bloodthirst precombat 8"end end end end;local function an()if x.LightsJudgment:IsCastable()and h:IsInRange(8)and(g:BuffDown(x.RecklessnessBuff)and h:DebuffDown(x.SiegebreakerDebuff))then if l(x.LightsJudgment,nil,nil,not h:IsSpellInRange(x.LightsJudgment))then E=255647;return"lights_judgment"end end;if x.BagofTricks:IsCastable()and h:IsInRange(8)and(g:BuffDown(x.RecklessnessBuff)and h:DebuffDown(x.SiegebreakerDebuff)and A)then if l(x.BagofTricks,nil,nil,not h:IsSpellInRange(x.BagofTricks))then E=312411;return"bag_of_tricks"end end;if x.Berserking:IsCastable()and h:IsInRange(8)and g:BuffUp(x.RecklessnessBuff)then if l(x.Berserking,nil)then E=26297;return"berserking"end end;if x.BloodFury:IsCastable()and h:IsInRange(8)then if l(x.BloodFury,nil)then E=20572;return"blood_fury"end end;if x.Fireblood:IsCastable()and h:IsInRange(8)then if l(x.Fireblood,nil)then E=265221;return"fireblood"end end;if x.AncestralCall:IsCastable()and h:IsInRange(8)then if l(x.AncestralCall,nil)then E=274738;return"ancestral_call"end end;if x.Rampage:IsReady()and x.Rampage:IsCastable()and g:Rage()>79 and h:IsInRange(8)and g:BuffDown(x.Whirlwindbuff)and G>1 then if l(x.Whirlwind,nil,nil,not h:IsInRange(8))then E=190411;return"Force WW Before Rampage"end end;if g:BuffUp(x.Recklessness)and m()and h:IsInMeleeRange(8)and g:Rage()>79 and g:BuffDown(x.MercilessBonegrinderBuff)and g:BuffDown(x.Whirlwindbuff)and x.Rampage:IsCastable()and x.Bladestorm:IsCastable()then if l(x.Rampage,nil,nil,not H)then E=184367;return"Forced Whirlwind Rampage"end end;if x.Rampage:IsReady()and x.Rampage:IsCastable()and h:IsInRange(8)and g:BuffUp(x.Whirlwindbuff)and not A and g:BuffUp(x.MercilessBonegrinderBuff)then if l(x.Rampage,nil,nil,not H)then E=184367;return"Refresh Enrage During Bonegrinder"end end;if x.Rampage:IsReady()and x.Rampage:IsCastable()and h:IsInRange(8)and g:BuffUp(x.Whirlwindbuff)then if l(x.Rampage,nil,nil,not H)then E=184367;return"Rampage"end end;if x.SpearofBastion:IsCastable()and o and h:IsInMeleeRange(8)and A and J and g:BuffRemains(x.EnrageBuff)>g:GCD()then if l(x.SpearofBastion,nil,nil,not h:IsInRange(25))then E=307865;return"Double Leggo Spear"end end;if x.ConquerorsBanner:IsCastable()and o and h:IsInRange(8)then if l(x.ConquerorsBanner,nil)then E=324143;return"Conqueror's Banner"end end;if x.Recklessness:IsCastable()and x.SpearofBastion:IsCastable()and m()and h:IsInMeleeRange(8)and A and J and g:BuffDown(x.MercilessBonegrinderBuff)then if l(x.Recklessness,nil)then E=19283;return"Double Legendary Recklessness"end end;if x.Recklessness:IsCastable()and m()and h:IsInMeleeRange(8)and g:Rage()<79 and A and J and g:BuffDown(x.MercilessBonegrinderBuff)then if l(x.Recklessness,nil)then E=1719;return"recklessness Signet AOE"end end;if x.Recklessness:IsCastable()and m()and h:IsInMeleeRange(8)and not J then if l(x.Recklessness,nil)then E=1719;return"recklessness AOE"end end;if x.SpearofBastion:IsCastable()and o and h:IsInMeleeRange(8)and A and g:Rage()<70 and g:BuffRemains(x.EnrageBuff)>g:GCD()then if l(x.SpearofBastion,nil,nil,not h:IsInRange(25))then E=307865;return"AOE Spear"end end;if o and h:IsInMeleeRange(12)and x.AncientAftershock:IsCastable()and A then if l(x.AncientAftershock,nil,nil,not h:IsInMeleeRange(12))then E=325886;return"ancient_aftershock aoe 2"end end;if x.Bladestorm:IsCastable()and h:IsInRange(8)and m()and A and g:Rage()<25 and G==1 then if l(x.Bladestorm,nil,nil,not h:IsInRange(8))then E=46924;return"bladestorm single_target 22"end end;if m()and h:IsInRange(8)and x.Bladestorm:IsCastable()and A and G>1 and g:BuffDown(x.MercilessBonegrinderBuff)and g:BuffRemains(x.EnrageBuff)>g:GCD()then if l(x.Bladestorm,nil,nil,not h:IsInRange(8))then E=46924;return"AOE Bladestorm"end end;if x.Siegebreaker:IsCastable()and m()and h:IsInRange(8)and g:BuffUp(x.Whirlwindbuff)and G>1 then if l(x.Siegebreaker,nil,nil,not H)then E=280772;return"siegebreaker aoe 10"end end;if x.Whirlwind:IsCastable()and h:IsInRange(8)and g:BuffUp(x.MercilessBonegrinderBuff)and G>5 then if l(x.Whirlwind,nil,nil,not h:IsInRange(8))then E=190411;return"whirlwind 5+ Target"end end;if x.Execute:IsCastable()and g:Covenant()~="Venthyr"and x.Execute:IsUsable()and h:IsInRange(8)and g:BuffUp(x.Whirlwindbuff)then if l(x.Execute,nil,nil,not H)then E=280735;return"Execute 3 Targets"end end;if x.Whirlwind:IsCastable()and h:IsInRange(8)and g:BuffUp(x.MercilessBonegrinderBuff)and G>3 then if l(x.Whirlwind,nil,nil,not h:IsInRange(8))then E=190411;return"whirlwind 3+ Target"end end;if x.Condemn:IsCastable()and h:IsInRange(8)and g:BuffUp(x.Whirlwindbuff)and B then if l(x.Condemn,nil,nil,not H)then E=330325;return"condemn single_target 8"end end;if x.Whirlwind:IsCastable()and h:IsInRange(8)and g:BuffDown(x.Whirlwindbuff)and G>1 then if l(x.Whirlwind,nil,nil,not h:IsInRange(8))then E=190411;return"WW Buff AOE"end end end;local function ao()if x.LightsJudgment:IsCastable()and h:IsInRange(8)and(g:BuffDown(x.RecklessnessBuff)and h:DebuffDown(x.SiegebreakerDebuff))then if l(x.LightsJudgment,nil,nil,not h:IsSpellInRange(x.LightsJudgment))then E=255647;return"lights_judgment"end end;if x.BagofTricks:IsCastable()and h:IsInRange(8)and(g:BuffDown(x.RecklessnessBuff)and h:DebuffDown(x.SiegebreakerDebuff)and A)then if l(x.BagofTricks,nil,nil,not h:IsSpellInRange(x.BagofTricks))then E=312411;return"bag_of_tricks"end end;if x.Berserking:IsCastable()and h:IsInRange(8)and g:BuffUp(x.RecklessnessBuff)then if l(x.Berserking,nil)then E=26297;return"berserking"end end;if x.BloodFury:IsCastable()and h:IsInRange(8)then if l(x.BloodFury,nil)then E=20572;return"blood_fury"end end;if x.Fireblood:IsCastable()and h:IsInRange(8)then if l(x.Fireblood,nil)then E=265221;return"fireblood"end end;if x.AncestralCall:IsCastable()and h:IsInRange(8)then if l(x.AncestralCall,nil)then E=274738;return"ancestral_call"end end;if x.Siegebreaker:IsCastable()and m()and h:IsInRange(8)then if l(x.Siegebreaker,nil,nil,not H)then E=280772;return"siegebreaker single target"end end;if x.Rampage:IsReady()and x.Rampage:IsCastable()and h:IsInRange(8)then if l(x.Rampage,nil,nil,not H)then E=184367;return"Rampage Single Target"end end;if x.ConquerorsBanner:IsCastable()and o and h:IsInRange(8)then if l(x.ConquerorsBanner,nil)then E=324143;return"Conqueror's Banner"end end;if x.Recklessness:IsCastable()and x.SpearofBastion:IsCastable()and m()and h:IsInMeleeRange(8)and g:Rage()<70 and A and J and g:BuffDown(x.MercilessBonegrinderBuff)then if l(x.Recklessness,nil)then E=19283;return"Double Legendary Recklessness"end end;if x.Recklessness:IsCastable()and m()and h:IsInMeleeRange(8)and g:Rage()<79 and A and J and g:BuffDown(x.MercilessBonegrinderBuff)then if l(x.Recklessness,nil)then E=1719;return"recklessness Signet"end end;if x.Recklessness:IsCastable()and m()and h:IsInMeleeRange(8)and not J then if l(x.Recklessness,nil)then E=1719;return"recklessness"end end;if x.SpearofBastion:IsCastable()and o and h:IsInMeleeRange(8)and A and g:Rage()<70 then if l(x.SpearofBastion,nil,nil,not h:IsInRange(25))then E=307865;return"Spear"end end;if m()and h:IsInRange(12)and o and x.AncientAftershock:IsCastable()and A then if l(x.AncientAftershock,nil,nil,not h:IsInRange(12))then E=325886;return"AA"end end;if x.CrushingBlow:IsCastable()and h:IsInRange(8)and g:HasTier(28,4)and not x.FreshMeat:IsAvailable()then if l(x.CrushingBlow,nil,nil,not H)then E=335097;return"Crushing Blow 4p"end end;if x.Execute:IsCastable()and g:Covenant()~="Venthyr"and x.Execute:IsUsable()and h:IsInRange(8)then if l(x.Execute,nil,nil,not H)then E=280735;return"Execute"end else if N.CastCycle(x.Execute,F,aj)then return"Execute Mouse Over"end end;if x.CrushingBlow:IsCastable()and h:IsInRange(8)and(K and g:BuffRemains(x.WilloftheBerserkerBuff)<g:GCD())then if l(x.CrushingBlow,nil,nil,not H)then E=335097;return"Crushing Blow WOTB"end end;if x.RagingBlow:IsCastable()and h:IsInRange(8)and g:HasTier(28,2)and x.RagingBlow:Charges()==3 and not x.FreshMeat:IsAvailable()then if l(x.RagingBlow,nil,nil,not H)then E=85288;return"Raging Blow 3 Charges"end end;if x.DragonRoar:IsCastable()and m()and h:IsInRange(8)and g:BuffRemains(x.EnrageBuff)>g:GCD()then if l(x.DragonRoar,nil,nil,not h:IsInRange(12))then E=118000;return"Dragon Roar"end end;if x.RagingBlow:IsCastable()and h:IsInRange(8)and(K and g:BuffRemains(x.WilloftheBerserkerBuff)<g:GCD())then if l(x.RagingBlow,nil,nil,not H)then E=85288;return"Raging Blow WOTB"end end;if x.CrushingBlow:IsCastable()and h:IsInRange(8)and(K and g:BuffRemains(x.WilloftheBerserkerBuff)<g:GCD())then if l(x.CrushingBlow,nil,nil,not H)then E=335097;return"Crushing Blow WOTB"end end;if x.Condemn:IsCastable()and h:IsInRange(8)and B then if l(x.Condemn,nil,nil,not H)then E=330325;return"Condemn"end end;if x.Condemn:IsCastable()and h:IsInRange(8)and B then if l(x.Condemn,nil,nil,not H)then E=330325;return"Condemn"end end;if x.CrushingBlow:IsCastable()and h:IsInRange(8)and g:HasTier(28,2)and not x.FreshMeat:IsAvailable()then if l(x.CrushingBlow,nil,nil,not H)then E=335097;return"Crushing Blow Tier Set"end end;if x.Bloodthirst:IsCastable()and h:IsInRange(8)and x.RagingBlow:Charges()==1 and g:HasTier(28,2)and(not A or x.ViciousContempt:ConduitRank()>5 and h:HealthPercentage()<35)and(not setContains(I,h:GUID())or FreshMeatAvailable==G or not x.FreshMeat:IsAvailable()or s)then v=h:GUID()if l(x.Bloodthirst,nil,nil,not H)then E=23881;return"Bloodthirst Single Target"end else if N.CastCycle(x.Bloodthirst,F,ak)then return"Bloodthirst Single Target Mouseover"end end;if x.RagingBlow:IsCastable()and h:IsInRange(8)and g:HasTier(28,2)and not x.FreshMeat:IsAvailable()then if l(x.RagingBlow,nil,nil,not H)then E=85288;return"Raging Blow Tier Set"end end;if m()then if x.SpearofBastion:IsCastable()and h:IsInRange(8)and o and(L and A and x.Recklessness:CooldownRemains()>5 and(g:BuffUp(x.RecklessnessBuff)or h:TimeToDie()<20 or h:DebuffUp(x.SiegebreakerDebuff)or not x.Siegebreaker:IsAvailable()and h:TimeToDie()>68))then if l(x.SpearofBastion,nil,nil,not h:IsInRange(25))then E=307865;return"spear_of_bastion single_target 20"end end;if x.SpearofBastion:IsCastable()and h:IsInRange(8)and o and(A and x.Recklessness:CooldownRemains()>5 and(g:BuffUp(x.RecklessnessBuff)or h:TimeToDie()<20 or h:DebuffUp(x.SiegebreakerDebuff)or not x.Siegebreaker:IsAvailable()and h:TimeToDie()>68))then if l(x.SpearofBastion,nil,nil,not h:IsInRange(25))then E=307865;return"spear_of_bastion single_target 23"end end;if x.Bladestorm:IsCastable()and h:IsInRange(8)and m()and A and g:Rage()<25 and G==1 then if l(x.Bladestorm,nil,nil,not h:IsInRange(8))then E=46924;return"bladestorm single_target 22"end end end;if x.Bloodthirst:IsCastable()and h:IsInRange(8)and(not A or x.ViciousContempt:ConduitRank()>5 and h:HealthPercentage()<35)and(not setContains(I,h:GUID())or FreshMeatAvailable==G or not x.FreshMeat:IsAvailable()or s)then v=h:GUID()if l(x.Bloodthirst,nil,nil,not H)then E=23881;return"Bloodthirst Single Target"end else if N.CastCycle(x.Bloodthirst,F,ak)then return"Bloodthirst Single Target Mouseover"end end;if x.CrushingBlow:IsCastable()and h:IsInRange(8)and g:HasTier(28,2)then if l(x.CrushingBlow,nil,nil,not H)then E=335097;return"Crushing Blow Tier Set"end end;if x.Bloodbath:IsCastable()and h:IsInRange(8)and(not A or x.ViciousContempt:ConduitRank()>5 and h:HealthPercentage()<35 and not x.Cruelty:IsAvailable())then if l(x.Bloodbath,nil,nil,not H)then E=335096;return"Bloodbath"end end;if x.Onslaught:IsCastable()and h:IsInRange(8)and x.Onslaught:IsUsable()then if l(x.Onslaught,nil,nil,not H)then E=315720;return"Onslaught"end end;if x.CrushingBlow:IsCastable()and h:IsInRange(8)and(x.CrushingBlow:Charges()==2 or g:BuffUp(x.RecklessnessBuff)and B and x.Massacre:IsAvailable())then if l(x.CrushingBlow,nil,nil,not H)then E=335097;return"Crushing Blow 2 Charges"end end;if x.RagingBlow:IsCastable()and h:IsInRange(8)and(x.RagingBlow:Charges()==2 or g:BuffUp(x.RecklessnessBuff)and B and A and x.Massacre:IsAvailable())then if l(x.RagingBlow,nil,nil,not H)then E=85288;return"Raging Blow 2 Charges"end end;if x.Bloodthirst:IsCastable()and h:IsInRange(8)and(not setContains(I,h:GUID())or FreshMeatAvailable==G or not x.FreshMeat:IsAvailable()or s)then v=h:GUID()if l(x.Bloodthirst,nil,nil,not H)then E=23881;return"Bloodthirst Single Target"end else if N.CastCycle(x.Bloodthirst,F,ak)then return"Bloodthirst Single Target Mouseover"end end;if x.Bloodbath:IsCastable()and h:IsInRange(8)then if l(x.Bloodbath,nil,nil,not H)then E=335096;return"Blooodbath"end end;if x.RagingBlow:IsCastable()and h:IsInRange(8)and g:HasTier(28,2)and x.RagingBlow:Charges()==1 then if l(x.RagingBlow,nil,nil,not H)then E=85288;return"Raging Blow Tier Set"end end;if x.RagingBlow:IsCastable()and h:IsInRange(8)then if l(x.RagingBlow,nil,nil,not H)then E=85288;return"Raging Blow"end end;if x.CrushingBlow:IsCastable()and h:IsInRange(8)then if l(x.CrushingBlow,nil,nil,not H)then E=335097;return"Crushing Blow"end end;if x.Whirlwind:IsCastable()and h:IsInRange(8)then if l(x.Whirlwind,nil,nil,not h:IsInRange(8))then E=190411;return"Filler Whirlwind"end end end;local function ap()end;local function aq()q=HeroRotationCharDB.Toggles[6]o=HeroRotationCharDB.Toggles[4]p=HeroRotationCharDB.Toggles[5]s=HeroRotationCharDB.Toggles[12]r=HeroRotationCharDB.Toggles[15]if x.SpellReflection:CooldownRemains()>0 then W=0;X=0 end;if O.Commons.Enabled.TopTrinket then t=GetInventoryItemID("player",13)else t=1 end;if O.Commons.Enabled.BottomTrinket then u=GetInventoryItemID("player",14)else u=1 end end;local function ar()if not BotOn then D=0;E=0;shouldcastfocus=0 end;if n()then F=g:GetEnemiesInMeleeRange(8)G=#F;FreshMeatAvailable=ae(F)else G=1;FreshMeatAvailable=1 end;A=g:BuffUp(x.EnrageBuff)H=h:IsInMeleeRange(5)if D>0 then D=0 end;if E>0 then E=0 end;if shouldcastfocus>0 then shouldcastfocus=0 end;ShouldReturn=aq()if not UnitAffectingCombat("player")then for as=1,#I do I[as]=nil end end;if x.Bloodthirst:TimeSinceLastCast()<1 and h:GUID()==v then table.insert(I,v)end;if g:PrevGCD(1,x.Bloodthirst)and f("mouseover"):GUID()==w and w~=nil then table.insert(I,w)w=nil end;v=nil;if O.Fury.UseDefensives and g:AffectingCombat()then if x.EnragedRegeneration:IsReady()and g:HealthPercentage()<O.Fury.EnragedRegneration then if k.Cast(x.EnragedRegeneration,nil,nil,nil)then E=184364;return"Enraged Regeneration 100"end end;if x.RallyingCry:IsReady()and g:HealthPercentage()<O.Fury.RallyingCry then if k.Cast(x.RallyingCry,nil,nil,nil)then E=97462;return"RallyingCry 100"end end;if x.IgnorePain:IsReady()and g:HealthPercentage()<O.Fury.IgnorePain then if k.Cast(x.IgnorePain,nil,nil,nil)then E=190456;return"IgnorePain 100"end end end;if not g:AffectingCombat()and not g:IsDeadOrGhost()and q then local ShouldReturn=am()if ShouldReturn then return ShouldReturn end end;if g:BuffUp(x.Bladestorm)and G==1 and g:Rage()>80 then if l(x.Bladestorm,nil,nil,not H)then E=1202168;return"cancel bladestorm"end end;if N.TargetIsValid()and not g:IsDeadOrGhost()and(g:AffectingCombat()or q)then if x.Charge:IsCastable()and O.Fury.UseCharge and h:IsInRange(25)then if l(x.Charge,nil,nil,not h:IsSpellInRange(x.Charge))then E=100;return"charge main 2"end end;if g:HealthPercentage()<O.Commons.VictoryRushHP then if x.VictoryRush:IsCastable()and x.VictoryRush:IsUsable()then if l(x.VictoryRush,nil,nil,not H)then E=34428;return"victory_rush heal"end end;if x.ImpendingVictory:IsReady()and x.VictoryRush:IsUsable()then if l(x.ImpendingVictory,nil,nil,not H)then E=202168;return"impending_victory heal"end end end;B=x.Massacre:IsAvailable()and h:HealthPercentage()<35 or h:HealthPercentage()<20 or h:HealthPercentage()>80 and g:Covenant()=="Venthyr"or g:BuffUp(x.SuddenDeathBuff)C=J or M or L;if not h:IsInMeleeRange(8)then local ShouldReturn=ap()if ShouldReturn then return ShouldReturn end end;if y.PotionofSpectralStrength:IsReady()and O.Commons.Enabled.Potions and h:IsInMeleeRange(8)then if l(y.PotionofSpectralStrength,nil,nil)then E=20;return"potion main 6"end end;if x.Rampage:IsReady()and(x.Recklessness:CooldownRemains()<3 and x.RecklessAbandon:IsAvailable())and h:IsInMeleeRange(8)then if l(x.Rampage,nil,nil,not H)then E=184367;return"rampage main 10"end end;if(O.Commons.Enabled.TopTrinket or O.Commons.Enabled.BottomTrinket)and m()then if y.InscrutableQuantumDevice:IsEquippedAndReady()and(x.Recklessness:CooldownRemains()>10 and(g:BuffUp(x.RecklessnessBuff)or h:TimeToDie()<21 or h:TimeToDie()>190 or g:BloodlustUp()))then if l(y.InscrutableQuantumDevice)then if y.InscrutableQuantumDevice:ID()==t and O.Commons.Enabled.TopTrinket then E=30;return"inscrutable_quantum_device trinkets main"elseif y.InscrutableQuantumDevice:ID()==u and O.Commons.Enabled.BottomTrinket then E=40;return"inscrutable_quantum_device trinkets main"end end end;if y.WakenersFrond:IsEquippedAndReady()and(x.Recklessness:CooldownRemains()>10 and(g:BuffUp(x.RecklessnessBuff)or h:TimeToDie()<13 or h:TimeToDie()>130))then if l(y.WakenersFrond)then if y.WakenersFrond:ID()==t and O.Commons.Enabled.TopTrinket then E=30;return"WakenersFrond trinkets main"elseif y.WakenersFrond:ID()==u and O.Commons.Enabled.BottomTrinket then E=40;return"WakenersFrond trinkets main"end end end;if y.MacabreSheetMusic:IsEquippedAndReady()and(x.Recklessness:CooldownRemains()>10 and(g:BuffUp(x.RecklessnessBuff)or h:TimeToDie()<25 or h:TimeToDie()>110))then if l(y.MacabreSheetMusic)then if y.MacabreSheetMusic:ID()==t and O.Commons.Enabled.TopTrinket then E=30;return"MacabreSheetMusic trinkets main"elseif y.MacabreSheetMusic:ID()==u and O.Commons.Enabled.BottomTrinket then E=40;return"MacabreSheetMusic trinkets main"end end end;if y.OverwhelmingPowerCrystal:IsEquippedAndReady()and x.Recklessness:IsCastable()and h:IsInRange(8)then if l(y.OverwhelmingPowerCrystal)then if y.OverwhelmingPowerCrystal:ID()==t and O.Commons.Enabled.TopTrinket then E=30;return"OverwhelmingPowerCrystal trinkets main"elseif y.OverwhelmingPowerCrystal:ID()==u and O.Commons.Enabled.BottomTrinket then E=40;return"OverwhelmingPowerCrystal trinkets main"end end end;if y.InstructorsDivineBell:IsEquippedAndReady()and(x.Recklessness:CooldownRemains()>10 and(g:BuffUp(x.RecklessnessBuff)or h:TimeToDie()<10 or h:TimeToDie()>95))then if l(y.InstructorsDivineBell)then if y.InstructorsDivineBell:ID()==t and O.Commons.Enabled.TopTrinket then E=30;return"InstructorsDivineBell trinkets main"elseif y.InstructorsDivineBell:ID()==u and O.Commons.Enabled.BottomTrinket then E=40;return"InstructorsDivineBell trinkets main"end end end;if y.FlameofBattle:IsEquippedAndReady()and(x.Recklessness:CooldownRemains()>10 and(g:BuffUp(x.RecklessnessBuff)or h:TimeToDie()<11 or h:TimeToDie()>100))then if l(y.FlameofBattle)then if y.FlameofBattle:ID()==t and O.Commons.Enabled.TopTrinket then E=30;return"FlameofBattle trinkets main"elseif y.FlameofBattle:ID()==u and O.Commons.Enabled.BottomTrinket then E=40;return"FlameofBattle trinkets main"end end end;if y.SinfulGladiatorsBadge:IsEquippedAndReady()and(x.Recklessness:CooldownRemains()>10 and(g:BuffUp(x.RecklessnessBuff)or h:TimeToDie()<11 or h:TimeToDie()>65))then if l(y.SinfulGladiatorsBadge)then if y.SinfulGladiatorsBadge:ID()==t and O.Commons.Enabled.TopTrinket then E=30;return"SinfulGladiatorsBadge trinkets main"elseif y.SinfulGladiatorsBadge:ID()==u and O.Commons.Enabled.BottomTrinket then E=40;return"SinfulGladiatorsBadge trinkets main"end end end;if y.UnchainedGladiatorsBadge:IsEquippedAndReady()and(x.Recklessness:CooldownRemains()>10 and(g:BuffUp(x.RecklessnessBuff)or h:TimeToDie()<11 or h:TimeToDie()>65))then if l(y.UnchainedGladiatorsBadge)then if y.UnchainedGladiatorsBadge:ID()==t and O.Commons.Enabled.TopTrinket then E=30;return"UnchainedGladiatorsBadge trinkets main"elseif y.UnchainedGladiatorsBadge:ID()==u and O.Commons.Enabled.BottomTrinket then E=40;return"UnchainedGladiatorsBadge trinkets main"end end end;local at=g:GetUseableTrinkets(z)if at then if l(at,nil,nil)then if at:ID()==t and O.Commons.Enabled.TopTrinket then E=30;return"top trinket 1"elseif at:ID()==u and O.Commons.Enabled.BottomTrinket then E=40;return"Bot trinket 1"end end end end;if m()then end;if true then local ShouldReturn=an()if ShouldReturn then return ShouldReturn end end;if true then local ShouldReturn=ao()if ShouldReturn then return ShouldReturn end end end end;function ReturnSpellFury()if E==0 then return 0 else return E end end;function ReturnSpellMOFury()if D==0 then return 0 else return D end end;local function au()end;k.SetAPL(72,ar,au)