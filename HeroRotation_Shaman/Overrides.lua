local a=HeroLib;local b=HeroCache;local c=a.Unit;local d=c.Player;local e=c.Pet;local f=c.Target;local g=a.Spell;local h=a.Item;local i=HeroRotation;local j=g.Shaman.Elemental;local k=g.Shaman.Enhancement;local l=i.Commons.Shaman;a.AddCoreOverride("Player.MaelstromP",function()local m=d:Maelstrom()if not d:IsCasting()then return m else if d:IsCasting(j.ElementalBlast)then return m-75 elseif d:IsCasting(j.Icefury)then return m+25 elseif d:IsCasting(j.LightningBolt)then return m+10 elseif d:IsCasting(j.LavaBurst)then return m+12 elseif d:IsCasting(j.ChainLightning)then return m+4*l.ClusterTargets else return m end end end,262)a.AddCoreOverride("Spell.IsViable",function(self)local n=self:IsReady()local o=j;if self==o.Stormkeeper or self==o.ElementalBlast or self==o.Icefury then local p=d:BuffUp(o.SpiritwalkersGraceBuff)or not d:IsMoving()return n and p and not d:IsCasting(self)elseif self==o.LavaBeam then local p=d:BuffUp(o.SpiritwalkersGraceBuff)or not d:IsMoving()return n and p elseif self==o.LightningBolt or self==o.ChainLightning then local p=d:BuffUp(o.SpiritwalkersGraceBuff)or d:BuffUp(o.StormkeeperBuff)or not d:IsMoving()return n and p elseif self==o.LavaBurst then local p=d:BuffUp(o.SpiritwalkersGraceBuff)or d:BuffUp(o.LavaSurgeBuff)or not d:IsMoving()local q=d:BuffUp(o.LavaSurgeBuff)local r=o.LavaBurst:Charges()>=1 and not d:IsCasting(o.LavaBurst)local s=o.LavaBurst:Charges()==2 and d:IsCasting(o.LavaBurst)return n and p and(q or r or s)elseif self==o.PrimordialWave then return n and i.CDsON()and d:BuffDown(o.PrimordialWaveBuff)and d:BuffDown(o.LavaSurgeBuff)else return n end end,262)a.AddCoreOverride("Player.MOTEP",function()if not j.MasteroftheElements:IsAvailable()then return false end;local t=d:BuffUp(j.MasteroftheElementsBuff)if not d:IsCasting()then return t else if d:IsCasting(j.LavaBurst)then return true elseif d:IsCasting(j.ElementalBlast)or d:IsCasting(j.Icefury)or d:IsCasting(j.LightningBolt)or d:IsCasting(j.ChainLightning)then return false else return t end end end,262)a.AddCoreOverride("Player.PotMP",function()if not j.PoweroftheMaelstrom:IsAvailable()then return false end;local u=d:BuffStack(j.PoweroftheMaelstromBuff)if not d:IsCasting()then return u>0 else if u==1 and(d:IsCasting(j.LightningBolt)or d:IsCasting(j.ChainLightning))then return false else return u>0 end end end,262)a.AddCoreOverride("Player.StormkeeperP",function()if not j.Stormkeeper:IsAvailable()then return false end;local v=d:BuffUp(j.StormkeeperBuff)if not d:IsCasting()then return v else if d:IsCasting(j.Stormkeeper)then return true else return v end end end,262)a.AddCoreOverride("Player.IcefuryP",function()if not j.Icefury:IsAvailable()then return false end;local w=d:BuffUp(j.IcefuryBuff)if not d:IsCasting()then return w else if d:IsCasting(j.Icefury)then return true else return w end end end,262)