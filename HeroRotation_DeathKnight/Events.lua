local a,b=...local c=HeroLib;local d=HeroCache;local e=c.Unit;local f=e.Player;local g=e.Target;local h=c.Spell;local i=c.Item;local GetTime=GetTime;local j={42650,55090,207311,43265,152280,77575,115989,45524,3714,343294,111673}c.GhoulTable={SummonedGhoul=nil,SummonExpiration=nil,SummonedGargoyle=nil,GargoyleExpiration=nil,ApocMagusExpiration=0,ArmyMagusExpiration=0}c:RegisterForSelfCombatEvent(function(k,k,k,k,k,k,k,l,k,k,k,m)if m==46585 then c.GhoulTable.SummonedGhoul=l;c.GhoulTable.SummonExpiration=GetTime()+60 end;if m==49206 or m==207349 then c.GhoulTable.SummonedGargoyle=l;c.GhoulTable.GargoyleExpiration=GetTime()+25 end end,"SPELL_SUMMON")c:RegisterForSelfCombatEvent(function(k,k,k,k,k,k,k,k,k,k,k,m)if m==327574 then c.GhoulTable.SummonedGhoul=nil;c.GhoulTable.SummonExpiration=nil end;if f:HasTier(31,4)and(c.GhoulTable.ApocMagusExpiration>0 or c.GhoulTable.ArmyMagusExpiration>0)then if m==85948 then if c.GhoulTable:ApocMagusActive()then c.GhoulTable.ApocMagusExpiration=c.GhoulTable.ApocMagusExpiration+1 end;if c.GhoulTable:ArmyMagusActive()then c.GhoulTable.ArmyMagusExpiration=c.GhoulTable.ArmyMagusExpiration+1 end end;for k,n in pairs(j)do if n==m then if c.GhoulTable:ApocMagusActive()then c.GhoulTable.ApocMagusExpiration=c.GhoulTable.ApocMagusExpiration+0.5 end;if c.GhoulTable:ArmyMagusActive()then c.GhoulTable.ArmyMagusExpiration=c.GhoulTable.ArmyMagusExpiration+0.5 end end end end;if f:HasTier(31,2)and m==275699 then c.GhoulTable.ApocMagusExpiration=GetTime()+20 end;if f:HasTier(31,2)and m==42650 then c.GhoulTable.ArmyMagusExpiration=GetTime()+30 end end,"SPELL_CAST_SUCCESS")c:RegisterForCombatEvent(function(k,k,k,k,k,k,k,l)if l==c.GhoulTable.SummonedGhoul then c.GhoulTable.SummonedGhoul=nil;c.GhoulTable.SummonExpiration=nil end;if l==c.GhoulTable.SummonedGargoyle then c.GhoulTable.SummonedGargoyle=nil;c.GhoulTable.GargoyleExpiration=nil end end,"UNIT_DESTROYED")function c.GhoulTable:GhoulRemains()if c.GhoulTable.SummonExpiration==nil then return 0 end;return c.GhoulTable.SummonExpiration-GetTime()end;function c.GhoulTable:GhoulActive()return c.GhoulTable.SummonedGhoul~=nil and c.GhoulTable:GhoulRemains()>0 end;function c.GhoulTable:GargRemains()if c.GhoulTable.GargoyleExpiration==nil then return 0 end;return c.GhoulTable.GargoyleExpiration-GetTime()end;function c.GhoulTable:GargActive()return c.GhoulTable.SummonedGargoyle~=nil and c.GhoulTable:GargRemains()>0 end;function c.GhoulTable:ArmyMagusRemains()return c.GhoulTable.ArmyMagusExpiration-GetTime()end;function c.GhoulTable:ArmyMagusActive()return c.GhoulTable:ArmyMagusRemains()>0 end;function c.GhoulTable:ApocMagusRemains()return c.GhoulTable.ApocMagusExpiration-GetTime()end;function c.GhoulTable:ApocMagusActive()return c.GhoulTable.ApocMagusRemains()>0 end;c.GhoulTable={SummonedGhoul=nil,SummonExpiration=nil,SummonedGargoyle=nil,GargoyleExpiration=nil}function c.GhoulTable:remains()if c.GhoulTable.SummonExpiration==nil then return 0 end;return c.GhoulTable.SummonExpiration-GetTime()end;function c.GhoulTable:active()return c.GhoulTable.SummonedGhoul~=nil and c.GhoulTable:remains()>0 end;function c.GhoulTable:gargremains()if c.GhoulTable.GargoyleExpiration==nil then return 0 end;return c.GhoulTable.GargoyleExpiration-GetTime()end;function c.GhoulTable:gargactive()return c.GhoulTable.SummonedGargoyle~=nil and c.GhoulTable:gargremains()>0 end