local a,b=...local c=HeroDBC.DBC;local d=HeroLib;local e=HeroCache;local f=d.Unit;local g=f.Player;local h=f.Target;local i=f.Pet;local j=d.Spell;local k=d.Item;local l=HeroRotation;local m=l.Cast;local n=l.CDsON;local o=l.AoEON;local p=HeroRotationCharDB.Toggles[4]local q=HeroRotationCharDB.Toggles[5]local r=HeroRotationCharDB.Toggles[6]local s=HeroRotationCharDB.Toggles[15]local t=HeroRotationCharDB.Toggles[12]local u=HeroRotationCharDB.Toggles[13]local v=HeroRotationCharDB.Toggles[14]local w=HeroRotationCharDB.Toggles[16]local x=HeroRotationCharDB.Toggles[81]local y=HeroRotationCharDB.Toggles[110]local z=false;local A=0;local strsplit=strsplit;local B=math.min;local pairs=pairs;local GetInventoryItemLink=GetInventoryItemLink;local C=j.DeathKnight.Frost;local D=k.DeathKnight.Frost;local E={D.InscrutableQuantumDevice:ID(),D.ScarsofFraternalStrife:ID(),D.TheFirstSigil:ID()}local F=g:GetEquipment()local G=k(0)local H=k(0)local I=0;local J,K=GetInventoryItemID("player",13)local L,K=GetInventoryItemID("player",14)if F[13]then G=k(F[13])end;if F[14]then H=k(F[14])end;local M;local N;local O;local P;local Q;local R,S;local T;local U;local V;local W;local X;local Y;local Z;local _=0;local a0=0;local a1=0;local a2=g:CovenantID()d:RegisterForEvent(function()a2=g:CovenantID()end,"COVENANT_CHOSEN")local a3=l.Commons.Everyone;local a4={General=l.GUISettings.General,Commons=l.GUISettings.APL.DeathKnight.Commons,Frost=l.GUISettings.APL.DeathKnight.Frost}local a5={{C.Asphyxiate,"Cast Asphyxiate (Interrupt)",function()return true end}}local a6={5,8,10,30,40,100}local a7={}local function a8()for K,a9 in ipairs(a6)do if a9==8 or 5 then a7[a9]=h:IsInMeleeRange(a9)end;a7[a9]=h:IsInRange(a9)end end;local aa=g:HasLegendaryEquipped(38)local ab=g:HasLegendaryEquipped(39)local ac=g:HasLegendaryEquipped(31)local ad=g:HasLegendaryEquipped(41)local ae=GetInventoryItemLink("player",16)or""local af=GetInventoryItemLink("player",17)or""local K,K,ag=strsplit(":",ae)local K,K,ah=strsplit(":",af)local O=ag=="3370"or ah=="3370"local P=ag=="3368"or ah=="3368"local ai=IsEquippedItemType("Two-Hand")d:RegisterForEvent(function()F=g:GetEquipment()G=k(0)H=k(0)if F[13]then G=k(F[13])end;if F[14]then H=k(F[14])end;aa=g:HasLegendaryEquipped(38)ab=g:HasLegendaryEquipped(39)ad=g:HasLegendaryEquipped(41)ae=GetInventoryItemLink("player",16)or""af=GetInventoryItemLink("player",17)or""K,K,ag=strsplit(":",ae)K,K,ah=strsplit(":",af)O=ag=="3370"or ah=="3370"P=ag=="3368"or ah=="3368"ai=IsEquippedItemType("Two-Hand")end,"PLAYER_EQUIPMENT_CHANGED")local function aj(ak)if ak then return 1 else return 0 end end;local function al(ak)return ak~=0 end;local function am(an)return(an:DebuffStack(C.RazoriceDebuff)+1)/(an:DebuffRemains(C.RazoriceDebuff)+1)*aj(O)end;local function ao(an)return C.RemorselessWinter:CooldownRemains()<=2*g:GCD()and C.GatheringStorm:IsAvailable()end;local function ap(an)return g:RunicPowerDeficit()<15+aj(C.RunicAttenuation:IsAvailable())*3 end;local function aq(an)return g:RunicPowerDeficit()>=25+aj(C.RunicAttenuation:IsAvailable())*3 end;local function ar(an)if C.RemorselessWinter:CooldownRemains()<=2*g:GCD()and C.GatheringStorm:IsAvailable()and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and an:GUID()==f("mouseover"):GUID()and o()then _=149143;return true elseif C.RemorselessWinter:CooldownRemains()<=2*g:GCD()and C.GatheringStorm:IsAvailable()and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and a4.Frost.TargetSwap=="AutoSwap"and an:GUID()~=h:GUID()and not t and o()then _=9999;return true elseif C.RemorselessWinter:CooldownRemains()<=2*g:GCD()and C.GatheringStorm:IsAvailable()and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and(an:GUID()==h:GUID()or a4.Frost.TargetSwap=="AutoSwap"and t or not o())then a0=49143;return true elseif C.RemorselessWinter:CooldownRemains()<=2*g:GCD()and C.GatheringStorm:IsAvailable()then return true end end;local function as(an)if g:RunicPowerDeficit()<15+aj(C.RunicAttenuation:IsAvailable())*5 and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and an:GUID()==f("mouseover"):GUID()and o()then _=149143;return true elseif g:RunicPowerDeficit()<15+aj(C.RunicAttenuation:IsAvailable())*5 and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and(a4.Frost.TargetSwap=="AutoSwap"and an:GUID()~=h:GUID()and not t and o())then _=9999;return true elseif g:RunicPowerDeficit()<15+aj(C.RunicAttenuation:IsAvailable())*5 and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and(an:GUID()==h:GUID()or a4.Frost.TargetSwap=="AutoSwap"and t or not o())then a0=49143;return true elseif g:RunicPowerDeficit()<15+aj(C.RunicAttenuation:IsAvailable())*5 then return true end end;local function at(an)if(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and an:GUID()==f("mouseover"):GUID()and o()then _=149143;return true elseif(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and a4.Frost.TargetSwap=="AutoSwap"and an:GUID()~=h:GUID()and not t and o()then _=9999;return true elseif(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and(an:GUID()==h:GUID()or a4.Frost.TargetSwap=="AutoSwap"and t or not o())then a0=49143;return true elseif true then return true end end;local function au(an)if g:RunicPowerDeficit()>25+aj(C.RunicAttenuation:IsAvailable())*5 and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and an:GUID()==f("mouseover"):GUID()and o()then _=149020;return true elseif g:RunicPowerDeficit()>25+aj(C.RunicAttenuation:IsAvailable())*5 and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and a4.Frost.TargetSwap=="AutoSwap"and an:GUID()~=h:GUID()and not t and o()then _=9999;return true elseif g:RunicPowerDeficit()>25+aj(C.RunicAttenuation:IsAvailable())*5 and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and(an:GUID()==h:GUID()or a4.Frost.TargetSwap=="AutoSwap"and t or not o())then a0=49020;return true elseif g:RunicPowerDeficit()>25+aj(C.RunicAttenuation:IsAvailable())*5 then return true end end;local function av(an)if g:BuffUp(C.KillingMachineBuff)and C.PillarofFrost:CooldownRemains()>3 and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and an:GUID()==f("mouseover"):GUID()and o()then _=149020;return true elseif g:BuffUp(C.KillingMachineBuff)and C.PillarofFrost:CooldownRemains()>3 and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and a4.Frost.TargetSwap=="AutoSwap"and an:GUID()~=h:GUID()and not t and o()then _=9999;return true elseif g:BuffUp(C.KillingMachineBuff)and C.PillarofFrost:CooldownRemains()>3 and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and(an:GUID()==h:GUID()or a4.Frost.TargetSwap=="AutoSwap"and t or not o())then a0=49020;return true elseif g:BuffUp(C.KillingMachineBuff)and C.PillarofFrost:CooldownRemains()>3 then return true end end;local function aw(an)if g:RunicPowerDeficit()>=25 and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and an:GUID()==f("mouseover"):GUID()and o()then _=149020;return true elseif g:RunicPowerDeficit()>=25 and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and a4.Frost.TargetSwap=="AutoSwap"and an:GUID()~=h:GUID()and not t and o()then _=9999;return true elseif g:RunicPowerDeficit()>=25 and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and(an:GUID()==h:GUID()or a4.Frost.TargetSwap=="AutoSwap"and t or not o())then a0=49020;return true elseif g:RunicPowerDeficit()>=25 then return true end end;local function ax(an)if g:RunicPowerDeficit()<20 and C.PillarofFrost:CooldownRemains()>5 and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and an:GUID()==f("mouseover"):GUID()and o()then _=149143;return true elseif g:RunicPowerDeficit()<20 and C.PillarofFrost:CooldownRemains()>5 and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and a4.Frost.TargetSwap=="AutoSwap"and an:GUID()~=h:GUID()and not t and o()then _=9999;return true elseif g:RunicPowerDeficit()<20 and C.PillarofFrost:CooldownRemains()>5 and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and(an:GUID()==h:GUID()or a4.Frost.TargetSwap=="AutoSwap"and t or not o())then a0=49143;return true elseif g:RunicPowerDeficit()<20 and C.PillarofFrost:CooldownRemains()>5 then return true end end;local function ay(an)if C.PillarofFrost:CooldownRemains()>g:RuneTimeToX(4)and g:RunicPowerDeficit()<40 and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and an:GUID()==f("mouseover"):GUID()and o()then _=149143;return true elseif C.PillarofFrost:CooldownRemains()>g:RuneTimeToX(4)and g:RunicPowerDeficit()<40 and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and a4.Frost.TargetSwap=="AutoSwap"and an:GUID()~=h:GUID()and not t and o()then _=9999;return true elseif C.PillarofFrost:CooldownRemains()>g:RuneTimeToX(4)and g:RunicPowerDeficit()<40 and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and(an:GUID()==h:GUID()or a4.Frost.TargetSwap=="AutoSwap"and t or not o())then a0=49143;return true elseif C.PillarofFrost:CooldownRemains()>g:RuneTimeToX(4)and g:RunicPowerDeficit()<40 then return true end end;local function az(an)if g:BuffUp(C.KillingMachineBuff)and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and an:GUID()==f("mouseover"):GUID()and o()then _=149020;return true elseif g:BuffUp(C.KillingMachineBuff)and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and a4.Frost.TargetSwap=="AutoSwap"and an:GUID()~=h:GUID()and not t and o()then _=9999;return true elseif g:BuffUp(C.KillingMachineBuff)and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and(an:GUID()==h:GUID()or a4.Frost.TargetSwap=="AutoSwap"and t or not o())then a0=49020;return true elseif g:BuffUp(C.KillingMachineBuff)then return true end end;local function aA(an)if(g:RunicPowerDeficit()>25 or g:RuneTimeToX(3)<g:GCD())and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and an:GUID()==f("mouseover"):GUID()and o()then _=149020;return true elseif(g:RunicPowerDeficit()>25 or g:RuneTimeToX(3)<g:GCD())and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and a4.Frost.TargetSwap=="AutoSwap"and an:GUID()~=h:GUID()and not t and o()then _=9999;return true elseif(g:RunicPowerDeficit()>25 or g:RuneTimeToX(3)<g:GCD())and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and(an:GUID()==h:GUID()or a4.Frost.TargetSwap=="AutoSwap"and t or not o())then a0=49020;return true elseif g:RunicPowerDeficit()>25 or g:RuneTimeToX(3)<g:GCD()then return true end end;local function aB(an)if g:RunicPowerDeficit()>=45+aj(C.RunicAttenuation:IsAvailable())*5 and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and an:GUID()==f("mouseover"):GUID()and o()then _=149020;return true elseif g:RunicPowerDeficit()>=45+aj(C.RunicAttenuation:IsAvailable())*5 and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and a4.Frost.TargetSwap=="AutoSwap"and an:GUID()~=h:GUID()and not t and o()then _=9999;return true elseif g:RunicPowerDeficit()>=45+aj(C.RunicAttenuation:IsAvailable())*5 and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and(an:GUID()==h:GUID()or a4.Frost.TargetSwap=="AutoSwap"and t or not o())then a0=49020;return true elseif g:RunicPowerDeficit()>=45+aj(C.RunicAttenuation:IsAvailable())*5 then return true end end;local function aC(an)if(g:RuneTimeToX(4)<g:GCD()or g:RunicPower()<=45)and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and an:GUID()==f("mouseover"):GUID()and o()then _=149020;return true elseif(g:RuneTimeToX(4)<g:GCD()or g:RunicPower()<=45)and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and a4.Frost.TargetSwap=="AutoSwap"and an:GUID()~=h:GUID()and not t and o()then _=9999;return true elseif(g:RuneTimeToX(4)<g:GCD()or g:RunicPower()<=45)and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and(an:GUID()==h:GUID()or a4.Frost.TargetSwap=="AutoSwap"and t or not o())then a0=49020;return true elseif g:RuneTimeToX(4)<g:GCD()or g:RunicPower()<=45 then return true end end;local function aD(an)if g:RunicPowerDeficit()<70 and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and an:GUID()==f("mouseover"):GUID()and o()then _=149143;return true elseif g:RunicPowerDeficit()<70 and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and a4.Frost.TargetSwap=="AutoSwap"and an:GUID()~=h:GUID()and not t and o()then _=9999;return true elseif g:RunicPowerDeficit()<70 and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and(an:GUID()==h:GUID()or a4.Frost.TargetSwap=="AutoSwap"and t or not o())then a0=49143;return true elseif g:RunicPowerDeficit()<70 then return true end end;local function aE(an)if(g:Rune()>=3 and(not ai or a2==4 or a2==1)or g:Rune()>=4 and ai)and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and an:GUID()==f("mouseover"):GUID()and o()then _=149020;return true elseif(g:Rune()>=3 and(not ai or a2==4 or a2==1)or g:Rune()>=4 and ai)and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and a4.Frost.TargetSwap=="AutoSwap"and an:GUID()~=h:GUID()and not t and o()then _=9999;return true elseif(g:Rune()>=3 and(not ai or a2==4 or a2==1)or g:Rune()>=4 and ai)and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and(an:GUID()==h:GUID()or a4.Frost.TargetSwap=="AutoSwap"and t or not o())then a0=49020;return true elseif g:Rune()>=3 and(not ai or a2==4 or a2==1)or g:Rune()>=4 and ai then return true end end;local function aF(an)if g:BuffUp(C.KillingMachineBuff)and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and an:GUID()==f("mouseover"):GUID()and o()then _=149020;return true elseif g:BuffUp(C.KillingMachineBuff)and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and a4.Frost.TargetSwap=="AutoSwap"and an:GUID()~=h:GUID()and not t and o()then _=9999;return true elseif g:BuffUp(C.KillingMachineBuff)and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and(an:GUID()==h:GUID()or a4.Frost.TargetSwap=="AutoSwap"and t or not o())then a0=49020;return true elseif g:BuffUp(C.KillingMachineBuff)then return true end end;local function aG(an)if(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and an:GUID()==f("mouseover"):GUID()and o()then _=149020;return true elseif(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and a4.Frost.TargetSwap=="AutoSwap"and an:GUID()~=h:GUID()and not t and o()then _=9999;return true elseif(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and(an:GUID()==h:GUID()or a4.Frost.TargetSwap=="AutoSwap"and t or not o())then a0=49020;return true elseif true then return true end end;local function aH(an)if(not C.Avalanche:IsAvailable()and g:BuffDown(C.KillingMachineBuff)or C.Avalanche:IsAvailable()and not X or X and g:RuneTimeToX(2)>=g:GCD())and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and an:GUID()==f("mouseover"):GUID()and o()then _=149143;return true elseif(not C.Avalanche:IsAvailable()and g:BuffDown(C.KillingMachineBuff)or C.Avalanche:IsAvailable()and not X or X and g:RuneTimeToX(2)>=g:GCD())and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and a4.Frost.TargetSwap=="AutoSwap"and an:GUID()~=h:GUID()and not t and o()then _=9999;return true elseif(not C.Avalanche:IsAvailable()and g:BuffDown(C.KillingMachineBuff)or C.Avalanche:IsAvailable()and not X or X and g:RuneTimeToX(2)>=g:GCD())and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and(an:GUID()==h:GUID()or a4.Frost.TargetSwap=="AutoSwap"and t or not o())then a0=49143;return true elseif not C.Avalanche:IsAvailable()and g:BuffDown(C.KillingMachineBuff)or C.Avalanche:IsAvailable()and not X or X and g:RuneTimeToX(2)>=g:GCD()then return true end end;local function aI(an)if an:DebuffRefreshable(C.FrostFeverDebuff)and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and an:GUID()==f("mouseover"):GUID()and o()then _=149184;return true elseif an:DebuffRefreshable(C.FrostFeverDebuff)and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and a4.Frost.TargetSwap=="AutoSwap"and an:GUID()~=h:GUID()and not t and o()then _=9999;return true elseif an:DebuffRefreshable(C.FrostFeverDebuff)and(an:AffectingCombat()or an:IsDummy()or an:NPCID()==153285)and(an:GUID()==h:GUID()or a4.Frost.TargetSwap=="AutoSwap"and t or not o())then a0=49184;return true elseif an:DebuffRefreshable(C.FrostFeverDebuff)then return true end end;local function aJ()if a3.TargetIsValid()then if C.Fleshcraft:IsCastable()then if m(C.Fleshcraft,nil,nil)then a0=324631;return"fleshcraft precombat"end end;Q=C.GatheringStorm:IsAvailable()or C.Everfrost:ConduitEnabled()or ab;if C.HowlingBlast:IsReady()and not h:IsInRange(8)then if m(C.HowlingBlast,nil,nil,not a7[30])then a0=49184;return"howling_blast precombat"end end;if C.RemorselessWinter:IsReady()and h:IsInRange(8)then if m(C.RemorselessWinter,nil,nil,not a7[8])then a0=196770;return"remorseless_winter precombat"end end end end;local function aK()if C.RemorselessWinter:IsReady()then if m(C.RemorselessWinter,nil,nil,not a7[8])then a0=196770;return"remorseless_winter aoe 2"end end;if C.GlacialAdvance:IsReady()and C.Frostscythe:IsAvailable()then if m(C.GlacialAdvance,nil,nil,not a7[30])then a0=194913;return"glacial_advance aoe 4"end end;if C.Frostscythe:IsReady()and(g:BuffUp(C.KillingMachineBuff)and not Z)then if m(C.Frostscythe,nil,nil,not a7[8])then a0=207230;return"frostscythe aoe 6"end end;if C.HowlingBlast:IsReady()and(X and C.Avalanche:IsAvailable())then if m(C.HowlingBlast,nil,nil,not a7[30])then a0=49184;return"howling_blast aoe 8"end end;if C.GlacialAdvance:IsReady()and(g:BuffDown(C.RimeBuff)and EnemiesCount10yd<=3 or EnemiesCount10yd>3)then if m(C.GlacialAdvance,nil,nil,not a7[30])then a0=194913;return"glacial_advance aoe 10"end end;if C.FrostStrike:IsReady()and not z then if a3.CastTargetIf(C.FrostStrike,EnemiesMelee,"max",am,ar)then return"frost_strike aoe 12"end end;if C.HowlingBlast:IsReady()and X then if m(C.HowlingBlast,nil,nil,not a7[30])then a0=49184;return"howling_blast aoe 14"end end;if C.Frostscythe:IsReady()and(C.GatheringStorm:IsAvailable()and g:BuffUp(C.RemorselessWinter)and EnemiesCount10yd>2 and not Z)then if m(C.Frostscythe,nil,nil,not a7[8])then a0=207230;return"frostscythe aoe 16"end end;if C.Obliterate:IsReady()and(Z and g:BuffStack(C.DeathsDueBuff)<4 or C.GatheringStorm:IsAvailable()and g:BuffUp(C.RemorselessWinter))then if m(C.Obliterate,nil,nil,not a7[8])then a0=49020;return"obliterate aoe 18"end end;if C.FrostStrike:IsReady()and not z then if a3.CastTargetIf(C.FrostStrike,EnemiesMelee,"max",am,as)then return"frost_strike aoe 20"end end;if C.Frostscythe:IsReady()and not Z then if m(C.Frostscythe,nil,nil,not a7[8])then a0=207230;return"frostscythe aoe 22"end end;if C.Obliterate:IsReady()then if a3.CastTargetIf(C.Obliterate,EnemiesMelee,"max",am,au)then return"obliterate aoe 24"end end;if C.GlacialAdvance:IsReady()then if m(C.GlacialAdvance,nil,nil,not a7[30])then a0=194913;return"glacial_advance aoe 26"end end;if C.Frostscythe:IsReady()then if m(C.Frostscythe,nil,nil,not a7[8])then a0=207230;return"frostscythe aoe 28"end end;if C.FrostStrike:IsReady()and not z then if a3.CastTargetIf(C.FrostStrike,EnemiesMelee,"max",am,at)then return"frost_strike aoe 30"end end;if C.HornofWinter:IsCastable()then if m(C.HornofWinter,nil)then a0=57330;return"horn_of_winter aoe 32"end end;if C.ArcaneTorrent:IsCastable()and n()and a4.Commons.Enabled.Racials then if m(C.ArcaneTorrent,nil,nil,not a7[8])then a0=155145;return"arcane_torrent aoe 34"end end end;local function aL()if C.RemorselessWinter:IsReady()and(EnemiesCount10yd>=2 or Q)then if m(C.RemorselessWinter,nil,nil,not a7[8])then a0=196770;return"remorseless_winter bospooling 4"end end;if C.Obliterate:IsReady()then if a3.CastTargetIf(C.Obliterate,EnemiesMelee,"max",am,av)then return"obliterate bospooling 6"end end;if C.HowlingBlast:IsReady()and X then if m(C.HowlingBlast)then a0=49184;return"howling_blast bospooling 2"end end;if C.Frostscythe:IsReady()and(g:BuffUp(C.KillingMachineBuff)and g:RunicPowerDeficit()>15+aj(C.RunicAttenuation:IsAvailable())*5 and EnemiesMeleeCount>2 and not Z)then if m(C.Frostscythe,nil,nil,not a7[8])then a0=207230;return"frostscythe bospooling 12"end end;if C.Frostscythe:IsReady()and(g:RunicPowerDeficit()>=35+aj(C.RunicAttenuation:IsAvailable())*5 and EnemiesMeleeCount>2 and not Z)then if m(C.Frostscythe,nil,nil,not a7[8])then a0=207230;return"frostscythe bospooling 14"end end;if C.Obliterate:IsReady()then if not o()and g:RunicPowerDeficit()>=25 then if m(C.Obliterate)then a0=49020;return"obliterate bospooling"end elseif a3.CastTargetIf(C.Obliterate,EnemiesMelee,"max",am,aw)then return"obliterate bospooling "end end;if C.GlacialAdvance:IsReady()and(g:RunicPowerDeficit()<20 and EnemiesCount10yd>=2 and C.PillarofFrost:CooldownRemains()>5)then if m(C.GlacialAdvance,nil,nil,a7[100])then a0=194913;return"glacial_advance bospooling 8"end end;if C.FrostStrike:IsReady()and not z then if a3.CastTargetIf(C.FrostStrike,EnemiesMelee,"max",am,ax)then return"frost_strike bospooling 10"end end;if C.GlacialAdvance:IsReady()and(C.PillarofFrost:CooldownRemains()>g:RuneTimeToX(4)and g:RunicPowerDeficit()<40 and EnemiesCount10yd>=2)then if m(C.GlacialAdvance,nil,nil,a7[100])then a0=194913;return"glacial_advance bospooling 16"end end;if C.FrostStrike:IsReady()and not z then if a3.CastTargetIf(C.FrostStrike,EnemiesMelee,"max",am,ay)then return"frost_strike bospooling 16"end end;if l.CastAnnotated(C.Pool,false,"WAIT")then return"Wait Resources BoS Pooling"end end;local function aM()if C.Obliterate:IsReady()then if not o()and g:RunicPowerDeficit()>=45+aj(C.RunicAttenuation:IsAvailable())*5 then if m(C.Obliterate)then a0=49020;return"obliterate bosticking2 "end elseif a3.CastTargetIf(C.Obliterate,EnemiesMelee,"max",am,aB)then return"obliterate bosticking 2"end end;if C.RemorselessWinter:IsReady()and(Q or EnemiesCount10yd>=2 or g:RunicPower()<32)then if m(C.RemorselessWinter,nil,nil,not a7[8])then a0=196770;return"remorseless_winter bosticking 4"end end;if C.DeathAndDecay:IsReady()and g:RunicPower()<32 then if m(C.DeathAndDecay)then a0=43265;return"death_and_decay bosticking 6"end end;if C.HowlingBlast:IsReady()and(X and(g:RunicPowerDeficit()<55 or g:RuneTimeToX(3)<=g:GCD()or ad or EnemiesCount10yd>=2 or g:BuffRemains(C.RimeBuff)<3)or g:RunicPower()<32)then if m(C.HowlingBlast,nil,nil,not a7[30])then a0=49184;return"howling_blast bosticking 8"end end;if C.Frostscythe:IsReady()and(g:BuffUp(C.KillingMachineBuff)and EnemiesCount10yd>2 and not Z)then if m(C.Frostscythe,nil,nil,not a7[8])then a0=207230;return"frostscythe bosticking 10"end end;if C.Obliterate:IsReady()then if not o()and g:BuffUp(C.KillingMachineBuff)then if m(C.Obliterate)then a0=49020;return"obliterate bosticking"end elseif a3.CastTargetIf(C.Obliterate,EnemiesMelee,"max",am,az)then return"obliterate bosticking "end end;if C.HornofWinter:IsCastable()and(g:RunicPowerDeficit()>=40 and g:RuneTimeToX(3)>g:GCD())then if m(C.HornofWinter,nil)then a0=57330;return"horn_of_winter bosticking 12"end end;if C.Frostscythe:IsReady()and(EnemiesCount10yd>2 and not Z)then if m(C.Frostscythe,nil,nil,not a7[8])then a0=207230;return"frostscythe bosticking 14"end end;if C.Obliterate:IsReady()then if not o()and(g:RunicPowerDeficit()>25 or g:RuneTimeToX(3)<g:GCD())then if m(C.Obliterate)then a0=49020;return"obliterate bosticking 16"end elseif a3.CastTargetIf(C.Obliterate,EnemiesMelee,"max",am,aA)then return"obliterate bosticking 16"end end;if C.HowlingBlast:IsReady()and X then if m(C.HowlingBlast,nil,nil,not a7[30])then a0=49184;return"howling_blast bosticking 18"end end;if C.ArcaneTorrent:IsCastable()and g:RunicPowerDeficit()>50 and n()and a4.Commons.Enabled.Racials then if m(C.ArcaneTorrent,nil,nil,not a7[8])then a0=155145;return"arcane_torrent bosticking 20"end end;if l.CastAnnotated(C.Pool,false,"WAIT")then return"Wait Resources BoS Ticking"end end;local function aN()if C.ChainsofIce:IsReady()and(d.FilteredFightRemains(Enemies10yd,"<",g:GCD())and(g:Rune()<2 or g:BuffDown(C.KillingMachineBuff)and(not ai and g:BuffStack(C.ColdHeartBuff)>=4+aj(aa)or ai and g:BuffStack(C.ColdHeartBuff)>8+aj(aa))or g:BuffUp(C.KillingMachineBuff)and(not ai and g:BuffStack(C.ColdHeartBuff)>8+aj(aa)or ai and g:BuffStack(C.ColdHeartBuff)>10+aj(aa))))then if m(C.ChainsofIce,nil,nil,not a7[30])then a0=45524;return"chains_of_ice coldheart 2"end end;if C.ChainsofIce:IsReady()and(not C.Obliteration:IsAvailable()and g:BuffUp(C.PillarofFrostBuff)and g:BuffStack(C.ColdHeartBuff)>=10 and g:BuffRemains(C.PillarofFrostBuff)<g:GCD()*(1+aj(C.FrostwyrmsFury:CooldownUp()))or g:BuffUp(C.UnholyStrengthBuff)and g:BuffRemains(C.UnholyStrengthBuff)<g:GCD()or g:BuffUp(C.ChaosBaneBuff)and g:BuffRemains(C.ChaosBaneBuff)<g:GCD())then if m(C.ChainsofIce,nil,nil,not a7[30])then a0=45524;return"chains_of_ice coldheart 4"end end;if C.ChainsofIce:IsReady()and(not C.Obliteration:IsAvailable()and P and g:BuffDown(C.PillarofFrostBuff)and C.PillarofFrost:CooldownRemains()>15 and(g:BuffStack(C.ColdHeartBuff)>=10 and(g:BuffUp(C.UnholyStrengthBuff)or g:BuffUp(C.ChaosBaneBuff))or g:BuffStack(C.ColdHeartBuff)>=13))then if m(C.ChainsofIce,nil,nil,not a7[30])then a0=45524;return"chains_of_ice coldheart 6"end end;if C.ChainsofIce:IsReady()and(not C.Obliteration:IsAvailable()and not P and g:BuffStack(C.ColdHeartBuff)>=10 and g:BuffDown(C.PillarofFrostBuff)and C.PillarofFrost:CooldownRemains()>20)then if m(C.ChainsofIce,nil,nil,not a7[30])then a0=45524;return"chains_of_ice coldheart 8"end end;if C.ChainsofIce:IsReady()and(C.Obliteration:IsAvailable()and g:BuffDown(C.PillarofFrostBuff)and(g:BuffStack(C.ColdHeartBuff)>=14 and(g:BuffUp(C.UnholyStrengthBuff)or g:BuffUp(C.ChaosBaneBuff)))or g:BuffStack(C.ColdHeartBuff)>=19 or C.PillarofFrost:CooldownRemains()<3 and g:BuffStack(C.ColdHeartBuff)>=14)then if m(C.ChainsofIce,nil,nil,not a7[30])then a0=45524;return"chains_of_ice coldheart 10"end end end;local function aO()if D.PotionofSpectralStrength:IsReady()and n()and a4.Commons.Enabled.Potions and s and(g:BuffUp(C.PillarofFrostBuff)and not l.GUISettings.General.HoldPotforBL or l.GUISettings.General.HoldPotforBL and g:BloodlustUp())then if m(D.PotionofSpectralStrength,nil,nil)then a0=37;return"potion cooldowns 2"end end;if D.PotionofPhantomFire:IsReady()and n()and a4.Commons.Enabled.Potions and s and(g:BuffUp(C.PillarofFrostBuff)and not l.GUISettings.General.HoldPotforBL or l.GUISettings.General.HoldPotforBL and g:BloodlustUp())then if m(D.PotionofPhantomFire,nil,nil)then a0=37;return"potion cooldowns 2"end end;if C.EmpowerRuneWeapon:IsCastable()and n()and(C.Obliteration:IsAvailable()and g:Rune()<6 and(V or W)and(C.PillarofFrost:CooldownRemains()<5 or g:BuffUp(C.PillarofFrostBuff)or d.FilteredFightRemains(Enemies10yd,"<",20)))then if m(C.EmpowerRuneWeapon,nil)then a0=147568;return"empower_rune_weapon cooldowns 4"end end;if C.EmpowerRuneWeapon:IsCastable()and n()and(C.BreathofSindragosa:IsAvailable()and g:RunicPowerDeficit()>30 and g:RuneTimeToX(5)>g:GCD()and(g:BuffUp(C.BreathofSindragosa)and C.BreathofSindragosa:TimeSinceLastCast()>=5 or d.FilteredFightRemains(Enemies10yd,"<",20)))then if m(C.EmpowerRuneWeapon,nil)then a0=147568;return"empower_rune_weapon cooldowns 6"end end;if C.EmpowerRuneWeapon:IsCastable()and n()and C.Icecap:IsAvailable()then if m(C.EmpowerRuneWeapon,nil)then a0=147568;return"empower_rune_weapon cooldowns 8"end end;if C.PillarofFrost:IsCastable()and q and(C.BreathofSindragosa:IsAvailable()and(V or W)and(not C.BreathofSindragosa:CooldownUp()or C.BreathofSindragosa:CooldownUp()and g:RunicPowerDeficit()<65))then if m(C.PillarofFrost,nil)then a0=51271;return"pillar_of_frost cooldowns 10"end end;if C.PillarofFrost:IsCastable()and q and(C.Icecap:IsAvailable()and not g:BuffUp(C.PillarofFrost))then if m(C.PillarofFrost,nil)then a0=51271;return"pillar_of_frost cooldowns 12"end end;if C.PillarofFrost:IsCastable()and q and(C.Obliteration:IsAvailable()and(g:RunicPower()>=35 and g:BuffDown(C.AbominationLimb)or g:BuffUp(C.AbominationLimb))and(V or W)and(C.GatheringStorm:IsAvailable()and g:BuffUp(C.RemorselessWinter)or not C.GatheringStorm:IsAvailable()))then if m(C.PillarofFrost,nil)then a0=51271;return"pillar_of_frost cooldowns 14"end end;if C.BreathofSindragosa:IsCastable()and not z and n()and g:BuffUp(C.PillarofFrostBuff)and(d.CombatTime()>20 or g:RunicPower()>=60)then if m(C.BreathofSindragosa,nil,nil,not a7[8])then a0=152279;return"breath_of_sindragosa cooldowns 16"end end;if C.FrostwyrmsFury:IsCastable()and not y and n()and(EnemiesCount10yd==1 and g:BuffRemains(C.PillarofFrostBuff)<g:GCD()and g:BuffUp(C.PillarofFrostBuff)and not C.Obliteration:IsAvailable()or d.FilteredFightRemains(Enemies10yd,"<",3))then if m(C.FrostwyrmsFury,nil,nil,not a7[40])then a0=279302;return"frostwyrms_fury cooldowns 18"end end;if C.FrostwyrmsFury:IsCastable()and not y and n()and(EnemiesMeleeCount>=2 and g:BuffUp(C.PillarofFrostBuff)and g:BuffRemains(C.PillarofFrostBuff)<g:GCD())then if m(C.FrostwyrmsFury,nil,nil,not a7[40])then a0=279302;return"frostwyrms_fury cooldowns 20"end end;if C.FrostwyrmsFury:IsCastable()and not y and n()and((C.Obliteration:IsAvailable()and(g:BuffUp(C.PillarofFrostBuff)and not ai)or g:BuffDown(C.PillarofFrostBuff)and ai and C.PillarofFrost:CooldownDown())and((g:BuffRemains(C.PillarofFrostBuff)or g:BuffUp(C.UnholyStrengthBuff)and g:BuffRemains(C.UnholyStrengthBuff)<g:GCD())and(h:DebuffStack(C.RazoriceDebuff)==5 or not O)))then if m(C.FrostwyrmsFury,nil,nil,not a7[40])then a0=279302;return"frostwyrms_fury cooldowns 22"end end;if C.HypothermicPresence:IsCastable()and n()and(C.BreathofSindragosa:IsAvailable()and g:RunicPowerDeficit()>40 and g:Rune()<=3 and(g:BuffUp(C.BreathofSindragosa)or C.BreathofSindragosa:CooldownRemains()>40)or not C.BreathofSindragosa:IsAvailable()and g:RunicPowerDeficit()>=25)then if m(C.HypothermicPresence,nil)then a0=321995;return"hypothermic_presence cooldowns 24"end end;if C.RaiseDead:IsCastable()and n()and(C.PillarofFrost:CooldownRemains()<=5 or g:BuffUp(C.PillarofFrostBuff))then if m(C.RaiseDead,nil,a4.Commons.DisplayStyle.RaiseDead)then a0=46585;return"raise_dead cooldowns 26"end end;if C.SacrificialPact:IsReady()and(EnemiesCount10yd>=2 and(d.FilteredFightRemains(Enemies10yd,"<",3)or g:BuffDown(C.BreathofSindragosa)and(C.RaiseDead:TimeSinceLastCast()>55+g:GCD()and C.RaiseDead:TimeSinceLastCast()<60-g:GCD()or h:TimeToDie()<g:GCD())))then if m(C.SacrificialPact,nil,nil,not a7[8])then a0=237574;return"sacrificial_pact cooldowns 28"end end;if C.DeathAndDecay:IsReady()and(EnemiesCount10yd>5 or ac)then if m(C.DeathAndDecay,nil)then a0=43265;return"death_and_decay cooldowns 30"end end end;local function aP()if C.DeathsDue:IsReady()and p and((not C.Obliteration:IsAvailable()or C.Obliteration:IsAvailable()and EnemiesCount10yd>=2 and C.PillarofFrost:CooldownDown()or EnemiesCount10yd==1)and(V or W))then if m(C.DeathsDue,nil,nil,not a7[10])then a0=324128;return"deaths_due covenants 2"end end;if C.SwarmingMist:IsReady()and p and(g:RunicPowerDeficit()>13 and C.PillarofFrost:CooldownRemains()<3 and not C.BreathofSindragosa:IsAvailable()and V)then if m(C.SwarmingMist,nil,nil,not a7[10])then a0=311648;return"swarming_mist covenants 4"end end;if C.SwarmingMist:IsReady()and p and(not C.BreathofSindragosa:IsAvailable()and W)then if m(C.SwarmingMist,nil,nil,not a7[10])then a0=311648;return"swarming_mist covenants 6"end end;if C.SwarmingMist:IsReady()and p and(C.BreathofSindragosa:IsAvailable()and(g:BuffUp(C.BreathofSindragosa)and(V and g:RunicPowerDeficit()>40 or W and g:RunicPowerDeficit()>60 or W)or g:BuffDown(C.BreathofSindragosa)and C.BreathofSindragosa:CooldownDown()))then if m(C.SwarmingMist,nil,nil,not a7[10])then a0=311648;return"swarming_mist covenants 8"end end;if C.AbominationLimb:IsCastable()and p and((C.PillarofFrost:CooldownRemains()<3 or g:BuffUp(C.PillarofFrostBuff))and V and(C.BreathofSindragosa:IsAvailable()and g:RunicPower()>65 and C.BreathofSindragosa:CooldownRemains()<2 or g:BuffUp(C.BreathofSindragosa)or not C.BreathofSindragosa:IsAvailable()))then if m(C.AbominationLimb,nil,nil,not a7[10])then a0=315443;return"abomination_limb covenants 10"end end;if C.AbominationLimb:IsCastable()and p and W then if m(C.AbominationLimb,nil,nil,not a7[10])then a0=315443;return"abomination_limb covenants 12"end end;if C.ShackleTheUnworthy:IsCastable()and p and(V and(C.PillarofFrost:CooldownRemains()<3 or C.Icecap:IsAvailable()))then if m(C.ShackleTheUnworthy,nil,nil,not a7[10])then a0=312202;return"shackle_the_unworthy covenants 14"end end;if C.ShackleTheUnworthy:IsCastable()and p and W then if m(C.ShackleTheUnworthy,nil,nil,not a7[10])then return"shackle_the_unworthy covenants 16"end end;if C.Fleshcraft:IsCastable()and(A==0 or A>3)and p and not g:IsMoving()and a4.Frost.CastCancelFC and(g:BuffDown(C.PillarofFrostBuff)and(C.PustuleEruption:SoulbindEnabled()or C.VolatileSolvent:SoulbindEnabled()and g:BuffDown(C.VolatileSolventHumanBuff)))then if m(C.Fleshcraft,nil,nil)then a0=324631;return"fleshcraft covenants 18"end end end;local function aQ()if C.BloodFury:IsCastable()and g:BuffUp(C.PillarofFrostBuff)then if m(C.BloodFury,nil)then a0=20572;return"blood_fury racials 2"end end;if C.Berserking:IsCastable()and g:BuffUp(C.PillarofFrostBuff)then if m(C.Berserking,nil)then a0=26297;return"berserking racials 4"end end;if C.ArcanePulse:IsCastable()and(g:BuffUp(C.PillarofFrostBuff)and EnemiesMeleeCount>=2 and g:BuffDown(C.PillarofFrostBuff)and(g:Rune()<=1 and g:RunicPowerDeficit()>=60))then if m(C.ArcanePulse,nil,nil,not a7[8])then a0=260364;return"arcane_pulse racials 6"end end;if C.LightsJudgment:IsCastable()and g:BuffUp(C.PillarofFrostBuff)then if m(C.LightsJudgment,nil,nil,not a7[40])then a0=255647;return"lights_judgment racials 8"end end;if C.AncestralCall:IsCastable()and(g:BuffUp(C.PillarofFrostBuff)and g:BuffUp(C.EmpowerRuneWeaponBuff))then if m(C.AncestralCall,nil)then a0=274738;return"ancestral_call racials 10"end end;if C.Fireblood:IsCastable()and(g:BuffRemains(C.PillarofFrostBuff)<=8 and g:BuffUp(C.PillarofFrostBuff)and g:BuffUp(C.EmpowerRuneWeaponBuff))then if m(C.Fireblood,nil)then a0=265221;return"fireblood racials 12"end end;if C.BagofTricks:IsCastable()and(g:BuffUp(C.PillarofFrostBuff)and(g:BuffRemains(C.PillarofFrostBuff)<5 and C.ColdHeart:IsAvailable()or not C.ColdHeart:IsAvailable()and g:BuffRemains(C.PillarofFrostBuff)<3)and EnemiesMeleeCount==1)then if m(C.BagofTricks,nil,nil,not a7[40])then a0=312411;return"bag_of_tricks racials 14"end end end;local function aR()if D.InscrutableQuantumDevice:IsEquippedAndReady()and n()and(g:BuffUp(C.PillarofFrostBuff)or h:TimeToX(20)<5 or d.FilteredFightRemains(Enemies10yd,"<",21))then if m(D.InscrutableQuantumDevice,nil,nil)then if D.InscrutableQuantumDevice:ID()==J and a4.Commons.Enabled.TopTrinket==true then a0=24;return"top trinket 1"elseif D.InscrutableQuantumDevice:ID()==L and a4.Commons.Enabled.BottomTrinket then a0=30;return"top trinket 2"end end end;if D.TheFirstSigil:IsEquippedAndReady()and n()and(g:BuffUp(C.PillarofFrostBuff)and g:BuffUp(C.EmpowerRuneWeaponBuff))then if m(D.TheFirstSigil,nil,nil)then if D.TheFirstSigil:ID()==J and a4.Commons.Enabled.TopTrinket==true then a0=24;return"top trinket 1"elseif D.TheFirstSigil:ID()==L and a4.Commons.Enabled.BottomTrinket then a0=30;return"top trinket 2"end end end;if D.ScarsofFraternalStrife:IsEquippedAndReady()and n()then if m(D.ScarsofFraternalStrife,nil,nil)then if D.ScarsofFraternalStrife:ID()==J and a4.Commons.Enabled.TopTrinket==true then a0=24;return"top trinket 1"elseif D.ScarsofFraternalStrife:ID()==L and a4.Commons.Enabled.BottomTrinket then a0=30;return"top trinket 2"end end end;if C.PillarofFrost:CooldownUp()or C.PillarofFrost:CooldownRemains()>20 then if(a4.Commons.Enabled.TopTrinket or a4.Commons.Enabled.BottomTrinket)and n()then local aS=g:GetUseableTrinkets(E)if aS then if m(aS,nil,nil)then if aS:ID()==J and a4.Commons.Enabled.TopTrinket then a0=24;return"top trinket 1"elseif aS:ID()==L and a4.Commons.Enabled.BottomTrinket then a0=30;return"top trinket 2"end end end end end end;local function aT()if C.RemorselessWinter:IsReady()and(Q or EnemiesCount10yd>=2)then if m(C.RemorselessWinter,nil,nil,not a7[8])then a0=196770;return"remorseless_winter obliteration_pooling 2"end end;if C.GlacialAdvance:IsReady()and(EnemiesCount10yd>=2 and C.Frostscythe:IsAvailable())then if m(C.GlacialAdvance,nil,nil,not a7[100])then a0=194913;return"glacial_advance obliteration_pooling "end end;if C.Frostscythe:IsReady()and(g:BuffUp(C.KillingMachineBuff)and EnemiesCount10yd>2 and not Z)then if m(C.Frostscythe,nil,nil,not a7[100])then a0=207230;return"frostscythe obliteration_pooling "end end;if C.Obliterate:IsReady()then if not o()and(g:RuneTimeToX(4)<g:GCD()or g:RunicPower()<=45)then if m(C.Obliterate)then a0=49020;return"obliterate obliteration_pooling 6"end elseif a3.CastTargetIf(C.Obliterate,EnemiesMelee,"max",am,aC)then return"obliterate obliteration_pooling 6"end end;if C.FrostStrike:IsReady()and not z and(Enemies10yd==1 and Y)then if m(C.FrostStrike,nil,nil,not a7[8])then a0=49143;return"frost_strike obliteration_pooling 4"end end;if C.HowlingBlast:IsReady()and X then if m(C.HowlingBlast)then a0=49184;return"howling_blast obliteration_pooling 7"end end;if C.GlacialAdvance:IsReady()and(EnemiesCount10yd>=2 and g:RunicPowerDeficit()<60)then if m(C.GlacialAdvance,nil,nil,a7[100])then a0=194913;return"glacial_advance obliteration_pooling 8"end end;if C.FrostStrike:IsReady()and not z then if not o()and g:RunicPowerDeficit()<70 then if m(C.FrostStrike)then a0=49143;return"frost_strike obliteration_pooling 10"end elseif a3.CastTargetIf(C.FrostStrike,EnemiesMelee,"max",am,aD)then return"frost_strike obliteration_pooling 10"end end;if C.Obliterate:IsReady()then if not o()and g:Rune()>=3 then if m(C.Obliterate)then a0=49020;return"obliterate obliteration_pooling 12"end elseif a3.CastTargetIf(C.Obliterate,EnemiesMelee,"max",am,aE)then return"obliterate obliteration_pooling 12"end end;if C.Frostscythe:IsReady()and(EnemiesCount10yd>=4 and not Z)then if m(C.Frostscythe,nil,nil,not a7[8])then a0=207230;return"frostscythe obliteration_pooling 14"end end;if l.CastAnnotated(C.Pool,false,"WAIT")then return"Wait Resources Obliteration Pooling"end end;local function aU()if C.RemorselessWinter:IsReady()and(EnemiesCount10yd>=3 and Q)then if m(C.RemorselessWinter,nil,nil,not a7[8])then a0=196770;return"remorseless_winter obliteration 2"end end;if C.FrostStrike:IsReady()and not z and(g:BuffDown(C.KillingMachineBuff)and(g:Rune()<2 or C.IcyTalons:IsAvailable()and g:BuffRemains(C.IcyTalonsBuff)<g:GCD()*2 or C.UnleashedFrenzy:ConduitEnabled()and(g:BuffRemains(C.UnleashedFrenzyBuff)<g:GCD()*2 or g:BuffStack(C.UnleashedFrenzyBuff)<3)))then if m(C.FrostStrike,nil,nil,not a7[8])then a0=49143;return"frost_strike obliteration 3"end end;if C.HowlingBlast:IsReady()and(g:BuffDown(C.KillingMachineBuff)and g:Rune()>=3 and(g:BuffRemains(C.RimeBuff)<3 and g:BuffUp(C.RimeBuff)or h:DebuffDown(C.FrostFeverDebuff)))then if m(C.HowlingBlast,nil,nil,not a7[30])then a0=49184;return"howling_blast obliteration 4"end end;if C.GlacialAdvance:IsReady()and(g:BuffDown(C.KillingMachineBuff)and EnemiesCount10yd>=2 or g:BuffDown(C.KillingMachineBuff)and(h:DebuffStack(C.RazoriceDebuff)<5 or h:DebuffRemains(C.RazoriceDebuff)<g:GCD()*4))then if m(C.GlacialAdvance,nil,nil,a7[100])then a0=194913;return"glacial_advance obliteration 10"end end;if C.Frostscythe:IsReady()and(g:BuffUp(C.KillingMachineBuff)and EnemiesCount10yd>2 and not Z)then if m(C.Frostscythe,nil,nil,not a7[8])then a0=207230;return"frostscythe obliteration 6"end end;if C.Obliterate:IsReady()then if not o()and g:BuffUp(C.KillingMachineBuff)then if m(C.Obliterate)then a0=49020;return"obliterate obliteration 8"end elseif a3.CastTargetIf(C.Obliterate,EnemiesMelee,"max",am,aF)then return"obliterate obliteration 8"end end;if C.FrostStrike:IsReady()and not z and(EnemiesCount10yd==1 and Y)then if m(C.FrostStrike,nil,nil,not a7[8])then a0=49143;return"frost_strike obliteration 12"end end;if C.HowlingBlast:IsReady()and(X and EnemiesCount10yd>=2)then if m(C.HowlingBlast,nil,nil,not a7[30])then a0=49184;return"howling_blast obliteration 14"end end;if C.GlacialAdvance:IsReady()and EnemiesCount10yd>=2 then if m(C.GlacialAdvance,nil,nil,a7[100])then a0=194913;return"glacial_advance obliteration 16"end end;if C.FrostStrike:IsReady()and not z then if not o()and(not C.Avalanche:IsAvailable()and g:BuffDown(C.KillingMachineBuff)or C.Avalanche:IsAvailable()and not X or X and g:RuneTimeToX(2)>=g:GCD())then if m(C.FrostStrike)then a0=49143;return"frost_strike obliteration 18"end elseif a3.CastTargetIf(C.FrostStrike,EnemiesMelee,"max",am,aH)then return"frost_strike obliteration 18"end end;if C.HowlingBlast:IsReady()and X then if m(C.HowlingBlast,nil,nil,not a7[30])then a0=49184;return"howling_blast obliteration 20"end end;if C.Obliterate:IsReady()then if not o()then if m(C.Obliterate)then a0=49020;return"obliterate obliteration 8"end elseif a3.CastTargetIf(C.Obliterate,EnemiesMelee,"max",am,aG)then return"obliterate obliteration 22"end end end;local function aV()if C.RemorselessWinter:IsReady()and Q then if m(C.RemorselessWinter,nil,nil,not a7[8])then a0=196770;return"remorseless_winter standard 2"end end;if C.Obliterate:IsReady()and g:BuffUp(C.KillingMachineBuff)then if m(C.Obliterate,nil,nil,not a7[8])then a0=49020;return"obliterate standard 4"end end;if C.HowlingBlast:IsReady()and(X and g:BuffRemains(C.RimeBuff)<3)then if m(C.HowlingBlast,nil,nil,not a7[30])then a0=49184;return"howling_blast standard 6"end end;if C.FrostStrike:IsReady()and not z and Y then if m(C.FrostStrike,nil,nil,not a7[8])then a0=49143;return"frost_strike standard 8"end end;if C.GlacialAdvance:IsReady()and(not O and(h:DebuffStack(C.RazoriceDebuff)<5 or h:DebuffRemains(C.RazoriceDebuff)<g:GCD()*4))then if m(C.GlacialAdvance,nil,nil,a7[100])then a0=194913;return"glacial_advance standard 10"end end;if C.FrostStrike:IsReady()and not z and(C.RemorselessWinter:CooldownRemains()<=2*g:GCD()and C.GatheringStorm:IsAvailable())then if m(C.FrostStrike,nil,nil,not a7[8])then a0=49143;return"frost_strike standard 12"end end;if C.HowlingBlast:IsReady()and X then if m(C.HowlingBlast,nil,nil,not a7[30])then a0=49184;return"howling_blast standard 14"end end;if C.FrostStrike:IsReady()and not z and g:RunicPowerDeficit()<15+aj(C.RunicAttenuation:IsAvailable())*5 then if m(C.FrostStrike,nil,nil,not a7[8])then a0=49143;return"frost_strike standard 18"end end;if C.Obliterate:IsReady()and(g:BuffDown(C.FrozenPulseBuff)and C.FrozenPulse:IsAvailable()or Z and g:BuffStack(C.DeathsDueBuff)<4 or C.GatheringStorm:IsAvailable()and g:BuffUp(C.RemorselessWinter)or g:RunicPowerDeficit()>25+aj(C.RunicAttenuation:IsAvailable())*5)then if m(C.Obliterate,nil,nil,not a7[8])then a0=49020;return"obliterate standard 16"end end;if C.FrostStrike:IsReady()and not z then if m(C.FrostStrike,nil,nil,not a7[8])then a0=49143;return"frost_strike standard 22"end end;if C.HornofWinter:IsCastable()then if m(C.HornofWinter,nil)then a0=57330;return"horn_of_winter standard 24"end end;if C.ArcaneTorrent:IsCastable()and n()and Setting.Commons.Enabled.Racials then if m(C.ArcaneTorrent,nil)then return"arcane_torrent standard 26"end end end;local function aW()Opener=HeroRotationCharDB.Toggles[6]p=HeroRotationCharDB.Toggles[4]q=HeroRotationCharDB.Toggles[5]or n()t=HeroRotationCharDB.Toggles[12]u=HeroRotationCharDB.Toggles[13]v=HeroRotationCharDB.Toggles[14]s=HeroRotationCharDB.Toggles[15]w=HeroRotationCharDB.Toggles[16]x=HeroRotationCharDB.Toggles[81]y=HeroRotationCharDB.Toggles[110]z=false;A=0;for a9=1,20 do if select(10,UnitDebuff("player",a9))==240447 then if select(6,UnitDebuff("player",a9))~=nil then A=select(6,UnitDebuff("player",a9))-GetTime()end end end end;local function aX()EnemiesMelee=g:GetEnemiesInMeleeRange(8)Enemies10yd=g:GetEnemiesInMeleeRange(10)EnemiesCount10yd=#Enemies10yd;EnemiesMeleeCount=#EnemiesMelee;a8()if not BotOn then _=0;a0=0;a1=0 end;if _>0 then _=0 end;if a0>0 then a0=0 end;if a1>0 then a1=0 end;M=aW()if l.GUISettings.General.OpenerReset>0 and not HeroRotationCharDB.Toggles[6]then starttime=GetTime()endtime=starttime+l.GUISettings.General.OpenerReset elseif l.GUISettings.General.OpenerReset>0 and endtime~=nil and GetTime()>endtime and HeroRotationCharDB.Toggles[6]then HeroRotationCharDB.Toggles[6]=not HeroRotationCharDB.Toggles[6]l.ToggleIconFrame:UpdateButtonText(6)l.Print("Opener is now "..(HeroRotationCharDB.Toggles[6]and"|cff00ff00enabled|r."or"|cffff0000disabled|r."))end;if u and C.AntiMagicZone:IsUsableP()and g:AffectingCombat()and C.AntiMagicZone:CooldownRemains(BypassRecovery)<=0 then if m(C.AntiMagicZone,nil,nil,nil)then a0=51052;return"queue AMZ"end elseif(not C.AntiMagicZone:IsUsableP()or C.AntiMagicZone:CooldownRemains()>0 or not g:AffectingCombat())and u then HeroRotationCharDB.Toggles[13]=not HeroRotationCharDB.Toggles[13]l.Print("Anti-Magic Zone Queue is now "..(HeroRotationCharDB.Toggles[13]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if v and C.DeathGrip:IsUsableP()and C.DeathGrip:CooldownRemains(BypassRecovery)<=0 and f("mouseover"):GUID()~=nil then if m(C.DeathGrip,nil,nil,nil)then _=149576;return"queue DeathGrip MO"end elseif v and C.DeathGrip:IsUsableP()and C.DeathGrip:CooldownRemains(BypassRecovery)<=0 and a3.TargetIsValid()then if m(C.DeathGrip,nil,nil,nil)then a0=49576;return"queue DeathGrip"end elseif(not C.DeathGrip:IsUsableP()or C.DeathGrip:CooldownRemains()>0 or not a3.TargetIsValid())and v then HeroRotationCharDB.Toggles[14]=not HeroRotationCharDB.Toggles[14]l.Print("Death Grip Queue is now "..(HeroRotationCharDB.Toggles[14]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if w and C.Asphyxiate:IsUsableP()and C.Asphyxiate:CooldownRemains(BypassRecovery)<=0 and f("mouseover"):GUID()~=nil then if m(C.Asphyxiate,nil,nil,nil)then _=1221562;return"queue Asphyxiate MO"end elseif w and C.Asphyxiate:IsUsableP()and C.Asphyxiate:CooldownRemains(BypassRecovery)<=0 and a3.TargetIsValid()then if m(C.Asphyxiate,nil,nil,nil)then a0=221562;return"queue Asphyxiate"end elseif(not C.Asphyxiate:IsUsableP()or C.Asphyxiate:CooldownRemains()>0)and w then HeroRotationCharDB.Toggles[16]=not HeroRotationCharDB.Toggles[16]l.Print("Asphyxiate Queue is now "..(HeroRotationCharDB.Toggles[16]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if x and C.ControlUndead:IsUsableP()and C.ControlUndead:CooldownRemains(BypassRecovery)<=0 and not g:PrevGCD(1,C.ControlUndead)then if l.Cast(C.ControlUndead,nil,nil,nil)then if f("mouseover"):GUID()~=nil and f("mouseover"):IsInRange(30)then _=1111673;return"queue ControlUndead MO"else a0=111673;return"queue ControlUndead"end end elseif(not C.ControlUndead:IsUsableP()or C.ControlUndead:CooldownRemains()>0 or g:PrevGCD(1,C.ControlUndead))and x then HeroRotationCharDB.Toggles[81]=not HeroRotationCharDB.Toggles[81]l.Print("Control Undead Queue is now "..(HeroRotationCharDB.Toggles[81]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if g:IsChanneling(j(324631))then if g:AffectingCombat()and a4.Frost.CastCancelFC then a0=1999 elseif m(C.Pool,nil,nil,nil)then _=99999;return"Raise Ally MO"end end;if not h:IsInMeleeRange(15)and EnemiesMeleeCount>0 and a4.Frost.TargetSwap=="AutoSwap"and not t then _=9999 end;if not g:AffectingCombat()and a3.TargetIsValid()and not g:IsDeadOrGhost()and r then local M=aJ()if M then return M end end;if a3.TargetIsValid()and not g:IsDeadOrGhost()and a3.TargetIsValid()and g:AffectingCombat()then if not UnitIsEnemy("player","mouseover")and UnitIsDead("mouseover")then if C.RaiseAlly:IsCastable()and g:RunicPower()>=30 then if m(C.RaiseAlly,nil)then _=161999;return"RaiseAlly MO"end elseif C.RaiseAlly:CooldownRemains(BypassRecovery)<=0 and g:RunicPower()<30 then z=true end end;if a4.Commons.UseDefensives then if g:HealthPercentage()<a4.Commons.HealthstoneHP and D.Healthstone:IsReady()and D.Healthstone:CooldownRemains()<=0 then if m(D.Healthstone,nil)then a0=40;return"Healthstone HP"end end;if g:HealthPercentage()<a4.Commons.HealPotHP and D.HealPot:IsReady()and D.CosmicHealPot:CooldownRemains()<=0 then if m(D.CosmicHealPot,nil)then a0=45;return"Cosmic HealPot HP"end end;if g:HealthPercentage()<a4.Commons.HealPotHP and D.HealPot:IsReady()and D.HealPot:CooldownRemains()<=0 then if m(D.HealPot,nil)then a0=41;return"HealPot HP"end end;if g:HealthPercentage()<a4.Commons.UseDarkSuccorHP and C.DeathStrike:IsReady()and g:BuffUp(C.DeathStrikeBuff)then if m(C.DeathStrike)then a0=49998;return"DeathStrike Dark Succor HP"end end;if g:HealthPercentage()<a4.Commons.UseDeathStrikeHP and C.DeathStrike:IsReady()then if m(C.DeathStrike)then a0=49998;return"DeathStrike HP"end end;if g:HealthPercentage()<a4.Commons.IceboundFortitudeHP and C.IceboundFortitude:IsReady()then if m(C.IceboundFortitude)then a0=48792;return"Icebound Fortitude HP"end end;if g:HealthPercentage()<a4.Commons.LichborneHP and C.Lichborne:IsReady()then if m(C.Lichborne)then a0=49039;return"Lichborne HP"end end;if g:HealthPercentage()<a4.Commons.AntiMagicShellHP and C.AntiMagicShell:IsReady()then if m(C.AntiMagicShell)then a0=48707;return"Anti-Magic Shell HP"end end;if g:HealthPercentage()<a4.Commons.DeathPactHP and C.DeathPact:IsReady()then if m(C.DeathPact)then a0=48743;return"Death Pact HP"end end end;if C.DeathStrike:IsReady()and not z and false then if m(C.DeathStrike,nil,nil,not a7[5])then a0=49998;return"death_strike low hp or proc"end end;V=EnemiesCount10yd==1 or not o()W=EnemiesCount10yd>=2 and o()X=g:BuffUp(C.RimeBuff)and(not ad or ad and g:RunicPowerDeficit()>8)Y=C.EradicatingBlow:ConduitEnabled()and g:BuffStack(C.EradicatingBlowBuff)==2 or C.UnleashedFrenzy:ConduitEnabled()and g:BuffRemains(C.UnleashedFrenzyBuff)<g:GCD()*2;Z=g:BuffUp(C.DeathAndDecayBuff)and a2==3;if C.RemorselessWinter:IsReady()and(C.Everfrost:ConduitEnabled()and C.GatheringStorm:IsAvailable()and not C.Obliteration:IsAvailable()and not C.PillarofFrost:CooldownUp()or g:HasTier(28,4)and C.Obliteration:IsAvailable()and g:BuffDown(C.PillarofFrostBuff))then if m(C.RemorselessWinter,nil,nil,not a7[8])then a0=196770;return"remorseless_winter main 2"end end;if C.HowlingBlast:IsReady()and h:DebuffRefreshable(C.FrostFeverDebuff)and(C.Icecap:IsAvailable()or g:BuffDown(C.BreathofSindragosa)and C.BreathofSindragosa:IsAvailable()or C.Obliteration:IsAvailable()and C.PillarofFrost:CooldownDown()and g:BuffDown(C.KillingMachineBuff))then if m(C.HowlingBlast,nil)then a0=49184;return"howling_blast main 4"end end;if C.HowlingBlast:IsReady()and(C.Icecap:IsAvailable()or g:BuffDown(C.BreathofSindragosa)and C.BreathofSindragosa:IsAvailable()or C.Obliteration:IsAvailable()and C.PillarofFrost:CooldownDown()and g:BuffDown(C.KillingMachineBuff))then if a3.CastCycle(C.HowlingBlast,Enemies10yd,aI,not h:IsSpellInRange(C.HowlingBlast))then return"howling_blast main 4"end end;if C.GlacialAdvance:IsReady()and(g:BuffRemains(C.IcyTalonsBuff)<=g:GCD()*2 and C.IcyTalons:IsAvailable()and EnemiesCount10yd>=2 and(C.Icecap:IsAvailable()or C.BreathofSindragosa:IsAvailable()and C.BreathofSindragosa:CooldownRemains()>15 or C.Obliteration:IsAvailable()and g:BuffDown(C.PillarofFrostBuff)))then if m(C.GlacialAdvance,nil,nil,100)then a0=194913;return"glacial_advance main 6"end end;if C.FrostStrike:IsReady()and not z and(g:BuffRemains(C.IcyTalonsBuff)<=g:GCD()*2 and C.IcyTalons:IsAvailable()and(C.Icecap:IsAvailable()or C.BreathofSindragosa:IsAvailable()and g:BuffDown(C.BreathofSindragosa)and C.BreathofSindragosa:CooldownRemains()>10 or C.Obliteration:IsAvailable()and g:BuffDown(C.PillarofFrostBuff)))then if m(C.FrostStrike)then a0=49143;return"frost_strike main 8"end end;local aY=C.DeathsDue:IsAvailable()and C.DeathsDue or C.DeathAndDecay;if C.Obliterate:IsReady()and(a2==3 and g:BuffUp(C.DeathAndDecayBuff)and 10-aY:TimeSinceLastCast()<g:GCD()*1.5 and(not C.Obliteration:IsAvailable()or C.Obliteration:IsAvailable()and g:BuffDown(C.PillarofFrostBuff)))then if m(C.Obliterate,nil,nil,not a7[8])then a0=49020;return"obliterate main 10"end end;if true then local M=aP()if M then return M end end;if n()and a4.Commons.Enabled.Racials then local M=aQ()if M then return M end end;if a4.Commons.Enabled.TopTrinket or a4.Commons.Enabled.BottomTrinket then local M=aR()if M then return M end end;if n()then local M=aO()if M then return M end end;if C.ColdHeart:IsAvailable()and(g:BuffDown(C.KillingMachineBuff)or C.BreathofSindragosa:IsAvailable())and(h:DebuffStack(C.RazoriceDebuff)==5 or not O or d.FilteredFightRemains(Enemies10yd,"<=",g:GCD()))then local M=aN()if M then return M end end;if g:BuffUp(C.BreathofSindragosa)then local M=aM()if M then return M end end;if not a4.Frost.DisableBoSPooling and C.BreathofSindragosa:IsAvailable()and(C.BreathofSindragosa:CooldownRemains()<10 and n()or not n()and g:RunicPower()<=75)then local M=aL()if M then return M end end;if g:BuffUp(C.PillarofFrostBuff)and C.Obliteration:IsAvailable()then local M=aU()if M then return M end end;if not g:HasTier(28,4)and C.Obliteration:IsAvailable()and C.PillarofFrost:CooldownRemains()<10 then local M=aT()if M then return M end end;if o()and EnemiesCount10yd>=2 then local M=aK()if M then return M end end;if true then local M=aV()if M then return M end end;if l.CastAnnotated(C.Pool,false,"WAIT")then return"Wait/Pool Resources"end end end;local function aZ()end;function ReturnSpellF()if a0==0 then return 0 else return a0 end end;function ReturnSpellMOF()if _==0 then return 0 else return _ end end;l.SetAPL(251,aX,aZ)