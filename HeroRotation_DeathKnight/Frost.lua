local a,b=...local c=HeroDBC.DBC;local d=HeroLib;local e=HeroCache;local f=d.Unit;local g=f.Player;local h=f.Target;local i=f.Pet;local j=d.Spell;local k=d.Item;local l=HeroRotation;local m=l.Cast;local n=l.CDsON;local o=l.AoEON;local p=HeroRotationCharDB.Toggles[4]local q=HeroRotationCharDB.Toggles[5]local r=HeroRotationCharDB.Toggles[6]local s=HeroRotationCharDB.Toggles[15]local t=HeroRotationCharDB.Toggles[12]local u=HeroRotationCharDB.Toggles[13]local v=HeroRotationCharDB.Toggles[14]local w=HeroRotationCharDB.Toggles[16]local x=HeroRotationCharDB.Toggles[81]local y=false;local strsplit=strsplit;local z=math.min;local pairs=pairs;local GetInventoryItemLink=GetInventoryItemLink;local A=j.DeathKnight.Frost;local B=k.DeathKnight.Frost;local C={B.InscrutableQuantumDevice:ID()}local D=g:GetEquipment()local E=k(0)local F=k(0)local G=0;local H,I=GetInventoryItemID("player",13)local J,I=GetInventoryItemID("player",14)if D[13]then E=k(D[13])end;if D[14]then F=k(D[14])end;local K;local L;local M;local N;local O;local P,Q;local R;local S;local T;local U;local V;local W;local X;local Y=0;local Z=0;local _=0;local a0=g:CovenantID()d:RegisterForEvent(function()a0=g:CovenantID()end,"COVENANT_CHOSEN")local a1=l.Commons.Everyone;local a2={General=l.GUISettings.General,Commons=l.GUISettings.APL.DeathKnight.Commons,Frost=l.GUISettings.APL.DeathKnight.Frost}local a3={{A.Asphyxiate,"Cast Asphyxiate (Interrupt)",function()return true end}}local a4={5,8,10,30,40,100}local a5={}local function a6()for I,a7 in ipairs(a4)do if a7==8 or 5 then a5[a7]=h:IsInMeleeRange(a7)end;a5[a7]=h:IsInRange(a7)end end;local a8=g:HasLegendaryEquipped(38)local a9=g:HasLegendaryEquipped(39)local aa=g:HasLegendaryEquipped(31)local ab=g:HasLegendaryEquipped(41)local ac=GetInventoryItemLink("player",16)or""local ad=GetInventoryItemLink("player",17)or""local I,I,ae=strsplit(":",ac)local I,I,af=strsplit(":",ad)local M=ae=="3370"or af=="3370"local N=ae=="3368"or af=="3368"d:RegisterForEvent(function()D=g:GetEquipment()E=k(0)F=k(0)if D[13]then E=k(D[13])end;if D[14]then F=k(D[14])end;a8=g:HasLegendaryEquipped(38)a9=g:HasLegendaryEquipped(39)ab=g:HasLegendaryEquipped(41)ac=GetInventoryItemLink("player",16)or""ad=GetInventoryItemLink("player",17)or""I,I,ae=strsplit(":",ac)I,I,af=strsplit(":",ad)M=ae=="3370"or af=="3370"N=ae=="3368"or af=="3368"end,"PLAYER_EQUIPMENT_CHANGED")local function ag(ah)if ah then return 1 else return 0 end end;local function ai(ah)return ah~=0 end;local function aj()return a2.General.SoloMode and(g:HealthPercentage()<a2.Commons.UseDeathStrikeHP or g:HealthPercentage()<a2.Commons.UseDarkSuccorHP and g:BuffUp(A.DeathStrikeBuff))end;local function ak(al)return(al:DebuffStack(A.RazoriceDebuff)+1)/(al:DebuffRemains(A.RazoriceDebuff)+1)*ag(M)end;local function am(al)return A.RemorselessWinter:CooldownRemains()<=2*g:GCD()and A.GatheringStorm:IsAvailable()end;local function an(al)return g:RunicPowerDeficit()<15+ag(A.RunicAttenuation:IsAvailable())*3 end;local function ao(al)return g:RunicPowerDeficit()>=25+ag(A.RunicAttenuation:IsAvailable())*3 end;local function ap(al)if A.RemorselessWinter:CooldownRemains()<=2*g:GCD()and A.GatheringStorm:IsAvailable()and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Y=149143;return true elseif A.RemorselessWinter:CooldownRemains()<=2*g:GCD()and A.GatheringStorm:IsAvailable()and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a2.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Y=9999;return true elseif A.RemorselessWinter:CooldownRemains()<=2*g:GCD()and A.GatheringStorm:IsAvailable()and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a2.Frost.TargetSwap=="AutoSwap"and t or not o())then Z=49143;return true elseif A.RemorselessWinter:CooldownRemains()<=2*g:GCD()and A.GatheringStorm:IsAvailable()then return true end end;local function aq(al)if g:RunicPowerDeficit()<15+ag(A.RunicAttenuation:IsAvailable())*5 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Y=149143;return true elseif g:RunicPowerDeficit()<15+ag(A.RunicAttenuation:IsAvailable())*5 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(a2.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o())then Y=9999;return true elseif g:RunicPowerDeficit()<15+ag(A.RunicAttenuation:IsAvailable())*5 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a2.Frost.TargetSwap=="AutoSwap"and t or not o())then Z=49143;return true elseif g:RunicPowerDeficit()<15+ag(A.RunicAttenuation:IsAvailable())*5 then return true end end;local function ar(al)if(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Y=149143;return true elseif(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a2.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Y=9999;return true elseif(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a2.Frost.TargetSwap=="AutoSwap"and t or not o())then Z=49143;return true elseif true then return true end end;local function as(al)if g:RunicPowerDeficit()>25+ag(A.RunicAttenuation:IsAvailable())*5 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Y=149020;return true elseif g:RunicPowerDeficit()>25+ag(A.RunicAttenuation:IsAvailable())*5 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a2.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Y=9999;return true elseif g:RunicPowerDeficit()>25+ag(A.RunicAttenuation:IsAvailable())*5 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a2.Frost.TargetSwap=="AutoSwap"and t or not o())then Z=49020;return true elseif g:RunicPowerDeficit()>25+ag(A.RunicAttenuation:IsAvailable())*5 then return true end end;local function at(al)if g:BuffUp(A.KillingMachineBuff)and A.PillarofFrost:CooldownRemains()>3 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Y=149020;return true elseif g:BuffUp(A.KillingMachineBuff)and A.PillarofFrost:CooldownRemains()>3 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a2.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Y=9999;return true elseif g:BuffUp(A.KillingMachineBuff)and A.PillarofFrost:CooldownRemains()>3 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a2.Frost.TargetSwap=="AutoSwap"and t or not o())then Z=49020;return true elseif g:BuffUp(A.KillingMachineBuff)and A.PillarofFrost:CooldownRemains()>3 then return true end end;local function au(al)if g:RunicPowerDeficit()>=25 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Y=149020;return true elseif g:RunicPowerDeficit()>=25 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a2.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Y=9999;return true elseif g:RunicPowerDeficit()>=25 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a2.Frost.TargetSwap=="AutoSwap"and t or not o())then Z=49020;return true elseif g:RunicPowerDeficit()>=25 then return true end end;local function av(al)if g:RunicPowerDeficit()<20 and A.PillarofFrost:CooldownRemains()>5 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Y=149143;return true elseif g:RunicPowerDeficit()<20 and A.PillarofFrost:CooldownRemains()>5 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a2.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Y=9999;return true elseif g:RunicPowerDeficit()<20 and A.PillarofFrost:CooldownRemains()>5 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a2.Frost.TargetSwap=="AutoSwap"and t or not o())then Z=49143;return true elseif g:RunicPowerDeficit()<20 and A.PillarofFrost:CooldownRemains()>5 then return true end end;local function aw(al)if A.PillarofFrost:CooldownRemains()>g:RuneTimeToX(4)and g:RunicPowerDeficit()<40 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Y=149143;return true elseif A.PillarofFrost:CooldownRemains()>g:RuneTimeToX(4)and g:RunicPowerDeficit()<40 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a2.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Y=9999;return true elseif A.PillarofFrost:CooldownRemains()>g:RuneTimeToX(4)and g:RunicPowerDeficit()<40 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a2.Frost.TargetSwap=="AutoSwap"and t or not o())then Z=49143;return true elseif A.PillarofFrost:CooldownRemains()>g:RuneTimeToX(4)and g:RunicPowerDeficit()<40 then return true end end;local function ax(al)if g:BuffUp(A.KillingMachineBuff)and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Y=149020;return true elseif g:BuffUp(A.KillingMachineBuff)and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a2.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Y=9999;return true elseif g:BuffUp(A.KillingMachineBuff)and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a2.Frost.TargetSwap=="AutoSwap"and t or not o())then Z=49020;return true elseif g:BuffUp(A.KillingMachineBuff)then return true end end;local function ay(al)if(g:RunicPowerDeficit()>25 or g:RuneTimeToX(3)<g:GCD())and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Y=149020;return true elseif(g:RunicPowerDeficit()>25 or g:RuneTimeToX(3)<g:GCD())and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a2.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Y=9999;return true elseif(g:RunicPowerDeficit()>25 or g:RuneTimeToX(3)<g:GCD())and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a2.Frost.TargetSwap=="AutoSwap"and t or not o())then Z=49020;return true elseif g:RunicPowerDeficit()>25 or g:RuneTimeToX(3)<g:GCD()then return true end end;local function az(al)if g:RunicPowerDeficit()>=45+ag(A.RunicAttenuation:IsAvailable())*5 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Y=149020;return true elseif g:RunicPowerDeficit()>=45+ag(A.RunicAttenuation:IsAvailable())*5 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a2.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Y=9999;return true elseif g:RunicPowerDeficit()>=45+ag(A.RunicAttenuation:IsAvailable())*5 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a2.Frost.TargetSwap=="AutoSwap"and t or not o())then Z=49020;return true elseif g:RunicPowerDeficit()>=45+ag(A.RunicAttenuation:IsAvailable())*5 then return true end end;local function aA(al)if(g:RuneTimeToX(4)<g:GCD()or g:RunicPower()<=45)and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Y=149020;return true elseif(g:RuneTimeToX(4)<g:GCD()or g:RunicPower()<=45)and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a2.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Y=9999;return true elseif(g:RuneTimeToX(4)<g:GCD()or g:RunicPower()<=45)and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a2.Frost.TargetSwap=="AutoSwap"and t or not o())then Z=49020;return true elseif g:RuneTimeToX(4)<g:GCD()or g:RunicPower()<=45 then return true end end;local function aB(al)if g:RunicPowerDeficit()<70 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Y=149143;return true elseif g:RunicPowerDeficit()<70 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a2.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Y=9999;return true elseif g:RunicPowerDeficit()<70 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a2.Frost.TargetSwap=="AutoSwap"and t or not o())then Z=49143;return true elseif g:RunicPowerDeficit()<70 then return true end end;local function aC(al)if g:Rune()>=3 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Y=149020;return true elseif g:Rune()>=3 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a2.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Y=9999;return true elseif g:Rune()>=3 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a2.Frost.TargetSwap=="AutoSwap"and t or not o())then Z=49020;return true elseif g:Rune()>=3 then return true end end;local function aD(al)if g:BuffUp(A.KillingMachineBuff)and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Y=149020;return true elseif g:BuffUp(A.KillingMachineBuff)and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a2.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Y=9999;return true elseif g:BuffUp(A.KillingMachineBuff)and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a2.Frost.TargetSwap=="AutoSwap"and t or not o())then Z=49020;return true elseif g:BuffUp(A.KillingMachineBuff)then return true end end;local function aE(al)if(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Y=149020;return true elseif(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a2.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Y=9999;return true elseif(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a2.Frost.TargetSwap=="AutoSwap"and t or not o())then Z=49020;return true elseif true then return true end end;local function aF(al)if(not A.Avalanche:IsAvailable()and g:BuffDown(A.KillingMachineBuff)or A.Avalanche:IsAvailable()and not V or V and g:RuneTimeToX(2)>=g:GCD())and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Y=149143;return true elseif(not A.Avalanche:IsAvailable()and g:BuffDown(A.KillingMachineBuff)or A.Avalanche:IsAvailable()and not V or V and g:RuneTimeToX(2)>=g:GCD())and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a2.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Y=9999;return true elseif(not A.Avalanche:IsAvailable()and g:BuffDown(A.KillingMachineBuff)or A.Avalanche:IsAvailable()and not V or V and g:RuneTimeToX(2)>=g:GCD())and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a2.Frost.TargetSwap=="AutoSwap"and t or not o())then Z=49143;return true elseif not A.Avalanche:IsAvailable()and g:BuffDown(A.KillingMachineBuff)or A.Avalanche:IsAvailable()and not V or V and g:RuneTimeToX(2)>=g:GCD()then return true end end;local function aG(al)if al:DebuffRefreshable(A.FrostFeverDebuff)and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Y=149184;return true elseif al:DebuffRefreshable(A.FrostFeverDebuff)and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a2.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Y=9999;return true elseif al:DebuffRefreshable(A.FrostFeverDebuff)and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a2.Frost.TargetSwap=="AutoSwap"and t or not o())then Z=49184;return true elseif al:DebuffRefreshable(A.FrostFeverDebuff)then return true end end;local function aH()if a1.TargetIsValid()then if A.Fleshcraft:IsCastable()then if m(A.Fleshcraft,nil,nil)then Z=324631;return"fleshcraft precombat"end end;O=A.GatheringStorm:IsAvailable()or A.Everfrost:ConduitEnabled()or a9;if A.HowlingBlast:IsReady()and not h:IsInRange(8)then if m(A.HowlingBlast,nil,nil,not a5[30])then Z=49184;return"howling_blast precombat"end end;if A.RemorselessWinter:IsReady()and h:IsInRange(8)then if m(A.RemorselessWinter,nil,nil,not a5[8])then Z=196770;return"remorseless_winter precombat"end end end end;local function aI()if A.RemorselessWinter:IsReady()then if m(A.RemorselessWinter,nil,nil,not a5[8])then Z=196770;return"remorseless_winter aoe 2"end end;if A.GlacialAdvance:IsReady()and A.Frostscythe:IsAvailable()then if m(A.GlacialAdvance,nil,nil,not a5[30])then Z=194913;return"glacial_advance aoe 4"end end;if A.Frostscythe:IsReady()and(g:BuffUp(A.KillingMachineBuff)and not X)then if m(A.Frostscythe,nil,nil,not a5[8])then Z=207230;return"frostscythe aoe 6"end end;if A.HowlingBlast:IsReady()and(V and A.Avalanche:IsAvailable())then if m(A.HowlingBlast,nil,nil,not a5[30])then Z=49184;return"howling_blast aoe 8"end end;if A.GlacialAdvance:IsReady()and(g:BuffDown(A.RimeBuff)and EnemiesCount10yd<=3 or EnemiesCount10yd>3)then if m(A.GlacialAdvance,nil,nil,not a5[30])then Z=194913;return"glacial_advance aoe 10"end end;if A.FrostStrike:IsReady()and not y then if a1.CastTargetIf(A.FrostStrike,EnemiesMelee,"max",ak,ap)then return"frost_strike aoe 12"end end;if A.HowlingBlast:IsReady()and V then if m(A.HowlingBlast,nil,nil,not a5[30])then Z=49184;return"howling_blast aoe 14"end end;if A.Frostscythe:IsReady()and(g:BuffUp(A.GatheringStormBuff)and EnemiesCount10yd>2 and not X)then if m(A.Frostscythe,nil,nil,not a5[8])then Z=207230;return"frostscythe aoe 16"end end;if A.Obliterate:IsReady()and(X and g:BuffStack(A.DeathsDueBuff)<4 or g:BuffUp(A.GatheringStormBuff))then if m(A.Obliterate,nil,nil,not a5[8])then Z=49020;return"obliterate aoe 18"end end;if A.FrostStrike:IsReady()and not y then if a1.CastTargetIf(A.FrostStrike,EnemiesMelee,"max",ak,aq)then return"frost_strike aoe 20"end end;if A.Frostscythe:IsReady()and not X then if m(A.Frostscythe,nil,nil,not a5[8])then Z=207230;return"frostscythe aoe 22"end end;if A.Obliterate:IsReady()then if a1.CastTargetIf(A.Obliterate,EnemiesMelee,"max",ak,as)then return"obliterate aoe 24"end end;if A.GlacialAdvance:IsReady()then if m(A.GlacialAdvance,nil,nil,not a5[30])then Z=194913;return"glacial_advance aoe 26"end end;if A.Frostscythe:IsReady()then if m(A.Frostscythe,nil,nil,not a5[8])then Z=207230;return"frostscythe aoe 28"end end;if A.FrostStrike:IsReady()and not y then if a1.CastTargetIf(A.FrostStrike,EnemiesMelee,"max",ak,ar)then return"frost_strike aoe 30"end end;if A.HornofWinter:IsCastable()then if m(A.HornofWinter,nil)then Z=57330;return"horn_of_winter aoe 32"end end;if A.ArcaneTorrent:IsCastable()and n()and a2.Commons.Enabled.Racials then if m(A.ArcaneTorrent,nil,nil,not a5[8])then Z=155145;return"arcane_torrent aoe 34"end end end;local function aJ()if A.RemorselessWinter:IsReady()and(EnemiesCount10yd>=2 or O)then if m(A.RemorselessWinter,nil,nil,not a5[8])then Z=196770;return"remorseless_winter bospooling 4"end end;if A.Obliterate:IsReady()then if a1.CastTargetIf(A.Obliterate,EnemiesMelee,"max",ak,at)then return"obliterate bospooling 6"end end;if A.HowlingBlast:IsReady()and V then if m(A.HowlingBlast)then Z=49184;return"howling_blast bospooling 2"end end;if A.Frostscythe:IsReady()and(g:BuffUp(A.KillingMachineBuff)and g:RunicPowerDeficit()>15+ag(A.RunicAttenuation:IsAvailable())*5 and EnemiesMeleeCount>2 and not X)then if m(A.Frostscythe,nil,nil,not a5[8])then Z=207230;return"frostscythe bospooling 12"end end;if A.Frostscythe:IsReady()and(g:RunicPowerDeficit()>=35+ag(A.RunicAttenuation:IsAvailable())*5 and EnemiesMeleeCount>2 and not X)then if m(A.Frostscythe,nil,nil,not a5[8])then Z=207230;return"frostscythe bospooling 14"end end;if A.Obliterate:IsReady()then if not o()and g:RunicPowerDeficit()>=25 then if m(A.Obliterate)then Z=49020;return"obliterate bospooling"end elseif a1.CastTargetIf(A.Obliterate,EnemiesMelee,"max",ak,au)then return"obliterate bospooling "end end;if A.GlacialAdvance:IsReady()and(g:RunicPowerDeficit()<20 and EnemiesCount10yd>=2 and A.PillarofFrost:CooldownRemains()>5)then if m(A.GlacialAdvance,nil,nil,a5[100])then Z=194913;return"glacial_advance bospooling 8"end end;if A.FrostStrike:IsReady()and not y then if a1.CastTargetIf(A.FrostStrike,EnemiesMelee,"max",ak,av)then return"frost_strike bospooling 10"end end;if A.GlacialAdvance:IsReady()and(A.PillarofFrost:CooldownRemains()>g:RuneTimeToX(4)and g:RunicPowerDeficit()<40 and EnemiesCount10yd>=2)then if m(A.GlacialAdvance,nil,nil,a5[100])then Z=194913;return"glacial_advance bospooling 16"end end;if A.FrostStrike:IsReady()and not y then if a1.CastTargetIf(A.FrostStrike,EnemiesMelee,"max",ak,aw)then return"frost_strike bospooling 16"end end;if l.CastAnnotated(A.Pool,false,"WAIT")then return"Wait Resources BoS Pooling"end end;local function aK()if A.Obliterate:IsReady()then if not o()and g:RunicPowerDeficit()>=45+ag(A.RunicAttenuation:IsAvailable())*5 then if m(A.Obliterate)then Z=49020;return"obliterate bosticking2 "end elseif a1.CastTargetIf(A.Obliterate,EnemiesMelee,"max",ak,az)then return"obliterate bosticking 2"end end;if A.RemorselessWinter:IsReady()and(O or EnemiesCount10yd>=2 or g:RunicPower()<32)then if m(A.RemorselessWinter,nil,nil,not a5[8])then Z=196770;return"remorseless_winter bosticking 4"end end;if A.DeathAndDecay:IsReady()and g:RunicPower()<32 then if m(A.DeathAndDecay)then Z=43265;return"death_and_decay bosticking 6"end end;if A.HowlingBlast:IsReady()and(V and(g:RunicPowerDeficit()<55 or g:RuneTimeToX(3)<=g:GCD()or ab or EnemiesCount10yd>=2 or g:BuffRemains(A.RimeBuff)<3)or g:RunicPower()<32)then if m(A.HowlingBlast,nil,nil,not a5[30])then Z=49184;return"howling_blast bosticking 8"end end;if A.Frostscythe:IsReady()and(g:BuffUp(A.KillingMachineBuff)and EnemiesCount10yd>2 and not X)then if m(A.Frostscythe,nil,nil,not a5[8])then Z=207230;return"frostscythe bosticking 10"end end;if A.Obliterate:IsReady()then if not o()and g:BuffUp(A.KillingMachineBuff)then if m(A.Obliterate)then Z=49020;return"obliterate bosticking"end elseif a1.CastTargetIf(A.Obliterate,EnemiesMelee,"max",ak,ax)then return"obliterate bosticking "end end;if A.HornofWinter:IsCastable()and(g:RunicPowerDeficit()>=40 and g:RuneTimeToX(3)>g:GCD())then if m(A.HornofWinter,nil)then Z=57330;return"horn_of_winter bosticking 12"end end;if A.Frostscythe:IsReady()and(EnemiesCount10yd>2 and not X)then if m(A.Frostscythe,nil,nil,not a5[8])then Z=207230;return"frostscythe bosticking 14"end end;if A.Obliterate:IsReady()then if not o()and(g:RunicPowerDeficit()>25 or g:RuneTimeToX(3)<g:GCD())then if m(A.Obliterate)then Z=49020;return"obliterate bosticking 16"end elseif a1.CastTargetIf(A.Obliterate,EnemiesMelee,"max",ak,ay)then return"obliterate bosticking 16"end end;if A.HowlingBlast:IsReady()and V then if m(A.HowlingBlast,nil,nil,not a5[30])then Z=49184;return"howling_blast bosticking 18"end end;if A.ArcaneTorrent:IsCastable()and g:RunicPowerDeficit()>50 and n()and a2.Commons.Enabled.Racials then if m(A.ArcaneTorrent,nil,nil,not a5[8])then Z=155145;return"arcane_torrent bosticking 20"end end;if l.CastAnnotated(A.Pool,false,"WAIT")then return"Wait Resources BoS Ticking"end end;local function aL()if A.ChainsofIce:IsReady()and(d.FilteredFightRemains(Enemies10yd,"<",g:GCD())and(g:Rune()<2 or g:BuffDown(A.KillingMachineBuff)and(not a2.Frost.Using2H and g:BuffStack(A.ColdHeartBuff)>=4+ag(a8)or a2.Frost.Using2H and g:BuffStack(A.ColdHeartBuff)>8+ag(a8))or g:BuffUp(A.KillingMachineBuff)and(not a2.Frost.Using2H and g:BuffStack(A.ColdHeartBuff)>8+ag(a8)or a2.Frost.Using2H and g:BuffStack(A.ColdHeartBuff)>10+ag(a8))))then if m(A.ChainsofIce,nil,nil,not a5[30])then Z=45524;return"chains_of_ice coldheart 2"end end;if A.ChainsofIce:IsReady()and(not A.Obliteration:IsAvailable()and g:BuffUp(A.PillarofFrostBuff)and g:BuffStack(A.ColdHeartBuff)>=10 and g:BuffRemains(A.PillarofFrostBuff)<g:GCD()*(1+ag(A.FrostwyrmsFury:CooldownUp()))or g:BuffUp(A.UnholyStrengthBuff)and g:BuffRemains(A.UnholyStrengthBuff)<g:GCD()or g:BuffUp(A.ChaosBaneBuff)and g:BuffRemains(A.ChaosBaneBuff)<g:GCD())then if m(A.ChainsofIce,nil,nil,not a5[30])then Z=45524;return"chains_of_ice coldheart 4"end end;if A.ChainsofIce:IsReady()and(not A.Obliteration:IsAvailable()and N and g:BuffDown(A.PillarofFrostBuff)and A.PillarofFrost:CooldownRemains()>15 and(g:BuffStack(A.ColdHeartBuff)>=10 and(g:BuffUp(A.UnholyStrengthBuff)or g:BuffUp(A.ChaosBaneBuff))or g:BuffStack(A.ColdHeartBuff)>=13))then if m(A.ChainsofIce,nil,nil,not a5[30])then Z=45524;return"chains_of_ice coldheart 6"end end;if A.ChainsofIce:IsReady()and(not A.Obliteration:IsAvailable()and not N and g:BuffStack(A.ColdHeartBuff)>=10 and g:BuffDown(A.PillarofFrostBuff)and A.PillarofFrost:CooldownRemains()>20)then if m(A.ChainsofIce,nil,nil,not a5[30])then Z=45524;return"chains_of_ice coldheart 8"end end;if A.ChainsofIce:IsReady()and(A.Obliteration:IsAvailable()and g:BuffDown(A.PillarofFrostBuff)and(g:BuffStack(A.ColdHeartBuff)>=14 and(g:BuffUp(A.UnholyStrengthBuff)or g:BuffUp(A.ChaosBaneBuff)))or g:BuffStack(A.ColdHeartBuff)>=19 or A.PillarofFrost:CooldownRemains()<3 and g:BuffStack(A.ColdHeartBuff)>=14)then if m(A.ChainsofIce,nil,nil,not a5[30])then Z=45524;return"chains_of_ice coldheart 10"end end end;local function aM()if B.PotionofSpectralStrength:IsReady()and n()and a2.Commons.Enabled.Potions and s and g:BuffUp(A.PillarofFrostBuff)then if m(B.PotionofSpectralStrength,nil,nil)then Z=37;return"potion cooldowns 2"end end;if A.EmpowerRuneWeapon:IsCastable()and n()and(A.Obliteration:IsAvailable()and g:Rune()<6 and(T or U)and(A.PillarofFrost:CooldownRemains()<5 and(A.Fleshcraft:CooldownRemains()>5 and A.PustuleEruption:SoulbindEnabled()or not A.PustuleEruption:SoulbindEnabled())or g:BuffUp(A.PillarofFrostBuff)or d.FilteredFightRemains(Enemies10yd,"<",20)))then if m(A.EmpowerRuneWeapon,nil)then Z=47568;return"empower_rune_weapon cooldowns 4"end end;if A.EmpowerRuneWeapon:IsCastable()and n()and(A.BreathofSindragosa:IsAvailable()and g:RunicPowerDeficit()>30 and g:RuneTimeToX(5)>g:GCD()and(g:BuffUp(A.BreathofSindragosa)or d.FilteredFightRemains(Enemies10yd,"<",20)))then if m(A.EmpowerRuneWeapon,nil)then Z=47568;return"empower_rune_weapon cooldowns 6"end end;if A.EmpowerRuneWeapon:IsCastable()and n()and A.Icecap:IsAvailable()then if m(A.EmpowerRuneWeapon,nil)then Z=47568;return"empower_rune_weapon cooldowns 8"end end;if A.PillarofFrost:IsCastable()and n()and(A.BreathofSindragosa:IsAvailable()and(T or U)and(not A.BreathofSindragosa:CooldownUp()or A.BreathofSindragosa:CooldownUp()and g:RunicPowerDeficit()<50))then if m(A.PillarofFrost,nil)then Z=51271;return"pillar_of_frost cooldowns 10"end end;if A.PillarofFrost:IsCastable()and n()and(A.Icecap:IsAvailable()and not g:BuffUp(A.PillarofFrost))then if m(A.PillarofFrost,nil)then Z=51271;return"pillar_of_frost cooldowns 12"end end;if A.PillarofFrost:IsCastable()and n()and(A.Obliteration:IsAvailable()and g:RunicPower()>=25 and(T or U)and(A.GatheringStorm:IsAvailable()and g:BuffUp(A.RemorselessWinter)or not A.GatheringStorm:IsAvailable()))then if m(A.PillarofFrost,nil)then Z=51271;return"pillar_of_frost cooldowns 14"end end;if A.BreathofSindragosa:IsCastable()and not y and n()and g:BuffUp(A.PillarofFrostBuff)then if m(A.BreathofSindragosa,nil,nil,not a5[8])then Z=152279;return"breath_of_sindragosa cooldowns 16"end end;if A.FrostwyrmsFury:IsCastable()and n()and(EnemiesCount10yd==1 and g:BuffRemains(A.PillarofFrostBuff)<g:GCD()and g:BuffUp(A.PillarofFrostBuff)and not A.Obliteration:IsAvailable()or d.FilteredFightRemains(Enemies10yd,"<",3))then if m(A.FrostwyrmsFury,nil,nil,not a5[40])then Z=279302;return"frostwyrms_fury cooldowns 18"end end;if A.FrostwyrmsFury:IsCastable()and n()and(EnemiesMeleeCount>=2 and g:BuffUp(A.PillarofFrostBuff)and g:BuffRemains(A.PillarofFrostBuff)<g:GCD())then if m(A.FrostwyrmsFury,nil,nil,not a5[40])then Z=279302;return"frostwyrms_fury cooldowns 20"end end;if A.FrostwyrmsFury:IsCastable()and n()and(A.Obliteration:IsAvailable()and g:BuffUp(A.PillarofFrostBuff)and((g:BuffRemains(A.PillarofFrostBuff)<g:GCD()or g:BuffUp(A.UnholyStrengthBuff)and g:BuffRemains(A.UnholyStrengthBuff)<g:GCD())and(h:DebuffStack(A.RazoriceDebuff)==5 or not M)))then if m(A.FrostwyrmsFury,nil,nil,not a5[40])then Z=279302;return"frostwyrms_fury cooldowns 22"end end;if A.HypothermicPresence:IsCastable()and n()and(A.BreathofSindragosa:IsAvailable()and g:RunicPowerDeficit()>40 and g:Rune()<=3 and(g:BuffUp(A.BreathofSindragosa)or A.BreathofSindragosa:CooldownRemains()>40)or not A.BreathofSindragosa:IsAvailable()and g:RunicPowerDeficit()>=25)then if m(A.HypothermicPresence,nil)then Z=321995;return"hypothermic_presence cooldowns 24"end end;if A.RaiseDead:IsCastable()and n()and A.PillarofFrost:CooldownRemains()<=5 then if m(A.RaiseDead,nil,a2.Commons.DisplayStyle.RaiseDead)then Z=46585;return"raise_dead cooldowns 26"end end;if A.SacrificialPact:IsReady()and(EnemiesCount10yd>=2 and(d.FilteredFightRemains(Enemies10yd,"<",3)or g:BuffDown(A.BreathofSindragosa)and(A.RaiseDead:TimeSinceLastCast()>55+g:GCD()and A.RaiseDead:TimeSinceLastCast()<60-g:GCD()or h:TimeToDie()<g:GCD())))then if m(A.SacrificialPact,nil,nil,not a5[8])then Z=237574;return"sacrificial_pact cooldowns 28"end end;if A.DeathAndDecay:IsReady()and(EnemiesCount10yd>5 or aa)then if m(A.DeathAndDecay,nil)then return"death_and_decay cooldowns 30"end end end;local function aN()if A.DeathsDue:IsReady()and p and(T or U)then if m(A.DeathsDue,nil,nil,not a5[10])then Z=324128;return"deaths_due covenants 2"end end;if A.SwarmingMist:IsReady()and p and(g:RunicPowerDeficit()>13 and A.PillarofFrost:CooldownRemains()<3 and not A.BreathofSindragosa:IsAvailable()and T)then if m(A.SwarmingMist,nil,nil,not a5[10])then Z=311648;return"swarming_mist covenants 4"end end;if A.SwarmingMist:IsReady()and p and(not A.BreathofSindragosa:IsAvailable()and U)then if m(A.SwarmingMist,nil,nil,not a5[10])then Z=311648;return"swarming_mist covenants 6"end end;if A.SwarmingMist:IsReady()and p and(A.BreathofSindragosa:IsAvailable()and(g:BuffUp(A.BreathofSindragosa)and(T and g:RunicPowerDeficit()>40 or U and g:RunicPowerDeficit()>60 or U)or g:BuffDown(A.BreathofSindragosa)and A.BreathofSindragosa:CooldownDown()))then if m(A.SwarmingMist,nil,nil,not a5[10])then Z=311648;return"swarming_mist covenants 8"end end;if A.AbominationLimb:IsCastable()and p and(A.PillarofFrost:CooldownRemains()<3 and T and(A.BreathofSindragosa:IsAvailable()and g:RunicPowerDeficit()<60 and A.BreathofSindragosa:CooldownRemains()<2 or not A.BreathofSindragosa:IsAvailable()))then if m(A.AbominationLimb,nil,nil,not a5[10])then Z=315443;return"abomination_limb covenants 10"end end;if A.AbominationLimb:IsCastable()and p and U then if m(A.AbominationLimb,nil,nil,not a5[10])then Z=315443;return"abomination_limb covenants 12"end end;if A.ShackleTheUnworthy:IsCastable()and p and(T and(A.PillarofFrost:CooldownRemains()<3 or A.Icecap:IsAvailable()))then if m(A.ShackleTheUnworthy,nil,nil,not a5[10])then Z=312202;return"shackle_the_unworthy covenants 14"end end;if A.ShackleTheUnworthy:IsCastable()and p and U then if m(A.ShackleTheUnworthy,nil,nil,not a5[10])then return"shackle_the_unworthy covenants 16"end end end;local function aO()if A.BloodFury:IsCastable()and g:BuffUp(A.PillarofFrostBuff)then if m(A.BloodFury,nil)then Z=20572;return"blood_fury racials 2"end end;if A.Berserking:IsCastable()and g:BuffUp(A.PillarofFrostBuff)then if m(A.Berserking,nil)then Z=26297;return"berserking racials 4"end end;if A.ArcanePulse:IsCastable()and(g:BuffUp(A.PillarofFrostBuff)and EnemiesMeleeCount>=2 and g:BuffDown(A.PillarofFrostBuff)and(g:Rune()<=1 and g:RunicPowerDeficit()>=60))then if m(A.ArcanePulse,nil,nil,not a5[8])then Z=260364;return"arcane_pulse racials 6"end end;if A.LightsJudgment:IsCastable()and g:BuffUp(A.PillarofFrostBuff)then if m(A.LightsJudgment,nil,nil,not a5[40])then Z=255647;return"lights_judgment racials 8"end end;if A.AncestralCall:IsCastable()and(g:BuffUp(A.PillarofFrostBuff)and g:BuffUp(A.EmpowerRuneWeaponBuff))then if m(A.AncestralCall,nil)then Z=274738;return"ancestral_call racials 10"end end;if A.Fireblood:IsCastable()and(g:BuffRemains(A.PillarofFrostBuff)<=8 and g:BuffUp(A.PillarofFrostBuff)and g:BuffUp(A.EmpowerRuneWeaponBuff))then if m(A.Fireblood,nil)then Z=265221;return"fireblood racials 12"end end;if A.BagofTricks:IsCastable()and(g:BuffUp(A.PillarofFrostBuff)and(g:BuffRemains(A.PillarofFrostBuff)<5 and A.ColdHeart:IsAvailable()or not A.ColdHeart:IsAvailable()and g:BuffRemains(A.PillarofFrostBuff)<3)and EnemiesMeleeCount==1)then if m(A.BagofTricks,nil,nil,not a5[40])then Z=312411;return"bag_of_tricks racials 14"end end end;local function aP()if B.InscrutableQuantumDevice:IsEquippedAndReady()and(g:BuffUp(A.PillarofFrostBuff)or h:TimeToX(20)<5 or d.FilteredFightRemains(Enemies10yd,"<",21))then if m(B.InscrutableQuantumDevice,nil,nil)then if B.InscrutableQuantumDevice:ID()==H and a2.Commons.Enabled.TopTrinket==true then Z=24;return"top trinket 1"elseif B.InscrutableQuantumDevice:ID()==J and a2.Commons.Enabled.BottomTrinket then Z=31;return"top trinket 2"end end end;if A.PillarofFrost:CooldownUp()or A.PillarofFrost:CooldownRemains()>20 then if(a2.Commons.Enabled.TopTrinket or a2.Commons.Enabled.BottomTrinket)and n()then local aQ=g:GetUseableTrinkets(C)if aQ then if m(aQ,nil,nil)then if aQ:ID()==H and a2.Commons.Enabled.TopTrinket then Z=24;return"top trinket 1"elseif aQ:ID()==J and a2.Commons.Enabled.BottomTrinket then Z=30;return"top trinket 2"end end end end end end;local function aR()if A.RemorselessWinter:IsReady()and(O or EnemiesCount10yd>=2)then if m(A.RemorselessWinter,nil,nil,not a5[8])then Z=196770;return"remorseless_winter obliteration_pooling 2"end end;if A.GlacialAdvance:IsReady()and(EnemiesCount10yd>=2 and A.Frostscythe:IsAvailable())then if m(A.GlacialAdvance,nil,nil,not a5[100])then Z=194913;return"glacial_advance obliteration_pooling "end end;if A.Frostscythe:IsReady()and(g:BuffUp(A.KillingMachineBuff)and EnemiesCount10yd>2 and not X)then if m(A.Frostscythe,nil,nil,not a5[100])then Z=207230;return"frostscythe obliteration_pooling "end end;if A.Obliterate:IsReady()then if not o()and(g:RuneTimeToX(4)<g:GCD()or g:RunicPower()<=45)then if m(A.Obliterate)then Z=49020;return"obliterate obliteration_pooling 6"end elseif a1.CastTargetIf(A.Obliterate,EnemiesMelee,"max",ak,aA)then return"obliterate obliteration_pooling 6"end end;if A.FrostStrike:IsReady()and not y and(Enemies10yd==1 and W)then if m(A.FrostStrike,nil,nil,not a5[8])then Z=49143;return"frost_strike obliteration_pooling 4"end end;if A.HowlingBlast:IsReady()and V then if m(A.HowlingBlast)then Z=49184;return"howling_blast obliteration_pooling 7"end end;if A.GlacialAdvance:IsReady()and(EnemiesCount10yd>=2 and g:RunicPowerDeficit()<60)then if m(A.GlacialAdvance,nil,nil,a5[100])then Z=194913;return"glacial_advance obliteration_pooling 8"end end;if A.FrostStrike:IsReady()and not y then if not o()and g:RunicPowerDeficit()<70 then if m(A.FrostStrike)then Z=49143;return"frost_strike obliteration_pooling 10"end elseif a1.CastTargetIf(A.FrostStrike,EnemiesMelee,"max",ak,aB)then return"frost_strike obliteration_pooling 10"end end;if A.Obliterate:IsReady()then if not o()and g:Rune()>=3 then if m(A.Obliterate)then Z=49020;return"obliterate obliteration_pooling 12"end elseif a1.CastTargetIf(A.Obliterate,EnemiesMelee,"max",ak,aC)then return"obliterate obliteration_pooling 12"end end;if A.Frostscythe:IsReady()and(EnemiesCount10yd>=4 and not X)then if m(A.Frostscythe,nil,nil,not a5[8])then Z=207230;return"frostscythe obliteration_pooling 14"end end;if l.CastAnnotated(A.Pool,false,"WAIT")then return"Wait Resources Obliteration Pooling"end end;local function aS()if A.RemorselessWinter:IsReady()and(EnemiesCount10yd>=3 and O)then if m(A.RemorselessWinter,nil,nil,not a5[8])then Z=196770;return"remorseless_winter obliteration 2"end end;if A.HowlingBlast:IsReady()and(g:BuffDown(A.KillingMachineBuff)and g:Rune()>=3 and(g:BuffRemains(A.RimeBuff)<3 and g:BuffUp(A.RimeBuff)or h:DebuffDown(A.FrostFeverDebuff)))then if m(A.HowlingBlast,nil,nil,not a5[30])then Z=49184;return"howling_blast obliteration 4"end end;if A.GlacialAdvance:IsReady()and(g:BuffDown(A.KillingMachineBuff)and EnemiesCount10yd>=2 or g:BuffDown(A.KillingMachineBuff)and(h:DebuffStack(A.RazoriceDebuff)<5 or h:DebuffRemains(A.RazoriceDebuff)<g:GCD()*4))then if m(A.GlacialAdvance,nil,nil,a5[100])then Z=194913;return"glacial_advance obliteration 10"end end;if A.Frostscythe:IsReady()and(g:BuffUp(A.KillingMachineBuff)and EnemiesCount10yd>2 and not X)then if m(A.Frostscythe,nil,nil,not a5[8])then Z=207230;return"frostscythe obliteration 6"end end;if A.Obliterate:IsReady()then if not o()and g:BuffUp(A.KillingMachineBuff)then if m(A.Obliterate)then Z=49020;return"obliterate obliteration 8"end elseif a1.CastTargetIf(A.Obliterate,EnemiesMelee,"max",ak,aD)then return"obliterate obliteration 8"end end;if A.FrostStrike:IsReady()and not y and(EnemiesCount10yd==1 and W)then if m(A.FrostStrike,nil,nil,not a5[8])then Z=49143;return"frost_strike obliteration 12"end end;if A.HowlingBlast:IsReady()and(V and EnemiesCount10yd>=2)then if m(A.HowlingBlast,nil,nil,not a5[30])then Z=49184;return"howling_blast obliteration 14"end end;if A.GlacialAdvance:IsReady()and EnemiesCount10yd>=2 then if m(A.GlacialAdvance,nil,nil,a5[100])then Z=194913;return"glacial_advance obliteration 16"end end;if A.FrostStrike:IsReady()and not y then if not o()and(not A.Avalanche:IsAvailable()and g:BuffDown(A.KillingMachineBuff)or A.Avalanche:IsAvailable()and not V or V and g:RuneTimeToX(2)>=g:GCD())then if m(A.FrostStrike)then Z=49143;return"frost_strike obliteration 18"end elseif a1.CastTargetIf(A.FrostStrike,EnemiesMelee,"max",ak,aF)then return"frost_strike obliteration 18"end end;if A.HowlingBlast:IsReady()and V then if m(A.HowlingBlast,nil,nil,not a5[30])then Z=49184;return"howling_blast obliteration 20"end end;if A.Obliterate:IsReady()then if not o()then if m(A.Obliterate)then Z=49020;return"obliterate obliteration 8"end elseif a1.CastTargetIf(A.Obliterate,EnemiesMelee,"max",ak,aE)then return"obliterate obliteration 22"end end end;local function aT()if A.RemorselessWinter:IsReady()and O then if m(A.RemorselessWinter,nil,nil,not a5[8])then Z=196770;return"remorseless_winter standard 2"end end;if A.Obliterate:IsReady()and g:BuffUp(A.KillingMachineBuff)then if m(A.Obliterate,nil,nil,not a5[8])then Z=49020;return"obliterate standard 4"end end;if A.HowlingBlast:IsReady()and(V and g:BuffRemains(A.RimeBuff)<3)then if m(A.HowlingBlast,nil,nil,not a5[30])then Z=49184;return"howling_blast standard 6"end end;if A.FrostStrike:IsReady()and not y and W then if m(A.FrostStrike,nil,nil,not a5[8])then Z=49143;return"frost_strike standard 8"end end;if A.GlacialAdvance:IsReady()and(not M and(h:DebuffStack(A.RazoriceDebuff)<5 or h:DebuffRemains(A.RazoriceDebuff)<g:GCD()*4))then if m(A.GlacialAdvance,nil,nil,a5[100])then Z=194913;return"glacial_advance standard 10"end end;if A.FrostStrike:IsReady()and not y and(A.RemorselessWinter:CooldownRemains()<=2*g:GCD()and A.GatheringStorm:IsAvailable())then if m(A.FrostStrike,nil,nil,not a5[8])then Z=49143;return"frost_strike standard 12"end end;if A.HowlingBlast:IsReady()and V then if m(A.HowlingBlast,nil,nil,not a5[30])then Z=49184;return"howling_blast standard 14"end end;if A.FrostStrike:IsReady()and not y and g:RunicPowerDeficit()<15+ag(A.RunicAttenuation:IsAvailable())*5 then if m(A.FrostStrike,nil,nil,not a5[8])then Z=49143;return"frost_strike standard 18"end end;if A.Obliterate:IsReady()and(g:BuffDown(A.FrozenPulseBuff)and A.FrozenPulse:IsAvailable()or X and g:BuffStack(A.DeathsDueBuff)<4 or A.GatheringStorm:IsAvailable()and g:BuffUp(A.RemorselessWinter)or g:RunicPowerDeficit()>25+ag(A.RunicAttenuation:IsAvailable())*5)then if m(A.Obliterate,nil,nil,not a5[8])then Z=49020;return"obliterate standard 16"end end;if A.FrostStrike:IsReady()and not y then if m(A.FrostStrike,nil,nil,not a5[8])then Z=49143;return"frost_strike standard 22"end end;if A.HornofWinter:IsCastable()then if m(A.HornofWinter,nil)then Z=57330;return"horn_of_winter standard 24"end end;if A.ArcaneTorrent:IsCastable()and n()and Setting.Commons.Enabled.Racials then if m(A.ArcaneTorrent,nil)then return"arcane_torrent standard 26"end end end;local function aU()Opener=HeroRotationCharDB.Toggles[6]p=HeroRotationCharDB.Toggles[4]q=HeroRotationCharDB.Toggles[5]t=HeroRotationCharDB.Toggles[12]u=HeroRotationCharDB.Toggles[13]v=HeroRotationCharDB.Toggles[14]s=HeroRotationCharDB.Toggles[15]w=HeroRotationCharDB.Toggles[16]x=HeroRotationCharDB.Toggles[81]y=false end;local function aV()L=not aj()EnemiesMelee=g:GetEnemiesInMeleeRange(8)Enemies10yd=g:GetEnemiesInMeleeRange(10)EnemiesCount10yd=#Enemies10yd;EnemiesMeleeCount=#EnemiesMelee;a6()if not BotOn then Y=0;Z=0;_=0 end;if Y>0 then Y=0 end;if Z>0 then Z=0 end;if _>0 then _=0 end;K=aU()if l.GUISettings.General.OpenerReset>0 and not HeroRotationCharDB.Toggles[6]then starttime=GetTime()endtime=starttime+l.GUISettings.General.OpenerReset elseif l.GUISettings.General.OpenerReset>0 and endtime~=nil and GetTime()>endtime and HeroRotationCharDB.Toggles[6]then HeroRotationCharDB.Toggles[6]=not HeroRotationCharDB.Toggles[6]l.ToggleIconFrame:UpdateButtonText(6)l.Print("Opener is now "..(HeroRotationCharDB.Toggles[6]and"|cff00ff00enabled|r."or"|cffff0000disabled|r."))end;if u and A.AntiMagicZone:IsUsableP()and g:AffectingCombat()and A.AntiMagicZone:CooldownRemains(BypassRecovery)<=0 then if m(A.AntiMagicZone,nil,nil,nil)then Z=51052;return"queue AMZ"end elseif(not A.AntiMagicZone:IsUsableP()or A.AntiMagicZone:CooldownRemains()>0 or not g:AffectingCombat())and u then HeroRotationCharDB.Toggles[13]=not HeroRotationCharDB.Toggles[13]l.Print("Anti-Magic Zone Queue is now "..(HeroRotationCharDB.Toggles[13]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if v and A.DeathGrip:IsUsableP()and A.DeathGrip:CooldownRemains(BypassRecovery)<=0 and a1.TargetIsValid()and f("mouseover"):GUID()~=nil then if m(A.DeathGrip,nil,nil,nil)then Y=149576;return"queue DeathGrip MO"end elseif v and A.DeathGrip:IsUsableP()and A.DeathGrip:CooldownRemains(BypassRecovery)<=0 and a1.TargetIsValid()then if m(A.DeathGrip,nil,nil,nil)then Z=49576;return"queue DeathGrip"end elseif(not A.DeathGrip:IsUsableP()or A.DeathGrip:CooldownRemains()>0 or not a1.TargetIsValid())and v then HeroRotationCharDB.Toggles[14]=not HeroRotationCharDB.Toggles[14]l.Print("Death Grip Queue is now "..(HeroRotationCharDB.Toggles[14]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if w and A.Asphyxiate:IsUsableP()and A.Asphyxiate:CooldownRemains(BypassRecovery)<=0 and f("mouseover"):GUID()~=nil then if m(A.Asphyxiate,nil,nil,nil)then Y=1221562;return"queue Asphyxiate MO"end elseif w and A.Asphyxiate:IsUsableP()and A.Asphyxiate:CooldownRemains(BypassRecovery)<=0 and a1.TargetIsValid()then if m(A.Asphyxiate,nil,nil,nil)then Z=221562;return"queue Asphyxiate"end elseif(not A.Asphyxiate:IsUsableP()or A.Asphyxiate:CooldownRemains()>0)and w then HeroRotationCharDB.Toggles[16]=not HeroRotationCharDB.Toggles[16]l.Print("Asphyxiate Queue is now "..(HeroRotationCharDB.Toggles[16]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if x and A.ControlUndead:IsUsableP()and A.ControlUndead:CooldownRemains(BypassRecovery)<=0 and not g:PrevGCD(1,A.ControlUndead)then if l.Cast(A.ControlUndead,nil,nil,nil)then if f("mouseover"):GUID()~=nil and f("mouseover"):IsInRange(30)then Y=1111673;return"queue ControlUndead MO"else Z=111673;return"queue ControlUndead"end end elseif(not A.ControlUndead:IsUsableP()or A.ControlUndead:CooldownRemains()>0 or g:PrevGCD(1,A.ControlUndead))and x then HeroRotationCharDB.Toggles[81]=not HeroRotationCharDB.Toggles[81]l.Print("Control Undead Queue is now "..(HeroRotationCharDB.Toggles[81]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if not g:AffectingCombat()and a1.TargetIsValid()and not g:IsDeadOrGhost()and r then local K=aH()if K then return K end end;if a1.TargetIsValid()and not g:IsDeadOrGhost()then if not UnitIsEnemy("player","mouseover")and UnitIsDead("mouseover")then if A.RaiseAlly:IsCastable()and g:RunicPower()>=30 then if m(A.RaiseAlly,nil)then Y=161999;return"RaiseAlly MO"end elseif A.RaiseAlly:CooldownRemains(BypassRecovery)<=0 and g:RunicPower()<30 then y=true end end;if g:IsChanneling(j(324631))then if m(A.PoolResources,nil,nil,nil)then Y=36;return"Raise Ally MO"end end;if a2.Commons.UseDefensives then if g:HealthPercentage()<a2.Commons.HealthstoneHP and B.Healthstone:IsReady()and B.Healthstone:CooldownRemains()<=0 then if m(B.Healthstone,nil)then Z=40;return"Healthstone HP"end end;if g:HealthPercentage()<a2.Commons.HealPotHP and B.HealPot:IsReady()and B.HealPot:CooldownRemains()<=0 then if m(B.HealPot,nil)then Z=41;return"HealPot HP"end end;if g:HealthPercentage()<a2.Commons.UseDarkSuccorHP and A.DeathStrike:IsReady()and g:BuffUp(A.DeathStrikeBuff)then if m(A.DeathStrike)then Z=49998;return"DeathStrike Dark Succor HP"end end;if g:HealthPercentage()<a2.Commons.UseDeathStrikeHP and A.DeathStrike:IsReady()then if m(A.DeathStrike)then Z=49998;return"DeathStrike HP"end end;if g:HealthPercentage()<a2.Commons.IceboundFortitudeHP and A.IceboundFortitude:IsReady()then if m(A.IceboundFortitude)then Z=43;return"Icebound Fortitude HP"end end;if g:HealthPercentage()<a2.Commons.LichborneHP and A.Lichborne:IsReady()then if m(A.Lichborne)then Z=44;return"Lichborne HP"end end;if g:HealthPercentage()<a2.Commons.AntiMagicShellHP and A.AntiMagicShell:IsReady()then if m(A.AntiMagicShell)then Z=45;return"Anti-Magic Shell HP"end end;if g:HealthPercentage()<a2.Commons.DeathPactHP and A.DeathPact:IsReady()then if m(A.DeathPact)then Z=46;return"Death Pact HP"end end end;if A.DeathStrike:IsReady()and not y and not L then if m(A.DeathStrike,nil,nil,not a5[5])then Z=49998;return"death_strike low hp or proc"end end;T=EnemiesCount10yd==1 or not o()U=EnemiesCount10yd>=2 and o()V=g:BuffUp(A.RimeBuff)and(not ab or ab and g:RunicPowerDeficit()>8)W=A.EradicatingBlow:ConduitEnabled()and g:BuffStack(A.EradicatingBlowBuff)==2 or A.UnleashedFrenzy:ConduitEnabled()and g:BuffRemains(A.UnleashedFrenzyBuff)<g:GCD()*2;X=g:BuffUp(A.DeathAndDecayBuff)and a0==3;if A.RemorselessWinter:IsReady()and(A.Everfrost:ConduitEnabled()and A.GatheringStorm:IsAvailable()and not A.Obliteration:IsAvailable()and not A.PillarofFrost:CooldownUp())then if m(A.RemorselessWinter,nil,nil,not a5[8])then Z=196770;return"remorseless_winter main 2"end end;if A.HowlingBlast:IsReady()and h:DebuffRefreshable(A.FrostFeverDebuff)and(A.Icecap:IsAvailable()or g:BuffDown(A.BreathofSindragosa)and A.BreathofSindragosa:IsAvailable()or A.Obliteration:IsAvailable()and A.PillarofFrost:CooldownDown()and g:BuffDown(A.KillingMachineBuff))then if m(A.HowlingBlast,nil)then Z=49184;return"howling_blast main 4"end end;if A.HowlingBlast:IsReady()and(A.Icecap:IsAvailable()or g:BuffDown(A.BreathofSindragosa)and A.BreathofSindragosa:IsAvailable()or A.Obliteration:IsAvailable()and A.PillarofFrost:CooldownDown()and g:BuffDown(A.KillingMachineBuff))then if a1.CastCycle(A.HowlingBlast,Enemies10yd,aG,not h:IsSpellInRange(A.HowlingBlast))then return"howling_blast main 4"end end;if A.GlacialAdvance:IsReady()and(g:BuffRemains(A.IcyTalonsBuff)<=g:GCD()and A.IcyTalons:IsAvailable()and EnemiesCount10yd>=2 and(A.Icecap:IsAvailable()or A.BreathofSindragosa:IsAvailable()and A.BreathofSindragosa:CooldownRemains()>15 or A.Obliteration:IsAvailable()and not g:BuffUp(A.PillarofFrostBuff)))then if m(A.GlacialAdvance,nil,nil,100)then Z=194913;return"glacial_advance main 6"end end;if A.FrostStrike:IsReady()and not y and(g:BuffRemains(A.IcyTalonsBuff)<=g:GCD()and A.IcyTalons:IsAvailable()and(A.Icecap:IsAvailable()or A.BreathofSindragosa:IsAvailable()and g:BuffDown(A.BreathofSindragosa)and A.BreathofSindragosa:CooldownRemains()>10 or A.Obliteration:IsAvailable()and not g:BuffUp(A.PillarofFrostBuff)))then if m(A.FrostStrike)then Z=49143;return"frost_strike main 8"end end;if true then local K=aN()if K then return K end end;if n()and a2.Commons.Enabled.Racials then local K=aO()if K then return K end end;if a2.Commons.Enabled.TopTrinket or a2.Commons.Enabled.BottomTrinket then local K=aP()if K then return K end end;if n()then local K=aM()if K then return K end end;if A.ColdHeart:IsAvailable()and(g:BuffDown(A.KillingMachineBuff)or A.BreathofSindragosa:IsAvailable())and(h:DebuffStack(A.RazoriceDebuff)==5 or not M or d.FilteredFightRemains(Enemies10yd,"<=",g:GCD()))then local K=aL()if K then return K end end;if g:BuffUp(A.BreathofSindragosa)then local K=aK()if K then return K end end;if not a2.Frost.DisableBoSPooling and(A.BreathofSindragosa:IsAvailable()and A.BreathofSindragosa:CooldownRemains()<10)then local K=aJ()if K then return K end end;if g:BuffUp(A.PillarofFrostBuff)and A.Obliteration:IsAvailable()then local K=aS()if K then return K end end;if A.Obliteration:IsAvailable()and A.PillarofFrost:CooldownRemains()<10 then local K=aR()if K then return K end end;if o()and EnemiesCount10yd>=2 then local K=aI()if K then return K end end;if true then local K=aT()if K then return K end end;if l.CastAnnotated(A.Pool,false,"WAIT")then return"Wait/Pool Resources"end end end;local function aW()end;function ReturnSpellF()if Z==0 then return 0 else return Z end end;function ReturnSpellMOF()if Y==0 then return 0 else return Y end end;l.SetAPL(251,aV,aW)