local a,b=...local c=HeroDBC.DBC;local d=HeroLib;local e=HeroCache;local f=d.Unit;local g=f.Player;local h=f.Target;local i=f.Pet;local j=d.Spell;local k=d.Item;local l=HeroRotation;local m=l.Cast;local n=l.CDsON;local o=l.AoEON;local p=HeroRotationCharDB.Toggles[4]local q=HeroRotationCharDB.Toggles[5]local r=HeroRotationCharDB.Toggles[6]local s=HeroRotationCharDB.Toggles[15]local t=HeroRotationCharDB.Toggles[12]local u=HeroRotationCharDB.Toggles[13]local v=HeroRotationCharDB.Toggles[14]local w=HeroRotationCharDB.Toggles[16]local x=HeroRotationCharDB.Toggles[81]local y=HeroRotationCharDB.Toggles[110]local z=false;local strsplit=strsplit;local A=math.min;local pairs=pairs;local GetInventoryItemLink=GetInventoryItemLink;local B=j.DeathKnight.Frost;local C=k.DeathKnight.Frost;local D={C.InscrutableQuantumDevice:ID()}local E=g:GetEquipment()local F=k(0)local G=k(0)local H=0;local I,J=GetInventoryItemID("player",13)local K,J=GetInventoryItemID("player",14)if E[13]then F=k(E[13])end;if E[14]then G=k(E[14])end;local L;local M;local N;local O;local P;local Q,R;local S;local T;local U;local V;local W;local X;local Y;local Z=0;local _=0;local a0=0;local a1=g:CovenantID()d:RegisterForEvent(function()a1=g:CovenantID()end,"COVENANT_CHOSEN")local a2=l.Commons.Everyone;local a3={General=l.GUISettings.General,Commons=l.GUISettings.APL.DeathKnight.Commons,Frost=l.GUISettings.APL.DeathKnight.Frost}local a4={{B.Asphyxiate,"Cast Asphyxiate (Interrupt)",function()return true end}}local a5={5,8,10,30,40,100}local a6={}local function a7()for J,a8 in ipairs(a5)do if a8==8 or 5 then a6[a8]=h:IsInMeleeRange(a8)end;a6[a8]=h:IsInRange(a8)end end;local a9=g:HasLegendaryEquipped(38)local aa=g:HasLegendaryEquipped(39)local ab=g:HasLegendaryEquipped(31)local ac=g:HasLegendaryEquipped(41)local ad=GetInventoryItemLink("player",16)or""local ae=GetInventoryItemLink("player",17)or""local J,J,af=strsplit(":",ad)local J,J,ag=strsplit(":",ae)local N=af=="3370"or ag=="3370"local O=af=="3368"or ag=="3368"d:RegisterForEvent(function()E=g:GetEquipment()F=k(0)G=k(0)if E[13]then F=k(E[13])end;if E[14]then G=k(E[14])end;a9=g:HasLegendaryEquipped(38)aa=g:HasLegendaryEquipped(39)ac=g:HasLegendaryEquipped(41)ad=GetInventoryItemLink("player",16)or""ae=GetInventoryItemLink("player",17)or""J,J,af=strsplit(":",ad)J,J,ag=strsplit(":",ae)N=af=="3370"or ag=="3370"O=af=="3368"or ag=="3368"end,"PLAYER_EQUIPMENT_CHANGED")local function ah(ai)if ai then return 1 else return 0 end end;local function aj(ai)return ai~=0 end;local function ak(al)return(al:DebuffStack(B.RazoriceDebuff)+1)/(al:DebuffRemains(B.RazoriceDebuff)+1)*ah(N)end;local function am(al)return B.RemorselessWinter:CooldownRemains()<=2*g:GCD()and B.GatheringStorm:IsAvailable()end;local function an(al)return g:RunicPowerDeficit()<15+ah(B.RunicAttenuation:IsAvailable())*3 end;local function ao(al)return g:RunicPowerDeficit()>=25+ah(B.RunicAttenuation:IsAvailable())*3 end;local function ap(al)if B.RemorselessWinter:CooldownRemains()<=2*g:GCD()and B.GatheringStorm:IsAvailable()and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Z=149143;return true elseif B.RemorselessWinter:CooldownRemains()<=2*g:GCD()and B.GatheringStorm:IsAvailable()and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a3.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Z=9999;return true elseif B.RemorselessWinter:CooldownRemains()<=2*g:GCD()and B.GatheringStorm:IsAvailable()and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a3.Frost.TargetSwap=="AutoSwap"and t or not o())then _=49143;return true elseif B.RemorselessWinter:CooldownRemains()<=2*g:GCD()and B.GatheringStorm:IsAvailable()then return true end end;local function aq(al)if g:RunicPowerDeficit()<15+ah(B.RunicAttenuation:IsAvailable())*5 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Z=149143;return true elseif g:RunicPowerDeficit()<15+ah(B.RunicAttenuation:IsAvailable())*5 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(a3.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o())then Z=9999;return true elseif g:RunicPowerDeficit()<15+ah(B.RunicAttenuation:IsAvailable())*5 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a3.Frost.TargetSwap=="AutoSwap"and t or not o())then _=49143;return true elseif g:RunicPowerDeficit()<15+ah(B.RunicAttenuation:IsAvailable())*5 then return true end end;local function ar(al)if(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Z=149143;return true elseif(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a3.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Z=9999;return true elseif(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a3.Frost.TargetSwap=="AutoSwap"and t or not o())then _=49143;return true elseif true then return true end end;local function as(al)if g:RunicPowerDeficit()>25+ah(B.RunicAttenuation:IsAvailable())*5 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Z=149020;return true elseif g:RunicPowerDeficit()>25+ah(B.RunicAttenuation:IsAvailable())*5 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a3.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Z=9999;return true elseif g:RunicPowerDeficit()>25+ah(B.RunicAttenuation:IsAvailable())*5 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a3.Frost.TargetSwap=="AutoSwap"and t or not o())then _=49020;return true elseif g:RunicPowerDeficit()>25+ah(B.RunicAttenuation:IsAvailable())*5 then return true end end;local function at(al)if g:BuffUp(B.KillingMachineBuff)and B.PillarofFrost:CooldownRemains()>3 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Z=149020;return true elseif g:BuffUp(B.KillingMachineBuff)and B.PillarofFrost:CooldownRemains()>3 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a3.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Z=9999;return true elseif g:BuffUp(B.KillingMachineBuff)and B.PillarofFrost:CooldownRemains()>3 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a3.Frost.TargetSwap=="AutoSwap"and t or not o())then _=49020;return true elseif g:BuffUp(B.KillingMachineBuff)and B.PillarofFrost:CooldownRemains()>3 then return true end end;local function au(al)if g:RunicPowerDeficit()>=25 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Z=149020;return true elseif g:RunicPowerDeficit()>=25 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a3.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Z=9999;return true elseif g:RunicPowerDeficit()>=25 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a3.Frost.TargetSwap=="AutoSwap"and t or not o())then _=49020;return true elseif g:RunicPowerDeficit()>=25 then return true end end;local function av(al)if g:RunicPowerDeficit()<20 and B.PillarofFrost:CooldownRemains()>5 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Z=149143;return true elseif g:RunicPowerDeficit()<20 and B.PillarofFrost:CooldownRemains()>5 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a3.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Z=9999;return true elseif g:RunicPowerDeficit()<20 and B.PillarofFrost:CooldownRemains()>5 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a3.Frost.TargetSwap=="AutoSwap"and t or not o())then _=49143;return true elseif g:RunicPowerDeficit()<20 and B.PillarofFrost:CooldownRemains()>5 then return true end end;local function aw(al)if B.PillarofFrost:CooldownRemains()>g:RuneTimeToX(4)and g:RunicPowerDeficit()<40 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Z=149143;return true elseif B.PillarofFrost:CooldownRemains()>g:RuneTimeToX(4)and g:RunicPowerDeficit()<40 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a3.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Z=9999;return true elseif B.PillarofFrost:CooldownRemains()>g:RuneTimeToX(4)and g:RunicPowerDeficit()<40 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a3.Frost.TargetSwap=="AutoSwap"and t or not o())then _=49143;return true elseif B.PillarofFrost:CooldownRemains()>g:RuneTimeToX(4)and g:RunicPowerDeficit()<40 then return true end end;local function ax(al)if g:BuffUp(B.KillingMachineBuff)and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Z=149020;return true elseif g:BuffUp(B.KillingMachineBuff)and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a3.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Z=9999;return true elseif g:BuffUp(B.KillingMachineBuff)and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a3.Frost.TargetSwap=="AutoSwap"and t or not o())then _=49020;return true elseif g:BuffUp(B.KillingMachineBuff)then return true end end;local function ay(al)if(g:RunicPowerDeficit()>25 or g:RuneTimeToX(3)<g:GCD())and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Z=149020;return true elseif(g:RunicPowerDeficit()>25 or g:RuneTimeToX(3)<g:GCD())and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a3.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Z=9999;return true elseif(g:RunicPowerDeficit()>25 or g:RuneTimeToX(3)<g:GCD())and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a3.Frost.TargetSwap=="AutoSwap"and t or not o())then _=49020;return true elseif g:RunicPowerDeficit()>25 or g:RuneTimeToX(3)<g:GCD()then return true end end;local function az(al)if g:RunicPowerDeficit()>=45+ah(B.RunicAttenuation:IsAvailable())*5 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Z=149020;return true elseif g:RunicPowerDeficit()>=45+ah(B.RunicAttenuation:IsAvailable())*5 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a3.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Z=9999;return true elseif g:RunicPowerDeficit()>=45+ah(B.RunicAttenuation:IsAvailable())*5 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a3.Frost.TargetSwap=="AutoSwap"and t or not o())then _=49020;return true elseif g:RunicPowerDeficit()>=45+ah(B.RunicAttenuation:IsAvailable())*5 then return true end end;local function aA(al)if(g:RuneTimeToX(4)<g:GCD()or g:RunicPower()<=45)and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Z=149020;return true elseif(g:RuneTimeToX(4)<g:GCD()or g:RunicPower()<=45)and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a3.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Z=9999;return true elseif(g:RuneTimeToX(4)<g:GCD()or g:RunicPower()<=45)and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a3.Frost.TargetSwap=="AutoSwap"and t or not o())then _=49020;return true elseif g:RuneTimeToX(4)<g:GCD()or g:RunicPower()<=45 then return true end end;local function aB(al)if g:RunicPowerDeficit()<70 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Z=149143;return true elseif g:RunicPowerDeficit()<70 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a3.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Z=9999;return true elseif g:RunicPowerDeficit()<70 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a3.Frost.TargetSwap=="AutoSwap"and t or not o())then _=49143;return true elseif g:RunicPowerDeficit()<70 then return true end end;local function aC(al)if g:Rune()>=3 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Z=149020;return true elseif g:Rune()>=3 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a3.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Z=9999;return true elseif g:Rune()>=3 and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a3.Frost.TargetSwap=="AutoSwap"and t or not o())then _=49020;return true elseif g:Rune()>=3 then return true end end;local function aD(al)if g:BuffUp(B.KillingMachineBuff)and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Z=149020;return true elseif g:BuffUp(B.KillingMachineBuff)and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a3.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Z=9999;return true elseif g:BuffUp(B.KillingMachineBuff)and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a3.Frost.TargetSwap=="AutoSwap"and t or not o())then _=49020;return true elseif g:BuffUp(B.KillingMachineBuff)then return true end end;local function aE(al)if(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Z=149020;return true elseif(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a3.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Z=9999;return true elseif(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a3.Frost.TargetSwap=="AutoSwap"and t or not o())then _=49020;return true elseif true then return true end end;local function aF(al)if(not B.Avalanche:IsAvailable()and g:BuffDown(B.KillingMachineBuff)or B.Avalanche:IsAvailable()and not W or W and g:RuneTimeToX(2)>=g:GCD())and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Z=149143;return true elseif(not B.Avalanche:IsAvailable()and g:BuffDown(B.KillingMachineBuff)or B.Avalanche:IsAvailable()and not W or W and g:RuneTimeToX(2)>=g:GCD())and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a3.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Z=9999;return true elseif(not B.Avalanche:IsAvailable()and g:BuffDown(B.KillingMachineBuff)or B.Avalanche:IsAvailable()and not W or W and g:RuneTimeToX(2)>=g:GCD())and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a3.Frost.TargetSwap=="AutoSwap"and t or not o())then _=49143;return true elseif not B.Avalanche:IsAvailable()and g:BuffDown(B.KillingMachineBuff)or B.Avalanche:IsAvailable()and not W or W and g:RuneTimeToX(2)>=g:GCD()then return true end end;local function aG(al)if al:DebuffRefreshable(B.FrostFeverDebuff)and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and al:GUID()==f("mouseover"):GUID()and o()then Z=149184;return true elseif al:DebuffRefreshable(B.FrostFeverDebuff)and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and a3.Frost.TargetSwap=="AutoSwap"and al:GUID()~=h:GUID()and not t and o()then Z=9999;return true elseif al:DebuffRefreshable(B.FrostFeverDebuff)and(al:AffectingCombat()or al:IsDummy()or al:NPCID()==153285)and(al:GUID()==h:GUID()or a3.Frost.TargetSwap=="AutoSwap"and t or not o())then _=49184;return true elseif al:DebuffRefreshable(B.FrostFeverDebuff)then return true end end;local function aH()if a2.TargetIsValid()then if B.Fleshcraft:IsCastable()then if m(B.Fleshcraft,nil,nil)then _=324631;return"fleshcraft precombat"end end;P=B.GatheringStorm:IsAvailable()or B.Everfrost:ConduitEnabled()or aa;if B.HowlingBlast:IsReady()and not h:IsInRange(8)then if m(B.HowlingBlast,nil,nil,not a6[30])then _=49184;return"howling_blast precombat"end end;if B.RemorselessWinter:IsReady()and h:IsInRange(8)then if m(B.RemorselessWinter,nil,nil,not a6[8])then _=196770;return"remorseless_winter precombat"end end end end;local function aI()if B.RemorselessWinter:IsReady()then if m(B.RemorselessWinter,nil,nil,not a6[8])then _=196770;return"remorseless_winter aoe 2"end end;if B.GlacialAdvance:IsReady()and B.Frostscythe:IsAvailable()then if m(B.GlacialAdvance,nil,nil,not a6[30])then _=194913;return"glacial_advance aoe 4"end end;if B.Frostscythe:IsReady()and(g:BuffUp(B.KillingMachineBuff)and not Y)then if m(B.Frostscythe,nil,nil,not a6[8])then _=207230;return"frostscythe aoe 6"end end;if B.HowlingBlast:IsReady()and(W and B.Avalanche:IsAvailable())then if m(B.HowlingBlast,nil,nil,not a6[30])then _=49184;return"howling_blast aoe 8"end end;if B.GlacialAdvance:IsReady()and(g:BuffDown(B.RimeBuff)and EnemiesCount10yd<=3 or EnemiesCount10yd>3)then if m(B.GlacialAdvance,nil,nil,not a6[30])then _=194913;return"glacial_advance aoe 10"end end;if B.FrostStrike:IsReady()and not z then if a2.CastTargetIf(B.FrostStrike,EnemiesMelee,"max",ak,ap)then return"frost_strike aoe 12"end end;if B.HowlingBlast:IsReady()and W then if m(B.HowlingBlast,nil,nil,not a6[30])then _=49184;return"howling_blast aoe 14"end end;if B.Frostscythe:IsReady()and(g:BuffUp(B.GatheringStormBuff)and EnemiesCount10yd>2 and not Y)then if m(B.Frostscythe,nil,nil,not a6[8])then _=207230;return"frostscythe aoe 16"end end;if B.Obliterate:IsReady()and(Y and g:BuffStack(B.DeathsDueBuff)<4 or g:BuffUp(B.GatheringStormBuff))then if m(B.Obliterate,nil,nil,not a6[8])then _=49020;return"obliterate aoe 18"end end;if B.FrostStrike:IsReady()and not z then if a2.CastTargetIf(B.FrostStrike,EnemiesMelee,"max",ak,aq)then return"frost_strike aoe 20"end end;if B.Frostscythe:IsReady()and not Y then if m(B.Frostscythe,nil,nil,not a6[8])then _=207230;return"frostscythe aoe 22"end end;if B.Obliterate:IsReady()then if a2.CastTargetIf(B.Obliterate,EnemiesMelee,"max",ak,as)then return"obliterate aoe 24"end end;if B.GlacialAdvance:IsReady()then if m(B.GlacialAdvance,nil,nil,not a6[30])then _=194913;return"glacial_advance aoe 26"end end;if B.Frostscythe:IsReady()then if m(B.Frostscythe,nil,nil,not a6[8])then _=207230;return"frostscythe aoe 28"end end;if B.FrostStrike:IsReady()and not z then if a2.CastTargetIf(B.FrostStrike,EnemiesMelee,"max",ak,ar)then return"frost_strike aoe 30"end end;if B.HornofWinter:IsCastable()then if m(B.HornofWinter,nil)then _=57330;return"horn_of_winter aoe 32"end end;if B.ArcaneTorrent:IsCastable()and n()and a3.Commons.Enabled.Racials then if m(B.ArcaneTorrent,nil,nil,not a6[8])then _=155145;return"arcane_torrent aoe 34"end end end;local function aJ()if B.RemorselessWinter:IsReady()and(EnemiesCount10yd>=2 or P)then if m(B.RemorselessWinter,nil,nil,not a6[8])then _=196770;return"remorseless_winter bospooling 4"end end;if B.Obliterate:IsReady()then if a2.CastTargetIf(B.Obliterate,EnemiesMelee,"max",ak,at)then return"obliterate bospooling 6"end end;if B.HowlingBlast:IsReady()and W then if m(B.HowlingBlast)then _=49184;return"howling_blast bospooling 2"end end;if B.Frostscythe:IsReady()and(g:BuffUp(B.KillingMachineBuff)and g:RunicPowerDeficit()>15+ah(B.RunicAttenuation:IsAvailable())*5 and EnemiesMeleeCount>2 and not Y)then if m(B.Frostscythe,nil,nil,not a6[8])then _=207230;return"frostscythe bospooling 12"end end;if B.Frostscythe:IsReady()and(g:RunicPowerDeficit()>=35+ah(B.RunicAttenuation:IsAvailable())*5 and EnemiesMeleeCount>2 and not Y)then if m(B.Frostscythe,nil,nil,not a6[8])then _=207230;return"frostscythe bospooling 14"end end;if B.Obliterate:IsReady()then if not o()and g:RunicPowerDeficit()>=25 then if m(B.Obliterate)then _=49020;return"obliterate bospooling"end elseif a2.CastTargetIf(B.Obliterate,EnemiesMelee,"max",ak,au)then return"obliterate bospooling "end end;if B.GlacialAdvance:IsReady()and(g:RunicPowerDeficit()<20 and EnemiesCount10yd>=2 and B.PillarofFrost:CooldownRemains()>5)then if m(B.GlacialAdvance,nil,nil,a6[100])then _=194913;return"glacial_advance bospooling 8"end end;if B.FrostStrike:IsReady()and not z then if a2.CastTargetIf(B.FrostStrike,EnemiesMelee,"max",ak,av)then return"frost_strike bospooling 10"end end;if B.GlacialAdvance:IsReady()and(B.PillarofFrost:CooldownRemains()>g:RuneTimeToX(4)and g:RunicPowerDeficit()<40 and EnemiesCount10yd>=2)then if m(B.GlacialAdvance,nil,nil,a6[100])then _=194913;return"glacial_advance bospooling 16"end end;if B.FrostStrike:IsReady()and not z then if a2.CastTargetIf(B.FrostStrike,EnemiesMelee,"max",ak,aw)then return"frost_strike bospooling 16"end end;if l.CastAnnotated(B.Pool,false,"WAIT")then return"Wait Resources BoS Pooling"end end;local function aK()if B.Obliterate:IsReady()then if not o()and g:RunicPowerDeficit()>=45+ah(B.RunicAttenuation:IsAvailable())*5 then if m(B.Obliterate)then _=49020;return"obliterate bosticking2 "end elseif a2.CastTargetIf(B.Obliterate,EnemiesMelee,"max",ak,az)then return"obliterate bosticking 2"end end;if B.RemorselessWinter:IsReady()and(P or EnemiesCount10yd>=2 or g:RunicPower()<32)then if m(B.RemorselessWinter,nil,nil,not a6[8])then _=196770;return"remorseless_winter bosticking 4"end end;if B.DeathAndDecay:IsReady()and g:RunicPower()<32 then if m(B.DeathAndDecay)then _=43265;return"death_and_decay bosticking 6"end end;if B.HowlingBlast:IsReady()and(W and(g:RunicPowerDeficit()<55 or g:RuneTimeToX(3)<=g:GCD()or ac or EnemiesCount10yd>=2 or g:BuffRemains(B.RimeBuff)<3)or g:RunicPower()<32)then if m(B.HowlingBlast,nil,nil,not a6[30])then _=49184;return"howling_blast bosticking 8"end end;if B.Frostscythe:IsReady()and(g:BuffUp(B.KillingMachineBuff)and EnemiesCount10yd>2 and not Y)then if m(B.Frostscythe,nil,nil,not a6[8])then _=207230;return"frostscythe bosticking 10"end end;if B.Obliterate:IsReady()then if not o()and g:BuffUp(B.KillingMachineBuff)then if m(B.Obliterate)then _=49020;return"obliterate bosticking"end elseif a2.CastTargetIf(B.Obliterate,EnemiesMelee,"max",ak,ax)then return"obliterate bosticking "end end;if B.HornofWinter:IsCastable()and(g:RunicPowerDeficit()>=40 and g:RuneTimeToX(3)>g:GCD())then if m(B.HornofWinter,nil)then _=57330;return"horn_of_winter bosticking 12"end end;if B.Frostscythe:IsReady()and(EnemiesCount10yd>2 and not Y)then if m(B.Frostscythe,nil,nil,not a6[8])then _=207230;return"frostscythe bosticking 14"end end;if B.Obliterate:IsReady()then if not o()and(g:RunicPowerDeficit()>25 or g:RuneTimeToX(3)<g:GCD())then if m(B.Obliterate)then _=49020;return"obliterate bosticking 16"end elseif a2.CastTargetIf(B.Obliterate,EnemiesMelee,"max",ak,ay)then return"obliterate bosticking 16"end end;if B.HowlingBlast:IsReady()and W then if m(B.HowlingBlast,nil,nil,not a6[30])then _=49184;return"howling_blast bosticking 18"end end;if B.ArcaneTorrent:IsCastable()and g:RunicPowerDeficit()>50 and n()and a3.Commons.Enabled.Racials then if m(B.ArcaneTorrent,nil,nil,not a6[8])then _=155145;return"arcane_torrent bosticking 20"end end;if l.CastAnnotated(B.Pool,false,"WAIT")then return"Wait Resources BoS Ticking"end end;local function aL()if B.ChainsofIce:IsReady()and(d.FilteredFightRemains(Enemies10yd,"<",g:GCD())and(g:Rune()<2 or g:BuffDown(B.KillingMachineBuff)and(not a3.Frost.Using2H and g:BuffStack(B.ColdHeartBuff)>=4+ah(a9)or a3.Frost.Using2H and g:BuffStack(B.ColdHeartBuff)>8+ah(a9))or g:BuffUp(B.KillingMachineBuff)and(not a3.Frost.Using2H and g:BuffStack(B.ColdHeartBuff)>8+ah(a9)or a3.Frost.Using2H and g:BuffStack(B.ColdHeartBuff)>10+ah(a9))))then if m(B.ChainsofIce,nil,nil,not a6[30])then _=45524;return"chains_of_ice coldheart 2"end end;if B.ChainsofIce:IsReady()and(not B.Obliteration:IsAvailable()and g:BuffUp(B.PillarofFrostBuff)and g:BuffStack(B.ColdHeartBuff)>=10 and g:BuffRemains(B.PillarofFrostBuff)<g:GCD()*(1+ah(B.FrostwyrmsFury:CooldownUp()))or g:BuffUp(B.UnholyStrengthBuff)and g:BuffRemains(B.UnholyStrengthBuff)<g:GCD()or g:BuffUp(B.ChaosBaneBuff)and g:BuffRemains(B.ChaosBaneBuff)<g:GCD())then if m(B.ChainsofIce,nil,nil,not a6[30])then _=45524;return"chains_of_ice coldheart 4"end end;if B.ChainsofIce:IsReady()and(not B.Obliteration:IsAvailable()and O and g:BuffDown(B.PillarofFrostBuff)and B.PillarofFrost:CooldownRemains()>15 and(g:BuffStack(B.ColdHeartBuff)>=10 and(g:BuffUp(B.UnholyStrengthBuff)or g:BuffUp(B.ChaosBaneBuff))or g:BuffStack(B.ColdHeartBuff)>=13))then if m(B.ChainsofIce,nil,nil,not a6[30])then _=45524;return"chains_of_ice coldheart 6"end end;if B.ChainsofIce:IsReady()and(not B.Obliteration:IsAvailable()and not O and g:BuffStack(B.ColdHeartBuff)>=10 and g:BuffDown(B.PillarofFrostBuff)and B.PillarofFrost:CooldownRemains()>20)then if m(B.ChainsofIce,nil,nil,not a6[30])then _=45524;return"chains_of_ice coldheart 8"end end;if B.ChainsofIce:IsReady()and(B.Obliteration:IsAvailable()and g:BuffDown(B.PillarofFrostBuff)and(g:BuffStack(B.ColdHeartBuff)>=14 and(g:BuffUp(B.UnholyStrengthBuff)or g:BuffUp(B.ChaosBaneBuff)))or g:BuffStack(B.ColdHeartBuff)>=19 or B.PillarofFrost:CooldownRemains()<3 and g:BuffStack(B.ColdHeartBuff)>=14)then if m(B.ChainsofIce,nil,nil,not a6[30])then _=45524;return"chains_of_ice coldheart 10"end end end;local function aM()if C.PotionofSpectralStrength:IsReady()and n()and a3.Commons.Enabled.Potions and s and g:BuffUp(B.PillarofFrostBuff)then if m(C.PotionofSpectralStrength,nil,nil)then _=37;return"potion cooldowns 2"end end;if B.EmpowerRuneWeapon:IsCastable()and n()and(B.Obliteration:IsAvailable()and g:Rune()<6 and(U or V)and(B.PillarofFrost:CooldownRemains()<5 and(B.Fleshcraft:CooldownRemains()>5 and B.PustuleEruption:SoulbindEnabled()or not B.PustuleEruption:SoulbindEnabled())or g:BuffUp(B.PillarofFrostBuff)or d.FilteredFightRemains(Enemies10yd,"<",20)))then if m(B.EmpowerRuneWeapon,nil)then _=47568;return"empower_rune_weapon cooldowns 4"end end;if B.EmpowerRuneWeapon:IsCastable()and n()and(B.BreathofSindragosa:IsAvailable()and g:RunicPowerDeficit()>30 and g:RuneTimeToX(5)>g:GCD()and(g:BuffUp(B.BreathofSindragosa)or d.FilteredFightRemains(Enemies10yd,"<",20)))then if m(B.EmpowerRuneWeapon,nil)then _=47568;return"empower_rune_weapon cooldowns 6"end end;if B.EmpowerRuneWeapon:IsCastable()and n()and B.Icecap:IsAvailable()then if m(B.EmpowerRuneWeapon,nil)then _=47568;return"empower_rune_weapon cooldowns 8"end end;if B.PillarofFrost:IsCastable()and n()and(B.BreathofSindragosa:IsAvailable()and(U or V)and(not B.BreathofSindragosa:CooldownUp()or B.BreathofSindragosa:CooldownUp()and g:RunicPowerDeficit()<50))then if m(B.PillarofFrost,nil)then _=51271;return"pillar_of_frost cooldowns 10"end end;if B.PillarofFrost:IsCastable()and n()and(B.Icecap:IsAvailable()and not g:BuffUp(B.PillarofFrost))then if m(B.PillarofFrost,nil)then _=51271;return"pillar_of_frost cooldowns 12"end end;if B.PillarofFrost:IsCastable()and n()and(B.Obliteration:IsAvailable()and g:RunicPower()>=25 and(U or V)and(B.GatheringStorm:IsAvailable()and g:BuffUp(B.RemorselessWinter)or not B.GatheringStorm:IsAvailable()))then if m(B.PillarofFrost,nil)then _=51271;return"pillar_of_frost cooldowns 14"end end;if B.BreathofSindragosa:IsCastable()and not z and n()and g:BuffUp(B.PillarofFrostBuff)then if m(B.BreathofSindragosa,nil,nil,not a6[8])then _=152279;return"breath_of_sindragosa cooldowns 16"end end;if B.FrostwyrmsFury:IsCastable()and not y and n()and(EnemiesCount10yd==1 and g:BuffRemains(B.PillarofFrostBuff)<g:GCD()and g:BuffUp(B.PillarofFrostBuff)and not B.Obliteration:IsAvailable()or d.FilteredFightRemains(Enemies10yd,"<",3))then if m(B.FrostwyrmsFury,nil,nil,not a6[40])then _=279302;return"frostwyrms_fury cooldowns 18"end end;if B.FrostwyrmsFury:IsCastable()and not y and n()and(EnemiesMeleeCount>=2 and g:BuffUp(B.PillarofFrostBuff)and g:BuffRemains(B.PillarofFrostBuff)<g:GCD())then if m(B.FrostwyrmsFury,nil,nil,not a6[40])then _=279302;return"frostwyrms_fury cooldowns 20"end end;if B.FrostwyrmsFury:IsCastable()and not y and n()and(B.Obliteration:IsAvailable()and g:BuffUp(B.PillarofFrostBuff)and((g:BuffRemains(B.PillarofFrostBuff)<g:GCD()or g:BuffUp(B.UnholyStrengthBuff)and g:BuffRemains(B.UnholyStrengthBuff)<g:GCD())and(h:DebuffStack(B.RazoriceDebuff)==5 or not N)))then if m(B.FrostwyrmsFury,nil,nil,not a6[40])then _=279302;return"frostwyrms_fury cooldowns 22"end end;if B.HypothermicPresence:IsCastable()and n()and(B.BreathofSindragosa:IsAvailable()and g:RunicPowerDeficit()>40 and g:Rune()<=3 and(g:BuffUp(B.BreathofSindragosa)or B.BreathofSindragosa:CooldownRemains()>40)or not B.BreathofSindragosa:IsAvailable()and g:RunicPowerDeficit()>=25)then if m(B.HypothermicPresence,nil)then _=321995;return"hypothermic_presence cooldowns 24"end end;if B.RaiseDead:IsCastable()and n()and B.PillarofFrost:CooldownRemains()<=5 then if m(B.RaiseDead,nil,a3.Commons.DisplayStyle.RaiseDead)then _=46585;return"raise_dead cooldowns 26"end end;if B.SacrificialPact:IsReady()and(EnemiesCount10yd>=2 and(d.FilteredFightRemains(Enemies10yd,"<",3)or g:BuffDown(B.BreathofSindragosa)and(B.RaiseDead:TimeSinceLastCast()>55+g:GCD()and B.RaiseDead:TimeSinceLastCast()<60-g:GCD()or h:TimeToDie()<g:GCD())))then if m(B.SacrificialPact,nil,nil,not a6[8])then _=237574;return"sacrificial_pact cooldowns 28"end end;if B.DeathAndDecay:IsReady()and(EnemiesCount10yd>5 or ab)then if m(B.DeathAndDecay,nil)then return"death_and_decay cooldowns 30"end end end;local function aN()if B.DeathsDue:IsReady()and p and(U or V)then if m(B.DeathsDue,nil,nil,not a6[10])then _=324128;return"deaths_due covenants 2"end end;if B.SwarmingMist:IsReady()and p and(g:RunicPowerDeficit()>13 and B.PillarofFrost:CooldownRemains()<3 and not B.BreathofSindragosa:IsAvailable()and U)then if m(B.SwarmingMist,nil,nil,not a6[10])then _=311648;return"swarming_mist covenants 4"end end;if B.SwarmingMist:IsReady()and p and(not B.BreathofSindragosa:IsAvailable()and V)then if m(B.SwarmingMist,nil,nil,not a6[10])then _=311648;return"swarming_mist covenants 6"end end;if B.SwarmingMist:IsReady()and p and(B.BreathofSindragosa:IsAvailable()and(g:BuffUp(B.BreathofSindragosa)and(U and g:RunicPowerDeficit()>40 or V and g:RunicPowerDeficit()>60 or V)or g:BuffDown(B.BreathofSindragosa)and B.BreathofSindragosa:CooldownDown()))then if m(B.SwarmingMist,nil,nil,not a6[10])then _=311648;return"swarming_mist covenants 8"end end;if B.AbominationLimb:IsCastable()and p and(B.PillarofFrost:CooldownRemains()<3 and U and(B.BreathofSindragosa:IsAvailable()and g:RunicPowerDeficit()<60 and B.BreathofSindragosa:CooldownRemains()<2 or not B.BreathofSindragosa:IsAvailable()))then if m(B.AbominationLimb,nil,nil,not a6[10])then _=315443;return"abomination_limb covenants 10"end end;if B.AbominationLimb:IsCastable()and p and V then if m(B.AbominationLimb,nil,nil,not a6[10])then _=315443;return"abomination_limb covenants 12"end end;if B.ShackleTheUnworthy:IsCastable()and p and(U and(B.PillarofFrost:CooldownRemains()<3 or B.Icecap:IsAvailable()))then if m(B.ShackleTheUnworthy,nil,nil,not a6[10])then _=312202;return"shackle_the_unworthy covenants 14"end end;if B.ShackleTheUnworthy:IsCastable()and p and V then if m(B.ShackleTheUnworthy,nil,nil,not a6[10])then return"shackle_the_unworthy covenants 16"end end end;local function aO()if B.BloodFury:IsCastable()and g:BuffUp(B.PillarofFrostBuff)then if m(B.BloodFury,nil)then _=20572;return"blood_fury racials 2"end end;if B.Berserking:IsCastable()and g:BuffUp(B.PillarofFrostBuff)then if m(B.Berserking,nil)then _=26297;return"berserking racials 4"end end;if B.ArcanePulse:IsCastable()and(g:BuffUp(B.PillarofFrostBuff)and EnemiesMeleeCount>=2 and g:BuffDown(B.PillarofFrostBuff)and(g:Rune()<=1 and g:RunicPowerDeficit()>=60))then if m(B.ArcanePulse,nil,nil,not a6[8])then _=260364;return"arcane_pulse racials 6"end end;if B.LightsJudgment:IsCastable()and g:BuffUp(B.PillarofFrostBuff)then if m(B.LightsJudgment,nil,nil,not a6[40])then _=255647;return"lights_judgment racials 8"end end;if B.AncestralCall:IsCastable()and(g:BuffUp(B.PillarofFrostBuff)and g:BuffUp(B.EmpowerRuneWeaponBuff))then if m(B.AncestralCall,nil)then _=274738;return"ancestral_call racials 10"end end;if B.Fireblood:IsCastable()and(g:BuffRemains(B.PillarofFrostBuff)<=8 and g:BuffUp(B.PillarofFrostBuff)and g:BuffUp(B.EmpowerRuneWeaponBuff))then if m(B.Fireblood,nil)then _=265221;return"fireblood racials 12"end end;if B.BagofTricks:IsCastable()and(g:BuffUp(B.PillarofFrostBuff)and(g:BuffRemains(B.PillarofFrostBuff)<5 and B.ColdHeart:IsAvailable()or not B.ColdHeart:IsAvailable()and g:BuffRemains(B.PillarofFrostBuff)<3)and EnemiesMeleeCount==1)then if m(B.BagofTricks,nil,nil,not a6[40])then _=312411;return"bag_of_tricks racials 14"end end end;local function aP()if C.InscrutableQuantumDevice:IsEquippedAndReady()and(g:BuffUp(B.PillarofFrostBuff)or h:TimeToX(20)<5 or d.FilteredFightRemains(Enemies10yd,"<",21))then if m(C.InscrutableQuantumDevice,nil,nil)then if C.InscrutableQuantumDevice:ID()==I and a3.Commons.Enabled.TopTrinket==true then _=24;return"top trinket 1"elseif C.InscrutableQuantumDevice:ID()==K and a3.Commons.Enabled.BottomTrinket then _=31;return"top trinket 2"end end end;if B.PillarofFrost:CooldownUp()or B.PillarofFrost:CooldownRemains()>20 then if(a3.Commons.Enabled.TopTrinket or a3.Commons.Enabled.BottomTrinket)and n()then local aQ=g:GetUseableTrinkets(D)if aQ then if m(aQ,nil,nil)then if aQ:ID()==I and a3.Commons.Enabled.TopTrinket then _=24;return"top trinket 1"elseif aQ:ID()==K and a3.Commons.Enabled.BottomTrinket then _=30;return"top trinket 2"end end end end end end;local function aR()if B.RemorselessWinter:IsReady()and(P or EnemiesCount10yd>=2)then if m(B.RemorselessWinter,nil,nil,not a6[8])then _=196770;return"remorseless_winter obliteration_pooling 2"end end;if B.GlacialAdvance:IsReady()and(EnemiesCount10yd>=2 and B.Frostscythe:IsAvailable())then if m(B.GlacialAdvance,nil,nil,not a6[100])then _=194913;return"glacial_advance obliteration_pooling "end end;if B.Frostscythe:IsReady()and(g:BuffUp(B.KillingMachineBuff)and EnemiesCount10yd>2 and not Y)then if m(B.Frostscythe,nil,nil,not a6[100])then _=207230;return"frostscythe obliteration_pooling "end end;if B.Obliterate:IsReady()then if not o()and(g:RuneTimeToX(4)<g:GCD()or g:RunicPower()<=45)then if m(B.Obliterate)then _=49020;return"obliterate obliteration_pooling 6"end elseif a2.CastTargetIf(B.Obliterate,EnemiesMelee,"max",ak,aA)then return"obliterate obliteration_pooling 6"end end;if B.FrostStrike:IsReady()and not z and(Enemies10yd==1 and X)then if m(B.FrostStrike,nil,nil,not a6[8])then _=49143;return"frost_strike obliteration_pooling 4"end end;if B.HowlingBlast:IsReady()and W then if m(B.HowlingBlast)then _=49184;return"howling_blast obliteration_pooling 7"end end;if B.GlacialAdvance:IsReady()and(EnemiesCount10yd>=2 and g:RunicPowerDeficit()<60)then if m(B.GlacialAdvance,nil,nil,a6[100])then _=194913;return"glacial_advance obliteration_pooling 8"end end;if B.FrostStrike:IsReady()and not z then if not o()and g:RunicPowerDeficit()<70 then if m(B.FrostStrike)then _=49143;return"frost_strike obliteration_pooling 10"end elseif a2.CastTargetIf(B.FrostStrike,EnemiesMelee,"max",ak,aB)then return"frost_strike obliteration_pooling 10"end end;if B.Obliterate:IsReady()then if not o()and g:Rune()>=3 then if m(B.Obliterate)then _=49020;return"obliterate obliteration_pooling 12"end elseif a2.CastTargetIf(B.Obliterate,EnemiesMelee,"max",ak,aC)then return"obliterate obliteration_pooling 12"end end;if B.Frostscythe:IsReady()and(EnemiesCount10yd>=4 and not Y)then if m(B.Frostscythe,nil,nil,not a6[8])then _=207230;return"frostscythe obliteration_pooling 14"end end;if l.CastAnnotated(B.Pool,false,"WAIT")then return"Wait Resources Obliteration Pooling"end end;local function aS()if B.RemorselessWinter:IsReady()and(EnemiesCount10yd>=3 and P)then if m(B.RemorselessWinter,nil,nil,not a6[8])then _=196770;return"remorseless_winter obliteration 2"end end;if B.HowlingBlast:IsReady()and(g:BuffDown(B.KillingMachineBuff)and g:Rune()>=3 and(g:BuffRemains(B.RimeBuff)<3 and g:BuffUp(B.RimeBuff)or h:DebuffDown(B.FrostFeverDebuff)))then if m(B.HowlingBlast,nil,nil,not a6[30])then _=49184;return"howling_blast obliteration 4"end end;if B.GlacialAdvance:IsReady()and(g:BuffDown(B.KillingMachineBuff)and EnemiesCount10yd>=2 or g:BuffDown(B.KillingMachineBuff)and(h:DebuffStack(B.RazoriceDebuff)<5 or h:DebuffRemains(B.RazoriceDebuff)<g:GCD()*4))then if m(B.GlacialAdvance,nil,nil,a6[100])then _=194913;return"glacial_advance obliteration 10"end end;if B.Frostscythe:IsReady()and(g:BuffUp(B.KillingMachineBuff)and EnemiesCount10yd>2 and not Y)then if m(B.Frostscythe,nil,nil,not a6[8])then _=207230;return"frostscythe obliteration 6"end end;if B.Obliterate:IsReady()then if not o()and g:BuffUp(B.KillingMachineBuff)then if m(B.Obliterate)then _=49020;return"obliterate obliteration 8"end elseif a2.CastTargetIf(B.Obliterate,EnemiesMelee,"max",ak,aD)then return"obliterate obliteration 8"end end;if B.FrostStrike:IsReady()and not z and(EnemiesCount10yd==1 and X)then if m(B.FrostStrike,nil,nil,not a6[8])then _=49143;return"frost_strike obliteration 12"end end;if B.HowlingBlast:IsReady()and(W and EnemiesCount10yd>=2)then if m(B.HowlingBlast,nil,nil,not a6[30])then _=49184;return"howling_blast obliteration 14"end end;if B.GlacialAdvance:IsReady()and EnemiesCount10yd>=2 then if m(B.GlacialAdvance,nil,nil,a6[100])then _=194913;return"glacial_advance obliteration 16"end end;if B.FrostStrike:IsReady()and not z then if not o()and(not B.Avalanche:IsAvailable()and g:BuffDown(B.KillingMachineBuff)or B.Avalanche:IsAvailable()and not W or W and g:RuneTimeToX(2)>=g:GCD())then if m(B.FrostStrike)then _=49143;return"frost_strike obliteration 18"end elseif a2.CastTargetIf(B.FrostStrike,EnemiesMelee,"max",ak,aF)then return"frost_strike obliteration 18"end end;if B.HowlingBlast:IsReady()and W then if m(B.HowlingBlast,nil,nil,not a6[30])then _=49184;return"howling_blast obliteration 20"end end;if B.Obliterate:IsReady()then if not o()then if m(B.Obliterate)then _=49020;return"obliterate obliteration 8"end elseif a2.CastTargetIf(B.Obliterate,EnemiesMelee,"max",ak,aE)then return"obliterate obliteration 22"end end end;local function aT()if B.RemorselessWinter:IsReady()and P then if m(B.RemorselessWinter,nil,nil,not a6[8])then _=196770;return"remorseless_winter standard 2"end end;if B.Obliterate:IsReady()and g:BuffUp(B.KillingMachineBuff)then if m(B.Obliterate,nil,nil,not a6[8])then _=49020;return"obliterate standard 4"end end;if B.HowlingBlast:IsReady()and(W and g:BuffRemains(B.RimeBuff)<3)then if m(B.HowlingBlast,nil,nil,not a6[30])then _=49184;return"howling_blast standard 6"end end;if B.FrostStrike:IsReady()and not z and X then if m(B.FrostStrike,nil,nil,not a6[8])then _=49143;return"frost_strike standard 8"end end;if B.GlacialAdvance:IsReady()and(not N and(h:DebuffStack(B.RazoriceDebuff)<5 or h:DebuffRemains(B.RazoriceDebuff)<g:GCD()*4))then if m(B.GlacialAdvance,nil,nil,a6[100])then _=194913;return"glacial_advance standard 10"end end;if B.FrostStrike:IsReady()and not z and(B.RemorselessWinter:CooldownRemains()<=2*g:GCD()and B.GatheringStorm:IsAvailable())then if m(B.FrostStrike,nil,nil,not a6[8])then _=49143;return"frost_strike standard 12"end end;if B.HowlingBlast:IsReady()and W then if m(B.HowlingBlast,nil,nil,not a6[30])then _=49184;return"howling_blast standard 14"end end;if B.FrostStrike:IsReady()and not z and g:RunicPowerDeficit()<15+ah(B.RunicAttenuation:IsAvailable())*5 then if m(B.FrostStrike,nil,nil,not a6[8])then _=49143;return"frost_strike standard 18"end end;if B.Obliterate:IsReady()and(g:BuffDown(B.FrozenPulseBuff)and B.FrozenPulse:IsAvailable()or Y and g:BuffStack(B.DeathsDueBuff)<4 or B.GatheringStorm:IsAvailable()and g:BuffUp(B.RemorselessWinter)or g:RunicPowerDeficit()>25+ah(B.RunicAttenuation:IsAvailable())*5)then if m(B.Obliterate,nil,nil,not a6[8])then _=49020;return"obliterate standard 16"end end;if B.FrostStrike:IsReady()and not z then if m(B.FrostStrike,nil,nil,not a6[8])then _=49143;return"frost_strike standard 22"end end;if B.HornofWinter:IsCastable()then if m(B.HornofWinter,nil)then _=57330;return"horn_of_winter standard 24"end end;if B.ArcaneTorrent:IsCastable()and n()and Setting.Commons.Enabled.Racials then if m(B.ArcaneTorrent,nil)then return"arcane_torrent standard 26"end end end;local function aU()Opener=HeroRotationCharDB.Toggles[6]p=HeroRotationCharDB.Toggles[4]q=HeroRotationCharDB.Toggles[5]t=HeroRotationCharDB.Toggles[12]u=HeroRotationCharDB.Toggles[13]v=HeroRotationCharDB.Toggles[14]s=HeroRotationCharDB.Toggles[15]w=HeroRotationCharDB.Toggles[16]x=HeroRotationCharDB.Toggles[81]y=HeroRotationCharDB.Toggles[110]z=false end;local function aV()EnemiesMelee=g:GetEnemiesInMeleeRange(8)Enemies10yd=g:GetEnemiesInMeleeRange(10)EnemiesCount10yd=#Enemies10yd;EnemiesMeleeCount=#EnemiesMelee;a7()if not BotOn then Z=0;_=0;a0=0 end;if Z>0 then Z=0 end;if _>0 then _=0 end;if a0>0 then a0=0 end;L=aU()if l.GUISettings.General.OpenerReset>0 and not HeroRotationCharDB.Toggles[6]then starttime=GetTime()endtime=starttime+l.GUISettings.General.OpenerReset elseif l.GUISettings.General.OpenerReset>0 and endtime~=nil and GetTime()>endtime and HeroRotationCharDB.Toggles[6]then HeroRotationCharDB.Toggles[6]=not HeroRotationCharDB.Toggles[6]l.ToggleIconFrame:UpdateButtonText(6)l.Print("Opener is now "..(HeroRotationCharDB.Toggles[6]and"|cff00ff00enabled|r."or"|cffff0000disabled|r."))end;if u and B.AntiMagicZone:IsUsableP()and g:AffectingCombat()and B.AntiMagicZone:CooldownRemains(BypassRecovery)<=0 then if m(B.AntiMagicZone,nil,nil,nil)then _=51052;return"queue AMZ"end elseif(not B.AntiMagicZone:IsUsableP()or B.AntiMagicZone:CooldownRemains()>0 or not g:AffectingCombat())and u then HeroRotationCharDB.Toggles[13]=not HeroRotationCharDB.Toggles[13]l.Print("Anti-Magic Zone Queue is now "..(HeroRotationCharDB.Toggles[13]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if v and B.DeathGrip:IsUsableP()and B.DeathGrip:CooldownRemains(BypassRecovery)<=0 and a2.TargetIsValid()and f("mouseover"):GUID()~=nil then if m(B.DeathGrip,nil,nil,nil)then Z=149576;return"queue DeathGrip MO"end elseif v and B.DeathGrip:IsUsableP()and B.DeathGrip:CooldownRemains(BypassRecovery)<=0 and a2.TargetIsValid()then if m(B.DeathGrip,nil,nil,nil)then _=49576;return"queue DeathGrip"end elseif(not B.DeathGrip:IsUsableP()or B.DeathGrip:CooldownRemains()>0 or not a2.TargetIsValid())and v then HeroRotationCharDB.Toggles[14]=not HeroRotationCharDB.Toggles[14]l.Print("Death Grip Queue is now "..(HeroRotationCharDB.Toggles[14]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if w and B.Asphyxiate:IsUsableP()and B.Asphyxiate:CooldownRemains(BypassRecovery)<=0 and f("mouseover"):GUID()~=nil then if m(B.Asphyxiate,nil,nil,nil)then Z=1221562;return"queue Asphyxiate MO"end elseif w and B.Asphyxiate:IsUsableP()and B.Asphyxiate:CooldownRemains(BypassRecovery)<=0 and a2.TargetIsValid()then if m(B.Asphyxiate,nil,nil,nil)then _=221562;return"queue Asphyxiate"end elseif(not B.Asphyxiate:IsUsableP()or B.Asphyxiate:CooldownRemains()>0)and w then HeroRotationCharDB.Toggles[16]=not HeroRotationCharDB.Toggles[16]l.Print("Asphyxiate Queue is now "..(HeroRotationCharDB.Toggles[16]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if x and B.ControlUndead:IsUsableP()and B.ControlUndead:CooldownRemains(BypassRecovery)<=0 and not g:PrevGCD(1,B.ControlUndead)then if l.Cast(B.ControlUndead,nil,nil,nil)then if f("mouseover"):GUID()~=nil and f("mouseover"):IsInRange(30)then Z=1111673;return"queue ControlUndead MO"else _=111673;return"queue ControlUndead"end end elseif(not B.ControlUndead:IsUsableP()or B.ControlUndead:CooldownRemains()>0 or g:PrevGCD(1,B.ControlUndead))and x then HeroRotationCharDB.Toggles[81]=not HeroRotationCharDB.Toggles[81]l.Print("Control Undead Queue is now "..(HeroRotationCharDB.Toggles[81]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if not g:AffectingCombat()and a2.TargetIsValid()and not g:IsDeadOrGhost()and r then local L=aH()if L then return L end end;if a2.TargetIsValid()and not g:IsDeadOrGhost()then if not UnitIsEnemy("player","mouseover")and UnitIsDead("mouseover")then if B.RaiseAlly:IsCastable()and g:RunicPower()>=30 then if m(B.RaiseAlly,nil)then Z=161999;return"RaiseAlly MO"end elseif B.RaiseAlly:CooldownRemains(BypassRecovery)<=0 and g:RunicPower()<30 then z=true end end;if g:IsChanneling(j(324631))then if m(B.Pool,nil,nil,nil)then Z=99999;return"Raise Ally MO"end end;if a3.Commons.UseDefensives then if g:HealthPercentage()<a3.Commons.HealthstoneHP and C.Healthstone:IsReady()and C.Healthstone:CooldownRemains()<=0 then if m(C.Healthstone,nil)then _=40;return"Healthstone HP"end end;if g:HealthPercentage()<a3.Commons.HealPotHP and C.HealPot:IsReady()and C.HealPot:CooldownRemains()<=0 then if m(C.HealPot,nil)then _=41;return"HealPot HP"end end;if g:HealthPercentage()<a3.Commons.UseDarkSuccorHP and B.DeathStrike:IsReady()and g:BuffUp(B.DeathStrikeBuff)then if m(B.DeathStrike)then _=49998;return"DeathStrike Dark Succor HP"end end;if g:HealthPercentage()<a3.Commons.UseDeathStrikeHP and B.DeathStrike:IsReady()then if m(B.DeathStrike)then _=49998;return"DeathStrike HP"end end;if g:HealthPercentage()<a3.Commons.IceboundFortitudeHP and B.IceboundFortitude:IsReady()then if m(B.IceboundFortitude)then _=48792;return"Icebound Fortitude HP"end end;if g:HealthPercentage()<a3.Commons.LichborneHP and B.Lichborne:IsReady()then if m(B.Lichborne)then _=49039;return"Lichborne HP"end end;if g:HealthPercentage()<a3.Commons.AntiMagicShellHP and B.AntiMagicShell:IsReady()then if m(B.AntiMagicShell)then _=48707;return"Anti-Magic Shell HP"end end;if g:HealthPercentage()<a3.Commons.DeathPactHP and B.DeathPact:IsReady()then if m(B.DeathPact)then _=48743;return"Death Pact HP"end end end;if B.DeathStrike:IsReady()and not z and false then if m(B.DeathStrike,nil,nil,not a6[5])then _=49998;return"death_strike low hp or proc"end end;U=EnemiesCount10yd==1 or not o()V=EnemiesCount10yd>=2 and o()W=g:BuffUp(B.RimeBuff)and(not ac or ac and g:RunicPowerDeficit()>8)X=B.EradicatingBlow:ConduitEnabled()and g:BuffStack(B.EradicatingBlowBuff)==2 or B.UnleashedFrenzy:ConduitEnabled()and g:BuffRemains(B.UnleashedFrenzyBuff)<g:GCD()*2;Y=g:BuffUp(B.DeathAndDecayBuff)and a1==3;if B.RemorselessWinter:IsReady()and(B.Everfrost:ConduitEnabled()and B.GatheringStorm:IsAvailable()and not B.Obliteration:IsAvailable()and not B.PillarofFrost:CooldownUp())then if m(B.RemorselessWinter,nil,nil,not a6[8])then _=196770;return"remorseless_winter main 2"end end;if B.HowlingBlast:IsReady()and h:DebuffRefreshable(B.FrostFeverDebuff)and(B.Icecap:IsAvailable()or g:BuffDown(B.BreathofSindragosa)and B.BreathofSindragosa:IsAvailable()or B.Obliteration:IsAvailable()and B.PillarofFrost:CooldownDown()and g:BuffDown(B.KillingMachineBuff))then if m(B.HowlingBlast,nil)then _=49184;return"howling_blast main 4"end end;if B.HowlingBlast:IsReady()and(B.Icecap:IsAvailable()or g:BuffDown(B.BreathofSindragosa)and B.BreathofSindragosa:IsAvailable()or B.Obliteration:IsAvailable()and B.PillarofFrost:CooldownDown()and g:BuffDown(B.KillingMachineBuff))then if a2.CastCycle(B.HowlingBlast,Enemies10yd,aG,not h:IsSpellInRange(B.HowlingBlast))then return"howling_blast main 4"end end;if B.GlacialAdvance:IsReady()and(g:BuffRemains(B.IcyTalonsBuff)<=g:GCD()and B.IcyTalons:IsAvailable()and EnemiesCount10yd>=2 and(B.Icecap:IsAvailable()or B.BreathofSindragosa:IsAvailable()and B.BreathofSindragosa:CooldownRemains()>15 or B.Obliteration:IsAvailable()and not g:BuffUp(B.PillarofFrostBuff)))then if m(B.GlacialAdvance,nil,nil,100)then _=194913;return"glacial_advance main 6"end end;if B.FrostStrike:IsReady()and not z and(g:BuffRemains(B.IcyTalonsBuff)<=g:GCD()and B.IcyTalons:IsAvailable()and(B.Icecap:IsAvailable()or B.BreathofSindragosa:IsAvailable()and g:BuffDown(B.BreathofSindragosa)and B.BreathofSindragosa:CooldownRemains()>10 or B.Obliteration:IsAvailable()and not g:BuffUp(B.PillarofFrostBuff)))then if m(B.FrostStrike)then _=49143;return"frost_strike main 8"end end;if true then local L=aN()if L then return L end end;if n()and a3.Commons.Enabled.Racials then local L=aO()if L then return L end end;if a3.Commons.Enabled.TopTrinket or a3.Commons.Enabled.BottomTrinket then local L=aP()if L then return L end end;if n()then local L=aM()if L then return L end end;if B.ColdHeart:IsAvailable()and(g:BuffDown(B.KillingMachineBuff)or B.BreathofSindragosa:IsAvailable())and(h:DebuffStack(B.RazoriceDebuff)==5 or not N or d.FilteredFightRemains(Enemies10yd,"<=",g:GCD()))then local L=aL()if L then return L end end;if g:BuffUp(B.BreathofSindragosa)then local L=aK()if L then return L end end;if not a3.Frost.DisableBoSPooling and B.BreathofSindragosa:IsAvailable()and(B.BreathofSindragosa:CooldownRemains()<10 and n()or not n()and g:RunicPower()<=75)then local L=aJ()if L then return L end end;if g:BuffUp(B.PillarofFrostBuff)and B.Obliteration:IsAvailable()then local L=aS()if L then return L end end;if B.Obliteration:IsAvailable()and B.PillarofFrost:CooldownRemains()<10 then local L=aR()if L then return L end end;if o()and EnemiesCount10yd>=2 then local L=aI()if L then return L end end;if true then local L=aT()if L then return L end end;if l.CastAnnotated(B.Pool,false,"WAIT")then return"Wait/Pool Resources"end end end;local function aW()end;function ReturnSpellF()if _==0 then return 0 else return _ end end;function ReturnSpellMOF()if Z==0 then return 0 else return Z end end;l.SetAPL(251,aV,aW)