local a,b=...local c=HeroDBC.DBC;local d=HeroLib;local e=HeroCache;local f=d.Unit;local g=f.Player;local h=f.Target;local i=f.Boss;local j=f.Pet;local k=d.Spell;local l=d.Item;local m=HeroRotation;local n=m.Cast;local o=m.CDsON;local p=m.AoEON;local q=HeroRotationCharDB.Toggles[4]local r=HeroRotationCharDB.Toggles[5]local s=HeroRotationCharDB.Toggles[6]local t=HeroRotationCharDB.Toggles[10]local u=HeroRotationCharDB.Toggles[11]local v=HeroRotationCharDB.Toggles[12]local w=HeroRotationCharDB.Toggles[13]local x=HeroRotationCharDB.Toggles[14]local y=HeroRotationCharDB.Toggles[15]local z=HeroRotationCharDB.Toggles[16]local A=nil;local B=nil;local C=false;local D=false;local E=false;local F=false;local G=false;local H=false;local I=0;local J=false;local K=table.insert;local L=k.DeathKnight.Unholy;local M=l.DeathKnight.Unholy;local N={M.DarkmoonDeckVoracity:ID(),M.DreadfireVessel:ID(),M.InscrutableQuantumDevice:ID(),M.MacabreSheetMusic:ID()}local O=g:GetEquipment()local P=l(0)local Q=l(0)local R,S=GetInventoryItemID("player",13)local T,S=GetInventoryItemID("player",14)if O[13]then P=l(O[13])end;if O[14]then Q=l(O[14])end;local U;local V;local W=m.Commons.Everyone;local X={General=m.GUISettings.General,Commons=m.GUISettings.APL.DeathKnight.Commons,Unholy=m.GUISettings.APL.DeathKnight.Unholy}local Y;local Z;local _;local a0;local a1;local a2;local a3;local a4;local a5,a6;local a7;local a8;local a9;local aa,ab;local ac,ad;local ae;local af=g:HasLegendaryEquipped(30)local ag=g:HasLegendaryEquipped(31)local ah=g:HasLegendaryEquipped(45)local ai={{L.Asphyxiate,"Cast Asphyxiate (Interrupt)",function()return true end}}local aj=0;local ak=0;d:RegisterForEvent(function()O=g:GetEquipment()P=l(0)Q=l(0)if O[13]then P=l(O[13])end;if O[14]then Q=l(O[14])end;af=g:HasLegendaryEquipped(30)ag=g:HasLegendaryEquipped(31)ah=g:HasLegendaryEquipped(45)end,"PLAYER_EQUIPMENT_CHANGED")local function al(am)if am then return 1 else return 0 end end;local function an(am)return am~=0 end;local function ao()return X.General.SoloMode and(g:HealthPercentage()<X.Commons.UseDeathStrikeHP or g:HealthPercentage()<X.Commons.UseDarkSuccorHP and g:BuffUp(L.DeathStrikeBuff))end;local function ap(aq)local ar=0;if aq~=nil then for S,as in pairs(aq)do if as:DebuffDown(L.VirulentPlagueDebuff)and as:IsInMeleeRange(8)then ar=ar+1 end end end;return ar end;local function at(aq)local au={}if aq~=nil then for av in pairs(aq)do if not f:IsInBossList(aq[av]["UnitNPCID"])then K(au,aq[av])end end end;return d.FightRemains(au)end;local function aw(ax)return ax:DebuffStack(L.FesteringWoundDebuff)end;local function ay(ax)if ab>=2 and ax:DebuffStack(L.FesteringWoundDebuff)>=4 and g:BuffDown(L.DeathAndDecayBuff)and ax:GUID()==f("mouseover"):GUID()and X.Unholy.TargetSwap=="Mouseover"then ak=151;return true elseif ab>=2 and ax:DebuffStack(L.FesteringWoundDebuff)>=4 and g:BuffDown(L.DeathAndDecayBuff)and X.Unholy.TargetSwap=="AutoSwap"and ax:GUID()~=h:GUID()and not v then ak=999;return true elseif ab>=2 and ax:DebuffStack(L.FesteringWoundDebuff)>=4 and g:BuffDown(L.DeathAndDecayBuff)and ax:GUID()==h:GUID()then aj=15;return true elseif ab>=2 and h:DebuffStack(L.FesteringWoundDebuff)>=4 and g:BuffDown(L.DeathAndDecayBuff)then return true end end;local function az(ax)if ax:DebuffStack(L.FesteringWoundDebuff)<=3 and L.Apocalypse:CooldownRemains()<3 and ax:GUID()==f("mouseover"):GUID()and X.Unholy.TargetSwap=="Mouseover"then ak=61;return true elseif ax:DebuffStack(L.FesteringWoundDebuff)<=3 and L.Apocalypse:CooldownRemains()<3 and X.Unholy.TargetSwap=="AutoSwap"and ax:GUID()~=h:GUID()and not v then ak=999;return true elseif ax:DebuffStack(L.FesteringWoundDebuff)<=3 and L.Apocalypse:CooldownRemains()<3 and ax:GUID()==h:GUID()then aj=6;return true elseif ax:DebuffStack(L.FesteringWoundDebuff)<=3 and L.Apocalypse:CooldownRemains()<3 then return true end end;local function aA(ax)if g:RuneTimeToX(4)<a4:CooldownRemains()and ax:GUID()==f("mouseover"):GUID()and X.Unholy.TargetSwap=="Mouseover"then ak=61;return true elseif g:RuneTimeToX(4)<a4:CooldownRemains()and X.Unholy.TargetSwap=="AutoSwap"and ax:GUID()~=h:GUID()and not v then ak=999;return true elseif g:RuneTimeToX(4)<a4:CooldownRemains()and ax:GUID()==h:GUID()then aj=6;return true elseif g:RuneTimeToX(4)<a4:CooldownRemains()then return true end end;local function aB(ax)if(ax:DebuffStack(L.FesteringWoundDebuff)<=3 and L.Apocalypse:CooldownRemains()<5 or ax:DebuffStack(L.FesteringWoundDebuff)<1)and ax:GUID()==f("mouseover"):GUID()and X.Unholy.TargetSwap=="Mouseover"then ak=61;return true elseif(ax:DebuffStack(L.FesteringWoundDebuff)<=3 and L.Apocalypse:CooldownRemains()<5 or ax:DebuffStack(L.FesteringWoundDebuff)<1)and X.Unholy.TargetSwap=="AutoSwap"and ax:GUID()~=h:GUID()and not v then ak=999;return true elseif(ax:DebuffStack(L.FesteringWoundDebuff)<=3 and L.Apocalypse:CooldownRemains()<5 or ax:DebuffStack(L.FesteringWoundDebuff)<1)and ax:GUID()==h:GUID()then aj=6;return true elseif ax:DebuffStack(L.FesteringWoundDebuff)<=3 and L.Apocalypse:CooldownRemains()<5 or ax:DebuffStack(L.FesteringWoundDebuff)<1 then return true end end;local function aC(ax)if L.Apocalypse:CooldownRemains()>5 and ax:DebuffStack(L.FesteringWoundDebuff)<1 and ax:GUID()==f("mouseover"):GUID()and X.Unholy.TargetSwap=="Mouseover"then ak=61;return true elseif L.Apocalypse:CooldownRemains()>5 and ax:DebuffStack(L.FesteringWoundDebuff)<1 and X.Unholy.TargetSwap=="AutoSwap"and ax:GUID()~=h:GUID()and not v then ak=999;return true elseif L.Apocalypse:CooldownRemains()>5 and ax:DebuffStack(L.FesteringWoundDebuff)<1 and ax:GUID()==h:GUID()then aj=6;return true elseif L.Apocalypse:CooldownRemains()>5 and ax:DebuffStack(L.FesteringWoundDebuff)<1 then return true end end;local function aD(ax)if ab>=2 and ax:DebuffStack(L.FesteringWoundDebuff)<2 and ax:GUID()==f("mouseover"):GUID()and X.Unholy.TargetSwap=="Mouseover"then ak=171;return true elseif ab>=2 and ax:DebuffStack(L.FesteringWoundDebuff)<2 and X.Unholy.TargetSwap=="AutoSwap"and ax:GUID()~=h:GUID()and not v then ak=999;return true elseif ab>=2 and ax:DebuffStack(L.FesteringWoundDebuff)<2 and ax:GUID()==h:GUID()then aj=17;return true elseif ab>=2 and ax:DebuffStack(L.FesteringWoundDebuff)<2 then return true end end;local function aE(ax)if(L.Apocalypse:CooldownRemains()>5 and ax:DebuffUp(L.FesteringWoundDebuff)or ax:DebuffStack(L.FesteringWoundDebuff)>4)and(d.FilteredFightRemains(aa,"<",a4:CooldownRemains()+10)or d.FilteredFightRemains(aa,">",L.Apocalypse:CooldownRemains()))and ax:GUID()==f("mouseover"):GUID()and X.Unholy.TargetSwap=="Mouseover"then ak=71;return true elseif(L.Apocalypse:CooldownRemains()>5 and ax:DebuffUp(L.FesteringWoundDebuff)or ax:DebuffStack(L.FesteringWoundDebuff)>4)and(d.FilteredFightRemains(aa,"<",a4:CooldownRemains()+10)or d.FilteredFightRemains(aa,">",L.Apocalypse:CooldownRemains()))and X.Unholy.TargetSwap=="AutoSwap"and ax:GUID()~=h:GUID()and not v then ak=999;return true elseif(L.Apocalypse:CooldownRemains()>5 and ax:DebuffUp(L.FesteringWoundDebuff)or ax:DebuffStack(L.FesteringWoundDebuff)>4)and(d.FilteredFightRemains(aa,"<",a4:CooldownRemains()+10)or d.FilteredFightRemains(aa,">",L.Apocalypse:CooldownRemains()))and ax:GUID()==h:GUID()then aj=7;return true elseif(L.Apocalypse:CooldownRemains()>5 and ax:DebuffUp(L.FesteringWoundDebuff)or ax:DebuffStack(L.FesteringWoundDebuff)>4)and(d.FilteredFightRemains(aa,"<",a4:CooldownRemains()+10)or d.FilteredFightRemains(aa,">",L.Apocalypse:CooldownRemains()))then return true end end;local function aF(ax)if ax:DebuffDown(L.FesteringWoundDebuff)and ax:GUID()==f("mouseover"):GUID()and X.Unholy.TargetSwap=="Mouseover"then ak=61;return true elseif ax:DebuffDown(L.FesteringWoundDebuff)and X.Unholy.TargetSwap=="AutoSwap"and ax:GUID()~=h:GUID()and not v then ak=999;return true elseif ax:DebuffDown(L.FesteringWoundDebuff)and ax:GUID()==h:GUID()then aj=6;return true elseif ax:DebuffDown(L.FesteringWoundDebuff)then return true end end;local function aG(ax)if(ax:TimeToX(35)<5 or ax:HealthPercentage()<35)and ax:TimeToDie()>5 and ax:GUID()==f("mouseover"):GUID()and X.Unholy.TargetSwap=="Mouseover"then ak=111;return true elseif(ax:TimeToX(35)<5 or ax:HealthPercentage()<35)and ax:TimeToDie()>5 and X.Unholy.TargetSwap=="AutoSwap"and ax:GUID()~=h:GUID()and not v then ak=999;return true elseif(ax:TimeToX(35)<5 or ax:HealthPercentage()<35)and ax:TimeToDie()>5 and ax:GUID()==h:GUID()then aj=11;return true elseif(ax:TimeToX(35)<5 or ax:HealthPercentage()<35)and ax:TimeToDie()>5 then return true end end;local function aH()if L.RaiseDead:IsCastable()then if X.Unholy.RaiseDeadCastLeft then if m.CastLeft(L.RaiseDead)then aj=1;return"raise_dead precombat 2 left"end else if n(L.RaiseDead,nil,nil)then aj=1;return"raise_dead precombat 2 displaystyle"end end end;if L.ArmyoftheDead:IsReady()and E and not t and not X.Unholy.DisableAotD and not L.SummonGargoyle:IsAvailable()then if n(L.ArmyoftheDead,nil,nil)then aj=400;return"army_of_the_dead precombat 4"end end;a9=L.ArmyoftheDamned:IsAvailable()and L.ConvocationOfTheDead:ConduitRank()>=9;if L.FesteringStrike:IsReady()and h:IsSpellInRange(L.FesteringStrike)then if n(L.FesteringStrike)then aj=6;return"festering_strike precombat 6"end end;if L.Outbreak:IsReady()then if n(L.Outbreak,nil,nil,not h:IsSpellInRange(L.Outbreak))then aj=8;return"outbreak precombat 8"end end end;local function aI()if a4:IsReady()and not g:IsMoving()and(L.FesteringWoundDebuff:AuraActiveCount()==ab or L.FesteringWoundDebuff:AuraActiveCount()>=5 or not L.BurstingSores:IsAvailable()or ad>1 and at(ac)<=11 or d.FilteredFightRemains(aa,"<=",11))then if a4==L.DeathsDue then if n(a4,nil,nil)then aj=2;return"any_dnd aoe_setup 2"end else if n(a4,nil)then aj=2;return"any_dnd aoe_setup 4"end end end;if L.DeathCoil:IsReady()and not J and(not Y and(j:BuffUp(L.DarkTransformation)and ah and ab<=3 or ab==2))then if n(L.DeathCoil,nil,nil,not h:IsSpellInRange(L.DeathCoil))then aj=10;return"death_coil aoe_setup 10"end end;if L.Epidemic:IsReady()and not J and not Y then if n(L.Epidemic,X.Unholy.GCDasOffGCD.Epidemic,nil,not h:IsInRange(30))then aj=12;return"epidemic aoe_setup 12"end end;if L.FesteringStrike:IsReady()then if h:DebuffStack(L.FesteringWoundDebuff)<=3 and L.Apocalypse:CooldownRemains()<3 then if n(L.FesteringStrike,nil,nil,not h:IsSpellInRange(L.FesteringStrike))then aj=6;return"festering_strike aoe_setup 14"end end;if W.CastTargetIf(L.FesteringStrike,aa,"max",aw,az)then return"festering_strike aoe_setup 14"end end;if L.FesteringStrike:IsReady()then if W.CastCycle(L.FesteringStrike,aa,aF)then return"festering_strike aoe_setup 16"end end;if L.FesteringStrike:IsReady()then if h:DebuffStack(L.FesteringWoundDebuff)<=3 and L.Apocalypse:CooldownRemains()<3 then if n(L.FesteringStrike,nil,nil,not h:IsSpellInRange(L.FesteringStrike))then aj=6;return"festering_strike aoe_setup 16"end end;if W.CastTargetIf(L.FesteringStrike,aa,"min",aw,aA)then return"festering_strike aoe_setup 16"end end end;local function aJ()if L.ClawingShadows:IsReady()and ad<=5 then if n(L.ClawingShadows,nil,nil,not h:IsSpellInRange(L.ClawingShadows))then aj=5;return"clawing_shadows aoe_burst 2"end end;if L.ClawingShadows:IsReady()and(ad==6 and L.FesteringWoundDebuff:AuraActiveCount()>=3)then if n(L.ClawingShadows,nil,nil,not h:IsSpellInRange(L.ClawingShadows))then aj=5;return"clawing_shadows aoe_burst 4"end end;if a3:IsReady()and(L.BurstingSores:IsAvailable()and(L.FesteringWoundDebuff:AuraActiveCount()==ab or L.FesteringWoundDebuff:AuraActiveCount()>=3)or L.BurstingSores:IsAvailable()and L.ClawingShadows:IsAvailable()and L.FesteringWoundDebuff:AuraActiveCount()>=1)then if n(a3,nil,nil,not h:IsSpellInRange(a3))then aj=7;return"wound_spender aoe_burst 6"end end;if L.DeathCoil:IsReady()and not J and((g:BuffUp(L.SuddenDoomBuff)or not Y)and(j:BuffUp(L.DarkTransformation)and ah and ab<=3 or ab==2))then if n(L.DeathCoil,nil,nil,not h:IsSpellInRange(L.DeathCoil))then aj=10;return"death_coil aoe_burst 8"end end;if L.Epidemic:IsReady()and not J and(g:RunicPowerDeficit()<10+L.FesteringWoundDebuff:AuraActiveCount()*3 and L.FesteringWoundDebuff:AuraActiveCount()<6 and not Y or g:BuffUp(L.SwarmingMistBuff))then if n(L.Epidemic,X.Unholy.GCDasOffGCD.Epidemic,nil,not h:IsInRange(30))then aj=12;return"epidemic aoe_burst 10"end end;if L.Epidemic:IsReady()and not J and(g:RunicPowerDeficit()<25 and L.FesteringWoundDebuff:AuraActiveCount()>5 and not Y)then if n(L.Epidemic,X.Unholy.GCDasOffGCD.Epidemic,nil,not h:IsInRange(30))then aj=12;return"epidemic aoe_burst 12"end end;if L.Epidemic:IsReady()and not J and(L.FesteringWoundDebuff:AuraActiveCount()==0 and not Y or ad>1 and at(ac)<5)then if n(L.Epidemic,X.Unholy.GCDasOffGCD.Epidemic,nil,not h:IsInRange(30))then aj=12;return"epidemic aoe_burst 14"end end;if a3:IsReady()then if n(a3,nil,nil,not h:IsSpellInRange(a3))then aj=7;return"wound_spender aoe_burst 16"end end;if L.Epidemic:IsReady()and not J and not Y then if n(L.Epidemic,X.Unholy.GCDasOffGCD.Epidemic,nil,not h:IsInRange(30))then aj=12;return"epidemic aoe_burst 18"end end end;local function aK()if L.DeathCoil:IsReady()and not J and((not Y or g:BuffUp(L.SuddenDoomBuff))and(j:BuffUp(L.DarkTransformation)and ah and ab<=3 or ab==2))then if n(L.DeathCoil,nil,nil,not h:IsSpellInRange(L.DeathCoil))then aj=10;return"death_coil aoe_generic 2"end end;if L.Epidemic:IsReady()and not J and(g:BuffUp(L.SuddenDoomBuff)or not Y)then if n(L.Epidemic,X.Unholy.GCDasOffGCD.Epidemic,nil,not h:IsInRange(30))then aj=12;return"epidemic aoe_generic 4"end end;if a3:IsReady()then if W.CastTargetIf(a3,aa,"max",aw,aE)then aj=7;return"wound_spender aoe_generic 6"end end;if L.FesteringStrike:IsReady()then if h:DebuffStack(L.FesteringWoundDebuff)<=3 and(L.Apocalypse:CooldownRemains()<5 and D)or h:DebuffStack(L.FesteringWoundDebuff)<1 then if n(L.FesteringStrike,nil,nil,not h:IsSpellInRange(L.FesteringStrike))then aj=6;return"festering_strike aoe_generic 8"end end;if W.CastTargetIf(L.FesteringStrike,aa,"max",aw,aB)then aj=6;return"festering_strike aoe_generic 8"end end;if L.FesteringStrike:IsReady()then if(L.Apocalypse:CooldownRemains()>5 or not D)and h:DebuffStack(L.FesteringWoundDebuff)<1 then if n(L.FesteringStrike,nil,nil,not h:IsSpellInRange(L.FesteringStrike))then aj=6;return"festering_strike aoe_generic 10"end end;if W.CastTargetIf(L.FesteringStrike,aa,"min",aw,aC)then aj=6;return"festering_strike aoe_generic 10"end end end;local function aL()if M.PotionofSpectralStrength:IsReady()and o()and X.Commons.Enabled.Potions and y and((a0 or a1 and L.SummonGargoyle:TimeSinceLastCast()>=9 or d.FilteredFightRemains(aa,"<",26))and not m.GUISettings.General.HoldPotforBL or m.GUISettings.General.HoldPotforBL and g:BloodlustUp())then if n(M.PotionofSpectralStrength,nil)then aj=9;return"potion cooldowns 2"end end;if L.ArmyoftheDead:IsReady()and E and not t and not X.Unholy.DisableAotD and(L.UnholyBlight:CooldownRemains()<7 and F and(L.DarkTransformation:CooldownRemains()<7 and C)and L.UnholyBlight:IsAvailable()and(L.Apocalypse:CooldownRemains()<7 and D and a9 or not a9)or not L.UnholyBlight:IsAvailable()or d.FilteredFightRemains(aa,"<",35))then if n(L.ArmyoftheDead,nil,nil)then aj=400;return"army_of_the_dead cooldowns 4"end end;if L.SoulReaper:IsReady()and ab<=3 then if(h:TimeToX(35)<5 or h:HealthPercentage()<35)and h:TimeToDie()>5 then if n(L.SoulReaper,nil,nil,not h:IsSpellInRange(L.SoulReaper))then aj=11;return"soul_reaper cooldowns 5"end else if W.CastCycle(L.SoulReaper,aa,aG)then aj=11;return"soul_reaper cooldowns 6"end end end;if L.UnholyBlight:IsReady()and F and(_ and(L.Apocalypse:CooldownRemains()<5 and D or(L.Apocalypse:CooldownRemains()>10 or not D))and(L.DarkTransformation:CooldownRemains()<g:GCD()and C or j:BuffUp(L.DarkTransformation)))then if n(L.UnholyBlight,nil,nil,not h:IsInRange(8))then aj=13;return"unholy_blight cooldowns 8"end end;if L.UnholyBlight:IsReady()and F and(ab>=2 or d.FilteredFightRemains(aa,"<",21))then if n(L.UnholyBlight,nil,nil,not h:IsInRange(8))then aj=13;return"unholy_blight cooldowns 10"end end;if L.DarkTransformation:IsCastable()and C and(_ and(h:DebuffUp(L.UnholyBlightDebuff)or not L.UnholyBlight:IsAvailable()))then if n(L.DarkTransformation,X.Unholy.GCDasOffGCD.DarkTransformation)then aj=14;return"dark_transformation cooldowns 12"end end;if L.DarkTransformation:IsCastable()and C and(ab>=2 and(h:DebuffUp(L.UnholyBlightDebuff)or not L.UnholyBlight:IsAvailable())or d.FilteredFightRemains(aa,"<",21))then if n(L.DarkTransformation,X.Unholy.GCDasOffGCD.DarkTransformation)then aj=14;return"dark_transformation cooldowns 14"end end;if L.Apocalypse:IsCastable()and D and L.Apocalypse:IsUsable()and((ab==1 or not p())and h:DebuffStack(L.FesteringWoundDebuff)>=4 and(not a9 or a9 and(L.UnholyBlight:CooldownRemains()>10 or not F or(L.DarkTransformation:CooldownRemains()>10 or not C)and not L.UnholyBlight:IsAvailable())))then if n(L.Apocalypse,nil,nil,not h:IsSpellInRange(L.Apocalypse))then aj=15;return"apocalypse cooldowns 16"end end;if L.Apocalypse:IsCastable()and D and L.Apocalypse:IsUsable()then if ab>=2 and h:DebuffStack(L.FesteringWoundDebuff)>=4 and g:BuffDown(L.DeathAndDecayBuff)then if n(L.Apocalypse,nil,nil,not h:IsSpellInRange(L.Apocalypse))then aj=15;return"apocalypse cooldowns 18"end end;if W.CastTargetIf(L.Apocalypse,aa,"max",aw,ay,not h:IsSpellInRange(L.Apocalypse),X.Unholy.GCDasOffGCD.Apocalypse)then aj=15;return"apocalypse cooldowns 18"end end;if L.SummonGargoyle:IsCastable()and(g:RunicPowerDeficit()<14 and(L.UnholyBlight:CooldownRemains()<13 and F)and(L.DarkTransformation:CooldownRemains()<13 and C))then if n(L.SummonGargoyle,X.Unholy.GCDasOffGCD.SummonGargoyle,nil,not h:IsInRange(30))then aj=16;return"summon_gargoyle cooldowns 20"end end;if L.UnholyAssault:IsCastable()and _ and h:DebuffStack(L.FesteringWoundDebuff)<2 and(a2 or j:BuffUp(L.DarkTransformation)and(L.Apocalypse:CooldownRemains()>10 or not D))then if n(L.UnholyAssault,X.Unholy.GCDasOffGCD.UnholyAssault)then aj=17;return"unholy_assault cooldowns 22"end end;if L.UnholyAssault:IsCastable()then if W.CastTargetIf(L.UnholyAssault,aa,"min",aw,aD)then aj=17;return"unholy_assault cooldowns 24"end end;if L.RaiseDead:IsCastable()then if X.Unholy.RaiseDeadCastLeft then if m.CastLeft(L.RaiseDead)then aj=1;return"raise_dead cooldowns 26 left"end else if n(L.RaiseDead,nil,nil)then aj=1;return"raise_dead cooldowns 26 displaystyle"end end end;if L.SacrificialPact:IsReady()and not j:DebuffUp(k(111673))and not u and G and(ab>=2 and j:BuffDown(L.DarkTransformation)and(L.DarkTransformation:CooldownRemains()>5 or not C)or d.FilteredFightRemains(aa,"<",g:GCD()))then if n(L.SacrificialPact,nil,nil,not h:IsInRange(8))then aj=18;return"sacrificial_pact cooldowns 28"end end end;local function aM()if L.SwarmingMist:IsReady()and q and(_ and g:RunicPowerDeficit()>16 and(not L.Apocalypse:CooldownUp()or not D or not L.ArmyoftheDamned:IsAvailable()and(not L.DarkTransformation:CooldownUp()or not C))or d.FilteredFightRemains(aa,"<",11))then if n(L.SwarmingMist,nil,nil,not h:IsInRange(10))then aj=19;return"swarming_mist covenants 2"end end;if L.SwarmingMist:IsReady()and q and(not L.Apocalypse:CooldownUp()or not D)and(ab>=2 and ab<=5 and g:RunicPowerDeficit()>10+ab*6 or ab>5 and g:RunicPowerDeficit()>40)then if n(L.SwarmingMist,nil,nil,not h:IsInRange(10))then aj=19;return"swarming_mist covenants 4"end end;if L.AbominationLimb:IsCastable()and q and(_ and not L.LeadByExample:SoulbindEnabled()and(not L.Apocalypse:CooldownUp()or not D)or not L.ArmyoftheDamned:IsAvailable()and(not L.DarkTransformation:CooldownUp()or not C)and g:RuneTimeToX(4)>g:BuffRemains(L.RunicCorruptionBuff)or d.FilteredFightRemains(aa,"<",21))then if n(L.AbominationLimb,nil,nil)then aj=20;return"abomination_limb covenants 6"end end;if L.AbominationLimb:IsCastable()and q and(_ and L.LeadByExample:SoulbindEnabled()and(h:DebuffRemains(L.UnholyBlightDebuff)>11 or not L.UnholyBlight:IsAvailable()and(not L.DarkTransformation:CooldownUp()or not C)))then if n(L.AbominationLimb,nil,nil)then aj=20;return"abomination_limb covenants 8"end end;if L.AbominationLimb:IsCastable()and q and(ab>=2 and g:RuneTimeToX(4)>g:BuffRemains(L.RunicCorruptionBuff))then if n(L.AbominationLimb,nil,nil)then aj=20;return"abomination_limb covenants 10"end end;if L.AbominationLimb:IsCastable()and q then if n(L.AbominationLimb,nil,nil)then aj=20;return"abomination_limb covenants 101"end end;if L.ShackleTheUnworthy:IsCastable()and q and(_ and(L.Apocalypse:CooldownRemains()>10 or not D or not L.ArmyoftheDamned:IsAvailable()and(not L.DarkTransformation:CooldownUp()or not C))or d.FilteredFightRemains(aa,"<",15))then if n(L.ShackleTheUnworthy,nil,nil,not h:IsSpellInRange(L.ShackleTheUnworthy))then aj=21;return"shackle_the_unworthy covenants 12"end end;if L.ShackleTheUnworthy:IsCastable()and q and(ab>=2 and(g:BuffUp(L.DeathAndDecayBuff)or ad>1 and at(ac)<=14))then if n(L.ShackleTheUnworthy,nil,nil,not h:IsSpellInRange(L.ShackleTheUnworthy))then aj=21;return"shackle_the_unworthy covenants 14"end end end;local function aN()if L.ArcaneTorrent:IsCastable()and(g:RunicPowerDeficit()>65 and(a1 or not L.SummonGargoyle:IsAvailable())and g:Rune()<=1)then if n(L.ArcaneTorrent,nil,nil,not h:IsInRange(8))then aj=22;return"arcane_torrent main 2"end end;if L.BloodFury:IsCastable()and(a0 or a1 and 35-L.Gargoyle:TimeSinceLastCast()<=L.BloodFury:BaseDuration()or d.FilteredFightRemains(aa,"<=",L.BloodFury:BaseDuration()))then if n(L.BloodFury,nil)then aj=23;return"blood_fury main 4"end end;if L.Berserking:IsCastable()and(a0 or a1 and 35-L.Gargoyle:TimeSinceLastCast()<=L.Berserking:BaseDuration()or d.FilteredFightRemains(aa,"<=",L.Berserking:BaseDuration()))then if n(L.Berserking,nil)then aj=24;return"berserking main 6"end end;if L.LightsJudgment:IsCastable()and g:BuffUp(L.UnholyStrengthBuff)then if n(L.LightsJudgment,nil,nil,not h:IsSpellInRange(L.LightsJudgment))then aj=25;return"lights_judgment main 8"end end;if L.AncestralCall:IsCastable()and(a0 or a1 and L.Gargoyle:TimeSinceLastCast()>=20 or d.FilteredFightRemains(aa,"<=",15))then if n(L.AncestralCall,nil)then aj=26;return"ancestral_call main 10"end end;if L.ArcanePulse:IsCastable()and(ab>=2 or g:Rune()<=1 and g:RunicPowerDeficit()>=60)then if n(L.ArcanePulse,nil,nil,not h:IsInRange(8))then aj=27;return"arcane_pulse main 12"end end;if L.Fireblood:IsCastable()and(a0 or a1 and 35-L.Gargoyle:TimeSinceLastCast()<=L.Fireblood:BaseDuration()or d.FilteredFightRemains(aa,"<=",L.Fireblood:BaseDuration()))then if n(L.Fireblood,nil)then aj=28;return"fireblood main 14"end end;if L.BagofTricks:IsCastable()and(ab==1 and(g:BuffUp(L.UnholyStrengthBuff)or d.FilteredFightRemains(aa,"<",5)))then if n(L.BagofTricks,nil,nil,not h:IsSpellInRange(L.BagofTricks))then aj=29;return"bag_of_tricks main 16"end end end;local function aO()if L.DeathCoil:IsReady()and not J and(not Y and(g:BuffUp(L.SuddenDoomBuff)or g:RunicPowerDeficit()<=13)or a1 and g:Rune()<=3 or d.FilteredFightRemains(aa,"<",10)and h:DebuffDown(L.FesteringWoundDebuff))then if n(L.DeathCoil,nil,nil,not h:IsSpellInRange(L.DeathCoil))then aj=10;return"death_coil generic 4"end end;if a4:IsReady()and not g:IsMoving()and((L.Defile:IsAvailable()or g:Covenant()=="Night Fae"or ag)and(not Z or d.FilteredFightRemains(aa,"<",5)))then if a4==L.DeathsDue then if n(a4,nil,nil)then aj=2;return"any_dnd generic 6"end else if n(a4,nil)then aj=2;return"any_dnd generic 8"end end end;if a3:IsReady()and(VarMajorProcsActive and h:DebuffStack(L.FesteringWoundDebuff)>=1 and(L.Apocalypse:CooldownRemains()>5 or not D)and not Z)then if n(a3,nil,nil,not h:IsSpellInRange(a3))then aj=7;return"wound_spender generic 10"end end;if a3:IsReady()and(h:DebuffStack(L.FesteringWoundDebuff)>3 and not Z or h:DebuffUp(L.FesteringWoundDebuff)and d.FilteredFightRemains(aa,"<",h:DebuffStack(L.FesteringWoundDebuff)*g:GCD()))then if n(a3,nil,nil,not h:IsSpellInRange(a3))then aj=7;return"wound_spender generic 12"end end;if L.DeathCoil:IsReady()and not J and(g:RunicPowerDeficit()<=20 and not Y)then if n(L.DeathCoil,nil,nil,not h:IsSpellInRange(L.DeathCoil))then aj=10;return"death_coil generic 14"end end;if L.FesteringStrike:IsReady()and(h:DebuffStack(L.FesteringWoundDebuff)<4 and not Z)then if n(L.FesteringStrike,nil,nil,not h:IsInMeleeRange(5))then aj=6;return"festering_strike generic 16"end end;if L.DeathCoil:IsReady()and not J and not Y then if n(L.DeathCoil,nil,nil,not h:IsSpellInRange(L.DeathCoil))then aj=10;return"death_coil generic 18"end end;if a3:IsReady()and(h:DebuffStack(L.FesteringWoundDebuff)>=1 and g:Rune()<2 and not Z and(L.Apocalypse:CooldownRemains()>5 or not D))then if n(a3,nil,nil,not h:IsSpellInRange(a3))then aj=7;return"wound_spender generic 20"end end end;local function aP()if M.InscrutableQuantumDevice:IsEquippedAndReady()and((L.UnholyBlight:CooldownRemains()>20 or not F or(L.DarkTransformation:CooldownRemains()>20 or not C))and(ab>=2 or L.ArmyoftheDead:TimeSinceLastCast()<=30 or a2 and(L.UnholyAssault:IsAvailable()or X.Unholy.DisableAotD)or a1)or d.FilteredFightRemains(aa,"<",21)or h:TimeToX(20)<5)then if n(M.InscrutableQuantumDevice,nil,nil)then if M.InscrutableQuantumDevice:ID()==R and X.Commons.Enabled.TopTrinket==true then aj=30;return"top trinket 1"elseif M.InscrutableQuantumDevice:ID()==T and X.Commons.Enabled.BottomTrinket then aj=31;return"top trinket 2"end end end;if M.MacabreSheetMusic:IsEquippedAndReady()and(L.Apocalypse:CooldownRemains()<5 and(not M.InscrutableQuantumDevice:IsEquipped()or M.InscrutableQuantumDevice:CooldownRemains()>0)or d.FilteredFightRemains(aa,"<",21))then if n(M.MacabreSheetMusic,nil,nil)then if M.MacabreSheetMusic:ID()==R and X.Commons.Enabled.TopTrinket then aj=30;return"top trinket 1"elseif M.MacabreSheetMusic:ID()==T and X.Commons.Enabled.BottomTrinket then aj=31;return"top trinket 2"end end end;if M.DreadfireVessel:IsEquippedAndReady()and(not L.Apocalypse:CooldownUp()and(not M.InscrutableQuantumDevice:IsEquipped()or M.InscrutableQuantumDevice:CooldownRemains()>0)or d.FilteredFightRemains(aa,"<",3))then if n(M.DreadfireVessel,nil,nil,not h:IsInRange(50))then if M.DreadfireVessel:ID()==R and X.Commons.Enabled.TopTrinket then aj=30;return"top trinket 1"elseif M.DreadfireVessel:ID()==T and X.Commons.Enabled.BottomTrinket then aj=31;return"top trinket 2"end end end;if M.DarkmoonDeckVoracity:IsEquippedAndReady()and(not L.Apocalypse:CooldownUp()and(not M.InscrutableQuantumDevice:IsEquipped()or M.InscrutableQuantumDevice:CooldownRemains()>0)or d.FilteredFightRemains(aa,"<",21))then if n(M.DarkmoonDeckVoracity,nil,nil)then if M.DarkmoonDeckVoracity:ID()==R and X.Commons.Enabled.TopTrinket then aj=30;return"top trinket 1"elseif M.DarkmoonDeckVoracity:ID()==T and X.Commons.Enabled.BottomTrinket then aj=31;return"top trinket 2"end end end;if(not L.Apocalypse:CooldownUp()or j:BuffUp(L.DarkTransformation))and(not M.InscrutableQuantumDevice:IsEquipped()or M.InscrutableQuantumDevice:CooldownRemains()>0)then local aQ=g:GetUseableTrinkets(N)if aQ then if n(aQ,nil,nil)then if aQ:ID()==R and X.Commons.Enabled.TopTrinket then aj=30;return"top trinket 1"elseif aQ:ID()==T and X.Commons.Enabled.BottomTrinket then aj=31;return"top trinket 2"end end end end end;local function aR()s=HeroRotationCharDB.Toggles[6]q=HeroRotationCharDB.Toggles[4]r=HeroRotationCharDB.Toggles[5]t=HeroRotationCharDB.Toggles[10]u=HeroRotationCharDB.Toggles[11]v=HeroRotationCharDB.Toggles[12]w=HeroRotationCharDB.Toggles[13]x=HeroRotationCharDB.Toggles[14]y=HeroRotationCharDB.Toggles[15]z=HeroRotationCharDB.Toggles[16]J=false;E=false;C=false;D=false;F=false;G=false;if X.Unholy.IncludedCooldowns.ArmyoftheDead and o()or X.Unholy.IncludedSmallCooldowns.ArmyoftheDead and(o()or r)or not X.Unholy.IncludedSmallCooldowns.ArmyoftheDead and not X.Unholy.IncludedCooldowns.ArmyoftheDead then E=true end;if X.Unholy.IncludedCooldowns.DarkTransformation and o()or X.Unholy.IncludedSmallCooldowns.DarkTransformation and(o()or r)or not X.Unholy.IncludedSmallCooldowns.DarkTransformation and not X.Unholy.IncludedCooldowns.DarkTransformation then C=true end;if X.Unholy.IncludedCooldowns.Apocalypse and o()or X.Unholy.IncludedSmallCooldowns.Apocalypse and(o()or r)or not X.Unholy.IncludedSmallCooldowns.Apocalypse and not X.Unholy.IncludedCooldowns.Apocalypse then D=true end;if X.Unholy.IncludedCooldowns.UnholyBlight and o()or X.Unholy.IncludedSmallCooldowns.UnholyBlight and(o()or r)or not X.Unholy.IncludedSmallCooldowns.UnholyBlight and not X.Unholy.IncludedCooldowns.UnholyBlight then F=true end;if X.Unholy.IncludedCooldowns.SacrificialPact and o()or X.Unholy.IncludedSmallCooldowns.SacrificialPact and(o()or r)or not X.Unholy.IncludedSmallCooldowns.SacrificialPact and not X.Unholy.IncludedCooldowns.SacrificialPact then G=true end end;local function aS()V=not ao()aa=g:GetEnemiesInMeleeRange(8)ac=h:GetEnemiesInSplashRange(10)R,S=GetInventoryItemID("player",13)T,S=GetInventoryItemID("player",14)if p()then ab=#aa;ad=#ac else ab=1;ad=1 end;ae=ap(ac)a1=L.SummonGargoyle:TimeSinceLastCast()<=35;a2=L.Apocalypse:TimeSinceLastCast()<=15;a3=L.ClawingShadows:IsAvailable()and L.ClawingShadows or L.ScourgeStrike;a4=L.DeathAndDecay;if g:CovenantID()==3 then a4=L.DeathsDue end;if L.Defile:IsAvailable()then a4=L.Defile end;if not BotOn then ak=0;aj=0 end;if ak>0 then ak=0 end;if aj>0 then aj=0 end;U=aR()if m.GUISettings.General.OpenerReset>0 and not HeroRotationCharDB.Toggles[6]then A=GetTime()B=A+m.GUISettings.General.OpenerReset elseif m.GUISettings.General.OpenerReset>0 and B~=nil and GetTime()>B and HeroRotationCharDB.Toggles[6]then HeroRotationCharDB.Toggles[6]=not HeroRotationCharDB.Toggles[6]m.ToggleIconFrame:UpdateButtonText(6)m.Print("Opener is now "..(HeroRotationCharDB.Toggles[6]and"|cff00ff00enabled|r."or"|cffff0000disabled|r."))end;if w and L.AntiMagicZone:IsUsableP()and g:AffectingCombat()and L.AntiMagicZone:CooldownRemains(BypassRecovery)<=0 then if n(L.AntiMagicZone,nil,nil,nil)then aj=38;return"queue AMZ"end elseif(not L.AntiMagicZone:IsUsableP()or L.AntiMagicZone:CooldownRemains()>0 or not g:AffectingCombat())and w then HeroRotationCharDB.Toggles[13]=not HeroRotationCharDB.Toggles[13]m.Print("Anti-Magic Zone Queue is now "..(HeroRotationCharDB.Toggles[13]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if x and L.DeathGrip:IsUsableP()and L.DeathGrip:CooldownRemains(BypassRecovery)<=0 and W.TargetIsValid()and f("mouseover"):GUID()~=nil then if n(L.DeathGrip,nil,nil,nil)then ak=72;return"queue DeathGrip MO"end elseif x and L.DeathGrip:IsUsableP()and L.DeathGrip:CooldownRemains(BypassRecovery)<=0 and W.TargetIsValid()then if n(L.DeathGrip,nil,nil,nil)then aj=39;return"queue DeathGrip"end elseif(not L.DeathGrip:IsUsableP()or L.DeathGrip:CooldownRemains()>0 or not W.TargetIsValid())and x then HeroRotationCharDB.Toggles[14]=not HeroRotationCharDB.Toggles[14]m.Print("Death Grip Queue is now "..(HeroRotationCharDB.Toggles[14]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if z and L.Asphyxiate:IsUsableP()and L.Asphyxiate:CooldownRemains(BypassRecovery)<=0 and f("mouseover"):GUID()~=nil then if n(L.Asphyxiate,nil,nil,nil)then ak=471;return"queue Asphyxiate MO"end elseif z and L.Asphyxiate:IsUsableP()and L.Asphyxiate:CooldownRemains(BypassRecovery)<=0 and W.TargetIsValid()then if n(L.Asphyxiate,nil,nil,nil)then aj=47;return"queue Asphyxiate"end elseif(not L.Asphyxiate:IsUsableP()or L.Asphyxiate:CooldownRemains()>0)and z then HeroRotationCharDB.Toggles[16]=not HeroRotationCharDB.Toggles[16]m.Print("Asphyxiate Queue is now "..(HeroRotationCharDB.Toggles[16]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if g:IsChanneling(k(324631))then if n(L.PoolResources,nil,nil,nil)then ak=36;return"Raise Ally MO"end end;if L.RaiseDead:IsCastable()then if X.Unholy.RaiseDeadCastLeft then if m.CastLeft(L.RaiseDead)then aj=1;return"raise_dead precombat 2 left"end else if n(L.RaiseDead,nil,nil)then aj=1;return"raise_dead precombat 2 displaystyle"end end end;if W.TargetIsValid()then if not g:AffectingCombat()and s then H=false;local U=aH()if U then return U end end end;if W.TargetIsValid()and g:AffectingCombat()then if not UnitIsEnemy("player","mouseover")and UnitIsDead("mouseover")then if L.RaiseAlly:IsCastable()and g:RunicPower()>=30 then if n(L.RaiseAlly,nil)then ak=73;return"RaiseAlly MO"end elseif L.RaiseAlly:CooldownRemains(BypassRecovery)<=0 and g:RunicPower()<30 then J=true end end;if X.Commons.UseDefensives then if g:HealthPercentage()<X.Commons.HealthstoneHP and M.Healthstone:IsReady()and M.Healthstone:CooldownRemains()<=0 then if n(M.Healthstone,nil)then aj=40;return"Healthstone HP"end end;if g:HealthPercentage()<X.Commons.HealPotHP and M.CosmicHealPot:IsReady()and M.CosmicHealPot:CooldownRemains()<=0 then if n(M.CosmicHealPot,nil)then aj=45;return"CosmicHealPot HP"end end;if g:HealthPercentage()<X.Commons.HealPotHP and M.HealPot:IsReady()and M.HealPot:CooldownRemains()<=0 then if n(M.HealPot,nil)then aj=41;return"HealPot HP"end end;if g:HealthPercentage()<X.Commons.UseDarkSuccorHP and L.DeathStrike:IsReady()and g:BuffUp(L.DeathStrikeBuff)then if n(L.DeathStrike)then aj=42;return"DeathStrike Dark Succor HP"end end;if g:HealthPercentage()<X.Commons.UseDeathStrikeHP and L.DeathStrike:IsReady()then if n(L.DeathStrike)then aj=42;return"DeathStrike HP"end end;if g:HealthPercentage()<X.Commons.IceboundFortitudeHP and L.IceboundFortitude:IsReady()then if n(L.IceboundFortitude)then aj=43;return"Icebound Fortitude HP"end end;if g:HealthPercentage()<X.Commons.LichborneHP and L.Lichborne:IsReady()then if n(L.Lichborne)then aj=44;return"Lichborne HP"end end;if g:HealthPercentage()<X.Commons.AntiMagicShellHP and L.AntiMagicShell:IsReady()then if n(L.AntiMagicShell)then aj=45;return"Anti-Magic Shell HP"end end;if g:HealthPercentage()<X.Commons.DeathPactHP and L.DeathPact:IsReady()then if n(L.DeathPact)then aj=46;return"Death Pact HP"end end end;local U=W.Interrupt(15,L.MindFreeze,nil,ai)if U then return U end;if L.DeathStrike:IsReady()and not V then if n(L.DeathStrike)then aj=35;return"death_strike low hp or proc"end end;Y=L.SummonGargoyle:IsAvailable()and L.SummonGargoyle:CooldownRemains()<5 and(L.UnholyBlight:IsAvailable()and(L.UnholyBlight:CooldownRemains()<13 and F)and(L.DarkTransformation:CooldownRemains()<13 and C)or not L.UnholyBlight:IsAvailable())Z=L.SoulReaper:IsAvailable()and g:Rune()<2 and h:TimeToX(35)<5 and d.FilteredFightRemains(aa,">",5)_=ab==1 or not p()a0=(L.SummonGargoyle:IsAvailable()and not a1 and not L.SummonGargoyle:CooldownUp()or not L.SummonGargoyle:IsAvailable())and(g:BuffUp(L.UnholyAssault)or L.ArmyoftheDamned:IsAvailable()and a2 or g:BuffUp(L.DarkTransformation))VarMajorProcsActive=g:Covenant()=="Night Fae"and g:BuffUp(L.DeathAndDecayBuff)and g:BuffStack(L.DeathsDueBuff)<4 or g:BuffUp(L.MarrowedGemstoneEnhancement)or g:BuffUp(L.ThrillSeeker)or g:BuffUp(L.FrenziedMonstrosity)or g:BuffUp(L.LeadByExample)if L.Outbreak:IsReady()and(ae>0 and ab==0)then if n(L.Outbreak,nil,nil,not h:IsSpellInRange(L.Outbreak))then aj=8;return"outbreak out_of_range"end end;if L.Epidemic:IsReady()and p()and not J and L.VirulentPlagueDebuff:AuraActiveCount()>1 and(not Y and ab==0)then if n(L.Epidemic,nil,nil,not h:IsInRange(30))then aj=12;return"epidemic out_of_range"end end;if L.DeathCoil:IsReady()and not J and L.VirulentPlagueDebuff:AuraActiveCount()<2 and(not Y and ab==0)then if n(L.DeathCoil,nil,nil,not h:IsSpellInRange(L.DeathCoil))then aj=10;return"death_coil out_of_range"end end;if L.Outbreak:IsReady()and(h:DebuffRefreshable(L.VirulentPlagueDebuff)and(not L.UnholyBlight:IsAvailable()or L.UnholyBlight:IsAvailable()and not L.UnholyBlight:CooldownUp()or not F))then if n(L.Outbreak,nil,nil,not h:IsSpellInRange(L.Outbreak))then aj=8;return"outbreak main 18"end end;if L.Outbreak:IsReady()and((h:DebuffRefreshable(L.VirulentPlagueDebuff)or ae>0)and ab>=2 and(not L.UnholyBlight:IsAvailable()or L.UnholyBlight:IsAvailable()and not L.UnholyBlight:CooldownUp()or not F))then if n(L.Outbreak,nil,nil,not h:IsSpellInRange(L.Outbreak))then aj=8;return"outbreak main 20"end end;if L.Outbreak:IsReady()and(af and(h:DebuffRefreshable(L.FrostFeverDebuff)or h:DebuffRefreshable(L.BloodPlagueDebuff)))then if n(L.Outbreak,nil,nil,not h:IsSpellInRange(L.Outbreak))then aj=8;return"outbreak main 22"end end;if a3:IsReady()and(g:Covenant()=="Night Fae"and g:BuffRemains(L.DeathAndDecayBuff)<g:GCD()*1.5 and g:BuffUp(L.DeathAndDecayBuff))then if n(a3,nil,nil,not h:IsSpellInRange(a3))then aj=7;return"wound_spender main 24"end end;if L.DeathsDue:IsReady()and h:IsInMeleeRange(10)and q and L.DeathsDue:CooldownRemains()<g:GCD()and ab==1 then if n(L.DeathsDue,nil,nil)then aj=324128;return"deaths_due covenants 2"end end;if(X.Commons.Enabled.TopTrinket or X.Commons.Enabled.BottomTrinket)and o()then local U=aP()if U then return U end end;if true then local U=aM()if U then return U end end;if o()then local U=aN()if U then return U end end;if o()or not o()then local U=aL()if U then return U end end;if p()then if ab>=2 and a4:CooldownRemains()<10 and g:BuffDown(L.DeathAndDecayBuff)then local U=aI()if U then return U end end;if ab>=2 and g:BuffUp(L.DeathAndDecayBuff)then local U=aJ()if U then return U end end;if ab>=2 and g:BuffDown(L.DeathAndDecayBuff)then local U=aK()if U then return U end end end;if ab==1 then local U=aO()if U then return U end end;if true then if n(L.PoolResources)then aj=36;return"pool_resources"end end end end;local function aT()L.VirulentPlagueDebuff:RegisterAuraTracking()L.FesteringWoundDebuff:RegisterAuraTracking()end;function ReturnSpell()if aj==0 then return 0 else return aj end end;function ReturnSpellMO()if ak==0 then return 0 else return ak end end;m.SetAPL(252,aS,aT)