local a,b=...local c=HeroDBC.DBC;local d=HeroLib;local e=HeroCache;local f=d.Unit;local g=f.Player;local h=f.Target;local i=f.Pet;local j=d.Spell;local k=d.Item;local l=HeroRotation;local m=l.AoEON;local n=l.CDsON;local o=HeroRotationCharDB.Toggles[4]local p=HeroRotationCharDB.Toggles[5]local q=HeroRotationCharDB.Toggles[6]local r=HeroRotationCharDB.Toggles[12]local s=not HeroRotationCharDB.Toggles[15]local t=HeroRotationCharDB.Toggles[40]local u=HeroRotationCharDB.Toggles[42]local v=HeroRotationCharDB.Toggles[43]local w=HeroRotationCharDB.Toggles[41]local x=HeroRotationCharDB.Toggles[45]local y=HeroRotationCharDB.Toggles[46]local z=HeroRotationCharDB.Toggles[44]local A=false;local B=false;local C=false;local D=false;local E=GetInventoryItemID("player",13)local F=GetInventoryItemID("player",14)local G=0;local H=l.Cast;local I=l.CastSuggested;local J=string.match;local K=j.DemonHunter.Havoc;local L=k.DemonHunter.Havoc;local M={}local N=g:GetEquipment()local O=k(0)local P=k(0)if N[13]then O=k(N[13])end;if N[14]then P=k(N[14])end;local Q;local R,S;local T,U;local V=g:HasLegendaryEquipped(20)local W=g:HasLegendaryEquipped(23)local X=g:HasLegendaryEquipped(25)local Y=l.Commons.Everyone;local Z={General=l.GUISettings.General,Commons=l.GUISettings.APL.DemonHunter.Commons,Havoc=l.GUISettings.APL.DemonHunter.Havoc}local _={{K.FelEruption,"Cast Fel Eruption (Interrupt)",function()return true end},{K.ChaosNova,"Cast Chaos Nova (Interrupt)",function()return true end}}local a0=0;local a1=0;local a2=false;local a3=false;local a4=false;local a5=false;local a6=false;local a7=false;local a8=false;local a9=0;local aa=false;d:RegisterForEvent(function()a3=false;a4=false;a5=false;a6=false;a7=false;a8=false end,"PLAYER_REGEN_ENABLED")d:RegisterForEvent(function()N=g:GetEquipment()O=k(0)P=k(0)if N[13]then O=k(N[13])end;if N[14]then P=k(N[14])end;V=g:HasLegendaryEquipped(20)W=g:HasLegendaryEquipped(23)X=g:HasLegendaryEquipped(25)end,"PLAYER_EQUIPMENT_CHANGED")local function ab(ac)if ac then return 1 else return 0 end end;local function ad(ac)return ac~=0 end;local function ae(af)local ae=0;for ag in pairs(af)do local ah=af[ag]if ah:NPCID()==169421 or ah:NPCID()==169425 or ah:NPCID()==168932 or ah:NPCID()==169426 or ah:NPCID()==169429 or ah:NPCID()==169428 or ah:NPCID()==169430 then ae=ae+1 end end;return ae end;local function ai(aj)if K.Felblade:TimeSinceLastCast()<=g:GCD()then return true elseif K.VengefulRetreat:TimeSinceLastCast()<1.0 and K.VengefulRetreat:TimeSinceLastCast()>0.25 or K.FelRush:TimeSinceLastCast()<1.0 then return false end;return aj and h:IsInMeleeRange(aj)or h:IsInMeleeRange(5)end;local function ak()return true end;local function al(af)local am=0;for ag in pairs(af)do local ah=af[ag]if ah:DebuffDown(K.BurningWoundDebuff)then am=am+1 end end;return am end;local function an(af)local ao=0;for ag in pairs(af)do local ah=af[ag]if ah:DebuffDown(K.SadisticGleeDebuff)then ao=ao+1 end end;return ao end;local function ap(aq)return aq:DebuffRemains(K.BurningWoundDebuff)end;local function ar(aq)if X and aq:DebuffRemains(K.BurningWoundDebuff)<4 and aq:IsInRange(8)and aq:GUID()==f("mouseover"):GUID()and Z.Havoc.TargetSwap=="Mouseover"then if K.DemonBlades:IsAvailable()then a1=1111 else a1=111 end;return true elseif X and aq:DebuffRemains(K.BurningWoundDebuff)<4 and aq:IsInRange(8)and Z.Havoc.TargetSwap=="AutoSwap"and aq:GUID()~=h:GUID()and not r then a1=999;return true elseif X and aq:DebuffRemains(K.BurningWoundDebuff)<4 and aq:IsInRange(8)and aq:GUID()==h:GUID()and h:IsInRange(8)then a0=162243;return true elseif X and aq:DebuffRemains(K.BurningWoundDebuff)<4 and aq:IsInRange(8)then return true end end;local function as(aq)return aq:DebuffRemains(K.BurningWoundDebuff)end;local function at(aq)if X and aq:DebuffRemains(K.BurningWoundDebuff)<4 and aq:IsInRange(8)and aq:GUID()==f("mouseover"):GUID()and Z.Havoc.TargetSwap=="Mouseover"then if K.DemonBlades:IsAvailable()then a1=1111 else a1=111 end;return true elseif X and aq:DebuffRemains(K.BurningWoundDebuff)<4 and aq:IsInRange(8)and Z.Havoc.TargetSwap=="AutoSwap"and aq:GUID()~=h:GUID()and not r then a1=999;return true elseif X and aq:DebuffRemains(K.BurningWoundDebuff)<4 and aq:IsInRange(8)and aq:GUID()==h:GUID()then a0=162243;return true elseif X and aq:DebuffRemains(K.BurningWoundDebuff)<4 and aq:IsInRange(8)then return true end end;local function au()if O:TrinketHasStatAnyDps()and not P:TrinketHasStatAnyDps()then a9=1 end;if P:TrinketHasStatAnyDps()and not O:TrinketHasStatAnyDps()then a9=2 end;if O:TrinketHasStatAnyDps()and P:TrinketHasStatAnyDps()or not(O:TrinketHasStatAnyDps()and P:TrinketHasStatAnyDps())then a9=0 end;aa=K.BlindFury:IsAvailable()and(V or K.DemonBlades:IsAvailable())if not h:IsInMeleeRange(5)and K.VengefulRetreat:TimeSinceLastCast()>0.75 and not t and h:IsInRange(15)and K.FelRush:IsCastable()and A then if H(K.FelRush,nil,nil,not h:IsInRange(15))then a0=195072;return"fel_rush precombat 2"end end;if h:IsInMeleeRange(5)and(K.DemonsBite:IsCastable()or K.DemonBlades:IsAvailable())then if K.DemonBlades:IsAvailable()and IsCurrentSpell(6603)~=true then if H(K.DemonsBite,nil,nil,not h:IsInMeleeRange(5))then a0=1162243;return"demons_bite or demon_blades precombat 4"end else if H(K.DemonsBite,nil,nil,not h:IsInMeleeRange(5))then a0=162243;return"demons_bite or demon_blades precombat 4"end end end end;local function av()if K.Metamorphosis:IsCastable()and C and h:IsInRange(8)and(not K.Demonic:IsAvailable()and(K.EyeBeam:CooldownRemains()>20 or not D)and(not K.SinfulBrand:IsAvailable()or h:DebuffDown(K.SinfulBrandDebuff))or d.BossFilteredFightRemains("<",25))then if H(K.Metamorphosis,nil,nil,not h:IsInRange(40))then a0=191427;return"metamorphosis cooldown 2"end end;if K.Metamorphosis:IsCastable()and C and h:IsInRange(8)and(K.Demonic:IsAvailable()and((K.EyeBeam:CooldownRemains()>20 or not D)and(not a4 or K.BladeDance:CooldownRemains()>g:GCD()))and(not K.SinfulBrand:IsAvailable()or h:DebuffDown(K.SinfulBrandDebuff))or d.BossFilteredFightRemains("<",25))then if H(K.Metamorphosis,nil,nil,not h:IsInRange(40))then a0=191427;return"metamorphosis cooldown 4"end end;if(L.PotionofPhantomFire:IsReady()or L.PotionofSpectralAgility:IsReady())and h:IsInMeleeRange(8)and l.CDsON()and s and Z.Commons.Enabled.Potions and(g:BuffRemains(K.MetamorphosisBuff)>25 or d.BossFilteredFightRemains("<",60))then if H(L.PotionofPhantomFire,nil,nil)then a0=4;return"potion cooldown 6"end end;if O:IsReady()and h:IsInRange(10)and Z.Commons.Enabled.TopTrinket and l.CDsON()and(a9==1 and(g:BuffUp(K.MetamorphosisBuff)or not K.Demonic:IsAvailable()and(K.Metamorphosis:CooldownRemains()>d.FightRemains(S)or not C)or d.BossFilteredFightRemains("<=",20))or a9==2 and not P:IsReady()or a9==0)then if H(O,nil,nil)then if O:ID()==GetInventoryItemID("player",13)and Z.Commons.Enabled.TopTrinket then a0=20;return"top trinket 1"elseif O:ID()==GetInventoryItemID("player",14)and Z.Commons.Enabled.BottomTrinket then a0=25;return"bot trinket 1"end end end;if P:IsReady()and h:IsInRange(10)and Z.Commons.Enabled.BottomTrinket and l.CDsON()and(a9==2 and(g:BuffUp(K.MetamorphosisBuff)or not K.Demonic:IsAvailable()and(K.Metamorphosis:CooldownRemains()>d.FightRemains(S)or not C)or d.BossFilteredFightRemains("<=",20))or a9==1 and not O:IsReady()or a9==0)then if H(P,nil,nil)then if P:ID()==GetInventoryItemID("player",13)and Z.Commons.Enabled.TopTrinket then a0=20;return"top trinket 1"elseif P:ID()==GetInventoryItemID("player",14)and Z.Commons.Enabled.BottomTrinket then a0=25;return"bot trinket 1"end end end;if K.SinfulBrand:IsCastable()and h:IsInMeleeRange(30)and o and h:DebuffDown(K.SinfulBrandDebuff)then if H(K.SinfulBrand,nil,nil,not h:IsSpellInRange(K.SinfulBrand))then a0=317009;return"sinful_brand cooldown 12"end end;if K.TheHunt:IsCastable()and not g:IsMoving()and(G==0 or G>K.TheHunt:CastTime())and h:IsInRange(40)and o and(not K.Demonic:IsAvailable()and not a8 and not a3 or g:BuffUp(K.FuriousGazeBuff)or K.Demonic:IsAvailable())then if H(K.TheHunt,nil,nil,not h:IsSpellInRange(K.TheHunt))then a0=323639;return"the_hunt cooldown 14"end end;if K.ElysianDecree:IsCastable()and h:IsInRange(30)and o and T>0 then if H(K.ElysianDecree,nil,nil,not h:IsInRange(30))then a0=306830;return"elysian_decree cooldown 16"end end end;local function aw()if K.FelRush:IsCastable()and h:IsInRange(15)and K.VengefulRetreat:TimeSinceLastCast()>0.75 and not t and(K.UnboundChaos:IsAvailable()and g:BuffUp(K.UnboundChaosBuff)and K.FelRush:Charges()==2)and A then if H(K.FelRush,nil,nil)then a0=195072;return"fel_rush demonic 2"end end;if K.DeathSweep:IsReady()and K.VengefulRetreat:TimeSinceLastCast()>=1 and h:IsInMeleeRange(8)and a4 then if H(K.DeathSweep,nil,nil,not ai(8))then a0=210152;return"death_sweep demonic 4"end end;if K.GlaiveTempest:IsReady()and h:IsInMeleeRange(8)and T>0 then if H(K.GlaiveTempest,nil,nil,not h:IsInMeleeRange(8))then a0=342817;return"glaive_tempest demonic 6"end end;if K.ThrowGlaive:IsCastable()and h:IsInMeleeRange(30)and K.VengefulRetreat:TimeSinceLastCast()>1 and(K.SerratedGlaive:ConduitEnabled()and(K.EyeBeam:CooldownRemains()<6 and D)and g:BuffDown(K.MetamorphosisBuff)and h:DebuffDown(K.ExposedWoundDebuff))then if H(K.ThrowGlaive,nil,nil,not h:IsSpellInRange(K.ThrowGlaive))then a0=185123;return"throw_glaive demonic 8"end end;if K.EyeBeam:IsReady()and not g:IsMoving()and(G==0 or G>K.EyeBeam:ExecuteTime())and D and not h:IsCasting(j(355806))and h:IsInMeleeRange(10)and K.VengefulRetreat:TimeSinceLastCast()>=1 and(T>0 and(not aa or T>1 or g:Fury()<70))then if H(K.EyeBeam,nil,nil,not h:IsInRange(20))then a0=198013;return"eye_beam demonic 10"end end;if K.BladeDance:IsReady()and K.VengefulRetreat:TimeSinceLastCast()>=1 and h:IsInMeleeRange(8)and(a4 and not K.Metamorphosis:CooldownUp()and(K.EyeBeam:CooldownRemains()>5 or not D))then if H(K.BladeDance,nil,nil,not ai(8))then a0=188499;return"blade_dance demonic 12"end end;if K.ImmolationAura:IsCastable()and not u and K.VengefulRetreat:TimeSinceLastCast()>=1 and h:IsInMeleeRange(8)and g:BuffDown(K.ImmolationAuraBuff)then if H(K.ImmolationAura,nil,nil,not ai(8))then a0=258920;return"immolation_aura demonic 14"end end;if K.Annihilation:IsReady()and h:IsInRange(8)and h:IsInMeleeRange(8)and not a5 then if H(K.Annihilation,nil,nil,not h:IsSpellInRange(K.Annihilation))then a0=201427;return"annihilation demonic 16"end end;if K.Felblade:IsCastable()and not g:IsMoving()and not v and h:IsInRange(15)and(h:IsInRange(8)or not t)and g:FuryDeficit()>=40 and(not ai()or K.VengefulRetreat:TimeSinceLastCast()>=1.0)then if H(K.Felblade,nil,nil,not h:IsSpellInRange(K.Felblade))then a0=183226;return"felblade demonic 18"end end;if K.EssenceBreak:IsCastable()and h:IsInMeleeRange(10)and K.VengefulRetreat:TimeSinceLastCast()>1 then if H(K.EssenceBreak,nil,nil,not ai(10))then a0=258860;return"essence_break demonic 20"end end;if K.ChaosStrike:IsReady()and h:IsInMeleeRange(8)and(not a5 and not a6)then if H(K.ChaosStrike,nil,nil,not h:IsSpellInRange(K.ChaosStrike))then a0=162794;return"chaos_strike demonic 22"end end;if K.FelRush:IsCastable()and h:IsInRange(15)and K.VengefulRetreat:TimeSinceLastCast()>0.75 and not t and(K.DemonBlades:IsAvailable()and not K.EyeBeam:CooldownUp()and ak())and A then if H(K.FelRush,nil,nil)then a0=195072;return"fel_rush demonic 24"end end;if K.DemonsBite:IsCastable()or K.DemonBlades:IsAvailable()then if X and not K.DemonBlades:IsAvailable()and(h:DebuffRemains(K.BurningWoundDebuff)<4 or(UnitsWithoutBWCount==0 or not m()))then if H(K.DemonsBite,nil,nil,not h:IsSpellInRange(K.DemonsBite))then a0=162243;return"demons_bite 26T"end end;if Y.CastTargetIf(K.DemonsBite,R,"min",as,at)then return"demons_bite demonic 26"end end;if K.FelRush:IsCastable()and h:IsInRange(15)and K.VengefulRetreat:TimeSinceLastCast()>0.75 and not t and(not K.DemonBlades:IsAvailable()and T>1 and K.FelRush:Charges()==2)and A then if H(K.FelRush,nil,nil)then a0=195072;return"fel_rush demonic 28"end end;if K.DemonsBite:IsCastable()and not K.DemonBlades:IsAvailable()and h:IsInMeleeRange(8)and not X then if H(K.DemonsBite,nil,nil,not h:IsSpellInRange(K.DemonsBite))then a0=162243;return"demons_bite demonic 30"end end;if K.ThrowGlaive:IsCastable()and h:IsInRange(30)and not ai()then if H(K.ThrowGlaive,nil,nil,not h:IsSpellInRange(K.ThrowGlaive))then a0=185123;return"throw_glaive demonic 32"end end;if K.FelRush:IsCastable()and h:IsInRange(15)and K.VengefulRetreat:TimeSinceLastCast()>0.75 and not t and(not ai()and ak())and A then if H(K.FelRush,nil,nil)then a0=195072;return"fel_rush demonic 34"end end;if K.VengefulRetreat:IsCastable()and K.EyeBeam:TimeSinceLastCast()>1 and h:IsInRange(5)and B and not t and not ai()then if H(K.VengefulRetreat,nil)then a0=198793;return"vengeful_retreat demonic 36"end end;if K.ThrowGlaive:IsCastable()and h:IsInRange(30)and K.DemonBlades:IsAvailable()then if H(K.ThrowGlaive,nil,nil,not h:IsSpellInRange(K.ThrowGlaive))then a0=185123;return"throw_glaive demonic 38"end end end;local function ax()if K.VengefulRetreat:IsCastable()and K.EyeBeam:TimeSinceLastCast()>1 and h:IsInRange(5)and B and not t and(K.Momentum:IsAvailable()and g:BuffDown(K.PreparedBuff)and d.CombatTime()>1)then if H(K.VengefulRetreat,nil)then a0=198793;return"vengeful_retreat normal 2"end end;if K.FelRush:IsCastable()and h:IsInRange(15)and K.VengefulRetreat:TimeSinceLastCast()>0.75 and not t and((g:BuffUp(K.UnboundChaosBuff)or a8 and(not K.UnboundChaos:IsAvailable()or not K.ImmolationAura:CooldownUp()))and ak())and A then if H(K.FelRush,nil,nil)then a0=195072;return"fel_rush demonic 34"end end;if K.FelBarrage:IsCastable()and K.VengefulRetreat:TimeSinceLastCast()>1 and h:IsInMeleeRange(8)and T>1 then if H(K.FelBarrage,nil,nil,not ai(8))then a0=211053;return"fel_barrage normal 6"end end;if K.DeathSweep:IsReady()and K.VengefulRetreat:TimeSinceLastCast()>=1 and h:IsInMeleeRange(8)and a4 then if H(K.DeathSweep,nil,nil,not ai(8))then a0=210152;return"death_sweep normal 8"end end;if K.ImmolationAura:IsCastable()and not u and K.VengefulRetreat:TimeSinceLastCast()>=1 and h:IsInMeleeRange(8)and g:BuffDown(K.ImmolationAuraBuff)then if H(K.ImmolationAura,nil,nil,not ai(8))then a0=258920;return"immolation_aura normal 10"end end;if K.GlaiveTempest:IsReady()and K.VengefulRetreat:TimeSinceLastCast()>1 and h:IsInMeleeRange(8)and(not a8 and T>0)then if H(K.GlaiveTempest,nil)then a0=342817;return"glaive_tempest normal 12"end end;if K.ThrowGlaive:IsCastable()and K.VengefulRetreat:TimeSinceLastCast()>1 and h:IsInRange(30)and(K.SerratedGlaive:ConduitEnabled()and(K.EyeBeam:CooldownRemains()<6 and D)and g:BuffDown(K.MetamorphosisBuff)and h:DebuffDown(K.ExposedWoundDebuff))then if H(K.ThrowGlaive,nil,nil,not h:IsSpellInRange(K.ThrowGlaive))then a0=185123;return"throw_glaive normal 14"end end;if K.EyeBeam:IsReady()and not g:IsMoving()and(G==0 or G>K.EyeBeam:ExecuteTime())and D and not h:IsCasting(j(355806))and h:IsInMeleeRange(10)and K.VengefulRetreat:TimeSinceLastCast()>=1 and(not a8 and(U>0 and(not aa or T>1 or g:Fury()<70)))then if H(K.EyeBeam,nil,nil,not ai(20))then a0=198013;return"eye_beam normal 16"end end;if K.BladeDance:IsReady()and K.VengefulRetreat:TimeSinceLastCast()>=1 and h:IsInMeleeRange(8)and a4 then if H(K.BladeDance,nil,nil,not ai(8))then a0=188499;return"blade_dance normal 18"end end;if K.Felblade:IsCastable()and not g:IsMoving()and not v and h:IsInMeleeRange(15)and(h:IsInRange(8)or not t)and g:FuryDeficit()>=40 and(not ai()or K.VengefulRetreat:TimeSinceLastCast()>=1.0)then if H(K.Felblade,nil,nil,not h:IsSpellInRange(K.Felblade))then a0=183226;return"felblade normal 20"end end;if K.EssenceBreak:IsCastable()and h:IsInMeleeRange(10)and K.VengefulRetreat:TimeSinceLastCast()>1 then if H(K.EssenceBreak,nil,nil,not ai(10))then a0=258860;return"essence_break normal 22"end end;if K.Annihilation:IsReady()and K.VengefulRetreat:TimeSinceLastCast()>1 and h:IsInMeleeRange(8)and((K.DemonBlades:IsAvailable()or not a8 or g:FuryDeficit()<30 or g:BuffRemains(K.MetamorphosisBuff)<5)and not a5)then if H(K.Annihilation,nil,nil,not h:IsSpellInRange(K.Annihilation))then a0=201427;return"annihilation normal 24"end end;if K.ChaosStrike:IsReady()and K.VengefulRetreat:TimeSinceLastCast()>1 and h:IsInMeleeRange(8)and((K.DemonBlades:IsAvailable()or not a8 or g:FuryDeficit()<30)and not a3 and not a5)then if H(K.ChaosStrike,nil,nil,not h:IsSpellInRange(K.ChaosStrike))then a0=162794;return"chaos_strike normal 26"end end;if K.EyeBeam:IsReady()and not g:IsMoving()and(G==0 or G>K.EyeBeam:ExecuteTime())and D and not h:IsCasting(j(355806))and h:IsInMeleeRange(10)and K.VengefulRetreat:TimeSinceLastCast()>=1 and K.BlindFury:IsAvailable()then if H(K.EyeBeam,nil,nil,not h:IsInRange(20))then a0=198013;return"eye_beam normal 28"end end;if(K.DemonsBite:IsCastable()or K.DemonBlades:IsAvailable())and K.VengefulRetreat:TimeSinceLastCast()>1 then if X and not K.DemonBlades:IsAvailable()and(h:DebuffRemains(K.BurningWoundDebuff)<4 or(UnitsWithoutBWCount==0 or not m()))then if H(K.DemonsBite,nil,nil,not h:IsSpellInRange(K.DemonsBite))then a0=162243;return"demons_bite 26T"end end;if Y.CastTargetIf(K.DemonsBite,R,"min",ap,ar)then return"demons_bite normal 28"end end;if K.DemonsBite:IsCastable()and not K.DemonBlades:IsAvailable()and K.VengefulRetreat:TimeSinceLastCast()>1 and h:IsInMeleeRange(8)and not X then if H(K.DemonsBite,nil,nil,not h:IsSpellInRange(K.DemonsBite))then a0=162243;return"demons_bite normal 30"end end;if K.FelRush:IsCastable()and h:IsInRange(15)and K.VengefulRetreat:TimeSinceLastCast()>0.75 and not t and(not K.Momentum:IsAvailable()and K.DemonBlades:IsAvailable()and ak())and A then if H(K.FelRush,nil,nil)then a0=195072;return"fel_rush demonic 34"end end;if K.Felblade:IsCastable()and not g:IsMoving()and not v and h:IsInRange(15)and(not ai()and not t)then if H(K.Felblade,nil,nil,not h:IsSpellInRange(K.Felblade))then a0=183226;return"felblade normal 34"end end;if K.FelRush:IsCastable()and h:IsInRange(15)and K.VengefulRetreat:TimeSinceLastCast()>0.75 and not t and(not ai()and not K.Momentum:IsAvailable()and ak())and A then if H(K.FelRush,nil,nil)then a0=195072;return"fel_rush demonic 34"end end;if K.VengefulRetreat:IsCastable()and K.EyeBeam:TimeSinceLastCast()>1 and h:IsInRange(5)and B and not t and not ai()then if H(K.VengefulRetreat,nil)then a0=198793;return"vengeful_retreat normal 38"end end;if K.ThrowGlaive:IsCastable()and K.VengefulRetreat:TimeSinceLastCast()>1 and h:IsInRange(30)and K.DemonBlades:IsAvailable()then if H(K.ThrowGlaive,nil,nil,not h:IsSpellInRange(K.ThrowGlaive))then a0=185123;return"throw_glaive normal 40"end end end;local function ay()if m()then R=g:GetEnemiesInMeleeRange(8)S=g:GetEnemiesInMeleeRange(20)T=#R;U=#S else T=1;U=1 end;if K.Detainment:IsAvailable()then Imprison=K.Imprison2 else Imprison=K.Imprison end;UnitsWithoutBWCount=al(R)UnitsWithoutSGCount=an(R)q=HeroRotationCharDB.Toggles[6]o=HeroRotationCharDB.Toggles[4]p=HeroRotationCharDB.Toggles[5]r=HeroRotationCharDB.Toggles[12]s=not HeroRotationCharDB.Toggles[15]t=HeroRotationCharDB.Toggles[40]w=HeroRotationCharDB.Toggles[41]u=HeroRotationCharDB.Toggles[42]v=HeroRotationCharDB.Toggles[43]z=HeroRotationCharDB.Toggles[44]x=HeroRotationCharDB.Toggles[45]y=HeroRotationCharDB.Toggles[46]A=Z.Havoc.FelRushMode=="All In"or Z.Havoc.FelRushMode=="Safe"and K.Felblade:CooldownRemains(BypassRecovery)<=0 or Z.Havoc.FelRushMode=="w/ Gap Closer"and(K.Felblade:CooldownRemains(BypassRecovery)<=0 or K.Metamorphosis:CooldownRemains(BypassRecovery)<=0 and C or K.FelRush:Charges()==2 or K.TheHunt:CooldownRemains(BypassRecovery)<=0 and o)B=Z.Havoc.VengefulRetreatMode=="All In"or Z.Havoc.VengefulRetreatMode=="Safe"and K.Felblade:CooldownRemains(BypassRecovery)<=0 or Z.Havoc.VengefulRetreatMode=="w/ Gap Closer"and(K.Felblade:CooldownRemains(BypassRecovery)<=0 or K.Metamorphosis:CooldownRemains(BypassRecovery)<=0 and C or K.FelRush:CooldownRemains(BypassRecovery)<=0 or K.TheHunt:CooldownRemains(BypassRecovery)<=0 and o)C=false;D=false;if Z.Havoc.IncludedCooldowns.Metamorphosis and l.CDsON()or Z.Havoc.IncludedSmallCooldowns.Metamorphosis and(l.CDsON()or p)or not Z.Havoc.IncludedSmallCooldowns.Metamorphosis and not Z.Havoc.IncludedCooldowns.Metamorphosis then C=true end;if Z.Havoc.IncludedCooldowns.EyeBeam and l.CDsON()or Z.Havoc.IncludedSmallCooldowns.EyeBeam and(l.CDsON()or p)or not Z.Havoc.IncludedSmallCooldowns.EyeBeam and not Z.Havoc.IncludedCooldowns.EyeBeam then D=true end;G=0;for az=1,20 do if select(10,UnitDebuff("player",az))==240447 then if select(6,UnitDebuff("player",az))~=nil then G=select(6,UnitDebuff("player",az))-GetTime()end end end;if not BotOn then a1=0;a0=0 end;if a1>0 then a1=0 end;if a0>0 then a0=0 end;a2=false;NecroPetsUpCount=ae(R)if g:IsChanneling(K.EyeBeam)then if H(K.Pool)then a0=9999;return"casting EB"end end;if w and Imprison:IsUsableP()and Imprison:CooldownRemains()<=0 and f("mouseover"):GUID()~=nil then if H(Imprison,nil,nil,nil)then a1=231;return"queue Imprison MO"end elseif w and Imprison:IsUsableP()and Imprison:CooldownRemains()<=0 and Y.TargetIsValid()then if H(Imprison,nil,nil,nil)then a0=217832;return"queue Imprison"end elseif(not Imprison:IsUsableP()or Imprison:CooldownRemains()>0)and w then HeroRotationCharDB.Toggles[41]=not HeroRotationCharDB.Toggles[41]l.Print("Imprison Queue is now "..(HeroRotationCharDB.Toggles[41]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if x and K.FelEruption:IsUsableP()and K.FelEruption:CooldownRemains(BypassRecovery)<=0 and K.FelEruption:IsAvailable()and f("mouseover"):GUID()~=nil then if H(K.FelEruption,nil,nil,nil)then a1=1211881;return"queue Fel Eruption"end elseif x and K.FelEruption:IsUsableP()and K.FelEruption:CooldownRemains(BypassRecovery)<=0 and K.FelEruption:IsAvailable()and Y.TargetIsValid()then if H(K.FelEruption,nil,nil,nil)then a0=211881;return"queue Fel Eruption"end elseif(not K.FelEruption:IsUsableP()and g:Fury()>10 or K.FelEruption:CooldownRemains()>0 or not K.FelEruption:IsAvailable())and x then HeroRotationCharDB.Toggles[45]=not HeroRotationCharDB.Toggles[45]l.Print("Fel Eruption Queue is now "..(HeroRotationCharDB.Toggles[45]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if y and K.ChaosNova:IsUsableP()and K.ChaosNova:CooldownRemains(BypassRecovery)<=0 then if H(K.ChaosNova,nil,nil,nil)then a0=179057;return"queue Chaos Nova MO"end elseif(not K.ChaosNova:IsUsableP()and g:Fury()>30 or K.ChaosNova:CooldownRemains()>0 or not Y.TargetIsValid())and y then HeroRotationCharDB.Toggles[46]=not HeroRotationCharDB.Toggles[46]l.Print("ChaosNova Queue is now "..(HeroRotationCharDB.Toggles[46]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if g:FuryDeficit()>=35 and not g:IsChanneling(K.EyeBeam)or not g:AffectingCombat()then a2=true end;if Y.TargetIsValid()then if not g:AffectingCombat()and q then local Q=au()if Q then return Q end end;if not W and not V then a4=K.FirstBlood:IsAvailable()or T>=3-ab(K.TrailofRuin:IsAvailable())end;if W then a4=g:BuffDown(K.ChaosTheoryBuff)or K.FirstBlood:IsAvailable()and T>=2-ab(K.TrailofRuin:IsAvailable())or not K.CycleofHatred:IsAvailable()and T>=4-ab(K.TrailofRuin:IsAvailable())end;if V then a4=K.FirstBlood:IsAvailable()or(g:BuffUp(K.MetamorphosisBuff)or K.TrailofRuin:IsAvailable()or h:DebuffUp(K.EssenceBreakDebuff))and T>=3-ab(K.TrailofRuin:IsAvailable())or not K.Demonic:IsAvailable()and T>=4 end;if K.EssenceBreak:IsAvailable()and K.EssenceBreak:CooldownUp()then a4=false end;a3=not K.Demonic:IsAvailable()and(K.Metamorphosis:CooldownRemains()<6 and C)and g:FuryDeficit()>30;a5=a4 and g:Fury()<75-ab(K.FirstBlood:IsAvailable())*20;a6=K.Demonic:IsAvailable()and not K.BlindFury:IsAvailable()and(K.EyeBeam:CooldownRemains()<g:GCD()*2 and D)and g:FuryDeficit()>20;a8=K.Momentum:IsAvailable()and g:BuffDown(K.MomentumBuff)and not t;local Q=Y.Interrupt(10,K.Disrupt,Z.Commons.OffGCDasOffGCD.Disrupt,_)if Q then return Q end;for az=1,25 do local aA,aB,aB,aC=UnitBuff("target",az)if aC~=nil and aC=="Magic"then if K.ConsumeMagic:IsCastable()and z and h:IsInRange(30)then if H(K.ConsumeMagic,nil)then a0=278326;return"Consume Magic"end end end end;if L.CruciformVeinripper:IsEquipped()and h:DebuffUp(K.SadisticGleeDebuff)and UnitsWithoutSGCount>0 and Z.Havoc.TargetSwap=="AutoSwap"and not r then a1=999 end;if NecroPetsUpCount>0 and K.ThrowGlaive:IsCastable()and(h:IsInRange(8)or g:HealthPercentage()<=25)then a1=21185123 end;if n()or o and g:AffectingCombat()then local Q=av()if Q then return Q end end;if K.Blur:IsCastable()and g:HealthPercentage()<=Z.Havoc.BlurHealthThreshold and g:AffectingCombat()then if H(K.Blur,nil)then a0=198589;return"Blur defensives (Danger)"end end;if K.ThrowGlaive:IsCastable()and K.VengefulRetreat:TimeSinceLastCast()>1 and g:AffectingCombat()and(g:BuffStack(K.FelBombardmentBuff)==5 and(g:BuffUp(K.ImmolationAuraBuff)or g:BuffDown(K.MetamorphosisBuff)))then if H(K.ThrowGlaive,nil,nil,not h:IsSpellInRange(K.ThrowGlaive))then a0=185123;return"throw_glaive fel_bombardment"end end;if K.Demonic:IsAvailable()and g:AffectingCombat()then local Q=aw()if Q then return Q end end;if true and g:AffectingCombat()then local Q=ax()if Q then return Q end end end end;local function aD()end;function ReturnSpell()if a0==0 then return 0 else return a0 end end;function ReturnSpellMO()if a1==0 then return 0 else return a1 end end;function ShouldOrb()return a2 end;l.SetAPL(577,ay,aD)