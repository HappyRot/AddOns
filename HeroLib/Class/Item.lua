local a,b=...local c=HeroDBC.DBC;local d=HeroCache;local e=b.Unit;local f=e.Player;local g=e.Target;local h=b.Spell;local i=b.Item;local GetItemCooldown=GetItemCooldown;local GetItemInfo=GetItemInfo;local GetTime=GetTime;local IsUsableItem=IsUsableItem;function i:ID()return self.ItemID end;function i:Name()return self.ItemName end;function i:Rarity()return self.ItemRarity end;function i:Level()return self.ItemLevel end;function i:MinLevel()return self.ItemMinLevel end;function i:SlotIDs()return self.ItemSlotIDs end;function i:InfoByID()return GetItemInfo(self:ID())end;function i:InfoByName()return GetItemInfo(self:Name())end;function i:IsLegendary()return self.ItemRarity==5 end;function i:Exists()return GetItemCount(self:ID())>0 end;function i:IsUsable()return IsUsableItem(self:ID())end;function i:OnUseSpell()return self.ItemUseSpell end;function i:IsEquipped()local j=self:SlotIDs()if not j then return false end;local k=self:ID()local l=d.ItemInfo[k]if not l then l={}d.SpellInfo[k]=l end;if l.IsEquipped==nil then local m=false;local n=f:GetEquipment()for o=0,#j do local p=j[o]if n[p]==self.ItemID then m=true;break end end;l.IsEquipped=m end;return l.IsEquipped end;function i:Cooldown()return c.ItemSpell[self:ID()]and GetSpellBaseCooldown(c.ItemSpell[self:ID()])/1000 or 0 end;function i:CooldownInfo()return GetItemCooldown(self:ID())end;do local function q(r)local s,t=r:CooldownInfo()if s==0 then return 0 end;local u=s+t-GetTime()-b.Latency()return u>0 and u or 0 end;function i:CooldownRemains()local k=self:ID()local l=d.ItemInfo[k]if not l then l={}d.SpellInfo[k]=l end;local v=l.Cooldown;if not v then v=q(self)l.Cooldown=v end;return v end end;function i:HasCooldown()return self:Cooldown()>0 end;function i:CooldownUp()return self:CooldownRemains()==0 end;function i:CooldownDown()return self:CooldownRemains()~=0 end;function i:IsReady()return self:IsUsable()and self:CooldownUp()end;function i:IsEquippedAndReady()return self:IsEquipped()and self:IsReady()end;function i:LastCastTime()return self.LastCastTime end;function i:TimeSinceLastCast()return self:OnUseSpell()and self:OnUseSpell():TimeSinceLastCast()or 0 end;function i:TrinketHasStatAnyDps()local w=c.ItemSpell[self.ItemID]if not w then return false end;local x=c.SpellAuraStat[w]if not x then return false end;return true end;function i:HasStatAnyDps()if not self:OnUseSpell()then return false end;local x=c.SpellAuraStat[self:OnUseSpell():ID()]if not x then return false end;return true end;function i:HasUseBuff()if not self:IsUsable()then return false end;if not self:OnUseSpell()then return false end;local x=c.SpellAuraStat[self:OnUseSpell():ID()]if not x then return false end;return true end;function i:BuffDuration()if not self:IsUsable()then return 0 end;if not self:OnUseSpell()then return 0 end;local y=c.SpellDuration[self:OnUseSpell():ID()][1]if not y then return 0 end;if y>1000 then y=y/1000 end;return y end