local a,b=...local c=HeroDBC.DBC;local d=HeroLib;local e=HeroCache;local f=d.Unit;local g=f.Player;local h=f.Target;local i=f.Pet;local j=d.Spell;local k=d.MultiSpell;local l=d.Item;local m=HeroRotation;local n=m.Cast;local o=m.CastLeft;local p=m.CDsON;local q=m.AoEON;local r=m.Commons.Mage;local s=m.Commons.Everyone.num;local t=m.Commons.Everyone.bool;local u=HeroRotationCharDB.Toggles[4]local v=HeroRotationCharDB.Toggles[5]local w=HeroRotationCharDB.Toggles[15]local x=HeroRotationCharDB.Toggles[12]local y=HeroRotationCharDB.Toggles[60]local z=HeroRotationCharDB.Toggles[100]local A=0;local B=0;local C=0;local D;local E=math.max;local function s(F)if F then return 1 else return 0 end end;local function t(F)return F~=0 end;local G=j.Mage.Frost;local H=l.Mage.Frost;local I={H.BalefireBranch:ID(),H.BelorrelostheSuncaller:ID(),H.Dreambinder:ID(),H.SpoilsofNeltharus:ID()}local J=g:GetEquipment()local K=l(0)local L=l(0)local M=GetInventoryItemID("player",13)local N=GetInventoryItemID("player",14)if J[13]then K=l(J[13])end;if J[14]then L=l(J[14])end;local O,P;local Q;local R;local S=0;local T=0;local U=15;local V=11111;local W=11111;local X;local Y=m.Commons.Everyone;local Z={General=m.GUISettings.General,Commons=m.GUISettings.APL.Mage.Commons,Frost=m.GUISettings.APL.Mage.Frost}G.FrozenOrb:RegisterInFlightEffect(84721)G.FrozenOrb:RegisterInFlight()d:RegisterForEvent(function()G.FrozenOrb:RegisterInFlight()end,"LEARNED_SPELL_IN_TAB")G.Frostbolt:RegisterInFlightEffect(228597)G.Frostbolt:RegisterInFlight()G.Flurry:RegisterInFlightEffect(228354)G.Flurry:RegisterInFlight()G.IceLance:RegisterInFlightEffect(228598)G.IceLance:RegisterInFlight()d:RegisterForEvent(function()V=11111;W=11111;S=0 end,"PLAYER_REGEN_ENABLED")local function _(a0)if a0==nil then a0=h end;return not a0:IsInBossList()or a0:Level()<73 end;local function a1()return E(g:BuffRemains(G.FingersofFrostBuff),h:DebuffRemains(G.WintersChillDebuff),h:DebuffRemains(G.Frostbite),h:DebuffRemains(G.Freeze),h:DebuffRemains(G.FrostNova))end;local function a2(a3)if G.WintersChillDebuff:AuraActiveCount()==0 then return 0 end;local a4=0;for a5,a6 in pairs(a3)do a4=a4+a6:DebuffStack(G.WintersChillDebuff)end;return a4 end;local function a7(a8)return a8:DebuffStack(G.WintersChillDebuff)end;local function a9(a8)return a8:DebuffDown(G.WintersChillDebuff)end;local function aa()if G.Frostbolt:IsCastable()and not g:IsCasting(G.Frostbolt)then if n(G.Frostbolt,nil,nil,not h:IsSpellInRange(G.Frostbolt))then B=116;return"frostbolt precombat 4"end end end;local function ab()if Z.Commons.UseTemporalWarp and G.TimeWarp:IsCastable()and(g:BloodlustExhaustUp()and G.TemporalWarp:IsAvailable()and g:BloodlustDown()and(g:PrevOffGCDP(1,G.IcyVeins)or(g:BuffUp(G.IcyVeinsBuff)and W<=110 or g:BuffUp(G.IcyVeinsBuff)and W>=280)or W<40))then if n(G.TimeWarp,nil)then B=80353;return"time_warp cd 2"end end;if H.SpoilsofNeltharus:IsEquippedAndReady()and(g:BuffUp(G.SpoilsofNeltharusMastery)or g:BuffUp(G.SpoilsofNeltharusHaste)and g:BloodlustDown()and g:BuffDown(G.TemporalWarpBuff)or g:BuffUp(G.SpoilsofNeltharusVers)and(g:BloodlustUp()or g:BuffUp(G.TemporalWarpBuff)))then if n(H.SpoilsofNeltharus,nil,nil)then if H.SpoilsofNeltharus:ID()==M then B=24;return"spoils_of_neltharus CD 4 top"elseif H.SpoilsofNeltharus:ID()==N then B=30;return"spoils_of_neltharus CD 4 bop"end end end;if p()and Z.Commons.Enabled.Potions and w and(g:BloodlustUp()and m.GUISettings.General.HoldPotforBL or(g:PrevGCDP(1,G.IcyVeins)or W<30)and not m.GUISettings.General.HoldPotforBL)then local ac=Y.PotionSelected()if ac and ac:IsReady()then if n(ac,nil,nil)then B=50;return"potion cd 6"end end end;if Z.Commons.Enabled.Items and H.Dreambinder:IsEquippedAndReady()and(H.NymuesUnravelingSpindle:IsEquipped()and g:PrevGCDP(1,H.NymuesUnravelingSpindle)or W>2)then if n(H.Dreambinder,nil,nil)then if H.Dreambinder:ID()==M then B=24;return"dreambinder_loom_of_the_great_cycle cd 8top"elseif H.Dreambinder:ID()==N then B=30;return"dreambinder_loom_of_the_great_cycle cd 8 bop"end end end;if Z.Commons.Enabled.BotTrinket or Z.Commons.Enabled.TopTrinket then if H.BelorrelostheSuncaller:IsEquippedAndReady()and((g:GCDRemains()>g:GCD()-0.1 or W<5)and d.CombatTime()>5)then if n(H.BelorrelostheSuncaller,nil,nil)then if H.BelorrelostheSuncaller:ID()==M then B=24;return"belorrelos_the_suncaller cd 10 top"elseif H.BelorrelostheSuncaller:ID()==N then B=30;return"belorrelos_the_suncaller cd 10 bop"end end end;if H.BalefireBranch:IsEquippedAndReady()and(not G.RayofFrost:IsAvailable()and P<=2 and g:BuffUp(G.IcyVeinsBuff)and g:PrevGCDP(1,G.GlacialSpike)or S==1 and G.RayofFrost:CooldownUp()and d.CombatTime()>1 and P<=2 or G.ConeofCold:CooldownUp()and g:PrevGCDP(1,G.CometStorm)and P>=3 or W<20)then if n(H.BalefireBranch,nil,nil)then if H.BalefireBranch:ID()==M then B=24;return"balefire_branch top"elseif H.BalefireBranch:ID()==N then B=30;return"balefire_branch bop"end end end end;if G.IcyVeins:IsCastable()then if n(G.IcyVeins,nil)then B=12472;return"icy_veins cd 14"end end;if(Z.Commons.Enabled.TopTrinket or Z.Commons.Enabled.BotTrinket)and p()and(not H.BalefireBranch:IsEquipped()or d.CombatTime()>5)then local ad=g:GetUseableTrinkets(I)if ad then if n(ad,nil,nil)then if ad:ID()==M and Z.Commons.Enabled.TopTrinket then B=24;return"top trinket 1"elseif ad:ID()==N and Z.Commons.Enabled.BotTrinket then B=30;return"top trinket 2"end end end end;if G.BloodFury:IsCastable()and p()then if n(G.BloodFury,nil)then B=20572;return"blood_fury cd 9"end end;if G.Berserking:IsCastable()and p()then if n(G.Berserking,nil)then B=26297;return"berserking cd 10"end end;if G.LightsJudgment:IsCastable()and p()then if n(G.LightsJudgment,nil,nil,not h:IsSpellInRange(G.LightsJudgment))then B=255647;return"lights_judgment cd 11"end end;if G.Fireblood:IsCastable()and p()then if n(G.Fireblood,nil)then B=265221;return"fireblood cd 12"end end;if G.AncestralCall:IsCastable()and p()then if n(G.AncestralCall,nil)then B=274738;return"ancestral_call cd 13"end end;if G.BagofTricks:IsCastable()and p()then if n(G.BagofTricks,nil,nil,not h:IsSpellInRange(G.BagofTricks))then B=312411;return"bag_of_tricks cd 14"end end end;local function ae()if G.IceFloes:IsCastable()and g:BuffDown(G.IceFloes)then if n(G.IceFloes,nil,nil)then B=108839;return"ice_floes movement 2"end end;if G.IceNova:IsCastable()then if n(G.IceNova,nil,nil,not h:IsSpellInRange(G.IceNova))then B=157997;return"ice_nova movement 4"end end;if G.ArcaneExplosion:IsReady()and h:IsInRange(10)and(g:ManaPercentage()>30 and O>=2)then if n(G.ArcaneExplosion,nil,nil)then B=1449;return"arcane_explosion movement 6"end end;if G.FireBlast:IsReady()then if n(G.FireBlast,nil,nil,not h:IsSpellInRange(G.FireBlast))then B=319836;return"fire_blast movement 8"end end;if G.IceLance:IsReady()then if n(G.IceLance,nil,nil,not h:IsSpellInRange(G.IceLance))then B=30455;return"ice_lance movement 10"end end end;local function af()if G.ConeofCold:IsCastable()and(G.ColdestSnap:IsAvailable()and(g:PrevGCDP(1,G.CometStorm)or g:PrevGCDP(1,G.FrozenOrb)and not G.CometStorm:IsAvailable()))then if n(G.ConeofCold,nil,nil,not h:IsInRange(12))then B=120;B=120;return"cone_of_cold aoe 2"end end;if G.FrozenOrb:IsCastable()and z and(not g:PrevGCDP(1,G.GlacialSpike)or not _())then if n(G.FrozenOrb,nil,nil,not h:IsInRange(40))then B=198149;return"frozen_orb aoe 4"end end;if G.Blizzard:IsCastable()and(not g:PrevGCDP(1,G.GlacialSpike)or not _())then if n(G.Blizzard,nil,nil,not h:IsInRange(40))then B=190356;return"blizzard aoe 6"end end;if G.CometStorm:IsCastable()and(not g:PrevGCDP(1,G.GlacialSpike)and(not G.ColdestSnap:IsAvailable()or G.ConeofCold:CooldownUp()and G.FrozenOrb:CooldownRemains()>25 or G.ConeofCold:CooldownRemains()>20))then if n(G.CometStorm,nil,nil,not h:IsSpellInRange(G.CometStorm))then B=153595;return"comet_storm aoe 8"end end;if i:IsActive()and G.Freeze:IsReady()and(_()and a1()==0 and(not G.GlacialSpike:IsAvailable()and not G.Snowstorm:IsAvailable()or g:PrevGCDP(1,G.GlacialSpike)or G.ConeofCold:CooldownUp()and g:BuffStack(G.SnowstormBuff)==U))then if n(G.Freeze,nil,nil,not h:IsSpellInRange(G.Freeze))then B=33395;return"freeze aoe 10"end end;if G.IceNova:IsCastable()and(_()and not g:PrevOffGCDP(1,G.Freeze)and(g:PrevGCDP(1,G.GlacialSpike)or G.ConeofCold:CooldownUp()and g:BuffStack(G.SnowstormBuff)==U and X<1))then if n(G.IceNova,nil,nil,not h:IsSpellInRange(G.IceNova))then B=157997;return"ice_nova aoe 12"end end;if G.FrostNova:IsCastable()and(_()and not g:PrevOffGCDP(1,G.Freeze)and(g:PrevGCDP(1,G.GlacialSpike)and S==0 or G.ConeofCold:CooldownUp()and g:BuffStack(G.SnowstormBuff)==U and X<1))then if n(G.FrostNova,nil,nil,not h:IsInRange(12))then B=122;return"frost_nova aoe 14"end end;if G.ConeofCold:IsCastable()and g:BuffStackP(G.SnowstormBuff)==U then if n(G.ConeofCold,nil,nil,not h:IsInRange(12))then B=120;return"cone_of_cold aoe 16"end end;if G.ShiftingPower:IsCastable()and p()then if n(G.ShiftingPower,nil,nil,not h:IsInRange(18))then B=314791;return"shifting_power aoe 18"end end;if g:IsChanneling(j(382440))then if n(G.Pool)then B=999999;return"channeling"end end;if G.GlacialSpike:IsReady()and(T==5 and G.Blizzard:CooldownRemains()>X)then if n(G.GlacialSpike,nil,nil,not h:IsSpellInRange(G.GlacialSpike))then B=199786;return"glacial_spike aoe 20"end end;if G.Flurry:IsCastable()and(not _()and S==0 and(g:PrevGCDP(1,G.GlacialSpike)or G.Flurry:ChargesFractional()>1.8))then if n(G.Flurry,nil,nil,not h:IsSpellInRange(G.Flurry))then B=44614;return"flurry aoe 22"end end;if G.Flurry:IsCastable()and(S==0 and(g:BuffUp(G.BrainFreezeBuff)or g:BuffUp(G.FingersofFrostBuff)))then if n(G.Flurry,nil,nil,not h:IsSpellInRange(G.Flurry))then B=44614;return"flurry aoe 24"end end;if G.IceLance:IsReady()and(g:BuffUp(G.FingersofFrostBuff)or a1()>G.IceLance:TravelTime()or t(S))then if n(G.IceLance,nil,nil,not h:IsSpellInRange(G.IceLance))then B=30455;return"ice_lance aoe 26"end end;if G.IceNova:IsCastable()and(O>=4 and(not G.Snowstorm:IsAvailable()and not G.GlacialSpike:IsAvailable()or not _()))then if n(G.IceNova,nil,nil,not h:IsSpellInRange(G.IceNova))then B=157997;return"ice_nova aoe 28"end end;if G.DragonsBreath:IsCastable()and P>=7 then if n(G.DragonsBreath,nil,nil,not h:IsInRange(12))then B=31661;return"dragons_breath aoe 30"end end;if G.ArcaneExplosion:IsCastable()and(g:ManaPercentage()>30 and P>=7)then if Z.Frost.StayDistance and not h:IsInRange(10)then if o(G.ArcaneExplosion)then B=1449;return"arcane_explosion aoe 32 left"end else if n(G.ArcaneExplosion)then B=1449;return"arcane_explosion aoe 32"end end end;if G.Frostbolt:IsCastable()then if n(G.Frostbolt,nil,nil,not h:IsSpellInRange(G.Frostbolt))then B=116;return"frostbolt aoe 34"end end;if g:IsMoving()then local ShouldReturn=ae()if ShouldReturn then return ShouldReturn end end end;local function ag()if G.CometStorm:IsCastable()and(g:PrevGCDP(1,G.Flurry)or g:PrevGCDP(1,G.ConeofCold))then if n(G.CometStorm,nil,nil,not h:IsSpellInRange(G.CometStorm))then B=153595;return"comet_storm cleave 2"end end;if G.Flurry:IsCastable()and(g:PrevGCDP(1,G.Frostbolt)and T>=3 or g:PrevGCDP(1,G.GlacialSpike)or T>=3 and T<5 and G.Flurry:ChargesFractional()==2)then if Y.CastTargetIf(G.Flurry,R,"min",a7,nil,not h:IsSpellInRange(G.Flurry))then B=44614;return"flurry cleave 4"end end;if G.IceLance:IsReady()and(G.GlacialSpike:IsAvailable()and G.WintersChillDebuff:AuraActiveCount()==0 and T==4 and g:BuffUp(G.FingersofFrostBuff))then if n(G.IceLance,nil,nil,not h:IsSpellInRange(G.IceLance))then B=30455;return"ice_lance cleave 6"end end;if G.RayofFrost:IsCastable()and S==1 then if Y.CastTargetIf(G.RayofFrost,R,"max",a7,nil,not h:IsSpellInRange(G.RayofFrost))then B=205021;return"ray_of_frost cleave 8"end end;if G.GlacialSpike:IsReady()and(T==5 and(G.Flurry:CooldownUp()or S>0))then if n(G.GlacialSpike,nil,nil,not h:IsSpellInRange(G.GlacialSpike))then B=199786;return"glacial_spike cleave 10"end end;if G.FrozenOrb:IsCastable()and z and(g:BuffStackP(G.FingersofFrostBuff)<2 and(not G.RayofFrost:IsAvailable()or G.RayofFrost:CooldownDown()))then if n(G.FrozenOrb,nil,nil,not h:IsInRange(40))then B=198149;return"frozen_orb cleave 12"end end;if G.ConeofCold:IsCastable()and(G.ColdestSnap:IsAvailable()and G.CometStorm:CooldownRemains()>10 and G.FrozenOrb:CooldownRemains()>10 and S==0 and P>=3)then if n(G.ConeofCold,nil,nil,not h:IsInRange(12))then B=120;return"cone_of_cold cleave 14"end end;if G.Blizzard:IsCastable()and(P>=2 and G.IceCaller:IsAvailable()and G.FreezingRain:IsAvailable()and(not G.SplinteringCold:IsAvailable()and not G.RayofFrost:IsAvailable()or g:BuffUp(G.FreezingRainBuff)or P>=3))then if n(G.Blizzard,nil,nil,not h:IsInRange(40))then B=190356;return"blizzard cleave 16"end end;if G.ShiftingPower:IsCastable()and(G.FrozenOrb:CooldownRemains()>10 and(not G.CometStorm:IsAvailable()or G.CometStorm:CooldownRemains()>10)and(not G.RayofFrost:IsAvailable()or G.RayofFrost:CooldownRemains()>10)or G.IcyVeins:CooldownRemains()<20)then if n(G.ShiftingPower,nil,nil,not h:IsInRange(18))then B=314791;return"shifting_power cleave 18"end end;if g:IsChanneling(j(382440))then if n(G.Pool)then B=999999;return"channeling"end end;if G.GlacialSpike:IsReady()and T==5 then if n(G.GlacialSpike,nil,nil,not h:IsSpellInRange(G.GlacialSpike))then B=199786;return"glacial_spike cleave 20"end end;if G.IceLance:IsReady()and(g:BuffStackP(G.FingersofFrostBuff)and not g:PrevGCDP(1,G.GlacialSpike)or S>0)then if Y.CastTargetIf(G.IceLance,R,"max",a7,nil,not h:IsSpellInRange(G.IceLance))then B=30455;return"ice_lance cleave 22"end end;if G.IceNova:IsCastable()and P>=4 then if n(G.IceNova,nil,nil,not h:IsSpellInRange(G.IceNova))then B=157997;return"ice_nova cleave 24"end end;if G.Frostbolt:IsCastable()then if n(G.Frostbolt,nil,nil,not h:IsSpellInRange(G.Frostbolt))then B=116;return"frostbolt cleave 26"end end;if g:IsMoving()then local ShouldReturn=ae()if ShouldReturn then return ShouldReturn end end end;local function ah()if G.CometStorm:IsCastable()and(g:PrevGCDP(1,G.Flurry)or g:PrevGCDP(1,G.ConeofCold))then if n(G.CometStorm,nil,nil,not h:IsSpellInRange(G.CometStorm))then B=153595;return"comet_storm single 2"end end;if G.Flurry:IsCastable()and(S==0 and h:DebuffDown(G.WintersChillDebuff)and(g:PrevGCDP(1,G.Frostbolt)and T>=3 or g:PrevGCDP(1,G.Frostbolt)and g:BuffUp(G.BrainFreezeBuff)or g:PrevGCDP(1,G.GlacialSpike)or G.GlacialSpike:IsAvailable()and T==4 and g:BuffDown(G.FingersofFrostBuff)))then if n(G.Flurry,nil,nil,not h:IsSpellInRange(G.Flurry))then B=44614;return"flurry single 4"end end;if G.IceLance:IsReady()and(G.GlacialSpike:IsAvailable()and S==0 and T==4 and g:BuffUp(G.FingersofFrostBuff))then if n(G.IceLance,nil,nil,not h:IsSpellInRange(G.IceLance))then B=30455;return"ice_lance single 6"end end;if G.RayofFrost:IsCastable()and S==1 then if n(G.RayofFrost,nil,nil,not h:IsSpellInRange(G.RayofFrost))then B=205021;return"ray_of_frost single 8"end end;if G.GlacialSpike:IsReady()and(T==5 and(G.Flurry:Charges()>=1 or S>0))then if n(G.GlacialSpike,nil,nil,not h:IsSpellInRange(G.GlacialSpike))then B=199786;return"glacial_spike single 10"end end;if G.FrozenOrb:IsCastable()and z and(g:BuffStackP(G.FingersofFrostBuff)<2 and(not G.RayofFrost:IsAvailable()or G.RayofFrost:CooldownDown()))then if n(G.FrozenOrb,nil,nil,not h:IsInRange(40))then B=198149;return"frozen_orb single 12"end end;if G.ConeofCold:IsCastable()and(G.ColdestSnap:IsAvailable()and G.CometStorm:CooldownRemains()>10 and G.FrozenOrb:CooldownRemains()>10 and S==0 and O>=3)then if n(G.ConeofCold,nil,nil,not h:IsInRange(12))then B=120;return"cone_of_cold single 14"end end;if q()and G.Blizzard:IsCastable()and(O>=2 and G.IceCaller:IsAvailable()and G.FreezingRain:IsAvailable()and(not G.SplinteringCold:IsAvailable()and not G.RayofFrost:IsAvailable()or g:BuffUp(G.FreezingRainBuff)or O>=3))then if n(G.Blizzard,nil,nil,not h:IsInRange(40))then B=190356;return"blizzard single 16"end end;if G.ShiftingPower:IsCastable()and(G.FrozenOrb:CooldownRemains()>10 and(not G.CometStorm:IsAvailable()or G.CometStorm:CooldownRemains()>10)and(not G.RayofFrost:IsAvailable()or G.RayofFrost:CooldownRemains()>10)or G.IcyVeins:CooldownRemains()<20)then if n(G.ShiftingPower,nil,nil,not h:IsInRange(18))then B=314791;return"shifting_power single 18"end end;if g:IsChanneling(j(382440))then if n(G.Pool)then B=999999;return"channeling"end end;if G.GlacialSpike:IsCastable()and T==5 then if n(G.GlacialSpike,nil,nil,not h:IsSpellInRange(G.GlacialSpike))then B=199786;return"glacial_spike single 20"end end;if G.IceLance:IsReady()and(g:BuffUp(G.FingersofFrostBuff)and not g:PrevGCDP(1,G.GlacialSpike)or t(S))then if n(G.IceLance,nil,nil,not h:IsSpellInRange(G.IceLance))then B=30455;return"ice_lance single 22"end end;if q()and G.IceNova:IsCastable()and P>=4 then if n(G.IceNova,nil,nil,not h:IsSpellInRange(G.IceNova))then B=157997;return"ice_nova single 24"end end;if G.Frostbolt:IsCastable()then if n(G.Frostbolt,nil,nil,not h:IsSpellInRange(G.Frostbolt))then B=116;return"frostbolt single 26"end end;if g:IsMoving()then local ShouldReturn=ae()if ShouldReturn then return ShouldReturn end end end;local function ai()v=HeroRotationCharDB.Toggles[5]u=HeroRotationCharDB.Toggles[4]x=HeroRotationCharDB.Toggles[12]w=HeroRotationCharDB.Toggles[15]y=HeroRotationCharDB.Toggles[60]z=HeroRotationCharDB.Toggles[100]M=GetInventoryItemID("player",13)N=GetInventoryItemID("player",14)if not Z.Commons.Enabled.TopTrinket and not Z.Commons.Enabled.BotTrinket then I={M,N}elseif not Z.Commons.Enabled.TopTrinket then I={M}elseif not Z.Commons.Enabled.BotTrinket then I={N}end end;local function aj()if not D then A=0;B=0 end;if A>0 then A=0 end;if B>0 then B=0 end;ShouldReturn=ai()if m.GUISettings.General.OpenerReset>0 and not HeroRotationCharDB.Toggles[5]then starttime=GetTime()endtime=starttime+m.GUISettings.General.OpenerReset elseif m.GUISettings.General.OpenerReset>0 and endtime~=nil and GetTime()>endtime and HeroRotationCharDB.Toggles[5]then HeroRotationCharDB.Toggles[5]=not HeroRotationCharDB.Toggles[5]m.ToggleIconFrame:UpdateButtonText(6)m.Print("Opener is now "..(HeroRotationCharDB.Toggles[5]and"|cff00ff00enabled|r."or"|cffff0000disabled|r."))end;if G.ArcaneIntellect:IsCastable()and Y.GroupBuffMissing(G.ArcaneIntellect)or not g:BuffUp(G.ArcaneIntellect)then if n(G.ArcaneIntellect,nil)then B=1459;return"arcane_intellect precombat 2"end end;if g:IsChanneling(j(382440))then if n(G.Pool)then B=999999;return"channeling"end end;if g:IsChanneling(j(324631))then if n(G.Pool)then B=999999;return"channeling"end end;R=h:GetEnemiesInSplashRange(16)if q()then O=h:GetEnemiesInSplashRangeCount(8)P=h:GetEnemiesInSplashRangeCount(16)else Q=1;O=1;P=1 end;if Y.TargetIsValid()or g:AffectingCombat()then V=d.BossFightRemains()W=V;if W==11111 then W=d.FightRemains(R,false)end;S=a2(R)T=g:BuffStackP(G.IciclesBuff)X=g:GCD()+0.25 end;if Y.TargetIsValid()and(not g:AffectingCombat()and v)then if not g:AffectingCombat()then local ShouldReturn=aa()if ShouldReturn then return ShouldReturn end end end;if Y.TargetIsValid()and(g:AffectingCombat()or v)then if g:HealthPercentage()<Z.Frost.IceBlockHP and G.IceBlock:IsReady()then if n(G.IceBlock,nil)then B=45438;return"IceBlock HP"end end;if g:HealthPercentage()<Z.Frost.IceBarrierHP and G.IceBarrier:IsReady()then if n(G.IceBarrier,nil)then B=11426;return"IceBarrier HP"end end;if g:HealthPercentage()<Z.Frost.MassBarrierHP and G.IceBarrier:IsReady()then if n(G.MassBarrier,nil)then B=414660;return"MassBarrier HP"end end;if g:HealthPercentage()<Z.Frost.MirrorImageHP and G.MirrorImage:IsReady()then if n(G.MirrorImage,nil)then B=55342;return"MirrorImage HP"end end;if p()then local ShouldReturn=ab()if ShouldReturn then return ShouldReturn end end;if q()and(P>=7 and not g:HasTier(30,2)or P>=3 and G.IceCaller:IsAvailable())then local ShouldReturn=af()if ShouldReturn then return ShouldReturn end;if m.CastAnnotated(G.Pool,false,"WAIT")then return"pool for Aoe()"end end;if q()and P==2 then local ShouldReturn=ag()if ShouldReturn then return ShouldReturn end;if m.CastAnnotated(G.Pool,false,"WAIT")then return"pool for Cleave()"end end;local ShouldReturn=ah()if ShouldReturn then return ShouldReturn end;if m.CastAnnotated(G.Pool,false,"WAIT")then return"pool for ST()"end end end;local function ak()G.WintersChillDebuff:RegisterAuraTracking()if HeroRotationCharDB.Toggles[5]then HeroRotationCharDB.Toggles[5]=not HeroRotationCharDB.Toggles[5]m.ToggleIconFrame:UpdateButtonText(5)end;m.Print("Frost Mage rotation has been updated for patch 10.2.0.")end;function ReturnSpellFrost()if B==0 then return 0 else return B end end;function ReturnSpellMOFrost()if A==0 then return 0 else return A end end;m.SetAPL(64,aj,ak)