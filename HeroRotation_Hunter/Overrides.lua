local a=HeroLib;local b=HeroCache;local c=a.Unit;local d=c.Player;local e=c.Pet;local f=c.Target;local g=a.Spell;local h=a.Item;local i=HeroRotation;local j=g.Hunter.BeastMastery;local k=g.Hunter.Marksmanship;local l=g.Hunter.Survival;local m=i.GUISettings.APL.Hunter;local n=i.Commons.Hunter;local o=math.max;local GetTime=GetTime;local p;p=a.AddCoreOverride("Spell.IsCastable",function(self,q,r,s,t,u)local v=p(self,q,r,s,t,u)if self==j.SummonPet then return(n.Pet.Status==0 or n.Pet.Status==3)and v elseif self==j.RevivePet then return(e:IsDeadOrGhost()or n.Pet.Status==2 and n.Pet.FeignGUID==0)and v elseif self==j.MendPet then return e:HealthPercentage()>0 and e:HealthPercentage()<=m.Commons2.MendPetHP and v else return v end end,253)local w;w=a.AddCoreOverride("Pet.BuffRemains",function(self,g,x,u)local v=w(self,g,x,u)if g==j.FrenzyBuff then if d:IsPrevCastPending()then return v+GetTime()-d:GCDStartTime()end elseif g==j.BeastCleaveBuff then v=o(v,d:BuffRemains(j.BeastCleavePlayerBuff))if d:IsPrevCastPending()then return v+GetTime()-d:GCDStartTime()end end;return v end,253)local y;y=a.AddCoreOverride("Spell.IsCastable",function(self,q,r,s,t,u)local v=y(self,q,r,s,t,u)if self==k.SummonPet then return n.Pet.Status==0 and v else return v end end,254)local z;z=a.AddCoreOverride("Spell.IsReady",function(self,r,s,t,q,u)local v=z(self,r,s,t,q,u)if self==k.AimedShot then local A=not d:IsCasting(k.AimedShot)and k.AimedShot:Charges()==1 or k.AimedShot:Charges()>1;if m.Marksmanship.HideAimedWhileMoving then return v and A and(not d:IsMoving()or d:BuffUp(k.LockandLoadBuff))else return v and A end elseif self==k.WailingArrow then return v and not d:IsCasting(self)else return v end end,254)local B;B=a.AddCoreOverride("Player.BuffRemains",function(self,g,x,u)if g==k.TrickShotsBuff and(d:IsCasting(k.AimedShot)or d:IsChanneling(k.RapidFire))then return 0 else return B(self,g,x,u)end end,254)local C;C=a.AddCoreOverride("Player.BuffDown",function(self,g,x,u)if g==k.PreciseShotsBuff and d:IsCasting(k.AimedShot)then return false else return C(self,g,x,u)end end,254)a.AddCoreOverride("Player.FocusP",function()local D=d:Focus()+d:FocusRemainingCastRegen()if not d:IsCasting()then return D else if d:IsCasting(k.SteadyShot)then return D+10 elseif d:IsChanneling(k.RapidFire)then return D+7 elseif d:IsCasting(k.WailingArrow)then return D-15 elseif d:IsCasting(k.AimedShot)then return D-35 end end end,254)local E;E=a.AddCoreOverride("Spell.IsCastable",function(self,q,r,s,t,u)local v=E(self,q,r,s,t,u)if self==l.SummonPet then return n.Pet.Status==0 and v elseif self==l.RevivePet then return(e:IsDeadOrGhost()or n.Pet.Status==2)and v elseif self==l.MendPet then return e:HealthPercentage()>0 and e:HealthPercentage()<=m.Commons2.MendPetHP and v elseif self==l.AspectoftheEagle then return m.Survival.AspectOfTheEagle and v elseif self==l.Harpoon then return v and not f:IsInRange(8)else return v end end,255)local F;F=a.AddCoreOverride("Spell.IsReady",function(self,r,s,t,q,u)if self==l.MongooseBite or self==l.RaptorStrike then return F(self,"Melee",s,t,q,u)else local v=F(self,r,s,t,q,u)if self==l.Carve or self==l.Butchery then return v and(d:BuffDown(l.AspectoftheEagle)or d:BuffUp(l.AspectoftheEagle)and f:IsInMeleeRange(8))else return v end end end,255)