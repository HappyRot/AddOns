local a,b=...local c=HeroDBC.DBC;local d=HeroLib;local e=HeroCache;local f=d.Unit;local g=f.Player;local h=f.Target;local i=f.Pet;local j=d.Spell;local k=d.Item;local l=HeroRotation;local m=l.AoEON;local n=l.CDsON;local o=l.Cast;local p=l.Commons.Everyone.num;local q=l.Commons.Everyone.bool;local r=j.Priest.Holy;local s=k.Priest.Holy;local t={}local u,v;local w,x;local y,z;local A;local B=l.Commons.Everyone;local C={General=l.GUISettings.General,Commons=l.GUISettings.APL.Priest.Commons,Holy=l.GUISettings.APL.Priest.Holy}local function D()if B.TargetIsValid()then if r.PowerWordFortitude:IsCastable()and(g:BuffDown(r.PowerWordFortitudeBuff,true)or B.GroupBuffMissing(r.PowerWordFortitudeBuff))then if o(r.PowerWordFortitude,C.Commons.GCDasOffGCD.PowerWordFortitude)then return"power_word_fortitude precombat"end end;if r.Smite:IsReady()then if o(r.Smite,nil,nil,not h:IsSpellInRange(r.Smite))then return"smite precombat 2"end end end end;local function E()u=g:GetEnemiesInMeleeRange(8)w=g:GetEnemiesInMeleeRange(12)y=g:GetEnemiesInRange(30)if m()then v=#u;x=#w;z=#y;A=h:GetEnemiesInSplashRangeCount(8)else v=1;x=1;z=1;A=1 end;if not g:AffectingCombat()then local F=D()if F then return F end end;if B.TargetIsValid()then if C.Commons.Enabled.Trinkets then local G=g:GetUseableTrinkets(t)if G then if o(G,nil,C.Commons.DisplayStyle.Trinkets)then return"Generic use_items for "..G:Name()end end end;if s.PotionofSpectralIntellect:IsReady()and(g:BloodlustUp()or h:TimeToDie()<=30)then if o(s.PotionofSpectralIntellect,nil,C.Commons.DisplayStyle.Potions)then return"potion main 2"end end;if r.HolyFire:IsReady()and(h:DebuffUp(r.HolyFireDebuff)and(h:DebuffRemains(r.HolyFireDebuff)<=g:GCD()or h:DebuffStack(r.HolyFireDebuff)<2)and x<7)then if o(r.HolyFire,nil,nil,not h:IsSpellInRange(r.HolyFire))then return"holy_fire main 4"end end;if r.HolyWordChastise:IsReady()and x<5 then if o(r.HolyWordChastise,nil,nil,not h:IsSpellInRange(r.HolyWordChastise))then return"holy_word_chastise main 6"end end;if r.HolyFire:IsReady()and(h:DebuffUp(r.HolyFireDebuff)and(h:DebuffRefreshable(r.HolyFireDebuff)or h:DebuffStack(r.HolyFireDebuff)<2)and x<7)then if o(r.HolyFire,nil,nil,not h:IsSpellInRange(r.HolyFire))then return"holy_fire main 8"end end;if n()then if r.Berserking:IsCastable()then if o(r.Berserking,C.Commons.OffGCDasOffGCD.Racials)then return"berserking main 10"end end;if r.Fireblood:IsCastable()then if o(r.Fireblood,C.Commons.OffGCDasOffGCD.Racials)then return"fireblood main 12"end end;if r.AncestralCall:IsCastable()then if o(r.AncestralCall,C.Commons.OffGCDasOffGCD.Racials)then return"ancestral_call main 14"end end end;if r.DivineStar:IsReady()and(h:IsInRange(24)and A>1)then if o(r.DivineStar,C.Holy.GCDasOffGCD.DivineStar)then return"divine_star main 16"end end;if r.Halo:IsReady()and z>0 then if o(r.Halo,C.Holy.GCDasOffGCD.Halo)then return"halo main 18"end end;if n()then if r.LightsJudgment:IsCastable()then if o(r.LightsJudgment,C.Commons.OffGCDasOffGCD.Racials,nil,not h:IsSpellInRange(r.LightsJudgment))then return"lights_judgment main 20"end end;if r.ArcanePulse:IsCastable()and v>2 then if o(r.ArcanePulse,C.Commons.OffGCDasOffGCD.Racials)then return"arcane_pulse main 22"end end end;if r.HolyFire:IsReady()and(h:DebuffDown(r.HolyFireDebuff)and x<7)then if o(r.HolyFire,nil,nil,not h:IsSpellInRange(r.HolyFire))then return"holy_fire main 24"end end;if r.HolyNova:IsReady()and x>3 then if o(r.HolyNova)then return"holy_nova main 26"end end;if r.Apotheosis:IsCastable()and A<5 then if o(r.Apotheosis,C.Holy.GCDasOffGCD.Apotheosis)then return"apotheosis main 28"end end;if r.Smite:IsReady()then if o(r.Smite,nil,nil,not h:IsSpellInRange(r.Smite))then return"smite main 30"end end;if r.HolyFire:IsReady()then if o(r.HolyFire,nil,nil,not h:IsSpellInRange(r.HolyFire))then return"holy_fire main 32"end end;if r.DivineStar:IsReady()and h:IsInRange(24)then if o(r.DivineStar,C.Holy.GCDasOffGCD.DivineStar)then return"divine_star main 34"end end;if r.HolyNova:IsReady()and(g:IsMoving()and x>0)then if o(r.HolyNova)then return"holy_nova main moving filler"end end end end;local function H()l.Print("Holy Priest rotation has not been updated for pre-patch 10.0. It may not function properly or may cause errors in-game.")end;l.SetAPL(257,E,H)