local a,b=...local c=HeroDBC.DBC;local d=HeroLib;local e=HeroCache;local f=d.Unit;local g=f.Player;local h=f.Target;local i=f.Pet;local j=d.Spell;local k=d.MultiSpell;local l=d.Item;local m=HeroRotation;local n=m.Cast;local o=m.CDsON;local p=m.AoEON;local q=HeroRotationCharDB.Toggles[4]local r=HeroRotationCharDB.Toggles[5]local s=HeroRotationCharDB.Toggles[6]local t=HeroRotationCharDB.Toggles[15]local u=HeroRotationCharDB.Toggles[31]local v=HeroRotationCharDB.Toggles[32]local w=HeroRotationCharDB.Toggles[33]local x=HeroRotationCharDB.Toggles[34]local y=HeroRotationCharDB.Toggles[35]local z=HeroRotationCharDB.Toggles[36]local A=HeroRotationCharDB.Toggles[37]local B=HeroRotationCharDB.Toggles[12]local C=nil;local D=nil;local E=false;local F=false;local G=false;local H=false;local I=math.min;local pairs=pairs;local J=j.Monk.Windwalker;local K=l.Monk.Windwalker;local L={}local M;local N;local O;local P;local Q;local R;local S=0;local T=0;local U=0;local V=false;local W=false;local X=false;local Y=false;local Z;local _={{J.SpearHandStrike,"Cast Spear Hand Strike (Interrupt)",function()return true end}}local a0={{J.LegSweep,"Cast Leg Sweep (Stun)",function()return true end}}local a1={{J.RingOfPeace,"Cast Ring Of Peace (Stun)",function()return true end}}local a2={{J.Paralysis,"Cast Paralysis (Stun)",function()return true end}}local a3=false;local a4=0;local a5=m.Commons.Everyone;local a6=m.Commons.Monk;local a7={General=m.GUISettings.General,Commons=m.GUISettings.APL.Monk.Commons,Windwalker=m.GUISettings.APL.Monk.Windwalker}local a8=g:HasLegendaryEquipped(88)local a9=g:HasLegendaryEquipped(82)local aa=g:HasLegendaryEquipped(85)local ab=g:HasLegendaryEquipped(83)local ac=g:HasLegendaryEquipped(96)local ad=g:HasLegendaryEquipped(95)local ae=g:HasLegendaryEquipped(97)local af=g:HasLegendaryEquipped(94)d:RegisterForEvent(function()a4=0 end,"PLAYER_REGEN_ENABLED")local function M(ag)if J.TigerPalm:TimeSinceLastCast()<=g:GCD()then return true end;return ag and h:IsInMeleeRange(ag)or h:IsInMeleeRange(5)end;local ah={5,8,10,30,40,100}local ai={}local function aj()for ak,al in ipairs(ah)do if al==8 or 5 then ai[al]=h:IsInMeleeRange(al)end;ai[al]=h:IsInRange(al)end end;local function am(an)if an then return 1 else return 0 end end;local function ao(an)return an~=0 end;local function ap(aq)local ar=0;for as in pairs(aq)do local at=aq[as]if at:DebuffUp(J.BonedustBrew)then ar=ar+1 end end;return ar end;local function au(aq)local ar=0;for as in pairs(aq)do local at=aq[as]if at:DebuffRemains(J.BonedustBrew)>2 then ar=ar+1 end end;return ar end;local function av()return math.floor(g:EnergyTimeToMaxPredicted()*10+0.5)/10 end;local function aw()return math.floor(g:EnergyPredicted()+0.5)end;local function ax(ay)return not g:PrevGCD(1,ay)end;local function az(aA)return aA:DebuffRemains(J.MarkOfTheCraneDebuff)end;local function aB(aA)if g:Chi()<3 and aA:GUID()==f("mouseover"):GUID()and a7.Windwalker.TargetSwap=="Mouseover"then S=1261947;return true elseif g:Chi()<3 and a7.Windwalker.TargetSwap=="AutoSwap"and aA:GUID()~=h:GUID()and not B then S=999;return true elseif g:Chi()<3 and aA:GUID()==h:GUID()then T=261947;return true elseif g:Chi()<3 then return true end end;local function aC(aA)if g:ChiDeficit()>=3 and(av()<1 or av()<4 and J.FistsOfFury:CooldownRemains()<1.5 or J.WeaponsOfOrder:CooldownRemains()<2)and not UnitsWithBDBCount==0 and aA:GUID()==f("mouseover"):GUID()and a7.Windwalker.TargetSwap=="Mouseover"then S=1261947;return true elseif g:ChiDeficit()>=3 and(av()<1 or av()<4 and J.FistsOfFury:CooldownRemains()<1.5 or J.WeaponsOfOrder:CooldownRemains()<2)and not UnitsWithBDBCount==0 and a7.Windwalker.TargetSwap=="AutoSwap"and aA:GUID()~=h:GUID()and not B then S=999;return true elseif g:ChiDeficit()>=3 and(av()<1 or av()<4 and J.FistsOfFury:CooldownRemains()<1.5 or J.WeaponsOfOrder:CooldownRemains()<2)and not UnitsWithBDBCount==0 and aA:GUID()==h:GUID()then T=261947;return true elseif g:ChiDeficit()>=3 and(av()<1 or av()<4 and J.FistsOfFury:CooldownRemains()<1.5 or J.WeaponsOfOrder:CooldownRemains()<2)and not UnitsWithBDBCount==0 then return true end end;local function aD(aA)if g:Chi()==0 and g:BuffRemains(J.WeaponsOfOrder)<4 and aA:GUID()==f("mouseover"):GUID()and a7.Windwalker.TargetSwap=="Mouseover"then S=1261947;return true elseif g:Chi()==0 and g:BuffRemains(J.WeaponsOfOrder)<4 and a7.Windwalker.TargetSwap=="AutoSwap"and aA:GUID()~=h:GUID()and not B then S=999;return true elseif g:Chi()==0 and g:BuffRemains(J.WeaponsOfOrder)<4 and aA:GUID()==h:GUID()then T=261947;return true elseif g:Chi()==0 and g:BuffRemains(J.WeaponsOfOrder)<4 then return true end end;local function aE(aA)if ax(J.TigerPalm)and g:ChiDeficit()>=2 and(av()<1 or J.Serenity:CooldownRemains()<2 or av()<4 and J.FistsOfFury:CooldownRemains()<1.5 or J.WeaponsOfOrder:CooldownRemains()<2)and not UnitsWithBDBCount==0 and aA:GUID()==f("mouseover"):GUID()and a7.Windwalker.TargetSwap=="Mouseover"then S=1100780;return true elseif ax(J.TigerPalm)and g:ChiDeficit()>=2 and(av()<1 or J.Serenity:CooldownRemains()<2 or av()<4 and J.FistsOfFury:CooldownRemains()<1.5 or J.WeaponsOfOrder:CooldownRemains()<2)and not UnitsWithBDBCount==0 and a7.Windwalker.TargetSwap=="AutoSwap"and aA:GUID()~=h:GUID()and not B then S=999;return true elseif ax(J.TigerPalm)and g:ChiDeficit()>=2 and(av()<1 or J.Serenity:CooldownRemains()<2 or av()<4 and J.FistsOfFury:CooldownRemains()<1.5 or J.WeaponsOfOrder:CooldownRemains()<2)and not UnitsWithBDBCount==0 and aA:GUID()==h:GUID()then T=100780;return true elseif ax(J.TigerPalm)and g:ChiDeficit()>=2 and(av()<1 or J.Serenity:CooldownRemains()<2 or av()<4 and J.FistsOfFury:CooldownRemains()<1.5 or J.WeaponsOfOrder:CooldownRemains()<2)and not UnitsWithBDBCount==0 then return true end end;local function aF(aA)if g:ChiDeficit()>=3 and aA:GUID()==f("mouseover"):GUID()and a7.Windwalker.TargetSwap=="Mouseover"then S=1261947;return true elseif g:ChiDeficit()>=3 and a7.Windwalker.TargetSwap=="AutoSwap"and aA:GUID()~=h:GUID()and not B then S=999;return true elseif g:ChiDeficit()>=3 and aA:GUID()==h:GUID()then T=261947;return true elseif g:ChiDeficit()>=3 then return true end end;local function aG(aA)if ax(J.TigerPalm)and g:ChiDeficit()>=2 and aA:GUID()==f("mouseover"):GUID()and a7.Windwalker.TargetSwap=="Mouseover"then S=1100780;return true elseif ax(J.TigerPalm)and g:ChiDeficit()>=2 and a7.Windwalker.TargetSwap=="AutoSwap"and aA:GUID()~=h:GUID()and not B then S=999;return true elseif ax(J.TigerPalm)and g:ChiDeficit()>=2 and aA:GUID()==h:GUID()then T=100780;return true elseif ax(J.TigerPalm)and g:ChiDeficit()>=2 then return true end end;local function aH(aA)if g:ChiDeficit()==2 and aA:GUID()==f("mouseover"):GUID()and a7.Windwalker.TargetSwap=="Mouseover"then S=1100780;return true elseif g:ChiDeficit()==2 and a7.Windwalker.TargetSwap=="AutoSwap"and aA:GUID()~=h:GUID()and not B then S=999;return true elseif g:ChiDeficit()==2 and aA:GUID()==h:GUID()then T=100780;return true elseif g:ChiDeficit()==2 then return true end end;local function aI(aA)if J.WhirlingDragonPunch:IsAvailable()and 10/(1+g:HastePct()/100)>J.WhirlingDragonPunch:CooldownRemains()+4 and(J.FistsOfFury:CooldownRemains()>3 or w or g:Chi()>=5)and aA:GUID()==f("mouseover"):GUID()and a7.Windwalker.TargetSwap=="Mouseover"then S=1107428;return true elseif J.WhirlingDragonPunch:IsAvailable()and 10/(1+g:HastePct()/100)>J.WhirlingDragonPunch:CooldownRemains()+4 and(J.FistsOfFury:CooldownRemains()>3 or w or g:Chi()>=5)and a7.Windwalker.TargetSwap=="AutoSwap"and aA:GUID()~=h:GUID()and not B then S=999;return true elseif J.WhirlingDragonPunch:IsAvailable()and 10/(1+g:HastePct()/100)>J.WhirlingDragonPunch:CooldownRemains()+4 and(J.FistsOfFury:CooldownRemains()>3 or w or g:Chi()>=5)and aA:GUID()==h:GUID()then T=107428;return true elseif J.WhirlingDragonPunch:IsAvailable()and 10/(1+g:HastePct()/100)>J.WhirlingDragonPunch:CooldownRemains()+4 and(J.FistsOfFury:CooldownRemains()>3 or w or g:Chi()>=5)then return true end end;local function aJ(aA)if g:ChiDeficit()>=2 and(not J.HitCombo:IsAvailable()or ax(J.TigerPalm))and aA:GUID()==f("mouseover"):GUID()and a7.Windwalker.TargetSwap=="Mouseover"then S=1100780;return true elseif g:ChiDeficit()>=2 and(not J.HitCombo:IsAvailable()or ax(J.TigerPalm))and a7.Windwalker.TargetSwap=="AutoSwap"and aA:GUID()~=h:GUID()and not B then S=999;return true elseif g:ChiDeficit()>=2 and(not J.HitCombo:IsAvailable()or ax(J.TigerPalm))and aA:GUID()==h:GUID()then T=100780;return true elseif g:ChiDeficit()>=2 and(not J.HitCombo:IsAvailable()or ax(J.TigerPalm))then return true end end;local function aK(aA)if(not J.HitCombo:IsAvailable()or ax(J.TigerPalm))and aA:GUID()==f("mouseover"):GUID()and a7.Windwalker.TargetSwap=="Mouseover"then S=1100780;return true elseif(not J.HitCombo:IsAvailable()or ax(J.TigerPalm))and a7.Windwalker.TargetSwap=="AutoSwap"and aA:GUID()~=h:GUID()and not B then S=999;return true elseif(not J.HitCombo:IsAvailable()or ax(J.TigerPalm))and aA:GUID()==h:GUID()then T=100780;return true elseif not J.HitCombo:IsAvailable()or ax(J.TigerPalm)then return true end end;local function aL(aA)if g:Chi()==0 and g:BuffRemains(J.WeaponsOfOrder)<4 and aA:GUID()==f("mouseover"):GUID()and a7.Windwalker.TargetSwap=="Mouseover"then S=1100780;return true elseif g:Chi()==0 and g:BuffRemains(J.WeaponsOfOrder)<4 and a7.Windwalker.TargetSwap=="AutoSwap"and aA:GUID()~=h:GUID()and not B then S=999;return true elseif g:Chi()==0 and g:BuffRemains(J.WeaponsOfOrder)<4 and aA:GUID()==h:GUID()then T=100780;return true elseif g:Chi()==0 and g:BuffRemains(J.WeaponsOfOrder)<4 then return true end end;local function aM(aA)return ad and aA:DebuffRemains(J.RecentlyRushingTigerPalm)or aA:DebuffRemains(J.MarkOfTheCraneDebuff)end;local function aN(aA)if ax(J.BlackoutKick)and(g:BuffUp(J.BlackoutKickBuff)or J.HitCombo:IsAvailable()and g:PrevGCD(1,J.TigerPalm)and g:Chi()==2 and J.FistsOfFury:CooldownRemains()<3 or g:ChiDeficit()<=1 and g:PrevGCD(1,J.SpinningCraneKick)and av()<3)and aA:GUID()==f("mouseover"):GUID()and a7.Windwalker.TargetSwap=="Mouseover"then S=1100784;return true elseif ax(J.BlackoutKick)and(g:BuffUp(J.BlackoutKickBuff)or J.HitCombo:IsAvailable()and g:PrevGCD(1,J.TigerPalm)and g:Chi()==2 and J.FistsOfFury:CooldownRemains()<3 or g:ChiDeficit()<=1 and g:PrevGCD(1,J.SpinningCraneKick)and av()<3)and a7.Windwalker.TargetSwap=="AutoSwap"and aA:GUID()~=h:GUID()and not B then S=999;return true elseif ax(J.BlackoutKick)and(g:BuffUp(J.BlackoutKickBuff)or J.HitCombo:IsAvailable()and g:PrevGCD(1,J.TigerPalm)and g:Chi()==2 and J.FistsOfFury:CooldownRemains()<3 or g:ChiDeficit()<=1 and g:PrevGCD(1,J.SpinningCraneKick)and av()<3)and aA:GUID()==h:GUID()then T=100784;return true elseif ax(J.BlackoutKick)and(g:BuffUp(J.BlackoutKickBuff)or J.HitCombo:IsAvailable()and g:PrevGCD(1,J.TigerPalm)and g:Chi()==2 and J.FistsOfFury:CooldownRemains()<3 or g:ChiDeficit()<=1 and g:PrevGCD(1,J.SpinningCraneKick)and av()<3)then return true end end;local function aO(aA)if ax(J.RisingSunKick)and aA:GUID()==f("mouseover"):GUID()and a7.Windwalker.TargetSwap=="Mouseover"then S=1107428;return true elseif ax(J.RisingSunKick)and a7.Windwalker.TargetSwap=="AutoSwap"and aA:GUID()~=h:GUID()and not B then S=999;return true elseif ax(J.RisingSunKick)and aA:GUID()==h:GUID()then T=107428;return true elseif ax(J.RisingSunKick)then return true end end;local function aP(aA)if ax(J.BlackoutKick)and g:BuffUp(J.WeaponsOfOrder)and J.RisingSunKick:CooldownRemains()>2 and aA:GUID()==f("mouseover"):GUID()and a7.Windwalker.TargetSwap=="Mouseover"then S=1100784;return true elseif ax(J.BlackoutKick)and g:BuffUp(J.WeaponsOfOrder)and J.RisingSunKick:CooldownRemains()>2 and a7.Windwalker.TargetSwap=="AutoSwap"and aA:GUID()~=h:GUID()and not B then S=999;return true elseif ax(J.BlackoutKick)and g:BuffUp(J.WeaponsOfOrder)and J.RisingSunKick:CooldownRemains()>2 and aA:GUID()==h:GUID()then T=100784;return true elseif ax(J.BlackoutKick)and g:BuffUp(J.WeaponsOfOrder)and J.RisingSunKick:CooldownRemains()>2 then return true end end;local function aQ(aA)if(ax(J.BlackoutKick)or not J.HitCombo:IsAvailable())and aA:GUID()==f("mouseover"):GUID()and a7.Windwalker.TargetSwap=="Mouseover"then S=1100784;return true elseif(ax(J.BlackoutKick)or not J.HitCombo:IsAvailable())and a7.Windwalker.TargetSwap=="AutoSwap"and aA:GUID()~=h:GUID()and not B then S=999;return true elseif(ax(J.BlackoutKick)or not J.HitCombo:IsAvailable())and aA:GUID()==h:GUID()then T=100784;return true elseif ax(J.BlackoutKick)or not J.HitCombo:IsAvailable()then return true end end;local function aR(aA)if ax(J.BlackoutKick)and Q<=2 and Y and aA:GUID()==f("mouseover"):GUID()and a7.Windwalker.TargetSwap=="Mouseover"then S=1100784;return true elseif ax(J.BlackoutKick)and Q<=2 and Y and a7.Windwalker.TargetSwap=="AutoSwap"and aA:GUID()~=h:GUID()and not B then S=999;return true elseif ax(J.BlackoutKick)and Q<=2 and Y and aA:GUID()==h:GUID()then T=100784;return true elseif ax(J.BlackoutKick)and Q<=2 and Y then return true end end;local function aS(aA)if ax(J.BlackoutKick)and(Q<=3 and g:Chi()>=3 or g:BuffUp(J.WeaponsOfOrder))and aA:GUID()==f("mouseover"):GUID()and a7.Windwalker.TargetSwap=="Mouseover"then S=1100784;return true elseif ax(J.BlackoutKick)and(Q<=3 and g:Chi()>=3 or g:BuffUp(J.WeaponsOfOrder))and a7.Windwalker.TargetSwap=="AutoSwap"and aA:GUID()~=h:GUID()and not B then S=999;return true elseif ax(J.BlackoutKick)and(Q<=3 and g:Chi()>=3 or g:BuffUp(J.WeaponsOfOrder))and aA:GUID()==h:GUID()then T=100784;return true elseif ax(J.BlackoutKick)and(Q<=3 and g:Chi()>=3 or g:BuffUp(J.WeaponsOfOrder))then return true end end;local function aT(aA)if(J.Serenity:CooldownRemains()>1 or not J.Serenity:IsAvailable()and(J.WeaponsOfOrder:CooldownRemains()>4 or not J.WeaponsOfOrder:IsAvailable()))and aA:GUID()==f("mouseover"):GUID()and a7.Windwalker.TargetSwap=="Mouseover"then S=1107428;return true elseif(J.Serenity:CooldownRemains()>1 or not J.Serenity:IsAvailable()and(J.WeaponsOfOrder:CooldownRemains()>4 or not J.WeaponsOfOrder:IsAvailable()))and a7.Windwalker.TargetSwap=="AutoSwap"and aA:GUID()~=h:GUID()and not B then S=999;return true elseif(J.Serenity:CooldownRemains()>1 or not J.Serenity:IsAvailable()and(J.WeaponsOfOrder:CooldownRemains()>4 or not J.WeaponsOfOrder:IsAvailable()))and aA:GUID()==h:GUID()then T=107428;return true elseif J.Serenity:CooldownRemains()>1 or not J.Serenity:IsAvailable()and(J.WeaponsOfOrder:CooldownRemains()>4 or not J.WeaponsOfOrder:IsAvailable())then return true end end;local function aU(aA)if ax(J.TigerPalm)and g:ChiDeficit()>=2 and g:BuffDown(J.StormEarthAndFireBuff)and aA:GUID()==f("mouseover"):GUID()and a7.Windwalker.TargetSwap=="Mouseover"then S=1100780;return true elseif ax(J.TigerPalm)and g:ChiDeficit()>=2 and g:BuffDown(J.StormEarthAndFireBuff)and a7.Windwalker.TargetSwap=="AutoSwap"and aA:GUID()~=h:GUID()and not B then S=999;return true elseif ax(J.TigerPalm)and g:ChiDeficit()>=2 and g:BuffDown(J.StormEarthAndFireBuff)and aA:GUID()==h:GUID()then T=100780;return true elseif ax(J.TigerPalm)and g:ChiDeficit()>=2 and g:BuffDown(J.StormEarthAndFireBuff)then return true end end;local function aV(aA)if ax(J.BlackoutKick)and(J.Serenity:IsAvailable()and J.Serenity:CooldownRemains()<3 or J.RisingSunKick:CooldownRemains()>1 and(J.FistsOfFury:CooldownRemains()>1 or w)or J.RisingSunKick:CooldownRemains()<3 and(J.FistsOfFury:CooldownRemains()>3 or w)and g:Chi()>2 or J.RisingSunKick:CooldownRemains()>3 and J.FistsOfFury:CooldownRemains()<3 and g:Chi()>3 or g:Chi()>5 or g:BuffUp(J.BlackoutKickBuff))and aA:GUID()==f("mouseover"):GUID()and a7.Windwalker.TargetSwap=="Mouseover"then S=1100784;return true elseif ax(J.BlackoutKick)and(J.Serenity:IsAvailable()and J.Serenity:CooldownRemains()<3 or J.RisingSunKick:CooldownRemains()>1 and(J.FistsOfFury:CooldownRemains()>1 or w)or J.RisingSunKick:CooldownRemains()<3 and(J.FistsOfFury:CooldownRemains()>3 or w)and g:Chi()>2 or J.RisingSunKick:CooldownRemains()>3 and J.FistsOfFury:CooldownRemains()<3 and g:Chi()>3 or g:Chi()>5 or g:BuffUp(J.BlackoutKickBuff))and a7.Windwalker.TargetSwap=="AutoSwap"and aA:GUID()~=h:GUID()and not B then S=999;return true elseif ax(J.BlackoutKick)and(J.Serenity:IsAvailable()and J.Serenity:CooldownRemains()<3 or J.RisingSunKick:CooldownRemains()>1 and(J.FistsOfFury:CooldownRemains()>1 or w)or J.RisingSunKick:CooldownRemains()<3 and(J.FistsOfFury:CooldownRemains()>3 or w)and g:Chi()>2 or J.RisingSunKick:CooldownRemains()>3 and J.FistsOfFury:CooldownRemains()<3 and g:Chi()>3 or g:Chi()>5 or g:BuffUp(J.BlackoutKickBuff))and aA:GUID()==h:GUID()then T=100784;return true elseif ax(J.BlackoutKick)and(J.Serenity:IsAvailable()and J.Serenity:CooldownRemains()<3 or J.RisingSunKick:CooldownRemains()>1 and(J.FistsOfFury:CooldownRemains()>1 or w)or J.RisingSunKick:CooldownRemains()<3 and(J.FistsOfFury:CooldownRemains()>3 or w)and g:Chi()>2 or J.RisingSunKick:CooldownRemains()>3 and J.FistsOfFury:CooldownRemains()<3 and g:Chi()>3 or g:Chi()>5 or g:BuffUp(J.BlackoutKickBuff))then return true end;return end;local function aW(aA)if ax(J.BlackoutKick)and(J.FistsOfFury:CooldownRemains()<3 and g:Chi()==2 and g:PrevGCD(1,J.TigerPalm)and g:EnergyTimeToX(50)<1)and aA:GUID()==f("mouseover"):GUID()and a7.Windwalker.TargetSwap=="Mouseover"then S=1100784;return true elseif ax(J.BlackoutKick)and(J.FistsOfFury:CooldownRemains()<3 and g:Chi()==2 and g:PrevGCD(1,J.TigerPalm)and g:EnergyTimeToX(50)<1)and a7.Windwalker.TargetSwap=="AutoSwap"and aA:GUID()~=h:GUID()and not B then S=999;return true elseif ax(J.BlackoutKick)and(J.FistsOfFury:CooldownRemains()<3 and g:Chi()==2 and g:PrevGCD(1,J.TigerPalm)and g:EnergyTimeToX(50)<1)and aA:GUID()==h:GUID()then T=100784;return true elseif ax(J.BlackoutKick)and(J.FistsOfFury:CooldownRemains()<3 and g:Chi()==2 and g:PrevGCD(1,J.TigerPalm)and g:EnergyTimeToX(50)<1)then return true end end;local function aX(aA)if ax(J.BlackoutKick)and av()<2 and(g:ChiDeficit()<=1 or g:PrevGCD(1,J.TigerPalm))and aA:GUID()==f("mouseover"):GUID()and a7.Windwalker.TargetSwap=="Mouseover"then S=1100784;return true elseif ax(J.BlackoutKick)and av()<2 and(g:ChiDeficit()<=1 or g:PrevGCD(1,J.TigerPalm))and a7.Windwalker.TargetSwap=="AutoSwap"and aA:GUID()~=h:GUID()and not B then S=999;return true elseif ax(J.BlackoutKick)and av()<2 and(g:ChiDeficit()<=1 or g:PrevGCD(1,J.TigerPalm))and aA:GUID()==h:GUID()then T=100784;return true elseif ax(J.BlackoutKick)and av()<2 and(g:ChiDeficit()<=1 or g:PrevGCD(1,J.TigerPalm))then return true end end;local function aY()local aZ=g:GetUseableTrinkets(L)if aZ then if aZ:ID()==GetInventoryItemID("player",13)and a7.Commons.Enabled.TopTrinket then if m.Cast(aZ,nil,nil)then T=24;return"top trinket 1"end elseif aZ:ID()==GetInventoryItemID("player",14)and a7.Commons.Enabled.BottomTrinket then if m.Cast(aZ,nil,nil)then T=35;return"bot trinket 1"end end end end;local function a_()if true then V=false end;if J.ChiBurst:IsReady()and h:IsInRange(30)and(not J.Serenity:IsAvailable()or not J.FistOfTheWhiteTiger:IsAvailable())then if m.Cast(J.ChiBurst,nil,nil,not h:IsInRange(40))then T=123986;return"Chi Burst 4"end end;if J.ChiWave:IsReady()and h:IsInRange(40)and not J.EnergizingElixir:IsAvailable()then if m.Cast(J.ChiWave,nil,nil,not h:IsInRange(40))then T=115098;return"Chi Wave 6"end end end;local function b0()if J.FistOfTheWhiteTiger:IsReady()and h:IsInRange(8)then if a5.CastTargetIf(J.FistOfTheWhiteTiger,P,"min",az,aF)then return"Fist of the White Tiger 200"end;if az(h)and aF(h)then if m.Cast(J.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(J.FistOfTheWhiteTiger))then T=261947;return"Fist of the White Tiger 202"end end end;if J.ExpelHarm:IsReady()and h:IsInRange(8)and g:Level()>=43 and J.ChiBurst:IsAvailable()and g:ChiDeficit()>=3 then if m.Cast(J.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then T=322101;return"Expel Harm 204"end end;if J.TigerPalm:IsReady()and h:IsInRange(8)then if a5.CastTargetIf(J.TigerPalm,O,"min",az,aG)then return"Tiger Palm 206"end;if az(h)and aG(h)then if m.Cast(J.TigerPalm,nil,nil,not h:IsSpellInRange(J.TigerPalm))then T=100780;return"Tiger Palm 208"end end end;if J.ChiWave:IsReady()and h:IsInRange(40)and g:ChiDeficit()>=2 then if m.Cast(J.ChiWave,nil,nil,not h:IsInRange(40))then T=115098;return"Chi Wave 210"end end;if J.ExpelHarm:IsReady()and h:IsInRange(10)and g:Level()>=43 then if m.Cast(J.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then T=322101;return"Expel Harm 212"end end;if J.TigerPalm:IsReady()and h:IsInRange(8)then if a5.CastTargetIf(J.TigerPalm,O,"min",az,aH)then return"Tiger Palm 214"end;if az(h)and aH(h)then if m.Cast(J.TigerPalm,nil,nil,not h:IsSpellInRange(J.TigerPalm))then T=100780;return"Tiger Palm 216"end end end end;local function b1()if J.SpinningCraneKick:IsReady(BypassRecovery)and(ax(J.SpinningCraneKick)and UnitsWithBDBCount>0)and h:IsInRange(8)then if m.Cast(J.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then T=101546;return"Spinning Crane Kick 304"end end;if J.WhirlingDragonPunch:IsReady()and not Z and not u and g:BuffUp(J.WhirlingDragonPunchBuff)and h:IsInRange(8)and(not J.BonedustBrew:IsAvailable()or J.BonedustBrew:CooldownRemains()>=3 or not q)then if m.Cast(J.WhirlingDragonPunch,nil,nil,not h:IsInMeleeRange(8))then T=152175;return"Whirling Dragon Punch 300"end end;if J.EnergizingElixir:IsReady()and(g:ChiDeficit()>=2 and av()>2 or g:ChiDeficit()>=4)and h:IsInRange(10)then if m.Cast(J.EnergizingElixir,nil)then T=115288;return"Energizing Elixir 302"end end;if J.SpinningCraneKick:IsReady(BypassRecovery)and(ax(J.SpinningCraneKick)or EnemiesWithMotC>=5 or EnemiesWithMotC==Q and(J.WhirlingDragonPunch:CooldownRemains()>0 or UnitsWithBDBCount>0))and(g:BuffUp(J.DanceOfChijiBuff)or UnitsWithBDBCount>0 or EnemiesWithMotC==Q and J.WhirlingDragonPunch:CooldownRemains()>0)and h:IsInRange(8)then if m.Cast(J.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then T=101546;return"Spinning Crane Kick 304"end end;if J.FistsOfFury:IsReady()and not w and UnitsWithBDBCount==0 and(av()>J.FistsOfFury:ExecuteTime()or g:ChiDeficit()<=1)and h:IsInRange(8)then if m.Cast(J.FistsOfFury,nil,nil,not h:IsSpellInRange(J.FistsOfFury))then T=113656;return"Fists of Fury 306"end end;if J.RisingSunKick:IsReady()and UnitsWithBDBCount==0 then if a5.CastTargetIf(J.RisingSunKick,O,"min",az,aI)then return"Rising Sun Kick 308"end;if az(h)and aI(h)then if m.Cast(J.RisingSunKick,nil,nil,not h:IsSpellInRange(J.RisingSunKick))then T=107428;return"Rising Sun Kick 310"end end end;if J.RushingJadeWind:IsReady()and g:BuffDown(J.RushingJadeWindBuff)and h:IsInRange(8)then if m.Cast(J.RushingJadeWind,nil,nil,not h:IsInMeleeRange(8))then T=116847;return"Rushing Jade Wind 312"end end;if J.ExpelHarm:IsReady()and h:IsInRange(8)and g:Level()>=43 and g:ChiDeficit()>=1 and(ap==0 or EnemiesWithMotC>=Q)then if m.Cast(J.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then T=322101;return"Expel Harm 316"end end;if J.FistOfTheWhiteTiger:IsReady()then if a5.CastTargetIf(J.FistOfTheWhiteTiger,P,"min",az,aF)then return"Fist of the White Tiger 318"end;if az(h)and aF(h)then if m.Cast(J.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(J.FistOfTheWhiteTiger))then T=261947;return"Fist of the White Tiger 320"end end end;if J.ChiBurst:IsReady()and h:IsInRange(30)and g:ChiDeficit()>=2 then if m.Cast(J.ChiBurst,nil,nil,not h:IsInRange(40))then T=123986;return"Chi Burst 322"end end;if J.CracklingJadeLightning:IsReady()and(g:BuffStack(J.TheEmperorsCapacitor)>19 and av()>J.CracklingJadeLightning:ExecuteTime()-1 and(J.FistsOfFury:CooldownRemains()>J.CracklingJadeLightning:ExecuteTime()or w))then if m.Cast(J.CracklingJadeLightning,nil,nil,not h:IsInRange(40))then T=117952;return"Crackling Jade Lightning 324"end end;if J.TigerPalm:IsReady()then if a5.CastTargetIf(J.TigerPalm,O,"min",aM,aJ)then return"Tiger Palm 326"end;if aM(h)and aJ(h)then if m.Cast(J.TigerPalm,nil,nil,not h:IsSpellInRange(J.TigerPalm))then T=100780;return"Tiger Palm 328"end end end;if J.ArcaneTorrent:IsReady()and h:IsInRange(8)and g:ChiDeficit()>=1 then if m.Cast(J.ArcaneTorrent,nil,nil,not h:IsInMeleeRange(8))then T=50613;return"Arcane Torrent 402"end end;if h:IsInRange(8)and J.SpinningCraneKick:IsReady()and(ax(J.SpinningCraneKick)or EnemiesWithMotC>=5)and((J.BonedustBrew:CooldownRemains()>2 or not q or not J.BonedustBrew:IsAvailable())and(g:Chi()>=5 or(J.FistsOfFury:CooldownRemains()>6 or w)or(J.FistsOfFury:CooldownRemains()>3 or w)and g:Chi()>=3 and g:EnergyTimeToX(50)<1 or av()<=3+3*am(J.FistsOfFury:CooldownRemains()<5 and not w)or g:BuffUp(J.StormEarthAndFireBuff)))then if m.Cast(J.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then T=101546;return"Spinning Crane Kick 314"end end;if J.ChiWave:IsReady()and h:IsInRange(40)and ax(J.ChiWave)then if m.Cast(J.ChiWave,nil,nil,not h:IsInRange(40))then T=115098;return"Chi Wave 330"end end;if J.FlyingSerpentKickActionBarReplacement:IsReady()and not v and h:IsInRange(10)and not a7.Windwalker.IgnoreFSK then if m.Cast(J.FlyingSerpentKickActionBarReplacement,nil,nil,not h:IsInRange(40))then T=101545;return"Flying Serpent Kick Slam 332"end end;if J.FlyingSerpentKick:IsReady()and not v and h:IsInRange(10)and not a7.Windwalker.IgnoreFSK and g:BuffDown(J.BlackoutKickBuff)then if m.Cast(J.FlyingSerpentKick,nil,nil,not h:IsInRange(40))then T=101545;return"Flying Serpent Kick 334"end end;if J.BlackoutKick:IsReady()and UnitsWithBDBCount==0 then if a5.CastTargetIf(J.BlackoutKick,O,"min",az,aN)then return"Blackout Kick 336"end;if az(h)and aN(h)then if m.Cast(J.BlackoutKick,nil,nil,not h:IsSpellInRange(J.BlackoutKick))then T=100784;return"Blackout Kick 338"end end end;if J.TigerPalm:IsReady()and UnitsWithBDBCount>0 then if a5.CastTargetIf(J.TigerPalm,O,"min",az,aK)then return"TigerPalm Kick 336"end;if az(h)and aK(h)then if m.Cast(J.TigerPalm,nil,nil,not h:IsSpellInRange(J.TigerPalm))then T=100784;return"TigerPalm Kick 338"end end end end;local function b2()if J.InvokeXuenTheWhiteTiger:IsReady()and E and h:IsInRange(15)and(Q<3 or Q>=3 and(g:BuffUp(J.WhirlingDragonPunchBuff)or J.WhirlingDragonPunch:CooldownRemains()>2 or not J.WhirlingDragonPunch:IsAvailable()))and(not W and(J.RisingSunKick:CooldownRemains()<2 or not J.WeaponsOfOrder:IsAvailable())and(not J.BonedustBrew:IsAvailable()or J.BonedustBrew:CooldownRemains()<2 or not g:IsInRaid()and J.BonedustBrew:CooldownRemains()>10)or d.BossFilteredFightRemains("<",25))then if Q>=3 and g:Chi()<5 and EnemiesWithMotC<5 and EnemiesWithMotC<Q and a7.Windwalker.PoolBeforeBurst then Z=true else if m.Cast(J.InvokeXuenTheWhiteTiger,nil,nil,not h:IsInRange(40))then T=123904;return"Invoke Xuen the White Tiger 400"end end end;if J.TouchOfDeath:IsReady()and h:IsInRange(8)and h:HealthPercentage()<=15 and(d.BossFilteredFightRemains(">",180-am(aa)*120)or g:BuffDown(J.StormEarthAndFireBuff)and J.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<24 and(C_Covenants.GetActiveCovenantID()==4 or h:BuffUp(J.BonedustBrew))or((d.BossFilteredFightRemains("<",J.InvokeXuenTheWhiteTiger:CooldownRemains())or not E)and h:BuffUp(J.BonedustBrew)or d.BossFilteredFightRemains("<",10)))then if m.Cast(J.TouchOfDeath,nil,nil,not h:IsSpellInRange(J.TouchOfDeath))then T=322109;return"Touch of Death 404"end end;if J.WeaponsOfOrder:IsReady()and q and h:IsInRange(8)and(J.RisingSunKick:CooldownRemains()<g:GCD()and(J.InvokeXuenTheWhiteTiger:CooldownRemains()>20+20*am(ab)or not E)or d.BossFilteredFightRemains("<",35))then if m.Cast(J.WeaponsOfOrder,nil,nil)then T=310454;return"Weapons Of Order 406"end end;if J.FaelineStomp:IsReady()and q and h:IsInRange(8)and ax(J.FaelineStomp)then if m.Cast(J.FaelineStomp,nil,nil)then T=327104;return"Faeline Stomp 408"end end;if J.FallenOrder:IsReady()and q and h:IsInRange(8)then if m.Cast(J.FallenOrder,nil,nil)then T=326860;return"Faeline Stomp 410"end end;if J.BonedustBrew:IsReady()and q and h:IsInRange(8)and(g:Chi()>=2 and d.BossFilteredFightRemains(">",60)and(J.StormEarthAndFire:Charges()>0 or J.StormEarthAndFire:CooldownRemains()>10)and(J.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or J.InvokeXuenTheWhiteTiger:CooldownRemains()>10 or hold_xuen or not E)or(g:Chi()>=2 and d.BossFilteredFightRemains("<=",60)and(J.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or(d.BossFilteredFightRemains("<",J.InvokeXuenTheWhiteTiger:CooldownRemains())or not E)and(J.StormEarthAndFire:Charges()>0 or d.BossFilteredFightRemains("<",J.StormEarthAndFire:CooldownRemains())or g:BuffUp(J.StormEarthAndFire)))or d.BossFilteredFightRemains("<",15)))then if Q>=3 and g:Chi()<5 and EnemiesWithMotC<5 and EnemiesWithMotC<Q and a7.Windwalker.PoolBeforeBurst then Z=true elseif EnemiesWithMotC>=5 or EnemiesWithMotC>=Q then if m.Cast(J.BonedustBrew,nil,nil)then T=325216;return"Bonedust Brew 412"end end end;if J.StormEarthAndFire:IsReady()and F and h:IsInRange(10)and(J.StormEarthAndFire:Charges()==2 and(Q<3 or Q>=3 and(g:BuffUp(J.WhirlingDragonPunchBuff)or J.WhirlingDragonPunch:CooldownRemains()>5 or not J.WhirlingDragonPunch:IsAvailable()or J.FistsOfFury:CooldownRemains()>5))or d.BossFilteredFightRemains("<",90)or not J.WeaponsOfOrder:IsAvailable()and not J.BonedustBrew:IsAvailable()and(J.InvokeXuenTheWhiteTiger:CooldownRemains()>J.StormEarthAndFire:FullRechargeTime()or not E or W)and J.FistsOfFury:CooldownRemains()<=9 and g:Chi()>=2 and J.WhirlingDragonPunch:CooldownRemains()<=12)then if m.Cast(J.StormEarthAndFire,nil)then T=137639;return"Storm Earth and Fire 414"end end;if J.StormEarthAndFire:IsReady()and F and h:IsInRange(10)and J.WeaponsOfOrder:IsAvailable()and(g:BuffUp(J.WeaponsOfOrder)or(d.BossFilteredFightRemains("<",J.WeaponsOfOrder:CooldownRemains())or(J.WeaponsOfOrder:CooldownRemains()>J.StormEarthAndFire:FullRechargeTime()or not q))and J.FistsOfFury:CooldownRemains()<=9 and g:Chi()>=2 and J.WhirlingDragonPunch:CooldownRemains()<=12)then if m.Cast(J.StormEarthAndFire,nil)then T=137639;return"Storm Earth and Fire 416"end end;if J.StormEarthAndFire:IsReady()and F and h:IsInRange(10)and(J.BonedustBrew:IsAvailable()and UnitsWithBDBSEFCount>0 and(J.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or hold_xuen or(J.InvokeXuenTheWhiteTiger:CooldownRemains()>J.StormEarthAndFire:FullRechargeTime()or not E)or(J.InvokeXuenTheWhiteTiger:CooldownRemains()>30 or not E)))then if m.Cast(J.StormEarthAndFire,nil)then T=137639;return"Storm Earth and Fire 416"end end;if o()and(a7.Commons.Enabled.TopTrinket or a7.Commons.Enabled.BottomTrinket)and(not V or J.InvokeXuenTheWhiteTiger:CooldownRemains()<20 and E or d.BossFilteredFightRemains("<",20)or not ab)then if true then local R=aY()if R then return R end end end;if J.BloodFury:IsCastable()and o()and h:IsInRange(8)and(J.InvokeXuenTheWhiteTiger:CooldownRemains()>30 or not E or W or d.BossFilteredFightRemains("<",20))then if m.Cast(J.BloodFury,nil)then T=20572;return"Blood Fury 420"end end;if J.Berserking:IsCastable()and o()and h:IsInRange(8)and(J.InvokeXuenTheWhiteTiger:CooldownRemains()>30 or not E or W or d.BossFilteredFightRemains("<",15))then if m.Cast(J.Berserking,nil)then T=26297;return"Berserking 422"end end;if J.LightsJudgment:IsCastable()and o()and h:IsInRange(8)then if m.Cast(J.LightsJudgment,nil,nil,not h:IsInRange(40))then T=255647;return"Lights Judgment 424"end end;if J.Fireblood:IsCastable()and o()and h:IsInRange(8)and(J.InvokeXuenTheWhiteTiger:CooldownRemains()>30 or not E or W or d.BossFilteredFightRemains("<",10))then if m.Cast(J.Fireblood,nil)then T=265221;return"Fireblood 426"end end;if J.AncestralCall:IsCastable()and o()and h:IsInRange(8)and(J.InvokeXuenTheWhiteTiger:CooldownRemains()>30 or not E or W or d.BossFilteredFightRemains("<",20))then if m.Cast(J.AncestralCall,nil)then T=274738;return"Ancestral Call 428"end end;if J.BagOfTricks:IsCastable()and o()and h:IsInRange(8)and g:BuffDown(J.StormEarthAndFire)then if m.Cast(J.BagOfTricks,nil,nil,not h:IsInRange(40))then T=312411;return"Bag of Tricks 430"end end end;local function b3()if true then X=g:BuffRemains(J.SerenityBuff)<1 or J.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 and J.Serenity:CooldownRemains()<30 or d.BossFilteredFightRemains("<",20)end;if J.InvokeXuenTheWhiteTiger:IsReady()and E and h:IsInRange(8)and(not W or d.BossFilteredFightRemains("<",25))then if m.Cast(J.InvokeXuenTheWhiteTiger,nil,nil,not h:IsInRange(40))then T=123904;return"Invoke Xuen the White Tiger 500"end end;if o()and(a7.Commons.Enabled.TopTrinket or a7.Commons.Enabled.BottomTrinket)then if true then local R=aY()if R then return R end end end;if J.BloodFury:IsCastable()and o()and h:IsInRange(8)and X then if m.Cast(J.BloodFury,nil)then T=20572;return"Blood Fury 502"end end;if J.Berserking:IsCastable()and o()and h:IsInRange(8)and X then if m.Cast(J.Berserking,nil)then T=26297;return"Berserking 504"end end;if J.ArcaneTorrent:IsCastable()and o()and h:IsInRange(8)and g:ChiDeficit()>=1 then if m.Cast(J.ArcaneTorrent,nil,nil,not h:IsInMeleeRange(8))then T=50613;return"Arcane Torrent 506"end end;if J.LightsJudgment:IsCastable()and o()and h:IsInRange(8)then if m.Cast(J.LightsJudgment,nil,nil,not h:IsInRange(40))then T=255647;return"Lights Judgment 508"end end;if J.Fireblood:IsCastable()and o()and h:IsInRange(8)and X then if m.Cast(J.Fireblood,nil)then T=265221;return"Fireblood 510"end end;if J.AncestralCall:IsCastable()and o()and h:IsInRange(8)and X then if m.Cast(J.AncestralCall,nil)then T=274738;return"Ancestral Call 512"end end;if J.TouchOfDeath:IsReady()and h:IsInRange(8)and h:HealthPercentage()<=15 and(d.BossFilteredFightRemains(">",180)or J.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or d.BossFilteredFightRemains("<",10))then if m.Cast(J.TouchOfDeath,nil,nil,not h:IsSpellInRange(J.TouchOfDeath))then T=322109;return"Touch of Death 514"end end;if J.WeaponsOfOrder:IsReady()and q and h:IsInRange(10)and q and J.RisingSunKick:CooldownRemains()<g:GCD()then if m.Cast(J.WeaponsOfOrder,nil,nil)then T=310454;return"Weapons Of Order 518"end end;if J.FaelineStomp:IsReady()and q and h:IsInRange(10)and ax(J.FaelineStomp)then if m.Cast(J.FaelineStomp,nil,nil)then T=327104;return"Faeline Stomp 520"end end;if J.FallenOrder:IsReady()and q and h:IsInRange(8)then if m.Cast(J.FallenOrder,nil,nil)then T=326860;return"Faeline Stomp 522"end end;if J.BonedustBrew:IsReady()and q and h:IsInRange(8)then if m.Cast(J.BonedustBrew,nil,nil)then T=325216;return"Bonedust Brew 524"end end;if J.Serenity:IsReady()and h:IsInRange(8)and(J.RisingSunKick:CooldownRemains()<2 or d.BossFilteredFightRemains("<",15))then if m.Cast(J.Serenity,nil)then T=152173;return"Serenity 526"end end;if J.BagOfTricks:IsCastable()and h:IsInRange(8)then if m.Cast(J.BagOfTricks,nil,nil,not h:IsInRange(40))then T=312411;return"Bag of Tricks 528"end end end;local function b4()if J.FistsOfFury:IsReady()and not w and h:IsInRange(8)and g:BuffRemains(J.SerenityBuff)<1 and(not UnitsWithBDBCount==0 or not m.AoEON()or Q<=3)then if m.Cast(J.FistsOfFury,nil,nil,not h:IsSpellInRange(J.FistsOfFury))then T=113656;return"Fists of Fury 600"end end;if o()and(a7.Commons.Enabled.TopTrinket or a7.Commons.Enabled.BottomTrinket)then if true then local R=aY()if R then return R end end end;if J.SpinningCraneKick:IsReady()and h:IsInRange(8)and(ax(J.SpinningCraneKick or EnemiesWithMotC>=5)and(m.AoEON()and Q>=3 or Q>1 and not J.RisingSunKick:CooldownUp()))then if m.Cast(J.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then T=101546;return"Spinning Crane Kick 602"end end;if J.RisingSunKick:IsReady()then if a5.CastTargetIf(J.RisingSunKick,O,"min",az,aO)then return"Rising Sun Kick 604"end;if az(h)and aO(h)then if m.Cast(J.RisingSunKick,nil,nil,not h:IsSpellInRange(J.RisingSunKick))then T=107428;return"Rising Sun Kick 606"end end end;if J.FistsOfFury:IsReady()and not w and m.AoEON()and Q>=3 and h:IsInRange(8)and(not UnitsWithBDBCount==0 or not m.AoEON()or Q<=3)then if m.Cast(J.FistsOfFury,nil,nil,not h:IsSpellInRange(J.FistsOfFury))then T=113656;return"Fists of Fury 608"end end;if J.SpinningCraneKick:IsReady()and h:IsInRange(8)and(ax(J.SpinningCraneKick)or EnemiesWithMotC>=5)and g:BuffUp(J.DanceOfChijiBuff)then if m.Cast(J.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then T=101546;return"Spinning Crane Kick 610"end end;if J.BlackoutKick:IsReady()then if a5.CastTargetIf(J.BlackoutKick,O,"min",az,aP)then return"Blackout Kick 612"end;if az(h)and aP(h)then if m.Cast(J.BlackoutKick,nil,nil,not h:IsSpellInRange(J.BlackoutKick))then T=100784;return"Blackout Kick 614"end end end;if J.FistsOfFury:IsReady()and not w and(not UnitsWithBDBCount==0 or not m.AoEON()or Q<=3)then if m.Cast(J.FistsOfFury,nil,nil,not h:IsSpellInRange(J.FistsOfFury))then T=113656;G=true;return"Fists of Fury 616"end end;if J.SpinningCraneKick:IsReady()and h:IsInRange(8)and UnitsWithBDBCount==0 then if m.Cast(J.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then T=101546;return"Spinning Crane Kick 618"end end;if J.FistOfTheWhiteTiger:IsReady()then if a5.CastTargetIf(J.FistOfTheWhiteTiger,P,"min",az,aB)then return"Fist of the White Tiger 620"end;if az(h)and aB(h)then if m.Cast(J.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(J.FistOfTheWhiteTiger))then T=261947;return"Fist of the White Tiger 622"end end end;if J.BlackoutKick:IsReady()then if a5.CastTargetIf(J.BlackoutKick,O,"min",az,aQ)then return"Blackout Kick 624"end;if az(h)and aQ(h)then if m.Cast(J.BlackoutKick,nil,nil,not h:IsSpellInRange(J.BlackoutKick))then T=100784;return"Blackout Kick 626"end end end;if J.SpinningCraneKick:IsReady()and h:IsInRange(8)then if m.Cast(J.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then T=101546;return"Spinning Crane Kick 628"end end end;local function b5()Y=g:BuffUp(J.WeaponsOfOrder)and(J.RisingSunKick:CooldownRemains()>g:BuffRemains(J.WeaponsOfOrder)and g:BuffRemains(J.WeaponsOfOrder)<2.1 or J.RisingSunKick:CooldownRemains()-g:BuffRemains(J.WeaponsOfOrder)>1.9 and g:BuffRemains(J.WeaponsOfOrder)<4.1 or g:BloodlustRemains()and g:BuffUp(J.InvokersDelightBuff)and g:BuffRemains(J.InvokersDelightBuff)<g:BuffRemains(J.WeaponsOfOrder))if m.CDsON()and not J.Serenity:IsAvailable()then local R=b2()if R then return R end end;if m.CDsON()and J.Serenity:IsAvailable()then local R=b3()if R then return R end end;if J.EnergizingElixir:IsReady()and h:IsInRange(8)and(g:ChiDeficit()>=2 and av()>3)then if m.Cast(J.EnergizingElixir,nil)then T=115288;return"Energizing Elixir 700"end end;if J.RisingSunKick:IsReady()then if a5.CastTargetIf(J.RisingSunKick,O,"min",az)then T=107428;return"Rising Sun Kick 702"end;if az(h)then if m.Cast(J.RisingSunKick,nil,nil,not h:IsSpellInRange(J.RisingSunKick))then T=107428;return"Rising Sun Kick 704"end end end;if J.FistsOfFury:IsReady()and not w and h:IsInRange(8)and Q>=2 and g:BuffRemains(J.WeaponsOfOrder)<1 then if m.Cast(J.FistsOfFury,nil,nil,not h:IsSpellInRange(J.FistsOfFury))then T=113656;return"Fists of Fury 708"end end;if J.WhirlingDragonPunch:IsReady()and not u and h:IsInRange(8)and g:BuffUp(J.WhirlingDragonPunchBuff)and Q>=2 then if m.Cast(J.WhirlingDragonPunch,nil,nil,not h:IsInMeleeRange(8))then T=152175;return"Whirling Dragon Punch 710"end end;if J.SpinningCraneKick:IsReady()and h:IsInRange(8)and(ax(J.SpinningCraneKick)or EnemiesWithMotC>=5)and Q>=3 and g:BuffUp(J.WeaponsOfOrder)then if m.Cast(J.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then T=101546;return"Spinning Crane Kick 706"end end;if J.BlackoutKick:IsReady()then if a5.CastTargetIf(J.BlackoutKick,O,"min",az,aR)then return"Blackout Kick 712"end;if az(h)and aR(h)then if m.Cast(J.BlackoutKick,nil,nil,not h:IsSpellInRange(J.BlackoutKick))then T=100784;return"Blackout Kick 714"end end end;if J.SpinningCraneKick:IsReady()and h:IsInMeleeRange(8)and(ax(J.SpinningCraneKick)or EnemiesWithMotC>=5)and g:BuffUp(J.DanceOfChijiBuff)then if m.Cast(J.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then T=101546;return"Spinning Crane Kick 710"end end;if J.ExpelHarm:IsReady()and h:IsInRange(8)and g:Chi()==0 and g:BuffRemains(J.WeaponsOfOrder)<4 then if m.Cast(J.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then T=322101;return"Expel Harm 756"end end;if J.FistOfTheWhiteTiger:IsReady()then if a5.CastTargetIf(J.FistOfTheWhiteTiger,P,"min",az,aD)then return"Fist of the White Tiger 722"end;if az(h)and aD(h)then if m.Cast(J.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(J.FistOfTheWhiteTiger))then T=261947;return"Fist of the White Tiger 724"end end end;if J.WhirlingDragonPunch:IsReady()and not u and h:IsInRange(8)and g:BuffUp(J.WhirlingDragonPunchBuff)then if m.Cast(J.WhirlingDragonPunch,nil,nil,not h:IsInMeleeRange(8))then T=152175;return"Whirling Dragon Punch 716"end end;if J.TigerPalm:IsReady()then if a5.CastTargetIf(J.TigerPalm,O,"min",aM,aL)then return"Tiger Palm 730"end;if aM(h)and aL(h)then if m.Cast(J.TigerPalm,nil,nil,not h:IsSpellInRange(J.TigerPalm))then T=100780;return"Tiger Palm 732"end end end;if J.FistsOfFury:IsReady()and not w and h:IsInRange(8)and g:BuffUp(J.StormEarthAndFireBuff)then if m.Cast(J.FistsOfFury,nil,nil,not h:IsSpellInRange(J.FistsOfFury))then T=113656;H=true;return"Fists of Fury 718"end end;if J.SpinningCraneKick:IsReady()and h:IsInRange(8)and(ax(J.SpinningCraneKick)or EnemiesWithMotC>=5)and g:BuffStack(J.ChiEnergyBuff)>30-5*Q then if m.Cast(J.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then T=101546;return"Spinning Crane Kick 720"end end;if J.FistOfTheWhiteTiger:IsReady()then if a5.CastTargetIf(J.FistOfTheWhiteTiger,P,"min",az,aB)then return"Fist of the White Tiger 722"end;if az(h)and aB(h)then if m.Cast(J.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(J.FistOfTheWhiteTiger))then T=261947;return"Fist of the White Tiger 724"end end end;if J.ExpelHarm:IsReady()and h:IsInRange(8)and g:Level()>=43 and g:ChiDeficit()>=1 then if m.Cast(J.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then T=322101;return"Expel Harm 726"end end;if J.ChiBurst:IsReady()and h:IsInRange(30)and g:ChiDeficit()>=1+am(Q>=1)then if m.Cast(J.ChiBurst,nil,nil,not h:IsInRange(40))then T=123986;return"Chi Burst 728"end end;if J.TigerPalm:IsReady()then if a5.CastTargetIf(J.TigerPalm,O,"min",aM,aJ)then return"Tiger Palm 730"end;if aM(h)and aJ(h)then if m.Cast(J.TigerPalm,nil,nil,not h:IsSpellInRange(J.TigerPalm))then T=100780;return"Tiger Palm 732"end end end;if J.BlackoutKick:IsReady()then if a5.CastTargetIf(J.BlackoutKick,O,"min",az,aS)then return"Blackout Kick 736"end;if az(h)and aS(h)then if m.Cast(J.BlackoutKick,nil,nil,not h:IsSpellInRange(J.BlackoutKick))then T=100784;return"Blackout Kick 738"end end end;if J.ChiWave:IsReady()and h:IsInRange(8)then if m.Cast(J.ChiWave,nil,nil,not h:IsInRange(40))then T=115098;return"Chi Wave 734"end end;if J.FlyingSerpentKickActionBarReplacement:IsReady()and not v and not a7.Windwalker.IgnoreFSK then if m.Cast(J.FlyingSerpentKickActionBarReplacement,nil,nil,not h:IsInRange(40))then T=101545;return"Flying Serpent Kick Slam 740"end end;if J.FlyingSerpentKick:IsReady()and not v and h:IsInRange(8)and not a7.Windwalker.IgnoreFSK then if m.Cast(J.FlyingSerpentKick,nil,nil,not h:IsInRange(40))then T=101545;return"Flying Serpent Kick 742"end end end;local function b6()if J.WhirlingDragonPunch:IsReady()and not u and h:IsInRange(8)and g:BuffUp(J.WhirlingDragonPunchBuff)then if m.Cast(J.WhirlingDragonPunch,nil,nil,not h:IsInMeleeRange(8))then T=152175;return"Whirling Dragon Punch 800"end end;if J.EnergizingElixir:IsReady()and h:IsInRange(8)and(g:ChiDeficit()>=2 and av()>3 or g:ChiDeficit()>=4 and(av()>2 or not g:PrevGCD(1,J.TigerPalm)))then if m.Cast(J.EnergizingElixir,nil)then T=115288;return"Energizing Elixir 802"end end;if J.SpinningCraneKick:IsReady()and h:IsInRange(8)and(ax(J.SpinningCraneKick)or EnemiesWithMotC>=5)and g:BuffUp(J.DanceOfChijiBuff)then if m.Cast(J.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then T=101546;return"Spinning Crane Kick 804"end end;if J.RisingSunKick:IsReady()and(not UnitsWithBDBCount==0 or EnemiesWithMotC<4 or not J.CalculatedStrikes:SoulbindEnabled())then if a5.CastTargetIf(J.RisingSunKick,O,"min",az,aT)then return"Rising Sun Kick 806"end;if az(h)and aT(h)then if m.Cast(J.RisingSunKick,nil,nil,not h:IsSpellInRange(J.RisingSunKick))then T=107428;return"Rising Sun Kick 808"end end end;if J.FistsOfFury:IsReady()and(not UnitsWithBDBCount==0 or EnemiesWithMotC<4 or not J.CalculatedStrikes:SoulbindEnabled())and not w and h:IsInRange(8)and(av()>J.FistsOfFury:ExecuteTime()-1 or g:ChiDeficit()<=1 or g:BuffRemains(J.StormEarthAndFireBuff)<J.FistsOfFury:ExecuteTime()+1 or d.BossFilteredFightRemains("<",J.FistsOfFury:ExecuteTime()+1))then if m.Cast(J.FistsOfFury,nil,nil,not h:IsSpellInRange(J.FistsOfFury))then T=113656;return"Fists of Fury 810"end end;if J.CracklingJadeLightning:IsReady()and h:IsInRange(40)and(g:BuffStack(J.TheEmperorsCapacitor)>19 and av()>J.CracklingJadeLightning:ExecuteTime()-1 and J.RisingSunKick:CooldownRemains()>J.CracklingJadeLightning:ExecuteTime()or g:BuffStack(J.TheEmperorsCapacitor)>14 and(J.Serenity:IsAvailable()and J.Serenity:CooldownRemains()<5 or J.WeaponsOfOrder:IsAvailable()and J.WeaponsOfOrder:CooldownRemains()<5 or d.BossFilteredFightRemains("<",20)))then if m.Cast(J.CracklingJadeLightning,nil,nil,not h:IsInRange(40))then T=117952;return"Crackling Jade Lightning 812"end end;if J.RushingJadeWind:IsReady()and h:IsInRange(8)and(g:BuffDown(J.RushingJadeWindBuff)and m.AoEON()and Q>1)then if m.Cast(J.RushingJadeWind,nil,nil,not h:IsInMeleeRange(8))then T=116847;return"Rushing Jade Wind 814"end end;if J.FistOfTheWhiteTiger:IsReady()then if a5.CastTargetIf(J.FistOfTheWhiteTiger,P,"min",az,aB)then return"Fist of the White Tiger 816"end;if az(h)and aB(h)then if m.Cast(J.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(J.FistOfTheWhiteTiger))then T=261947;return"Fist of the White Tiger 818"end end end;if J.ExpelHarm:IsReady()and h:IsInRange(8)and g:Level()>=43 and g:ChiDeficit()>=1 then if m.Cast(J.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then T=322101;return"Expel Harm 820"end end;if J.ChiBurst:IsReady()and h:IsInRange(30)and(g:ChiDeficit()>=1 and Q==1 or g:ChiDeficit()>=2 and Q>=2)then if m.Cast(J.ChiBurst,nil,nil,not h:IsInRange(40))then T=123986;return"Chi Burst 822"end end;if J.ChiWave:IsReady()and h:IsInRange(40)then if m.Cast(J.ChiWave,nil,nil,not h:IsInRange(40))then T=115098;return"Chi Wave 824"end end;if J.TigerPalm:IsReady()then if a5.CastTargetIf(J.TigerPalm,O,"min",aM,aU)then return"Tiger Palm 826"end;if aM(h)and aU(h)then if m.Cast(J.TigerPalm,nil,nil,not h:IsSpellInRange(J.TigerPalm))then T=100780;return"Tiger Palm 828"end end end;if J.SpinningCraneKick:IsReady()and h:IsInRange(8)and(g:BuffStack(J.ChiEnergyBuff)>30-5*Q and g:BuffDown(J.StormEarthAndFireBuff)and(J.RisingSunKick:CooldownRemains()>2 and(J.FistsOfFury:CooldownRemains()>2 or w)or J.RisingSunKick:CooldownRemains()<3 and(J.FistsOfFury:CooldownRemains()>3 or w)and g:Chi()>3 or J.RisingSunKick:CooldownRemains()>3 and J.FistsOfFury:CooldownRemains()<3 and g:Chi()>4 or g:ChiDeficit()<=1 and av()<2)or g:BuffStack(J.ChiEnergyBuff)>10 and d.BossFilteredFightRemains("<",7))then if m.Cast(J.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then T=101546;return"Spinning Crane Kick 830"end end;if J.BlackoutKick:IsReady()and(not UnitsWithBDBCount==0 or EnemiesWithMotC<3 or not J.CalculatedStrikes:SoulbindEnabled()and EnemiesWithMotC<2)then if a5.CastTargetIf(J.BlackoutKick,O,"min",az,aV)then return"Blackout Kick 832"end;if az(h)and aV(h)then if m.Cast(J.BlackoutKick,nil,nil,not h:IsSpellInRange(J.BlackoutKick))then T=100784;return"Blackout Kick 834"end end end;if J.TigerPalm:IsReady()then if a5.CastTargetIf(J.TigerPalm,O,"min",aM,aG)then return"Tiger Palm 836"end;if aM(h)and aG(h)then if m.Cast(J.TigerPalm,nil,nil,not h:IsSpellInRange(J.TigerPalm))then T=100780;return"Tiger Palm 838"end end end;if J.ArcaneTorrent:IsReady()and h:IsInRange(8)and g:ChiDeficit()>=1 then if m.Cast(J.ArcaneTorrent,nil,nil,not h:IsInMeleeRange(8))then T=50613;return"Arcane Torrent 402"end end;if J.FlyingSerpentKickActionBarReplacement:IsReady()and not v and not a7.Windwalker.IgnoreFSK then if m.Cast(J.FlyingSerpentKickActionBarReplacement,nil,nil,not h:IsInRange(40))then T=101545;return"Flying Serpent Kick Slam 840"end end;if J.FlyingSerpentKick:IsReady()and not v and h:IsInRange(8)and not a7.Windwalker.IgnoreFSK then if m.Cast(J.FlyingSerpentKick,nil,nil,not h:IsInRange(40))then T=101545;return"Flying Serpent Kick 842"end end;if J.BlackoutKick:IsReady()and(not UnitsWithBDBCount==0 or EnemiesWithMotC<3 or not J.CalculatedStrikes:SoulbindEnabled()and EnemiesWithMotC<2)then if a5.CastTargetIf(J.BlackoutKick,P,"min",az,aW)then return"Blackout Kick 844"end;if az(h)and aW(h)then if m.Cast(J.BlackoutKick,nil,nil,not h:IsSpellInRange(J.BlackoutKick))then T=100784;return"Blackout Kick 846"end end end;if J.BlackoutKick:IsReady()and(not UnitsWithBDBCount==0 or EnemiesWithMotC<3 or not J.CalculatedStrikes:SoulbindEnabled()and EnemiesWithMotC<2)then if a5.CastTargetIf(J.BlackoutKick,P,"min",az,aX)then return"Blackout Kick 848"end;if az(h)and aX(h)then if m.Cast(J.BlackoutKick,nil,nil,not h:IsSpellInRange(J.BlackoutKick))then T=100784;return"Blackout Kick 850"end end end end;local function b7()s=HeroRotationCharDB.Toggles[6]q=HeroRotationCharDB.Toggles[4]r=HeroRotationCharDB.Toggles[5]B=HeroRotationCharDB.Toggles[12]t=HeroRotationCharDB.Toggles[15]u=HeroRotationCharDB.Toggles[31]v=HeroRotationCharDB.Toggles[32]w=HeroRotationCharDB.Toggles[33]x=HeroRotationCharDB.Toggles[34]y=HeroRotationCharDB.Toggles[35]z=HeroRotationCharDB.Toggles[36]A=HeroRotationCharDB.Toggles[37]Z=false;E=false;F=false;if a7.Windwalker.IncludedCooldowns.Xuen and o()or a7.Windwalker.IncludedSmallCooldowns.Xuen and(o()or r)or not a7.Windwalker.IncludedSmallCooldowns.Xuen and not a7.Windwalker.IncludedCooldowns.Xuen and not a7.Windwalker.IncludedSmallCooldowns.SEFEcho and not a7.Windwalker.IncludedCooldowns.SEFEco then E=true end;if a7.Windwalker.IncludedCooldowns.SEFFull and o()or a7.Windwalker.IncludedSmallCooldowns.SEFFull and(o()or r)or not a7.Windwalker.IncludedSmallCooldowns.SEFFull and not a7.Windwalker.IncludedCooldowns.SEFFull or(a7.Windwalker.IncludedCooldowns.SEFEco and o()and J.StormEarthAndFire:ChargesFractional()>a7.Windwalker.SEFEcoCharge or a7.Windwalker.IncludedSmallCooldowns.SEFEco and(o()or r)and J.StormEarthAndFire:ChargesFractional()>a7.Windwalker.SEFEcoCharge or not a7.Windwalker.IncludedSmallCooldowns.SEFEco and not a7.Windwalker.IncludedCooldowns.SEFEco and J.StormEarthAndFire:ChargesFractional()>a7.Windwalker.SEFEcoCharge)then F=true end end;local function b8()local b9=0;local ba={322968,319603,319611,325876,334493,334496,332605,328494,326836,336277,319669,323831,330725,333299}if UnitExists("mouseover")then if UnitIsDead("mouseover")==true and UnitCanAttack("player","mouseover")~=true then b9=9999 else for al=0,40 do local ak,ak,bb,bc,ak,ak,ak,ak,ak,bd=UnitDebuff("mouseover",al)for ak,be in pairs(ba)do if be==bd then if bc=="Magic"then b9=1 elseif bc=="Poison"then b9=2 elseif bc=="Disease"then b9=3 elseif bc=="Curse"then b9=4 end end end end end end;if b9==2 or DebuffCheckC==3 and J.Detox:IsReady()and f("mouseover"):IsInRange(40)then if m.Cast(J.Detox,nil,nil,not h:IsInRange(40))then T=218164;return"Detox MO"end end end;local function bf()O=g:GetEnemiesInMeleeRange(5)P=g:GetEnemiesInMeleeRange(8)if p()then Enemies10ySplash=h:GetEnemiesInSplashRange(10)Q=#P else Enemies10ySplash=1;Q=1 end;EnemiesWithMotC=GetSpellCount(101546)UnitsWithBDBCount=ap(P)UnitsWithBDBSEFCount=au(P)local bg=g:IsTankingAoE(8)or g:IsTanking(h)aj()if not BotOn then S=0;T=0;U=0 end;if S>0 then S=0 end;if T>0 then T=0 end;if U>0 then U=0 end;R=b7()R=b8()if g:IsInInstancedPvP()and not g:StealthUp(true,true)and not g:IsMounted()then if J.Paralysis:IsReady()and f("focus"):IsSpellInRange(J.Paralysis)and select(1,UnitCastingInfo("focus"))=="Convoke the Spirits"then U=1 end;if J.SpearHandStrike:IsReady()and f("focus"):IsSpellInRange(J.SpearHandStrike)and not g:StealthUp(true,true)and UnitExists("focus")and not UnitIsUnit("focus",player)and(select(2,UnitClass("focus"))=="DRUID"and select(1,UnitCastingInfo("focus"))=="Convoke the Spirits")and select(1,UnitCastingInfo("focus"))=="Convoke the Spirits"then U=2 end;if J.LegSweep:IsReady()and f("focus"):IsInRange(7)and not g:StealthUp(true,true)and UnitExists("focus")and not UnitIsUnit("focus",player)and(select(2,UnitClass("arena1"))=="DRUID"or select(2,UnitClass("arena2"))=="DRUID"or select(2,UnitClass("arena3"))=="DRUID")and f("focus"):IsInRange(7)and select(1,UnitCastingInfo("focus"))=="Convoke the Spirits"then U=3 end;local bh={327196,64843,2061,32546,207778,124682,191837,19750,289666,120517,2060,73920,8044,77472,82326,265202,289022,47540,184509,596,33076,8936,186263,115175,227344,740,116670,197995,48438,1064}for al=1,20 do local bi="nameplate"..al;if UnitIsEnemy("player",bi)then for bj=1,#bh do local bk=f("focus"):CastSpellID()if bk then end;if bk==bh[al]and not g:StealthUp(true,true)and f("focus"):IsSpellInRange(J.SpearHandStrike)and f("focus"):IsInterruptible()then U=2 end;if bk==bh[al]and not g:StealthUp(true,true)and f("focus"):IsSpellInRange(J.Paralysis)and f("focus"):CanBeStunned(IgnoreClassification)then U=1 end;if bk==bh[al]and not g:StealthUp(true,true)and f("focus"):IsInRange(8)and f("focus"):CanBeStunned(IgnoreClassification)then U=3 end end end end end;if a5.TargetIsValid()and not g:IsDeadOrGhost()then if not g:AffectingCombat()and s then local R=a_()if R then return R end end;if J.FlyingSerpentKickActionBarReplacement:IsReady()and not v and not a7.Windwalker.IgnoreFSK and g:AffectingCombat()then if m.Cast(J.FlyingSerpentKickActionBarReplacement,nil,nil,not h:IsInRange(40))then T=101545;return"Flying Serpent Kick Slam 740"end end;if g:IsChanneling(J.FistsOfFury)and(not G or J.RisingSunKick:CooldownRemains()<=0)and not H and g:AffectingCombat()then if m.Cast(J.PoolEnergy,nil,nil,nil)then T=1000;return"Casting FoF"end elseif(G==true or H==true)and not g:IsChanneling(J.FistsOfFury)then G=false;H=false end;if x and J.LegSweep:IsUsableP()and J.LegSweep:CooldownRemains(BypassRecovery)<=0 then if m.Cast(J.LegSweep,nil,nil,nil)then T=119381;return"queue Leg Sweep"end elseif(not J.LegSweep:IsUsableP()or J.LegSweep:CooldownRemains(BypassRecovery)>0)and x then HeroRotationCharDB.Toggles[34]=not HeroRotationCharDB.Toggles[34]m.Print("Leg Sweep Queue is now "..(HeroRotationCharDB.Toggles[34]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if y and J.Paralysis:IsUsableP()and J.Paralysis:CooldownRemains(BypassRecovery)<=0 then if m.Cast(J.Paralysis,nil,nil,nil)then if f("mouseover"):GUID()~=nil and f("mouseover"):IsSpellInRange(J.Paralysis)then S=1115078;return"queue Paralysis MO"else T=115078;return"queue Paralysis"end end elseif(not J.Paralysis:IsUsableP()or J.Paralysis:CooldownRemains(BypassRecovery)>0)and y then HeroRotationCharDB.Toggles[35]=not HeroRotationCharDB.Toggles[35]m.Print("Paralysis Queue is now "..(HeroRotationCharDB.Toggles[35]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if z and J.RingOfPeace:IsAvailable()and J.RingOfPeace:IsUsableP()and J.RingOfPeace:CooldownRemains(BypassRecovery)<=0 then if m.Cast(J.RingOfPeace,nil,nil,nil)then T=116844;return"queue RingOfPeace"end elseif(not J.RingOfPeace:IsUsableP()or J.RingOfPeace:CooldownRemains(BypassRecovery)>0 or not J.RingOfPeace:IsAvailable())and z then HeroRotationCharDB.Toggles[36]=not HeroRotationCharDB.Toggles[36]m.Print("RingOfPeace Queue is now "..(HeroRotationCharDB.Toggles[36]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if A and J.BonedustBrew:IsUsableP()and J.BonedustBrew:CooldownRemains(BypassRecovery)<=0 then if m.Cast(J.BonedustBrew,nil,nil,nil)then T=325216;return"queue BonedustBrew"end elseif(not J.BonedustBrew:IsUsableP()or J.BonedustBrew:CooldownRemains(BypassRecovery)>0)and A then HeroRotationCharDB.Toggles[37]=not HeroRotationCharDB.Toggles[37]m.Print("BonedustBrew Queue is now "..(HeroRotationCharDB.Toggles[37]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if a7.Commons.UseDefensives and g:AffectingCombat()then if J.FortifyingBrew:IsReady()and g:HealthPercentage()<a7.Commons.FortifyingBrew then if m.Cast(J.FortifyingBrew,nil,nil,nil)then T=243435;return"Fortifying Brew 100"end end;if J.TouchOfKarma:IsReady()and g:HealthPercentage()<a7.Commons.TouchofKarma then if m.Cast(J.TouchOfKarma,nil,nil,nil)then T=122470;return"ToK 100"end end;if g:HealthPercentage()<a7.Commons.PhialHP and K.PhialofSerenity:IsReady()and K.PhialofSerenity:CooldownRemains()<=0 then if m.Cast(K.PhialofSerenity,nil)then T=55;return"PhialofSerenity HP"end end;if g:HealthPercentage()<a7.Commons.HealthstoneHP and K.Healthstone:IsReady()and K.Healthstone:CooldownRemains()<=0 then if m.Cast(K.Healthstone,nil)then T=40;return"Healthstone HP"end end;if g:HealthPercentage()<a7.Commons.HealPotHP and K.HealPot:IsReady()and K.HealPot:CooldownRemains()<=0 then if m.Cast(K.HealPot,nil)then T=41;return"HealPot HP"end end end;if true then W=(d.BossFilteredFightRemains("<",J.InvokeXuenTheWhiteTiger:CooldownRemains())or not E or(d.BossFilteredFightRemains("<",120+J.InvokeXuenTheWhiteTiger:CooldownRemains())or not E))and(J.Serenity:IsAvailable()and d.BossFilteredFightRemains(">",J.Serenity:CooldownRemains())and J.Serenity:CooldownRemains()>10 or d.BossFilteredFightRemains(">",J.StormEarthAndFire:FullRechargeTime())and J.StormEarthAndFire:FullRechargeTime()>15 or J.StormEarthAndFire:Charges()==0 and d.BossFilteredFightRemains(">",J.StormEarthAndFire:CooldownRemains()))or not E end;if K.PotionofPhantomFire:IsReady()and g:AffectingCombat()and h:IsInRange(8)and a7.Commons.UsePotions and((g:BuffUp(J.SerenityBuff)or g:BuffUp(J.StormEarthAndFireBuff))and J.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or d.BossFilteredFightRemains("<=",60))then if m.CastSuggested(K.PotionofPhantomFire)then T=32;return"Potion of Phantom Fire 102"end end;if K.PotionofSpectralAgility:IsReady()and g:AffectingCombat()and h:IsInRange(8)and a7.Commons.UsePotions and((g:BuffUp(J.SerenityBuff)or g:BuffUp(J.StormEarthAndFireBuff))and J.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or d.BossFilteredFightRemains("<=",60))then if m.CastSuggested(K.PotionofSpectralAgility)then T=32;return"Potion of Spectral Agility 104"end end;if K.PotionofDeathlyFixation:IsReady()and g:AffectingCombat()and h:IsInRange(8)and a7.Commons.UsePotions and((g:BuffUp(J.SerenityBuff)or g:BuffUp(J.StormEarthAndFireBuff))and J.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or d.BossFilteredFightRemains("<=",60))then if m.CastSuggested(K.PotionofDeathlyFixation)then T=32;return"Potion of Deathly Fixation 106"end end;if K.PotionofEmpoweredExorcisms:IsReady()and g:AffectingCombat()and h:IsInRange(8)and a7.Commons.UsePotions and((g:BuffUp(J.SerenityBuff)or g:BuffUp(J.StormEarthAndFireBuff))and J.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or d.BossFilteredFightRemains("<=",60))then if m.CastSuggested(K.PotionofEmpoweredExorcisms)then T=32;return"Potion of Empowered Exorcisms 108"end end;if K.PotionofHardenedShadows:IsReady()and g:AffectingCombat()and h:IsInRange(8)and a7.Commons.UsePotions and((g:BuffUp(J.SerenityBuff)or g:BuffUp(J.StormEarthAndFireBuff))and J.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or d.BossFilteredFightRemains("<=",60))then if m.CastSuggested(K.PotionofHardenedShadows)then T=32;return"Potion of Hardened Shadows 110"end end;if K.PotionofSpectralStamina:IsReady()and g:AffectingCombat()and h:IsInRange(8)and a7.Commons.UsePotions and((g:BuffUp(J.SerenityBuff)or g:BuffUp(J.StormEarthAndFireBuff))and J.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or d.BossFilteredFightRemains("<=",60))then if m.CastSuggested(K.PotionofSpectralStamina)then T=32;return"Potion of Spectral Stamina 112"end end;if g:BuffUp(J.SerenityBuff)and g:AffectingCombat()then local R=b4()if R then return R end end;if g:BuffUp(J.WeaponsOfOrder)and g:AffectingCombat()then local R=b5()if R then return R end end;if d.CombatTime()<4 and g:Chi()<5 and not(J.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24)and(g:AffectingCombat()or s)then local R=b0()if R then return R end end;if J.FistOfTheWhiteTiger:IsReady()and g:AffectingCombat()then if a5.CastTargetIf(J.FistOfTheWhiteTiger,O,"min",az,aC)then return"Fist of the White Tiger 114"end;if az(h)and aC(h)then if m.Cast(J.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(J.FistOfTheWhiteTiger))then T=261947;return"Fist of the White Tiger 116"end end end;if J.ExpelHarm:IsReady()and g:AffectingCombat()and h:IsInRange(8)and g:Level()>=43 and g:ChiDeficit()>=1 and(av()<1 or J.Serenity:CooldownRemains()<2 or(av()<4 and J.FistsOfFury:CooldownRemains()<1.5 or J.WeaponsOfOrder:CooldownRemains()<2))and not UnitsWithBDBCount==0 then if m.Cast(J.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then T=322101;return"Expel Harm 118"end end;if J.TigerPalm:IsReady()and g:AffectingCombat()then if a5.CastTargetIf(J.TigerPalm,P,"min",az,aE)then return"Tiger Palm 120"end;if az(h)and aE(h)then if m.Cast(J.TigerPalm,nil,nil,not h:IsSpellInRange(J.TigerPalm))then T=100780;return"Tiger Palm 122"end end end;if(m.CDsON()or not m.CDsON())and not J.Serenity:IsAvailable()and g:AffectingCombat()then local R=b2()if R then return R end end;if(m.CDsON()or not m.CDsON())and J.Serenity:IsAvailable()and g:AffectingCombat()then local R=b3()if R then return R end end;if(Q<3 or not m.AoEON())and g:AffectingCombat()then local R=b6()if R then return R end end;if m.AoEON()and Q>=3 and g:AffectingCombat()then local R=b1()if R then return R end end;if g:AffectingCombat()then if m.Cast(J.PoolEnergy)and not a7.Windwalker.NoWindwalkerPooling then return"Pool Energy"end end end end;local function bl()end;function ReturnSpell()if T==0 then return 0 else return T end end;function ReturnSpellMO()if S==0 then return 0 else return S end end;function ReturnSpellFocus()if U==0 then return 0 else return U end end;m.SetAPL(269,bf,bl)