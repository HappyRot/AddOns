local a,b=...local c=HeroDBC.DBC;local d=HeroLib;local e=HeroCache;local f=d.Unit;local g=f.Player;local h=f.Target;local i=f.Pet;local j=d.Spell;local k=d.MultiSpell;local l=d.Item;local m=HeroRotation;local n=m.Cast;local o=m.CDsON;local p=m.AoEON;local q=HeroRotationCharDB.Toggles[4]local r=HeroRotationCharDB.Toggles[5]local s=HeroRotationCharDB.Toggles[6]local t=HeroRotationCharDB.Toggles[15]local u=HeroRotationCharDB.Toggles[31]local v=HeroRotationCharDB.Toggles[32]local w=HeroRotationCharDB.Toggles[33]local x=HeroRotationCharDB.Toggles[34]local y=HeroRotationCharDB.Toggles[35]local z=HeroRotationCharDB.Toggles[36]local A=HeroRotationCharDB.Toggles[37]local B=HeroRotationCharDB.Toggles[12]local C=nil;local D=nil;local E=false;local F=false;local G=false;local H=false;local I=math.min;local pairs=pairs;local J=j.Monk.Windwalker;local K=l.Monk.Windwalker;local L={}local M;local N;local O;local P;local Q;local R;local S=0;local T=0;local U=0;local V=false;local W=false;local X=false;local Y=false;local Z={{J.SpearHandStrike,"Cast Spear Hand Strike (Interrupt)",function()return true end}}local _={{J.LegSweep,"Cast Leg Sweep (Stun)",function()return true end}}local a0={{J.RingOfPeace,"Cast Ring Of Peace (Stun)",function()return true end}}local a1={{J.Paralysis,"Cast Paralysis (Stun)",function()return true end}}local a2=false;local a3=0;local a4=m.Commons.Everyone;local a5=m.Commons.Monk;local a6={General=m.GUISettings.General,Commons=m.GUISettings.APL.Monk.Commons,Windwalker=m.GUISettings.APL.Monk.Windwalker}local a7=g:HasLegendaryEquipped(88)local a8=g:HasLegendaryEquipped(82)local a9=g:HasLegendaryEquipped(85)local aa=g:HasLegendaryEquipped(83)local ab=g:HasLegendaryEquipped(96)local ac=g:HasLegendaryEquipped(95)local ad=g:HasLegendaryEquipped(97)local ae=g:HasLegendaryEquipped(94)d:RegisterForEvent(function()a3=0 end,"PLAYER_REGEN_ENABLED")local function M(af)if J.TigerPalm:TimeSinceLastCast()<=g:GCD()then return true end;return af and h:IsInMeleeRange(af)or h:IsInMeleeRange(5)end;local ag={5,8,10,30,40,100}local ah={}local function ai()for aj,ak in ipairs(ag)do if ak==8 or 5 then ah[ak]=h:IsInMeleeRange(ak)end;ah[ak]=h:IsInRange(ak)end end;local function al(am)if am then return 1 else return 0 end end;local function an(am)return am~=0 end;local function ao()return math.floor(g:EnergyTimeToMaxPredicted()*10+0.5)/10 end;local function ap()return math.floor(g:EnergyPredicted()+0.5)end;local function aq(ar)return not g:PrevGCD(1,ar)end;local function as(at)return at:DebuffRemains(J.MarkOfTheCraneDebuff)end;local function au(at)if g:Chi()<3 and at:GUID()==f("mouseover"):GUID()and a6.Windwalker.TargetSwap=="Mouseover"then S=1261947;return true elseif g:Chi()<3 and a6.Windwalker.TargetSwap=="AutoSwap"and at:GUID()~=h:GUID()and not B then S=999;return true elseif g:Chi()<3 and at:GUID()==h:GUID()then T=261947;return true elseif g:Chi()<3 then return true end end;local function av(at)if g:ChiDeficit()>=3 and(ao()<1 or ao()<4 and J.FistsOfFury:CooldownRemains()<1.5 or J.WeaponsOfOrder:CooldownRemains()<2)and not h:DebuffUp(J.BonedustBrew)and at:GUID()==f("mouseover"):GUID()and a6.Windwalker.TargetSwap=="Mouseover"then S=1261947;return true elseif g:ChiDeficit()>=3 and(ao()<1 or ao()<4 and J.FistsOfFury:CooldownRemains()<1.5 or J.WeaponsOfOrder:CooldownRemains()<2)and not h:DebuffUp(J.BonedustBrew)and a6.Windwalker.TargetSwap=="AutoSwap"and at:GUID()~=h:GUID()and not B then S=999;return true elseif g:ChiDeficit()>=3 and(ao()<1 or ao()<4 and J.FistsOfFury:CooldownRemains()<1.5 or J.WeaponsOfOrder:CooldownRemains()<2)and not h:DebuffUp(J.BonedustBrew)and at:GUID()==h:GUID()then T=261947;return true elseif g:ChiDeficit()>=3 and(ao()<1 or ao()<4 and J.FistsOfFury:CooldownRemains()<1.5 or J.WeaponsOfOrder:CooldownRemains()<2)and not h:DebuffUp(J.BonedustBrew)then return true end end;local function aw(at)if g:Chi()==0 and g:BuffRemains(J.WeaponsOfOrder)<4 and at:GUID()==f("mouseover"):GUID()and a6.Windwalker.TargetSwap=="Mouseover"then S=1261947;return true elseif g:Chi()==0 and g:BuffRemains(J.WeaponsOfOrder)<4 and a6.Windwalker.TargetSwap=="AutoSwap"and at:GUID()~=h:GUID()and not B then S=999;return true elseif g:Chi()==0 and g:BuffRemains(J.WeaponsOfOrder)<4 and at:GUID()==h:GUID()then T=261947;return true elseif g:Chi()==0 and g:BuffRemains(J.WeaponsOfOrder)<4 then return true end end;local function ax(at)if aq(J.TigerPalm)and g:ChiDeficit()>=2 and(ao()<1 or J.Serenity:CooldownRemains()<2 or ao()<4 and J.FistsOfFury:CooldownRemains()<1.5 or J.WeaponsOfOrder:CooldownRemains()<2)and not h:DebuffUp(J.BonedustBrew)and at:GUID()==f("mouseover"):GUID()and a6.Windwalker.TargetSwap=="Mouseover"then S=1100780;return true elseif aq(J.TigerPalm)and g:ChiDeficit()>=2 and(ao()<1 or J.Serenity:CooldownRemains()<2 or ao()<4 and J.FistsOfFury:CooldownRemains()<1.5 or J.WeaponsOfOrder:CooldownRemains()<2)and not h:DebuffUp(J.BonedustBrew)and a6.Windwalker.TargetSwap=="AutoSwap"and at:GUID()~=h:GUID()and not B then S=999;return true elseif aq(J.TigerPalm)and g:ChiDeficit()>=2 and(ao()<1 or J.Serenity:CooldownRemains()<2 or ao()<4 and J.FistsOfFury:CooldownRemains()<1.5 or J.WeaponsOfOrder:CooldownRemains()<2)and not h:DebuffUp(J.BonedustBrew)and at:GUID()==h:GUID()then T=100780;return true elseif aq(J.TigerPalm)and g:ChiDeficit()>=2 and(ao()<1 or J.Serenity:CooldownRemains()<2 or ao()<4 and J.FistsOfFury:CooldownRemains()<1.5 or J.WeaponsOfOrder:CooldownRemains()<2)and not h:DebuffUp(J.BonedustBrew)then return true end end;local function ay(at)if g:ChiDeficit()>=3 and at:GUID()==f("mouseover"):GUID()and a6.Windwalker.TargetSwap=="Mouseover"then S=1261947;return true elseif g:ChiDeficit()>=3 and a6.Windwalker.TargetSwap=="AutoSwap"and at:GUID()~=h:GUID()and not B then S=999;return true elseif g:ChiDeficit()>=3 and at:GUID()==h:GUID()then T=261947;return true elseif g:ChiDeficit()>=3 then return true end end;local function az(at)if aq(J.TigerPalm)and g:ChiDeficit()>=2 and at:GUID()==f("mouseover"):GUID()and a6.Windwalker.TargetSwap=="Mouseover"then S=1100780;return true elseif aq(J.TigerPalm)and g:ChiDeficit()>=2 and a6.Windwalker.TargetSwap=="AutoSwap"and at:GUID()~=h:GUID()and not B then S=999;return true elseif aq(J.TigerPalm)and g:ChiDeficit()>=2 and at:GUID()==h:GUID()then T=100780;return true elseif aq(J.TigerPalm)and g:ChiDeficit()>=2 then return true end end;local function aA(at)if g:ChiDeficit()==2 and at:GUID()==f("mouseover"):GUID()and a6.Windwalker.TargetSwap=="Mouseover"then S=1100780;return true elseif g:ChiDeficit()==2 and a6.Windwalker.TargetSwap=="AutoSwap"and at:GUID()~=h:GUID()and not B then S=999;return true elseif g:ChiDeficit()==2 and at:GUID()==h:GUID()then T=100780;return true elseif g:ChiDeficit()==2 then return true end end;local function aB(at)if J.WhirlingDragonPunch:IsAvailable()and 10/(1+g:HastePct()/100)>J.WhirlingDragonPunch:CooldownRemains()+4 and(J.FistsOfFury:CooldownRemains()>3 or w or g:Chi()>=5)and at:GUID()==f("mouseover"):GUID()and a6.Windwalker.TargetSwap=="Mouseover"then S=1107428;return true elseif J.WhirlingDragonPunch:IsAvailable()and 10/(1+g:HastePct()/100)>J.WhirlingDragonPunch:CooldownRemains()+4 and(J.FistsOfFury:CooldownRemains()>3 or w or g:Chi()>=5)and a6.Windwalker.TargetSwap=="AutoSwap"and at:GUID()~=h:GUID()and not B then S=999;return true elseif J.WhirlingDragonPunch:IsAvailable()and 10/(1+g:HastePct()/100)>J.WhirlingDragonPunch:CooldownRemains()+4 and(J.FistsOfFury:CooldownRemains()>3 or w or g:Chi()>=5)and at:GUID()==h:GUID()then T=107428;return true elseif J.WhirlingDragonPunch:IsAvailable()and 10/(1+g:HastePct()/100)>J.WhirlingDragonPunch:CooldownRemains()+4 and(J.FistsOfFury:CooldownRemains()>3 or w or g:Chi()>=5)then return true end end;local function aC(at)if g:ChiDeficit()>=2 and(not J.HitCombo:IsAvailable()or aq(J.TigerPalm))and at:GUID()==f("mouseover"):GUID()and a6.Windwalker.TargetSwap=="Mouseover"then S=1100780;return true elseif g:ChiDeficit()>=2 and(not J.HitCombo:IsAvailable()or aq(J.TigerPalm))and a6.Windwalker.TargetSwap=="AutoSwap"and at:GUID()~=h:GUID()and not B then S=999;return true elseif g:ChiDeficit()>=2 and(not J.HitCombo:IsAvailable()or aq(J.TigerPalm))and at:GUID()==h:GUID()then T=100780;return true elseif g:ChiDeficit()>=2 and(not J.HitCombo:IsAvailable()or aq(J.TigerPalm))then return true end end;local function aD(at)if g:Chi()==0 and g:BuffRemains(J.WeaponsOfOrder)<4 and at:GUID()==f("mouseover"):GUID()and a6.Windwalker.TargetSwap=="Mouseover"then S=1100780;return true elseif g:Chi()==0 and g:BuffRemains(J.WeaponsOfOrder)<4 and a6.Windwalker.TargetSwap=="AutoSwap"and at:GUID()~=h:GUID()and not B then S=999;return true elseif g:Chi()==0 and g:BuffRemains(J.WeaponsOfOrder)<4 and at:GUID()==h:GUID()then T=100780;return true elseif g:Chi()==0 and g:BuffRemains(J.WeaponsOfOrder)<4 then return true end end;local function aE(at)return ac and at:DebuffRemains(J.RecentlyRushingTigerPalm)or at:DebuffRemains(J.MarkOfTheCraneDebuff)end;local function aF(at)if aq(J.BlackoutKick)and(g:BuffUp(J.BlackoutKickBuff)or J.HitCombo:IsAvailable()and g:PrevGCD(1,J.TigerPalm)and g:Chi()==2 and J.FistsOfFury:CooldownRemains()<3 or g:ChiDeficit()<=1 and g:PrevGCD(1,J.SpinningCraneKick)and ao()<3)and at:GUID()==f("mouseover"):GUID()and a6.Windwalker.TargetSwap=="Mouseover"then S=1100784;return true elseif aq(J.BlackoutKick)and(g:BuffUp(J.BlackoutKickBuff)or J.HitCombo:IsAvailable()and g:PrevGCD(1,J.TigerPalm)and g:Chi()==2 and J.FistsOfFury:CooldownRemains()<3 or g:ChiDeficit()<=1 and g:PrevGCD(1,J.SpinningCraneKick)and ao()<3)and a6.Windwalker.TargetSwap=="AutoSwap"and at:GUID()~=h:GUID()and not B then S=999;return true elseif aq(J.BlackoutKick)and(g:BuffUp(J.BlackoutKickBuff)or J.HitCombo:IsAvailable()and g:PrevGCD(1,J.TigerPalm)and g:Chi()==2 and J.FistsOfFury:CooldownRemains()<3 or g:ChiDeficit()<=1 and g:PrevGCD(1,J.SpinningCraneKick)and ao()<3)and at:GUID()==h:GUID()then T=100784;return true elseif aq(J.BlackoutKick)and(g:BuffUp(J.BlackoutKickBuff)or J.HitCombo:IsAvailable()and g:PrevGCD(1,J.TigerPalm)and g:Chi()==2 and J.FistsOfFury:CooldownRemains()<3 or g:ChiDeficit()<=1 and g:PrevGCD(1,J.SpinningCraneKick)and ao()<3)then return true end end;local function aG(at)if aq(J.RisingSunKick)and at:GUID()==f("mouseover"):GUID()and a6.Windwalker.TargetSwap=="Mouseover"then S=1107428;return true elseif aq(J.RisingSunKick)and a6.Windwalker.TargetSwap=="AutoSwap"and at:GUID()~=h:GUID()and not B then S=999;return true elseif aq(J.RisingSunKick)and at:GUID()==h:GUID()then T=107428;return true elseif aq(J.RisingSunKick)then return true end end;local function aH(at)if aq(J.BlackoutKick)and g:BuffUp(J.WeaponsOfOrder)and J.RisingSunKick:CooldownRemains()>2 and at:GUID()==f("mouseover"):GUID()and a6.Windwalker.TargetSwap=="Mouseover"then S=1100784;return true elseif aq(J.BlackoutKick)and g:BuffUp(J.WeaponsOfOrder)and J.RisingSunKick:CooldownRemains()>2 and a6.Windwalker.TargetSwap=="AutoSwap"and at:GUID()~=h:GUID()and not B then S=999;return true elseif aq(J.BlackoutKick)and g:BuffUp(J.WeaponsOfOrder)and J.RisingSunKick:CooldownRemains()>2 and at:GUID()==h:GUID()then T=100784;return true elseif aq(J.BlackoutKick)and g:BuffUp(J.WeaponsOfOrder)and J.RisingSunKick:CooldownRemains()>2 then return true end end;local function aI(at)if(aq(J.BlackoutKick)or not J.HitCombo:IsAvailable())and at:GUID()==f("mouseover"):GUID()and a6.Windwalker.TargetSwap=="Mouseover"then S=1100784;return true elseif(aq(J.BlackoutKick)or not J.HitCombo:IsAvailable())and a6.Windwalker.TargetSwap=="AutoSwap"and at:GUID()~=h:GUID()and not B then S=999;return true elseif(aq(J.BlackoutKick)or not J.HitCombo:IsAvailable())and at:GUID()==h:GUID()then T=100784;return true elseif aq(J.BlackoutKick)or not J.HitCombo:IsAvailable()then return true end end;local function aJ(at)if aq(J.BlackoutKick)and Q<=2 and Y and at:GUID()==f("mouseover"):GUID()and a6.Windwalker.TargetSwap=="Mouseover"then S=1100784;return true elseif aq(J.BlackoutKick)and Q<=2 and Y and a6.Windwalker.TargetSwap=="AutoSwap"and at:GUID()~=h:GUID()and not B then S=999;return true elseif aq(J.BlackoutKick)and Q<=2 and Y and at:GUID()==h:GUID()then T=100784;return true elseif aq(J.BlackoutKick)and Q<=2 and Y then return true end end;local function aK(at)if aq(J.BlackoutKick)and(Q<=3 and g:Chi()>=3 or g:BuffUp(J.WeaponsOfOrder))and at:GUID()==f("mouseover"):GUID()and a6.Windwalker.TargetSwap=="Mouseover"then S=1100784;return true elseif aq(J.BlackoutKick)and(Q<=3 and g:Chi()>=3 or g:BuffUp(J.WeaponsOfOrder))and a6.Windwalker.TargetSwap=="AutoSwap"and at:GUID()~=h:GUID()and not B then S=999;return true elseif aq(J.BlackoutKick)and(Q<=3 and g:Chi()>=3 or g:BuffUp(J.WeaponsOfOrder))and at:GUID()==h:GUID()then T=100784;return true elseif aq(J.BlackoutKick)and(Q<=3 and g:Chi()>=3 or g:BuffUp(J.WeaponsOfOrder))then return true end end;local function aL(at)if(J.Serenity:CooldownRemains()>1 or not J.Serenity:IsAvailable()and(J.WeaponsOfOrder:CooldownRemains()>4 or not J.WeaponsOfOrder:IsAvailable()))and at:GUID()==f("mouseover"):GUID()and a6.Windwalker.TargetSwap=="Mouseover"then S=1107428;return true elseif(J.Serenity:CooldownRemains()>1 or not J.Serenity:IsAvailable()and(J.WeaponsOfOrder:CooldownRemains()>4 or not J.WeaponsOfOrder:IsAvailable()))and a6.Windwalker.TargetSwap=="AutoSwap"and at:GUID()~=h:GUID()and not B then S=999;return true elseif(J.Serenity:CooldownRemains()>1 or not J.Serenity:IsAvailable()and(J.WeaponsOfOrder:CooldownRemains()>4 or not J.WeaponsOfOrder:IsAvailable()))and at:GUID()==h:GUID()then T=107428;return true elseif J.Serenity:CooldownRemains()>1 or not J.Serenity:IsAvailable()and(J.WeaponsOfOrder:CooldownRemains()>4 or not J.WeaponsOfOrder:IsAvailable())then return true end end;local function aM(at)if aq(J.TigerPalm)and g:ChiDeficit()>=2 and g:BuffDown(J.StormEarthAndFireBuff)and at:GUID()==f("mouseover"):GUID()and a6.Windwalker.TargetSwap=="Mouseover"then S=1100780;return true elseif aq(J.TigerPalm)and g:ChiDeficit()>=2 and g:BuffDown(J.StormEarthAndFireBuff)and a6.Windwalker.TargetSwap=="AutoSwap"and at:GUID()~=h:GUID()and not B then S=999;return true elseif aq(J.TigerPalm)and g:ChiDeficit()>=2 and g:BuffDown(J.StormEarthAndFireBuff)and at:GUID()==h:GUID()then T=100780;return true elseif aq(J.TigerPalm)and g:ChiDeficit()>=2 and g:BuffDown(J.StormEarthAndFireBuff)then return true end end;local function aN(at)if aq(J.BlackoutKick)and(J.Serenity:IsAvailable()and J.Serenity:CooldownRemains()<3 or J.RisingSunKick:CooldownRemains()>1 and(J.FistsOfFury:CooldownRemains()>1 or w)or J.RisingSunKick:CooldownRemains()<3 and(J.FistsOfFury:CooldownRemains()>3 or w)and g:Chi()>2 or J.RisingSunKick:CooldownRemains()>3 and J.FistsOfFury:CooldownRemains()<3 and g:Chi()>3 or g:Chi()>5 or g:BuffUp(J.BlackoutKickBuff))and at:GUID()==f("mouseover"):GUID()and a6.Windwalker.TargetSwap=="Mouseover"then S=1100784;return true elseif aq(J.BlackoutKick)and(J.Serenity:IsAvailable()and J.Serenity:CooldownRemains()<3 or J.RisingSunKick:CooldownRemains()>1 and(J.FistsOfFury:CooldownRemains()>1 or w)or J.RisingSunKick:CooldownRemains()<3 and(J.FistsOfFury:CooldownRemains()>3 or w)and g:Chi()>2 or J.RisingSunKick:CooldownRemains()>3 and J.FistsOfFury:CooldownRemains()<3 and g:Chi()>3 or g:Chi()>5 or g:BuffUp(J.BlackoutKickBuff))and a6.Windwalker.TargetSwap=="AutoSwap"and at:GUID()~=h:GUID()and not B then S=999;return true elseif aq(J.BlackoutKick)and(J.Serenity:IsAvailable()and J.Serenity:CooldownRemains()<3 or J.RisingSunKick:CooldownRemains()>1 and(J.FistsOfFury:CooldownRemains()>1 or w)or J.RisingSunKick:CooldownRemains()<3 and(J.FistsOfFury:CooldownRemains()>3 or w)and g:Chi()>2 or J.RisingSunKick:CooldownRemains()>3 and J.FistsOfFury:CooldownRemains()<3 and g:Chi()>3 or g:Chi()>5 or g:BuffUp(J.BlackoutKickBuff))and at:GUID()==h:GUID()then T=100784;return true elseif aq(J.BlackoutKick)and(J.Serenity:IsAvailable()and J.Serenity:CooldownRemains()<3 or J.RisingSunKick:CooldownRemains()>1 and(J.FistsOfFury:CooldownRemains()>1 or w)or J.RisingSunKick:CooldownRemains()<3 and(J.FistsOfFury:CooldownRemains()>3 or w)and g:Chi()>2 or J.RisingSunKick:CooldownRemains()>3 and J.FistsOfFury:CooldownRemains()<3 and g:Chi()>3 or g:Chi()>5 or g:BuffUp(J.BlackoutKickBuff))then return true end;return end;local function aO(at)if aq(J.BlackoutKick)and(J.FistsOfFury:CooldownRemains()<3 and g:Chi()==2 and g:PrevGCD(1,J.TigerPalm)and g:EnergyTimeToX(50)<1)and at:GUID()==f("mouseover"):GUID()and a6.Windwalker.TargetSwap=="Mouseover"then S=1100784;return true elseif aq(J.BlackoutKick)and(J.FistsOfFury:CooldownRemains()<3 and g:Chi()==2 and g:PrevGCD(1,J.TigerPalm)and g:EnergyTimeToX(50)<1)and a6.Windwalker.TargetSwap=="AutoSwap"and at:GUID()~=h:GUID()and not B then S=999;return true elseif aq(J.BlackoutKick)and(J.FistsOfFury:CooldownRemains()<3 and g:Chi()==2 and g:PrevGCD(1,J.TigerPalm)and g:EnergyTimeToX(50)<1)and at:GUID()==h:GUID()then T=100784;return true elseif aq(J.BlackoutKick)and(J.FistsOfFury:CooldownRemains()<3 and g:Chi()==2 and g:PrevGCD(1,J.TigerPalm)and g:EnergyTimeToX(50)<1)then return true end end;local function aP(at)if aq(J.BlackoutKick)and ao()<2 and(g:ChiDeficit()<=1 or g:PrevGCD(1,J.TigerPalm))and at:GUID()==f("mouseover"):GUID()and a6.Windwalker.TargetSwap=="Mouseover"then S=1100784;return true elseif aq(J.BlackoutKick)and ao()<2 and(g:ChiDeficit()<=1 or g:PrevGCD(1,J.TigerPalm))and a6.Windwalker.TargetSwap=="AutoSwap"and at:GUID()~=h:GUID()and not B then S=999;return true elseif aq(J.BlackoutKick)and ao()<2 and(g:ChiDeficit()<=1 or g:PrevGCD(1,J.TigerPalm))and at:GUID()==h:GUID()then T=100784;return true elseif aq(J.BlackoutKick)and ao()<2 and(g:ChiDeficit()<=1 or g:PrevGCD(1,J.TigerPalm))then return true end end;local function aQ()local aR=g:GetUseableTrinkets(L)if aR then if aR:ID()==GetInventoryItemID("player",13)and a6.Commons.Enabled.TopTrinket then if m.Cast(aR,nil,nil)then T=24;return"top trinket 1"end elseif aR:ID()==GetInventoryItemID("player",14)and a6.Commons.Enabled.BottomTrinket then if m.Cast(aR,nil,nil)then T=35;return"bot trinket 1"end end end end;local function aS()if true then V=false end;if J.ChiBurst:IsReady()and h:IsInRange(30)and(not J.Serenity:IsAvailable()or not J.FistOfTheWhiteTiger:IsAvailable())then if m.Cast(J.ChiBurst,nil,nil,not h:IsInRange(40))then T=123986;return"Chi Burst 4"end end;if J.ChiWave:IsReady()and h:IsInRange(40)and not J.EnergizingElixir:IsAvailable()then if m.Cast(J.ChiWave,nil,nil,not h:IsInRange(40))then T=115098;return"Chi Wave 6"end end end;local function aT()if J.FistOfTheWhiteTiger:IsReady()and h:IsInRange(8)then if a4.CastTargetIf(J.FistOfTheWhiteTiger,P,"min",as,ay)then return"Fist of the White Tiger 200"end;if as(h)and ay(h)then if m.Cast(J.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(J.FistOfTheWhiteTiger))then T=261947;return"Fist of the White Tiger 202"end end end;if J.ExpelHarm:IsReady()and h:IsInRange(8)and g:Level()>=43 and J.ChiBurst:IsAvailable()and g:ChiDeficit()>=3 then if m.Cast(J.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then T=322101;return"Expel Harm 204"end end;if J.TigerPalm:IsReady()and h:IsInRange(8)then if a4.CastTargetIf(J.TigerPalm,O,"min",as,az)then return"Tiger Palm 206"end;if as(h)and az(h)then if m.Cast(J.TigerPalm,nil,nil,not h:IsSpellInRange(J.TigerPalm))then T=100780;return"Tiger Palm 208"end end end;if J.ChiWave:IsReady()and h:IsInRange(40)and g:ChiDeficit()>=2 then if m.Cast(J.ChiWave,nil,nil,not h:IsInRange(40))then T=115098;return"Chi Wave 210"end end;if J.ExpelHarm:IsReady()and h:IsInRange(10)and g:Level()>=43 then if m.Cast(J.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then T=322101;return"Expel Harm 212"end end;if J.TigerPalm:IsReady()and h:IsInRange(8)then if a4.CastTargetIf(J.TigerPalm,O,"min",as,aA)then return"Tiger Palm 214"end;if as(h)and aA(h)then if m.Cast(J.TigerPalm,nil,nil,not h:IsSpellInRange(J.TigerPalm))then T=100780;return"Tiger Palm 216"end end end end;local function aU()if J.WhirlingDragonPunch:IsReady()and not u and g:BuffUp(J.WhirlingDragonPunchBuff)and h:IsInRange(8)then if m.Cast(J.WhirlingDragonPunch,nil,nil,not h:IsInMeleeRange(8))then T=152175;return"Whirling Dragon Punch 300"end end;if J.EnergizingElixir:IsReady()and(g:ChiDeficit()>=2 and ao()>2 or g:ChiDeficit()>=4)and h:IsInRange(10)then if m.Cast(J.EnergizingElixir,nil)then T=115288;return"Energizing Elixir 302"end end;if J.SpinningCraneKick:IsReady()and(aq(J.SpinningCraneKick)or EnemiesWithMotC>=5)and(g:BuffUp(J.DanceOfChijiBuff)or h:DebuffUp(J.BonedustBrew))and h:IsInRange(8)then if m.Cast(J.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then T=101546;return"Spinning Crane Kick 304"end end;if J.FistsOfFury:IsReady()and not w and not h:DebuffUp(J.BonedustBrew)and(ao()>J.FistsOfFury:ExecuteTime()or g:ChiDeficit()<=1)and h:IsInRange(8)then if m.Cast(J.FistsOfFury,nil,nil,not h:IsSpellInRange(J.FistsOfFury))then T=113656;return"Fists of Fury 306"end end;if J.RisingSunKick:IsReady()then if a4.CastTargetIf(J.RisingSunKick,O,"min",as,aB)then return"Rising Sun Kick 308"end;if as(h)and aB(h)then if m.Cast(J.RisingSunKick,nil,nil,not h:IsSpellInRange(J.RisingSunKick))then T=107428;return"Rising Sun Kick 310"end end end;if J.RushingJadeWind:IsReady()and g:BuffDown(J.RushingJadeWindBuff)and h:IsInRange(8)then if m.Cast(J.RushingJadeWind,nil,nil,not h:IsInMeleeRange(8))then T=116847;return"Rushing Jade Wind 312"end end;if J.ExpelHarm:IsReady()and h:IsInRange(8)and g:Level()>=43 and g:ChiDeficit()>=1 then if m.Cast(J.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then T=322101;return"Expel Harm 316"end end;if J.FistOfTheWhiteTiger:IsReady()then if a4.CastTargetIf(J.FistOfTheWhiteTiger,P,"min",as,ay)then return"Fist of the White Tiger 318"end;if as(h)and ay(h)then if m.Cast(J.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(J.FistOfTheWhiteTiger))then T=261947;return"Fist of the White Tiger 320"end end end;if J.ChiBurst:IsReady()and h:IsInRange(30)and g:ChiDeficit()>=2 then if m.Cast(J.ChiBurst,nil,nil,not h:IsInRange(40))then T=123986;return"Chi Burst 322"end end;if J.CracklingJadeLightning:IsReady()and(g:BuffStack(J.TheEmperorsCapacitor)>19 and ao()>J.CracklingJadeLightning:ExecuteTime()-1 and(J.FistsOfFury:CooldownRemains()>J.CracklingJadeLightning:ExecuteTime()or w))then if m.Cast(J.CracklingJadeLightning,nil,nil,not h:IsInRange(40))then T=117952;return"Crackling Jade Lightning 324"end end;if J.TigerPalm:IsReady()then if a4.CastTargetIf(J.TigerPalm,O,"min",aE,aC)then return"Tiger Palm 326"end;if aE(h)and aC(h)then if m.Cast(J.TigerPalm,nil,nil,not h:IsSpellInRange(J.TigerPalm))then T=100780;return"Tiger Palm 328"end end end;if J.ArcaneTorrent:IsReady()and h:IsInRange(8)and g:ChiDeficit()>=1 then if m.Cast(J.ArcaneTorrent,nil,nil,not h:IsInMeleeRange(8))then T=50613;return"Arcane Torrent 402"end end;if h:IsInRange(8)and J.SpinningCraneKick:IsReady()and(aq(J.SpinningCraneKick)or EnemiesWithMotC>=5)and((J.BonedustBrew:CooldownRemains()>2 or not q or not J.BonedustBrew:IsAvailable())and(g:Chi()>=5 or(J.FistsOfFury:CooldownRemains()>6 or w)or(J.FistsOfFury:CooldownRemains()>3 or w)and g:Chi()>=3 and g:EnergyTimeToX(50)<1 or ao()<=3+3*al(J.FistsOfFury:CooldownRemains()<5 and not w)or g:BuffUp(J.StormEarthAndFireBuff)))then if m.Cast(J.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then T=101546;return"Spinning Crane Kick 314"end end;if J.ChiWave:IsReady()and h:IsInRange(40)and aq(J.ChiWave)then if m.Cast(J.ChiWave,nil,nil,not h:IsInRange(40))then T=115098;return"Chi Wave 330"end end;if J.FlyingSerpentKickActionBarReplacement:IsReady()and not v and h:IsInRange(10)and not a6.Windwalker.IgnoreFSK then if m.Cast(J.FlyingSerpentKickActionBarReplacement,nil,nil,not h:IsInRange(40))then T=101545;return"Flying Serpent Kick Slam 332"end end;if J.FlyingSerpentKick:IsReady()and not v and h:IsInRange(10)and not a6.Windwalker.IgnoreFSK and g:BuffDown(J.BlackoutKickBuff)then if m.Cast(J.FlyingSerpentKick,nil,nil,not h:IsInRange(40))then T=101545;return"Flying Serpent Kick 334"end end;if J.BlackoutKick:IsReady()then if a4.CastTargetIf(J.BlackoutKick,O,"min",as,aF)then return"Blackout Kick 336"end;if as(h)and aF(h)then if m.Cast(J.BlackoutKick,nil,nil,not h:IsSpellInRange(J.BlackoutKick))then T=100784;return"Blackout Kick 338"end end end end;local function aV()if J.InvokeXuenTheWhiteTiger:IsReady()and E and h:IsInRange(15)and(not W and(J.RisingSunKick:CooldownRemains()<2 or not C_Covenants.GetActiveCovenantID()==1)and(not C_Covenants.GetActiveCovenantID()==4 or J.BonedustBrew:CooldownRemains()<2)or d.BossFilteredFightRemains("<",25))then if m.Cast(J.InvokeXuenTheWhiteTiger,nil,nil,not h:IsInRange(40))then T=123904;return"Invoke Xuen the White Tiger 400"end end;if J.TouchOfDeath:IsReady()and h:IsInRange(8)and h:HealthPercentage()<=15 and(d.BossFilteredFightRemains(">",180-al(a9)*120)or g:BuffDown(J.StormEarthAndFireBuff)and J.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<24 and(C_Covenants.GetActiveCovenantID()==4 or h:BuffUp(J.BonedustBrew))or((d.BossFilteredFightRemains("<",J.InvokeXuenTheWhiteTiger:CooldownRemains())or not E)and h:BuffUp(J.BonedustBrew)or d.BossFilteredFightRemains("<",10)))then if m.Cast(J.TouchOfDeath,nil,nil,not h:IsSpellInRange(J.TouchOfDeath))then T=322109;return"Touch of Death 404"end end;if J.WeaponsOfOrder:IsReady()and q and h:IsInRange(8)and(J.RisingSunKick:CooldownRemains()<g:GCD()and(J.InvokeXuenTheWhiteTiger:CooldownRemains()>20+20*al(aa)or not E)or d.BossFilteredFightRemains("<",35))then if m.Cast(J.WeaponsOfOrder,nil,nil)then T=310454;return"Weapons Of Order 406"end end;if J.FaelineStomp:IsReady()and q and h:IsInRange(8)and aq(J.FaelineStomp)then if m.Cast(J.FaelineStomp,nil,nil)then T=327104;return"Faeline Stomp 408"end end;if J.FallenOrder:IsReady()and q and h:IsInRange(8)then if m.Cast(J.FallenOrder,nil,nil)then T=326860;return"Faeline Stomp 410"end end;if J.BonedustBrew:IsReady()and(q or o())and h:IsInRange(8)and(g:Chi()>=2 and d.BossFilteredFightRemains(">",60)and(J.StormEarthAndFire:Charges()>0 or J.StormEarthAndFire:CooldownRemains()>10)and(J.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or J.InvokeXuenTheWhiteTiger:CooldownRemains()>10 or hold_xuen or not E)or(g:Chi()>=2 and d.BossFilteredFightRemains("<=",60)and(J.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or(d.BossFilteredFightRemains("<",J.InvokeXuenTheWhiteTiger:CooldownRemains())or not E)and(J.StormEarthAndFire:Charges()>0 or d.BossFilteredFightRemains("<",J.StormEarthAndFire:CooldownRemains())or g:BuffUp(J.StormEarthAndFire)))or d.BossFilteredFightRemains("<",15)))then if m.Cast(J.BonedustBrew,nil,nil)then T=325216;return"Bonedust Brew 412"end end;if J.StormEarthAndFire:IsReady()and F and h:IsInRange(10)and(J.StormEarthAndFire:Charges()==2 or d.BossFilteredFightRemains("<",20)or not J.WeaponsOfOrder:IsAvailable()and not J.BonedustBrew:IsAvailable()and(J.InvokeXuenTheWhiteTiger:CooldownRemains()>J.StormEarthAndFire:FullRechargeTime()or not E or W)and J.FistsOfFury:CooldownRemains()<=9 and g:Chi()>=2 and J.WhirlingDragonPunch:CooldownRemains()<=12)then if m.Cast(J.StormEarthAndFire,nil)then T=137639;return"Storm Earth and Fire 414"end end;if J.StormEarthAndFire:IsReady()and F and h:IsInRange(10)and J.WeaponsOfOrder:IsAvailable()and(g:BuffUp(J.WeaponsOfOrder)or(d.BossFilteredFightRemains("<",J.WeaponsOfOrder:CooldownRemains())or(J.WeaponsOfOrder:CooldownRemains()>J.StormEarthAndFire:FullRechargeTime()or not q))and J.FistsOfFury:CooldownRemains()<=9 and g:Chi()>=2 and J.WhirlingDragonPunch:CooldownRemains()<=12)then if m.Cast(J.StormEarthAndFire,nil)then T=137639;return"Storm Earth and Fire 416"end end;if J.StormEarthAndFire:IsReady()and F and h:IsInRange(10)and(J.BonedustBrew:IsAvailable()and h:DebuffUp(J.BonedustBrew)and(J.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or hold_xuen or(J.InvokeXuenTheWhiteTiger:CooldownRemains()>J.StormEarthAndFire:FullRechargeTime()or not E)or(J.InvokeXuenTheWhiteTiger:CooldownRemains()>30 or not E)))then if m.Cast(J.StormEarthAndFire,nil)then T=137639;return"Storm Earth and Fire 416"end end;if o()and(a6.Commons.Enabled.TopTrinket or a6.Commons.Enabled.BottomTrinket)and(not V or J.InvokeXuenTheWhiteTiger:CooldownRemains()<20 and E or d.BossFilteredFightRemains("<",20)or not aa)then if true then local R=aQ()if R then return R end end end;if J.BloodFury:IsCastable()and o()and h:IsInRange(8)and(J.InvokeXuenTheWhiteTiger:CooldownRemains()>30 or not E or W or d.BossFilteredFightRemains("<",20))then if m.Cast(J.BloodFury,nil)then T=20572;return"Blood Fury 420"end end;if J.Berserking:IsCastable()and o()and h:IsInRange(8)and(J.InvokeXuenTheWhiteTiger:CooldownRemains()>30 or not E or W or d.BossFilteredFightRemains("<",15))then if m.Cast(J.Berserking,nil)then T=26297;return"Berserking 422"end end;if J.LightsJudgment:IsCastable()and o()and h:IsInRange(8)then if m.Cast(J.LightsJudgment,nil,nil,not h:IsInRange(40))then T=255647;return"Lights Judgment 424"end end;if J.Fireblood:IsCastable()and o()and h:IsInRange(8)and(J.InvokeXuenTheWhiteTiger:CooldownRemains()>30 or not E or W or d.BossFilteredFightRemains("<",10))then if m.Cast(J.Fireblood,nil)then T=265221;return"Fireblood 426"end end;if J.AncestralCall:IsCastable()and o()and h:IsInRange(8)and(J.InvokeXuenTheWhiteTiger:CooldownRemains()>30 or not E or W or d.BossFilteredFightRemains("<",20))then if m.Cast(J.AncestralCall,nil)then T=274738;return"Ancestral Call 428"end end;if J.BagOfTricks:IsCastable()and o()and h:IsInRange(8)and g:BuffDown(J.StormEarthAndFire)then if m.Cast(J.BagOfTricks,nil,nil,not h:IsInRange(40))then T=312411;return"Bag of Tricks 430"end end end;local function aW()if true then X=g:BuffRemains(J.SerenityBuff)<1 or J.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 and J.Serenity:CooldownRemains()<30 or d.BossFilteredFightRemains("<",20)end;if J.InvokeXuenTheWhiteTiger:IsReady()and E and h:IsInRange(8)and(not W or d.BossFilteredFightRemains("<",25))then if m.Cast(J.InvokeXuenTheWhiteTiger,nil,nil,not h:IsInRange(40))then T=123904;return"Invoke Xuen the White Tiger 500"end end;if o()and(a6.Commons.Enabled.TopTrinket or a6.Commons.Enabled.BottomTrinket)then if true then local R=aQ()if R then return R end end end;if J.BloodFury:IsCastable()and o()and h:IsInRange(8)and X then if m.Cast(J.BloodFury,nil)then T=20572;return"Blood Fury 502"end end;if J.Berserking:IsCastable()and o()and h:IsInRange(8)and X then if m.Cast(J.Berserking,nil)then T=26297;return"Berserking 504"end end;if J.ArcaneTorrent:IsCastable()and o()and h:IsInRange(8)and g:ChiDeficit()>=1 then if m.Cast(J.ArcaneTorrent,nil,nil,not h:IsInMeleeRange(8))then T=50613;return"Arcane Torrent 506"end end;if J.LightsJudgment:IsCastable()and o()and h:IsInRange(8)then if m.Cast(J.LightsJudgment,nil,nil,not h:IsInRange(40))then T=255647;return"Lights Judgment 508"end end;if J.Fireblood:IsCastable()and o()and h:IsInRange(8)and X then if m.Cast(J.Fireblood,nil)then T=265221;return"Fireblood 510"end end;if J.AncestralCall:IsCastable()and o()and h:IsInRange(8)and X then if m.Cast(J.AncestralCall,nil)then T=274738;return"Ancestral Call 512"end end;if J.TouchOfDeath:IsReady()and h:IsInRange(8)and h:HealthPercentage()<=15 and(d.BossFilteredFightRemains(">",180)or J.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or d.BossFilteredFightRemains("<",10))then if m.Cast(J.TouchOfDeath,nil,nil,not h:IsSpellInRange(J.TouchOfDeath))then T=322109;return"Touch of Death 514"end end;if J.WeaponsOfOrder:IsReady()and q and h:IsInRange(10)and q and J.RisingSunKick:CooldownRemains()<g:GCD()then if m.Cast(J.WeaponsOfOrder,nil,nil)then T=310454;return"Weapons Of Order 518"end end;if J.FaelineStomp:IsReady()and q and h:IsInRange(10)and aq(J.FaelineStomp)then if m.Cast(J.FaelineStomp,nil,nil)then T=327104;return"Faeline Stomp 520"end end;if J.FallenOrder:IsReady()and q and h:IsInRange(8)then if m.Cast(J.FallenOrder,nil,nil)then T=326860;return"Faeline Stomp 522"end end;if J.BonedustBrew:IsReady()and q and h:IsInRange(8)then if m.Cast(J.BonedustBrew,nil,nil)then T=325216;return"Bonedust Brew 524"end end;if J.Serenity:IsReady()and h:IsInRange(8)and(J.RisingSunKick:CooldownRemains()<2 or d.BossFilteredFightRemains("<",15))then if m.Cast(J.Serenity,nil)then T=152173;return"Serenity 526"end end;if J.BagOfTricks:IsCastable()and h:IsInRange(8)then if m.Cast(J.BagOfTricks,nil,nil,not h:IsInRange(40))then T=312411;return"Bag of Tricks 528"end end end;local function aX()if J.FistsOfFury:IsReady()and not w and h:IsInRange(8)and g:BuffRemains(J.SerenityBuff)<1 and(not h:DebuffUp(J.BonedustBrew)or not m.AoEON()or Q<=3)then if m.Cast(J.FistsOfFury,nil,nil,not h:IsSpellInRange(J.FistsOfFury))then T=113656;return"Fists of Fury 600"end end;if o()and(a6.Commons.Enabled.TopTrinket or a6.Commons.Enabled.BottomTrinket)then if true then local R=aQ()if R then return R end end end;if J.SpinningCraneKick:IsReady()and h:IsInRange(8)and(aq(J.SpinningCraneKick or EnemiesWithMotC>=5)and(m.AoEON()and Q>=3 or Q>1 and not J.RisingSunKick:CooldownUp()))then if m.Cast(J.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then T=101546;return"Spinning Crane Kick 602"end end;if J.RisingSunKick:IsReady()then if a4.CastTargetIf(J.RisingSunKick,O,"min",as,aG)then return"Rising Sun Kick 604"end;if as(h)and aG(h)then if m.Cast(J.RisingSunKick,nil,nil,not h:IsSpellInRange(J.RisingSunKick))then T=107428;return"Rising Sun Kick 606"end end end;if J.FistsOfFury:IsReady()and not w and m.AoEON()and Q>=3 and h:IsInRange(8)and(not h:DebuffUp(J.BonedustBrew)or not m.AoEON()or Q<=3)then if m.Cast(J.FistsOfFury,nil,nil,not h:IsSpellInRange(J.FistsOfFury))then T=113656;return"Fists of Fury 608"end end;if J.SpinningCraneKick:IsReady()and h:IsInRange(8)and(aq(J.SpinningCraneKick)or EnemiesWithMotC>=5)and g:BuffUp(J.DanceOfChijiBuff)then if m.Cast(J.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then T=101546;return"Spinning Crane Kick 610"end end;if J.BlackoutKick:IsReady()then if a4.CastTargetIf(J.BlackoutKick,O,"min",as,aH)then return"Blackout Kick 612"end;if as(h)and aH(h)then if m.Cast(J.BlackoutKick,nil,nil,not h:IsSpellInRange(J.BlackoutKick))then T=100784;return"Blackout Kick 614"end end end;if J.FistsOfFury:IsReady()and not w and(not h:DebuffUp(J.BonedustBrew)or not m.AoEON()or Q<=3)then if m.Cast(J.FistsOfFury,nil,nil,not h:IsSpellInRange(J.FistsOfFury))then T=113656;G=true;return"Fists of Fury 616"end end;if J.SpinningCraneKick:IsReady()and h:IsInRange(8)and h:DebuffUp(J.BonedustBrew)then if m.Cast(J.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then T=101546;return"Spinning Crane Kick 618"end end;if J.FistOfTheWhiteTiger:IsReady()then if a4.CastTargetIf(J.FistOfTheWhiteTiger,P,"min",as,au)then return"Fist of the White Tiger 620"end;if as(h)and au(h)then if m.Cast(J.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(J.FistOfTheWhiteTiger))then T=261947;return"Fist of the White Tiger 622"end end end;if J.BlackoutKick:IsReady()then if a4.CastTargetIf(J.BlackoutKick,O,"min",as,aI)then return"Blackout Kick 624"end;if as(h)and aI(h)then if m.Cast(J.BlackoutKick,nil,nil,not h:IsSpellInRange(J.BlackoutKick))then T=100784;return"Blackout Kick 626"end end end;if J.SpinningCraneKick:IsReady()and h:IsInRange(8)then if m.Cast(J.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then T=101546;return"Spinning Crane Kick 628"end end end;local function aY()Y=g:BuffUp(J.WeaponsOfOrder)and(J.RisingSunKick:CooldownRemains()>g:BuffRemains(J.WeaponsOfOrder)and g:BuffRemains(J.WeaponsOfOrder)<2.1 or J.RisingSunKick:CooldownRemains()-g:BuffRemains(J.WeaponsOfOrder)>1.9 and g:BuffRemains(J.WeaponsOfOrder)<4.1 or g:BloodlustRemains()and g:BuffUp(J.InvokersDelightBuff)and g:BuffRemains(J.InvokersDelightBuff)<g:BuffRemains(J.WeaponsOfOrder))if m.CDsON()and not J.Serenity:IsAvailable()then local R=aV()if R then return R end end;if m.CDsON()and J.Serenity:IsAvailable()then local R=aW()if R then return R end end;if J.EnergizingElixir:IsReady()and h:IsInRange(8)and(g:ChiDeficit()>=2 and ao()>3)then if m.Cast(J.EnergizingElixir,nil)then T=115288;return"Energizing Elixir 700"end end;if J.RisingSunKick:IsReady()then if a4.CastTargetIf(J.RisingSunKick,O,"min",as)then T=107428;return"Rising Sun Kick 702"end;if as(h)then if m.Cast(J.RisingSunKick,nil,nil,not h:IsSpellInRange(J.RisingSunKick))then T=107428;return"Rising Sun Kick 704"end end end;if J.FistsOfFury:IsReady()and not w and h:IsInRange(8)and Q>=2 and g:BuffRemains(J.WeaponsOfOrder)<1 then if m.Cast(J.FistsOfFury,nil,nil,not h:IsSpellInRange(J.FistsOfFury))then T=113656;return"Fists of Fury 708"end end;if J.WhirlingDragonPunch:IsReady()and not u and h:IsInRange(8)and g:BuffUp(J.WhirlingDragonPunchBuff)and Q>=2 then if m.Cast(J.WhirlingDragonPunch,nil,nil,not h:IsInMeleeRange(8))then T=152175;return"Whirling Dragon Punch 710"end end;if J.SpinningCraneKick:IsReady()and h:IsInRange(8)and(aq(J.SpinningCraneKick)or EnemiesWithMotC>=5)and Q>=3 and g:BuffUp(J.WeaponsOfOrder)then if m.Cast(J.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then T=101546;return"Spinning Crane Kick 706"end end;if J.BlackoutKick:IsReady()then if a4.CastTargetIf(J.BlackoutKick,O,"min",as,aJ)then return"Blackout Kick 712"end;if as(h)and aJ(h)then if m.Cast(J.BlackoutKick,nil,nil,not h:IsSpellInRange(J.BlackoutKick))then T=100784;return"Blackout Kick 714"end end end;if J.SpinningCraneKick:IsReady()and h:IsInMeleeRange(8)and(aq(J.SpinningCraneKick)or EnemiesWithMotC>=5)and g:BuffUp(J.DanceOfChijiBuff)then if m.Cast(J.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then T=101546;return"Spinning Crane Kick 710"end end;if J.ExpelHarm:IsReady()and h:IsInRange(8)and g:Chi()==0 and g:BuffRemains(J.WeaponsOfOrder)<4 then if m.Cast(J.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then T=322101;return"Expel Harm 756"end end;if J.FistOfTheWhiteTiger:IsReady()then if a4.CastTargetIf(J.FistOfTheWhiteTiger,P,"min",as,aw)then return"Fist of the White Tiger 722"end;if as(h)and aw(h)then if m.Cast(J.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(J.FistOfTheWhiteTiger))then T=261947;return"Fist of the White Tiger 724"end end end;if J.WhirlingDragonPunch:IsReady()and not u and h:IsInRange(8)and g:BuffUp(J.WhirlingDragonPunchBuff)then if m.Cast(J.WhirlingDragonPunch,nil,nil,not h:IsInMeleeRange(8))then T=152175;return"Whirling Dragon Punch 716"end end;if J.TigerPalm:IsReady()then if a4.CastTargetIf(J.TigerPalm,O,"min",aE,aD)then return"Tiger Palm 730"end;if aE(h)and aD(h)then if m.Cast(J.TigerPalm,nil,nil,not h:IsSpellInRange(J.TigerPalm))then T=100780;return"Tiger Palm 732"end end end;if J.FistsOfFury:IsReady()and not w and h:IsInRange(8)and g:BuffUp(J.StormEarthAndFireBuff)then if m.Cast(J.FistsOfFury,nil,nil,not h:IsSpellInRange(J.FistsOfFury))then T=113656;H=true;return"Fists of Fury 718"end end;if J.SpinningCraneKick:IsReady()and h:IsInRange(8)and(aq(J.SpinningCraneKick)or EnemiesWithMotC>=5)and g:BuffStack(J.ChiEnergyBuff)>30-5*Q then if m.Cast(J.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then T=101546;return"Spinning Crane Kick 720"end end;if J.FistOfTheWhiteTiger:IsReady()then if a4.CastTargetIf(J.FistOfTheWhiteTiger,P,"min",as,au)then return"Fist of the White Tiger 722"end;if as(h)and au(h)then if m.Cast(J.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(J.FistOfTheWhiteTiger))then T=261947;return"Fist of the White Tiger 724"end end end;if J.ExpelHarm:IsReady()and h:IsInRange(8)and g:Level()>=43 and g:ChiDeficit()>=1 then if m.Cast(J.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then T=322101;return"Expel Harm 726"end end;if J.ChiBurst:IsReady()and h:IsInRange(30)and g:ChiDeficit()>=1+al(Q>=1)then if m.Cast(J.ChiBurst,nil,nil,not h:IsInRange(40))then T=123986;return"Chi Burst 728"end end;if J.TigerPalm:IsReady()then if a4.CastTargetIf(J.TigerPalm,O,"min",aE,aC)then return"Tiger Palm 730"end;if aE(h)and aC(h)then if m.Cast(J.TigerPalm,nil,nil,not h:IsSpellInRange(J.TigerPalm))then T=100780;return"Tiger Palm 732"end end end;if J.BlackoutKick:IsReady()then if a4.CastTargetIf(J.BlackoutKick,O,"min",as,aK)then return"Blackout Kick 736"end;if as(h)and aK(h)then if m.Cast(J.BlackoutKick,nil,nil,not h:IsSpellInRange(J.BlackoutKick))then T=100784;return"Blackout Kick 738"end end end;if J.ChiWave:IsReady()and h:IsInRange(8)then if m.Cast(J.ChiWave,nil,nil,not h:IsInRange(40))then T=115098;return"Chi Wave 734"end end;if J.FlyingSerpentKickActionBarReplacement:IsReady()and not v and not a6.Windwalker.IgnoreFSK then if m.Cast(J.FlyingSerpentKickActionBarReplacement,nil,nil,not h:IsInRange(40))then T=101545;return"Flying Serpent Kick Slam 740"end end;if J.FlyingSerpentKick:IsReady()and not v and h:IsInRange(8)and not a6.Windwalker.IgnoreFSK then if m.Cast(J.FlyingSerpentKick,nil,nil,not h:IsInRange(40))then T=101545;return"Flying Serpent Kick 742"end end end;local function aZ()if J.WhirlingDragonPunch:IsReady()and not u and h:IsInRange(8)and g:BuffUp(J.WhirlingDragonPunchBuff)then if m.Cast(J.WhirlingDragonPunch,nil,nil,not h:IsInMeleeRange(8))then T=152175;return"Whirling Dragon Punch 800"end end;if J.EnergizingElixir:IsReady()and h:IsInRange(8)and(g:ChiDeficit()>=2 and ao()>3 or g:ChiDeficit()>=4 and(ao()>2 or not g:PrevGCD(1,J.TigerPalm)))then if m.Cast(J.EnergizingElixir,nil)then T=115288;return"Energizing Elixir 802"end end;if J.SpinningCraneKick:IsReady()and h:IsInRange(8)and(aq(J.SpinningCraneKick)or EnemiesWithMotC>=5)and g:BuffUp(J.DanceOfChijiBuff)then if m.Cast(J.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then T=101546;return"Spinning Crane Kick 804"end end;if J.RisingSunKick:IsReady()then if a4.CastTargetIf(J.RisingSunKick,O,"min",as,aL)then return"Rising Sun Kick 806"end;if as(h)and aL(h)then if m.Cast(J.RisingSunKick,nil,nil,not h:IsSpellInRange(J.RisingSunKick))then T=107428;return"Rising Sun Kick 808"end end end;if J.FistsOfFury:IsReady()and(not h:DebuffUp(J.BonedustBrew)or not m.AoEON()or Q<=3)and not w and h:IsInRange(8)and(ao()>J.FistsOfFury:ExecuteTime()-1 or g:ChiDeficit()<=1 or g:BuffRemains(J.StormEarthAndFireBuff)<J.FistsOfFury:ExecuteTime()+1 or d.BossFilteredFightRemains("<",J.FistsOfFury:ExecuteTime()+1))then if m.Cast(J.FistsOfFury,nil,nil,not h:IsSpellInRange(J.FistsOfFury))then T=113656;return"Fists of Fury 810"end end;if J.CracklingJadeLightning:IsReady()and h:IsInRange(40)and(g:BuffStack(J.TheEmperorsCapacitor)>19 and ao()>J.CracklingJadeLightning:ExecuteTime()-1 and J.RisingSunKick:CooldownRemains()>J.CracklingJadeLightning:ExecuteTime()or g:BuffStack(J.TheEmperorsCapacitor)>14 and(J.Serenity:IsAvailable()and J.Serenity:CooldownRemains()<5 or J.WeaponsOfOrder:IsAvailable()and J.WeaponsOfOrder:CooldownRemains()<5 or d.BossFilteredFightRemains("<",20)))then if m.Cast(J.CracklingJadeLightning,nil,nil,not h:IsInRange(40))then T=117952;return"Crackling Jade Lightning 812"end end;if J.RushingJadeWind:IsReady()and h:IsInRange(8)and(g:BuffDown(J.RushingJadeWindBuff)and m.AoEON()and Q>1)then if m.Cast(J.RushingJadeWind,nil,nil,not h:IsInMeleeRange(8))then T=116847;return"Rushing Jade Wind 814"end end;if J.FistOfTheWhiteTiger:IsReady()then if a4.CastTargetIf(J.FistOfTheWhiteTiger,P,"min",as,au)then return"Fist of the White Tiger 816"end;if as(h)and au(h)then if m.Cast(J.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(J.FistOfTheWhiteTiger))then T=261947;return"Fist of the White Tiger 818"end end end;if J.ExpelHarm:IsReady()and h:IsInRange(8)and g:Level()>=43 and g:ChiDeficit()>=1 then if m.Cast(J.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then T=322101;return"Expel Harm 820"end end;if J.ChiBurst:IsReady()and h:IsInRange(30)and(g:ChiDeficit()>=1 and Q==1 or g:ChiDeficit()>=2 and Q>=2)then if m.Cast(J.ChiBurst,nil,nil,not h:IsInRange(40))then T=123986;return"Chi Burst 822"end end;if J.ChiWave:IsReady()and h:IsInRange(40)then if m.Cast(J.ChiWave,nil,nil,not h:IsInRange(40))then T=115098;return"Chi Wave 824"end end;if J.TigerPalm:IsReady()then if a4.CastTargetIf(J.TigerPalm,O,"min",aE,aM)then return"Tiger Palm 826"end;if aE(h)and aM(h)then if m.Cast(J.TigerPalm,nil,nil,not h:IsSpellInRange(J.TigerPalm))then T=100780;return"Tiger Palm 828"end end end;if J.SpinningCraneKick:IsReady()and h:IsInRange(8)and(g:BuffStack(J.ChiEnergyBuff)>30-5*Q and g:BuffDown(J.StormEarthAndFireBuff)and(J.RisingSunKick:CooldownRemains()>2 and(J.FistsOfFury:CooldownRemains()>2 or w)or J.RisingSunKick:CooldownRemains()<3 and(J.FistsOfFury:CooldownRemains()>3 or w)and g:Chi()>3 or J.RisingSunKick:CooldownRemains()>3 and J.FistsOfFury:CooldownRemains()<3 and g:Chi()>4 or g:ChiDeficit()<=1 and ao()<2)or g:BuffStack(J.ChiEnergyBuff)>10 and d.BossFilteredFightRemains("<",7))then if m.Cast(J.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then T=101546;return"Spinning Crane Kick 830"end end;if J.BlackoutKick:IsReady()then if a4.CastTargetIf(J.BlackoutKick,O,"min",as,aN)then return"Blackout Kick 832"end;if as(h)and aN(h)then if m.Cast(J.BlackoutKick,nil,nil,not h:IsSpellInRange(J.BlackoutKick))then T=100784;return"Blackout Kick 834"end end end;if J.TigerPalm:IsReady()then if a4.CastTargetIf(J.TigerPalm,O,"min",aE,az)then return"Tiger Palm 836"end;if aE(h)and az(h)then if m.Cast(J.TigerPalm,nil,nil,not h:IsSpellInRange(J.TigerPalm))then T=100780;return"Tiger Palm 838"end end end;if J.ArcaneTorrent:IsReady()and h:IsInRange(8)and g:ChiDeficit()>=1 then if m.Cast(J.ArcaneTorrent,nil,nil,not h:IsInMeleeRange(8))then T=50613;return"Arcane Torrent 402"end end;if J.FlyingSerpentKickActionBarReplacement:IsReady()and not v and not a6.Windwalker.IgnoreFSK then if m.Cast(J.FlyingSerpentKickActionBarReplacement,nil,nil,not h:IsInRange(40))then T=101545;return"Flying Serpent Kick Slam 840"end end;if J.FlyingSerpentKick:IsReady()and not v and h:IsInRange(8)and not a6.Windwalker.IgnoreFSK then if m.Cast(J.FlyingSerpentKick,nil,nil,not h:IsInRange(40))then T=101545;return"Flying Serpent Kick 842"end end;if J.BlackoutKick:IsReady()then if a4.CastTargetIf(J.BlackoutKick,P,"min",as,aO)then return"Blackout Kick 844"end;if as(h)and aO(h)then if m.Cast(J.BlackoutKick,nil,nil,not h:IsSpellInRange(J.BlackoutKick))then T=100784;return"Blackout Kick 846"end end end;if J.BlackoutKick:IsReady()then if a4.CastTargetIf(J.BlackoutKick,P,"min",as,aP)then return"Blackout Kick 848"end;if as(h)and aP(h)then if m.Cast(J.BlackoutKick,nil,nil,not h:IsSpellInRange(J.BlackoutKick))then T=100784;return"Blackout Kick 850"end end end end;local function a_()s=HeroRotationCharDB.Toggles[6]q=HeroRotationCharDB.Toggles[4]r=HeroRotationCharDB.Toggles[5]B=HeroRotationCharDB.Toggles[12]t=HeroRotationCharDB.Toggles[15]u=HeroRotationCharDB.Toggles[31]v=HeroRotationCharDB.Toggles[32]w=HeroRotationCharDB.Toggles[33]x=HeroRotationCharDB.Toggles[34]y=HeroRotationCharDB.Toggles[35]z=HeroRotationCharDB.Toggles[36]A=HeroRotationCharDB.Toggles[37]E=false;F=false;if a6.Windwalker.IncludedCooldowns.Xuen and o()or a6.Windwalker.IncludedSmallCooldowns.Xuen and(o()or r)or not a6.Windwalker.IncludedSmallCooldowns.Xuen and not a6.Windwalker.IncludedCooldowns.Xuen and not a6.Windwalker.IncludedSmallCooldowns.SEFEcho and not a6.Windwalker.IncludedCooldowns.SEFEco then E=true end;if a6.Windwalker.IncludedCooldowns.SEFFull and o()or a6.Windwalker.IncludedSmallCooldowns.SEFFull and(o()or r)or not a6.Windwalker.IncludedSmallCooldowns.SEFFull and not a6.Windwalker.IncludedCooldowns.SEFFull or(a6.Windwalker.IncludedCooldowns.SEFEco and o()and J.StormEarthAndFire:ChargesFractional()>a6.Windwalker.SEFEcoCharge or a6.Windwalker.IncludedSmallCooldowns.SEFEco and(o()or r)and J.StormEarthAndFire:ChargesFractional()>a6.Windwalker.SEFEcoCharge or not a6.Windwalker.IncludedSmallCooldowns.SEFEco and not a6.Windwalker.IncludedCooldowns.SEFEco and J.StormEarthAndFire:ChargesFractional()>a6.Windwalker.SEFEcoCharge)then F=true end end;local function b0()local b1=0;local b2={322968,319603,319611,325876,334493,334496,332605,328494,326836,336277,319669,323831,330725,333299}if UnitExists("mouseover")then if UnitIsDead("mouseover")==true and UnitCanAttack("player","mouseover")~=true then b1=9999 else for ak=0,40 do local aj,aj,b3,b4,aj,aj,aj,aj,aj,b5=UnitDebuff("mouseover",ak)for aj,b6 in pairs(b2)do if b6==b5 then if b4=="Magic"then b1=1 elseif b4=="Poison"then b1=2 elseif b4=="Disease"then b1=3 elseif b4=="Curse"then b1=4 end end end end end end;if b1==2 or DebuffCheckC==3 and J.Detox:IsReady()and f("mouseover"):IsInRange(40)then if m.Cast(J.Detox,nil,nil,not h:IsInRange(40))then T=218164;return"Detox MO"end end end;local function b7()O=g:GetEnemiesInMeleeRange(5)P=g:GetEnemiesInMeleeRange(8)if p()then Enemies10ySplash=h:GetEnemiesInSplashRange(10)Q=#P else Enemies10ySplash=1;Q=1 end;EnemiesWithMotC=GetSpellCount(101546)local b8=g:IsTankingAoE(8)or g:IsTanking(h)ai()if not BotOn then S=0;T=0;U=0 end;if S>0 then S=0 end;if T>0 then T=0 end;if U>0 then U=0 end;R=a_()R=b0()if g:IsInInstancedPvP()and not g:StealthUp(true,true)and not IsMounted then if J.Paralysis:IsReady()and f("focus"):IsSpellInRange(J.Paralysis)and select(1,UnitCastingInfo("focus"))=="Convoke the Spirits"then U=1 end;if J.SpearHandStrike:IsReady()and f("focus"):IsSpellInRange(J.SpearHandStrike)and not g:StealthUp(true,true)and UnitExists("focus")and not UnitIsUnit("focus",player)and(select(2,UnitClass("focus"))=="DRUID"and select(1,UnitCastingInfo("focus"))=="Convoke the Spirits")and select(1,UnitCastingInfo("focus"))=="Convoke the Spirits"then U=2 end;if J.LegSweep:IsReady()and f("focus"):IsInRange(7)and not g:StealthUp(true,true)and UnitExists("focus")and not UnitIsUnit("focus",player)and(select(2,UnitClass("arena1"))=="DRUID"or select(2,UnitClass("arena2"))=="DRUID"or select(2,UnitClass("arena3"))=="DRUID")and f("focus"):IsInRange(7)and select(1,UnitCastingInfo("focus"))=="Convoke the Spirits"then U=3 end;local b9={327196,64843,2061,32546,207778,124682,191837,19750,289666,120517,2060,73920,8044,77472,82326,265202,289022,47540,184509,596,33076,8936,186263,115175,227344,740,116670,197995,48438,1064}for ak=1,20 do local ba="nameplate"..ak;if UnitIsEnemy("player",ba)then for bb=1,#b9 do local bc=f("focus"):CastSpellID()if bc==b9[bb]and not g:StealthUp(true,true)and f("focus"):IsSpellInRange(J.SpearHandStrike)and f("focus"):IsInterruptible()then U=2 end;if bc==b9[bb]and not g:StealthUp(true,true)and f("focus"):IsSpellInRange(J.Paralysis)and f("focus"):CanBeStunned(IgnoreClassification)then U=1 end;if bc==b9[bb]and not g:StealthUp(true,true)and f("focus"):IsInRange(8)and f("focus"):CanBeStunned(IgnoreClassification)then U=3 end end end end end;if a4.TargetIsValid()and not g:IsDeadOrGhost()then if not g:AffectingCombat()and s then local R=aS()if R then return R end end;if J.FlyingSerpentKickActionBarReplacement:IsReady()and not v and not a6.Windwalker.IgnoreFSK and g:AffectingCombat()then if m.Cast(J.FlyingSerpentKickActionBarReplacement,nil,nil,not h:IsInRange(40))then T=101545;return"Flying Serpent Kick Slam 740"end end;if g:IsChanneling(J.FistsOfFury)and(not G or J.RisingSunKick:CooldownRemains()<=0)and not H and g:AffectingCombat()then if m.Cast(J.PoolEnergy,nil,nil,nil)then T=1000;return"Casting FoF"end elseif(G==true or H==true)and not g:IsChanneling(J.FistsOfFury)then G=false;H=false end;if x and J.LegSweep:IsUsableP()and J.LegSweep:CooldownRemains(BypassRecovery)<=0 then if m.Cast(J.LegSweep,nil,nil,nil)then T=119381;return"queue Leg Sweep"end elseif(not J.LegSweep:IsUsableP()or J.LegSweep:CooldownRemains(BypassRecovery)>0)and x then HeroRotationCharDB.Toggles[34]=not HeroRotationCharDB.Toggles[34]m.Print("Leg Sweep Queue is now "..(HeroRotationCharDB.Toggles[34]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if y and J.Paralysis:IsUsableP()and J.Paralysis:CooldownRemains(BypassRecovery)<=0 then if m.Cast(J.Paralysis,nil,nil,nil)then if f("mouseover"):GUID()~=nil and f("mouseover"):IsSpellInRange(J.Paralysis)then S=1115078;return"queue Paralysis MO"else T=115078;return"queue Paralysis"end end elseif(not J.Paralysis:IsUsableP()or J.Paralysis:CooldownRemains(BypassRecovery)>0)and y then HeroRotationCharDB.Toggles[35]=not HeroRotationCharDB.Toggles[35]m.Print("Paralysis Queue is now "..(HeroRotationCharDB.Toggles[35]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if z and J.RingOfPeace:IsAvailable()and J.RingOfPeace:IsUsableP()and J.RingOfPeace:CooldownRemains(BypassRecovery)<=0 then if m.Cast(J.RingOfPeace,nil,nil,nil)then T=116844;return"queue RingOfPeace"end elseif(not J.RingOfPeace:IsUsableP()or J.RingOfPeace:CooldownRemains(BypassRecovery)>0 or not J.RingOfPeace:IsAvailable())and z then HeroRotationCharDB.Toggles[36]=not HeroRotationCharDB.Toggles[36]m.Print("RingOfPeace Queue is now "..(HeroRotationCharDB.Toggles[36]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if A and J.BonedustBrew:IsUsableP()and J.BonedustBrew:CooldownRemains(BypassRecovery)<=0 then if m.Cast(J.BonedustBrew,nil,nil,nil)then T=325216;return"queue BonedustBrew"end elseif(not J.BonedustBrew:IsUsableP()or J.BonedustBrew:CooldownRemains(BypassRecovery)>0)and A then HeroRotationCharDB.Toggles[37]=not HeroRotationCharDB.Toggles[37]m.Print("BonedustBrew Queue is now "..(HeroRotationCharDB.Toggles[37]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if a6.Commons.UseDefensives and g:AffectingCombat()then if J.FortifyingBrew:IsReady()and g:HealthPercentage()<a6.Commons.FortifyingBrew then if m.Cast(J.FortifyingBrew,nil,nil,nil)then T=243435;return"Fortifying Brew 100"end end;if J.TouchOfKarma:IsReady()and g:HealthPercentage()<a6.Commons.TouchofKarma then if m.Cast(J.TouchOfKarma,nil,nil,nil)then T=122470;return"ToK 100"end end;if g:HealthPercentage()<a6.Commons.PhialHP and K.PhialofSerenity:IsReady()and K.PhialofSerenity:CooldownRemains()<=0 then if m.Cast(K.PhialofSerenity,nil)then T=55;return"PhialofSerenity HP"end end;if g:HealthPercentage()<a6.Commons.HealthstoneHP and K.Healthstone:IsReady()and K.Healthstone:CooldownRemains()<=0 then if m.Cast(K.Healthstone,nil)then T=40;return"Healthstone HP"end end;if g:HealthPercentage()<a6.Commons.HealPotHP and K.HealPot:IsReady()and K.HealPot:CooldownRemains()<=0 then if m.Cast(K.HealPot,nil)then T=41;return"HealPot HP"end end end;if true then W=(d.BossFilteredFightRemains("<",J.InvokeXuenTheWhiteTiger:CooldownRemains())or not E or(d.BossFilteredFightRemains("<",120+J.InvokeXuenTheWhiteTiger:CooldownRemains())or not E))and(J.Serenity:IsAvailable()and d.BossFilteredFightRemains(">",J.Serenity:CooldownRemains())and J.Serenity:CooldownRemains()>10 or d.BossFilteredFightRemains(">",J.StormEarthAndFire:FullRechargeTime())and J.StormEarthAndFire:FullRechargeTime()>15 or J.StormEarthAndFire:Charges()==0 and d.BossFilteredFightRemains(">",J.StormEarthAndFire:CooldownRemains()))or not E end;if K.PotionofPhantomFire:IsReady()and g:AffectingCombat()and h:IsInRange(8)and a6.Commons.UsePotions and((g:BuffUp(J.SerenityBuff)or g:BuffUp(J.StormEarthAndFireBuff))and J.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or d.BossFilteredFightRemains("<=",60))then if m.CastSuggested(K.PotionofPhantomFire)then T=32;return"Potion of Phantom Fire 102"end end;if K.PotionofSpectralAgility:IsReady()and g:AffectingCombat()and h:IsInRange(8)and a6.Commons.UsePotions and((g:BuffUp(J.SerenityBuff)or g:BuffUp(J.StormEarthAndFireBuff))and J.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or d.BossFilteredFightRemains("<=",60))then if m.CastSuggested(K.PotionofSpectralAgility)then T=32;return"Potion of Spectral Agility 104"end end;if K.PotionofDeathlyFixation:IsReady()and g:AffectingCombat()and h:IsInRange(8)and a6.Commons.UsePotions and((g:BuffUp(J.SerenityBuff)or g:BuffUp(J.StormEarthAndFireBuff))and J.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or d.BossFilteredFightRemains("<=",60))then if m.CastSuggested(K.PotionofDeathlyFixation)then T=32;return"Potion of Deathly Fixation 106"end end;if K.PotionofEmpoweredExorcisms:IsReady()and g:AffectingCombat()and h:IsInRange(8)and a6.Commons.UsePotions and((g:BuffUp(J.SerenityBuff)or g:BuffUp(J.StormEarthAndFireBuff))and J.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or d.BossFilteredFightRemains("<=",60))then if m.CastSuggested(K.PotionofEmpoweredExorcisms)then T=32;return"Potion of Empowered Exorcisms 108"end end;if K.PotionofHardenedShadows:IsReady()and g:AffectingCombat()and h:IsInRange(8)and a6.Commons.UsePotions and((g:BuffUp(J.SerenityBuff)or g:BuffUp(J.StormEarthAndFireBuff))and J.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or d.BossFilteredFightRemains("<=",60))then if m.CastSuggested(K.PotionofHardenedShadows)then T=32;return"Potion of Hardened Shadows 110"end end;if K.PotionofSpectralStamina:IsReady()and g:AffectingCombat()and h:IsInRange(8)and a6.Commons.UsePotions and((g:BuffUp(J.SerenityBuff)or g:BuffUp(J.StormEarthAndFireBuff))and J.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or d.BossFilteredFightRemains("<=",60))then if m.CastSuggested(K.PotionofSpectralStamina)then T=32;return"Potion of Spectral Stamina 112"end end;if g:BuffUp(J.SerenityBuff)and g:AffectingCombat()then local R=aX()if R then return R end end;if g:BuffUp(J.WeaponsOfOrder)and g:AffectingCombat()then local R=aY()if R then return R end end;if d.CombatTime()<4 and g:Chi()<5 and not(J.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24)and(g:AffectingCombat()or s)then local R=aT()if R then return R end end;if J.FistOfTheWhiteTiger:IsReady()and g:AffectingCombat()then if a4.CastTargetIf(J.FistOfTheWhiteTiger,O,"min",as,av)then return"Fist of the White Tiger 114"end;if as(h)and av(h)then if m.Cast(J.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(J.FistOfTheWhiteTiger))then T=261947;return"Fist of the White Tiger 116"end end end;if J.ExpelHarm:IsReady()and g:AffectingCombat()and h:IsInRange(8)and g:Level()>=43 and g:ChiDeficit()>=1 and(ao()<1 or J.Serenity:CooldownRemains()<2 or(ao()<4 and J.FistsOfFury:CooldownRemains()<1.5 or J.WeaponsOfOrder:CooldownRemains()<2))and not h:DebuffUp(J.BonedustBrew)then if m.Cast(J.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then T=322101;return"Expel Harm 118"end end;if J.TigerPalm:IsReady()and g:AffectingCombat()then if a4.CastTargetIf(J.TigerPalm,P,"min",as,ax)then return"Tiger Palm 120"end;if as(h)and ax(h)then if m.Cast(J.TigerPalm,nil,nil,not h:IsSpellInRange(J.TigerPalm))then T=100780;return"Tiger Palm 122"end end end;if(m.CDsON()or not m.CDsON())and not J.Serenity:IsAvailable()and g:AffectingCombat()then local R=aV()if R then return R end end;if(m.CDsON()or not m.CDsON())and J.Serenity:IsAvailable()and g:AffectingCombat()then local R=aW()if R then return R end end;if(Q<3 or not m.AoEON())and g:AffectingCombat()then local R=aZ()if R then return R end end;if m.AoEON()and Q>=3 and g:AffectingCombat()then local R=aU()if R then return R end end;if g:AffectingCombat()then if m.Cast(J.PoolEnergy)and not a6.Windwalker.NoWindwalkerPooling then return"Pool Energy"end end end end;local function bd()end;function ReturnSpell()if T==0 then return 0 else return T end end;function ReturnSpellMO()if S==0 then return 0 else return S end end;function ReturnSpellFocus()if U==0 then return 0 else return U end end;m.SetAPL(269,b7,bd)