local a,b=...local c=HeroDBC.DBC;local d=HeroLib;local e=HeroCache;local f=d.Unit;local g=f.Player;local h=f.Target;local i=f.Pet;local j=d.Spell;local k=d.MultiSpell;local l=d.Item;local m=HeroRotation;local n=m.Cast;local o=m.CDsON;local p=m.AoEON;local q=HeroRotationCharDB.Toggles[4]local r=HeroRotationCharDB.Toggles[5]local s=HeroRotationCharDB.Toggles[6]local t=HeroRotationCharDB.Toggles[15]local u=HeroRotationCharDB.Toggles[31]local v=HeroRotationCharDB.Toggles[32]local w=HeroRotationCharDB.Toggles[33]local x=HeroRotationCharDB.Toggles[34]local y=HeroRotationCharDB.Toggles[35]local z=HeroRotationCharDB.Toggles[36]local A=HeroRotationCharDB.Toggles[37]local B=HeroRotationCharDB.Toggles[38]local C=HeroRotationCharDB.Toggles[12]local D=nil;local E=nil;local F=false;local G=false;local H=false;local I=false;local J=math.min;local pairs=pairs;local K=j.Monk.Windwalker;local L=l.Monk.Windwalker;local M={}local N;local O;local P;local Q;local R;local S;local T=0;local U=0;local V=0;local W=false;local X=false;local Y=false;local Z=false;local _;local a0={{K.SpearHandStrike,"Cast Spear Hand Strike (Interrupt)",function()return true end}}local a1={{K.LegSweep,"Cast Leg Sweep (Stun)",function()return true end}}local a2={{K.RingOfPeace,"Cast Ring Of Peace (Stun)",function()return true end}}local a3={{K.Paralysis,"Cast Paralysis (Stun)",function()return true end}}local a4=false;local a5=0;local a6=m.Commons.Everyone;local a7=m.Commons.Monk;local a8={General=m.GUISettings.General,Commons=m.GUISettings.APL.Monk.Commons,Windwalker=m.GUISettings.APL.Monk.Windwalker}local a9=g:HasLegendaryEquipped(88)local aa=g:HasLegendaryEquipped(82)local ab=g:HasLegendaryEquipped(85)local ac=g:HasLegendaryEquipped(83)local ad=g:HasLegendaryEquipped(96)local ae=g:HasLegendaryEquipped(95)local af=g:HasLegendaryEquipped(97)local ag=g:HasLegendaryEquipped(94)d:RegisterForEvent(function()a5=0 end,"PLAYER_REGEN_ENABLED")local function N(ah)if K.TigerPalm:TimeSinceLastCast()<=g:GCD()then return true end;return ah and h:IsInMeleeRange(ah)or h:IsInMeleeRange(5)end;local ai={5,8,10,30,40,100}local aj={}local function ak()for al,am in ipairs(ai)do if am==8 or 5 then aj[am]=h:IsInMeleeRange(am)end;aj[am]=h:IsInRange(am)end end;local function an(ao)if ao then return 1 else return 0 end end;local function ap(ao)return ao~=0 end;local function aq(ar)local as=0;for at in pairs(ar)do local au=ar[at]if au:DebuffUp(K.BonedustBrew)then as=as+1 end end;return as end;local function av(ar)local as=0;for at in pairs(ar)do local au=ar[at]if au:DebuffRemains(K.BonedustBrew)>2 then as=as+1 end end;return as end;local function aw()return math.floor(g:EnergyTimeToMaxPredicted()*10+0.5)/10 end;local function ax()return math.floor(g:EnergyPredicted()+0.5)end;local function ay(az)return not g:PrevGCD(1,az)end;local function aA(aB)return aB:DebuffRemains(K.MarkOfTheCraneDebuff)end;local function aC(aB)if g:Chi()<3 and aB:GUID()==f("mouseover"):GUID()and a8.Windwalker.TargetSwap=="Mouseover"then T=1261947;return true elseif g:Chi()<3 and a8.Windwalker.TargetSwap=="AutoSwap"and aB:GUID()~=h:GUID()and not C and not string.find(aB:GUID(),174773)then T=999;return true elseif g:Chi()<3 and aB:GUID()==h:GUID()then U=261947;return true elseif g:Chi()<3 and not string.find(aB:GUID(),174773)then return true end end;local function aD(aB)if g:ChiDeficit()>=3 and(aw()<1 or aw()<4 and K.FistsOfFury:CooldownRemains()<1.5 or K.WeaponsOfOrder:CooldownRemains()<2)and not UnitsWithBDBCount==0 and aB:GUID()==f("mouseover"):GUID()and a8.Windwalker.TargetSwap=="Mouseover"then T=1261947;return true elseif g:ChiDeficit()>=3 and(aw()<1 or aw()<4 and K.FistsOfFury:CooldownRemains()<1.5 or K.WeaponsOfOrder:CooldownRemains()<2)and not UnitsWithBDBCount==0 and a8.Windwalker.TargetSwap=="AutoSwap"and aB:GUID()~=h:GUID()and not C and not string.find(aB:GUID(),174773)then T=999;return true elseif g:ChiDeficit()>=3 and(aw()<1 or aw()<4 and K.FistsOfFury:CooldownRemains()<1.5 or K.WeaponsOfOrder:CooldownRemains()<2)and not UnitsWithBDBCount==0 and aB:GUID()==h:GUID()then U=261947;return true elseif g:ChiDeficit()>=3 and(aw()<1 or aw()<4 and K.FistsOfFury:CooldownRemains()<1.5 or K.WeaponsOfOrder:CooldownRemains()<2)and not UnitsWithBDBCount==0 and not string.find(aB:GUID(),174773)then return true end end;local function aE(aB)if g:Chi()==0 and g:BuffRemains(K.WeaponsOfOrder)<4 and aB:GUID()==f("mouseover"):GUID()and a8.Windwalker.TargetSwap=="Mouseover"then T=1261947;return true elseif g:Chi()==0 and g:BuffRemains(K.WeaponsOfOrder)<4 and a8.Windwalker.TargetSwap=="AutoSwap"and aB:GUID()~=h:GUID()and not C and not string.find(aB:GUID(),174773)then T=999;return true elseif g:Chi()==0 and g:BuffRemains(K.WeaponsOfOrder)<4 and aB:GUID()==h:GUID()then U=261947;return true elseif g:Chi()==0 and g:BuffRemains(K.WeaponsOfOrder)<4 and not string.find(aB:GUID(),174773)then return true end end;local function aF(aB)if ay(K.TigerPalm)and g:ChiDeficit()>=2 and(aw()<1 or K.Serenity:CooldownRemains()<2 or aw()<4 and K.FistsOfFury:CooldownRemains()<1.5 or K.WeaponsOfOrder:CooldownRemains()<2)and not UnitsWithBDBCount==0 and aB:GUID()==f("mouseover"):GUID()and a8.Windwalker.TargetSwap=="Mouseover"then T=1100780;return true elseif ay(K.TigerPalm)and g:ChiDeficit()>=2 and(aw()<1 or K.Serenity:CooldownRemains()<2 or aw()<4 and K.FistsOfFury:CooldownRemains()<1.5 or K.WeaponsOfOrder:CooldownRemains()<2)and not UnitsWithBDBCount==0 and a8.Windwalker.TargetSwap=="AutoSwap"and aB:GUID()~=h:GUID()and not C and not string.find(aB:GUID(),174773)then T=999;return true elseif ay(K.TigerPalm)and g:ChiDeficit()>=2 and(aw()<1 or K.Serenity:CooldownRemains()<2 or aw()<4 and K.FistsOfFury:CooldownRemains()<1.5 or K.WeaponsOfOrder:CooldownRemains()<2)and not UnitsWithBDBCount==0 and aB:GUID()==h:GUID()then U=100780;return true elseif ay(K.TigerPalm)and g:ChiDeficit()>=2 and(aw()<1 or K.Serenity:CooldownRemains()<2 or aw()<4 and K.FistsOfFury:CooldownRemains()<1.5 or K.WeaponsOfOrder:CooldownRemains()<2)and not UnitsWithBDBCount==0 and not string.find(aB:GUID(),174773)then return true end end;local function aG(aB)if g:ChiDeficit()>=3 and aB:GUID()==f("mouseover"):GUID()and a8.Windwalker.TargetSwap=="Mouseover"then T=1261947;return true elseif g:ChiDeficit()>=3 and a8.Windwalker.TargetSwap=="AutoSwap"and aB:GUID()~=h:GUID()and not C then T=999;return true elseif g:ChiDeficit()>=3 and aB:GUID()==h:GUID()then U=261947;return true elseif g:ChiDeficit()>=3 and not string.find(aB:GUID(),174773)then return true end end;local function aH(aB)if ay(K.TigerPalm)and g:ChiDeficit()>=2 and aB:GUID()==f("mouseover"):GUID()and a8.Windwalker.TargetSwap=="Mouseover"then T=1100780;return true elseif ay(K.TigerPalm)and g:ChiDeficit()>=2 and a8.Windwalker.TargetSwap=="AutoSwap"and aB:GUID()~=h:GUID()and not C and not string.find(aB:GUID(),174773)then T=999;return true elseif ay(K.TigerPalm)and g:ChiDeficit()>=2 and aB:GUID()==h:GUID()then U=100780;return true elseif ay(K.TigerPalm)and g:ChiDeficit()>=2 and not string.find(aB:GUID(),174773)then return true end end;local function aI(aB)if g:ChiDeficit()==2 and aB:GUID()==f("mouseover"):GUID()and a8.Windwalker.TargetSwap=="Mouseover"then T=1100780;return true elseif g:ChiDeficit()==2 and a8.Windwalker.TargetSwap=="AutoSwap"and aB:GUID()~=h:GUID()and not C and not string.find(aB:GUID(),174773)then T=999;return true elseif g:ChiDeficit()==2 and aB:GUID()==h:GUID()then U=100780;return true elseif g:ChiDeficit()==2 and not string.find(aB:GUID(),174773)then return true end end;local function aJ(aB)if K.WhirlingDragonPunch:IsAvailable()and 10/(1+g:HastePct()/100)>K.WhirlingDragonPunch:CooldownRemains()+4 and(K.FistsOfFury:CooldownRemains()>3 or w or g:Chi()>=5)and aB:GUID()==f("mouseover"):GUID()and a8.Windwalker.TargetSwap=="Mouseover"then T=1107428;return true elseif K.WhirlingDragonPunch:IsAvailable()and 10/(1+g:HastePct()/100)>K.WhirlingDragonPunch:CooldownRemains()+4 and(K.FistsOfFury:CooldownRemains()>3 or w or g:Chi()>=5)and a8.Windwalker.TargetSwap=="AutoSwap"and aB:GUID()~=h:GUID()and not C and not string.find(aB:GUID(),174773)then T=999;return true elseif K.WhirlingDragonPunch:IsAvailable()and 10/(1+g:HastePct()/100)>K.WhirlingDragonPunch:CooldownRemains()+4 and(K.FistsOfFury:CooldownRemains()>3 or w or g:Chi()>=5)and aB:GUID()==h:GUID()then U=107428;return true elseif K.WhirlingDragonPunch:IsAvailable()and 10/(1+g:HastePct()/100)>K.WhirlingDragonPunch:CooldownRemains()+4 and(K.FistsOfFury:CooldownRemains()>3 or w or g:Chi()>=5)and not string.find(aB:GUID(),174773)then return true end end;local function aK(aB)if g:ChiDeficit()>=2 and(not K.HitCombo:IsAvailable()or ay(K.TigerPalm))and aB:GUID()==f("mouseover"):GUID()and a8.Windwalker.TargetSwap=="Mouseover"then T=1100780;return true elseif g:ChiDeficit()>=2 and(not K.HitCombo:IsAvailable()or ay(K.TigerPalm))and a8.Windwalker.TargetSwap=="AutoSwap"and aB:GUID()~=h:GUID()and not C and not string.find(aB:GUID(),174773)then T=999;return true elseif g:ChiDeficit()>=2 and(not K.HitCombo:IsAvailable()or ay(K.TigerPalm))and aB:GUID()==h:GUID()then U=100780;return true elseif g:ChiDeficit()>=2 and(not K.HitCombo:IsAvailable()or ay(K.TigerPalm))and not string.find(aB:GUID(),174773)then return true end end;local function aL(aB)if(not K.HitCombo:IsAvailable()or ay(K.TigerPalm))and aB:GUID()==f("mouseover"):GUID()and a8.Windwalker.TargetSwap=="Mouseover"then T=1100780;return true elseif(not K.HitCombo:IsAvailable()or ay(K.TigerPalm))and a8.Windwalker.TargetSwap=="AutoSwap"and aB:GUID()~=h:GUID()and not C and not string.find(aB:GUID(),174773)then T=999;return true elseif(not K.HitCombo:IsAvailable()or ay(K.TigerPalm))and aB:GUID()==h:GUID()then U=100780;return true elseif(not K.HitCombo:IsAvailable()or ay(K.TigerPalm))and not string.find(aB:GUID(),174773)then return true end end;local function aM(aB)if g:Chi()==0 and g:BuffRemains(K.WeaponsOfOrder)<4 and aB:GUID()==f("mouseover"):GUID()and a8.Windwalker.TargetSwap=="Mouseover"then T=1100780;return true elseif g:Chi()==0 and g:BuffRemains(K.WeaponsOfOrder)<4 and a8.Windwalker.TargetSwap=="AutoSwap"and aB:GUID()~=h:GUID()and not C and not string.find(aB:GUID(),174773)then T=999;return true elseif g:Chi()==0 and g:BuffRemains(K.WeaponsOfOrder)<4 and aB:GUID()==h:GUID()then U=100780;return true elseif g:Chi()==0 and g:BuffRemains(K.WeaponsOfOrder)<4 and not string.find(aB:GUID(),174773)then return true end end;local function aN(aB)return ae and aB:DebuffRemains(K.RecentlyRushingTigerPalm)or aB:DebuffRemains(K.MarkOfTheCraneDebuff)end;local function aO(aB)if ay(K.BlackoutKick)and(g:BuffUp(K.BlackoutKickBuff)or K.HitCombo:IsAvailable()and g:PrevGCD(1,K.TigerPalm)and g:Chi()==2 and K.FistsOfFury:CooldownRemains()<3 or g:ChiDeficit()<=1 and g:PrevGCD(1,K.SpinningCraneKick)and aw()<3)and aB:GUID()==f("mouseover"):GUID()and a8.Windwalker.TargetSwap=="Mouseover"then T=1100784;return true elseif ay(K.BlackoutKick)and(g:BuffUp(K.BlackoutKickBuff)or K.HitCombo:IsAvailable()and g:PrevGCD(1,K.TigerPalm)and g:Chi()==2 and K.FistsOfFury:CooldownRemains()<3 or g:ChiDeficit()<=1 and g:PrevGCD(1,K.SpinningCraneKick)and aw()<3)and a8.Windwalker.TargetSwap=="AutoSwap"and aB:GUID()~=h:GUID()and not C and not string.find(aB:GUID(),174773)then T=999;return true elseif ay(K.BlackoutKick)and(g:BuffUp(K.BlackoutKickBuff)or K.HitCombo:IsAvailable()and g:PrevGCD(1,K.TigerPalm)and g:Chi()==2 and K.FistsOfFury:CooldownRemains()<3 or g:ChiDeficit()<=1 and g:PrevGCD(1,K.SpinningCraneKick)and aw()<3)and aB:GUID()==h:GUID()then U=100784;return true elseif ay(K.BlackoutKick)and(g:BuffUp(K.BlackoutKickBuff)or K.HitCombo:IsAvailable()and g:PrevGCD(1,K.TigerPalm)and g:Chi()==2 and K.FistsOfFury:CooldownRemains()<3 or g:ChiDeficit()<=1 and g:PrevGCD(1,K.SpinningCraneKick)and aw()<3)and not string.find(aB:GUID(),174773)then return true end end;local function aP(aB)if ay(K.RisingSunKick)and aB:GUID()==f("mouseover"):GUID()and a8.Windwalker.TargetSwap=="Mouseover"then T=1107428;return true elseif ay(K.RisingSunKick)and a8.Windwalker.TargetSwap=="AutoSwap"and aB:GUID()~=h:GUID()and not C and not string.find(aB:GUID(),174773)then T=999;return true elseif ay(K.RisingSunKick)and aB:GUID()==h:GUID()then U=107428;return true elseif ay(K.RisingSunKick)and not string.find(aB:GUID(),174773)then return true end end;local function aQ(aB)if ay(K.BlackoutKick)and g:BuffUp(K.WeaponsOfOrder)and K.RisingSunKick:CooldownRemains()>2 and aB:GUID()==f("mouseover"):GUID()and a8.Windwalker.TargetSwap=="Mouseover"then T=1100784;return true elseif ay(K.BlackoutKick)and g:BuffUp(K.WeaponsOfOrder)and K.RisingSunKick:CooldownRemains()>2 and a8.Windwalker.TargetSwap=="AutoSwap"and aB:GUID()~=h:GUID()and not C and not string.find(aB:GUID(),174773)then T=999;return true elseif ay(K.BlackoutKick)and g:BuffUp(K.WeaponsOfOrder)and K.RisingSunKick:CooldownRemains()>2 and aB:GUID()==h:GUID()then U=100784;return true elseif ay(K.BlackoutKick)and g:BuffUp(K.WeaponsOfOrder)and K.RisingSunKick:CooldownRemains()>2 and not string.find(aB:GUID(),174773)then return true end end;local function aR(aB)if(ay(K.BlackoutKick)or not K.HitCombo:IsAvailable())and aB:GUID()==f("mouseover"):GUID()and a8.Windwalker.TargetSwap=="Mouseover"then T=1100784;return true elseif(ay(K.BlackoutKick)or not K.HitCombo:IsAvailable())and a8.Windwalker.TargetSwap=="AutoSwap"and aB:GUID()~=h:GUID()and not C and not string.find(aB:GUID(),174773)then T=999;return true elseif(ay(K.BlackoutKick)or not K.HitCombo:IsAvailable())and aB:GUID()==h:GUID()then U=100784;return true elseif(ay(K.BlackoutKick)or not K.HitCombo:IsAvailable())and not string.find(aB:GUID(),174773)then return true end end;local function aS(aB)if ay(K.BlackoutKick)and R<=2 and Z and aB:GUID()==f("mouseover"):GUID()and a8.Windwalker.TargetSwap=="Mouseover"then T=1100784;return true elseif ay(K.BlackoutKick)and R<=2 and Z and a8.Windwalker.TargetSwap=="AutoSwap"and aB:GUID()~=h:GUID()and not C and not string.find(aB:GUID(),174773)then T=999;return true elseif ay(K.BlackoutKick)and R<=2 and Z and aB:GUID()==h:GUID()then U=100784;return true elseif ay(K.BlackoutKick)and R<=2 and Z and not string.find(aB:GUID(),174773)then return true end end;local function aT(aB)if ay(K.BlackoutKick)and(R<=3 and g:Chi()>=3 or g:BuffUp(K.WeaponsOfOrder))and aB:GUID()==f("mouseover"):GUID()and a8.Windwalker.TargetSwap=="Mouseover"then T=1100784;return true elseif ay(K.BlackoutKick)and(R<=3 and g:Chi()>=3 or g:BuffUp(K.WeaponsOfOrder))and a8.Windwalker.TargetSwap=="AutoSwap"and aB:GUID()~=h:GUID()and not C and not string.find(aB:GUID(),174773)then T=999;return true elseif ay(K.BlackoutKick)and(R<=3 and g:Chi()>=3 or g:BuffUp(K.WeaponsOfOrder))and aB:GUID()==h:GUID()then U=100784;return true elseif ay(K.BlackoutKick)and(R<=3 and g:Chi()>=3 or g:BuffUp(K.WeaponsOfOrder))and not string.find(aB:GUID(),174773)then return true end end;local function aU(aB)if(K.Serenity:CooldownRemains()>1 or not K.Serenity:IsAvailable()and(K.WeaponsOfOrder:CooldownRemains()>4 or not K.WeaponsOfOrder:IsAvailable()))and aB:GUID()==f("mouseover"):GUID()and a8.Windwalker.TargetSwap=="Mouseover"then T=1107428;return true elseif(K.Serenity:CooldownRemains()>1 or not K.Serenity:IsAvailable()and(K.WeaponsOfOrder:CooldownRemains()>4 or not K.WeaponsOfOrder:IsAvailable()))and a8.Windwalker.TargetSwap=="AutoSwap"and aB:GUID()~=h:GUID()and not C and not string.find(aB:GUID(),174773)then T=999;return true elseif(K.Serenity:CooldownRemains()>1 or not K.Serenity:IsAvailable()and(K.WeaponsOfOrder:CooldownRemains()>4 or not K.WeaponsOfOrder:IsAvailable()))and aB:GUID()==h:GUID()then U=107428;return true elseif(K.Serenity:CooldownRemains()>1 or not K.Serenity:IsAvailable()and(K.WeaponsOfOrder:CooldownRemains()>4 or not K.WeaponsOfOrder:IsAvailable()))and not string.find(aB:GUID(),174773)then return true end end;local function aV(aB)if ay(K.TigerPalm)and g:ChiDeficit()>=2 and g:BuffDown(K.StormEarthAndFireBuff)and aB:GUID()==f("mouseover"):GUID()and a8.Windwalker.TargetSwap=="Mouseover"then T=1100780;return true elseif ay(K.TigerPalm)and g:ChiDeficit()>=2 and g:BuffDown(K.StormEarthAndFireBuff)and a8.Windwalker.TargetSwap=="AutoSwap"and aB:GUID()~=h:GUID()and not C and not string.find(aB:GUID(),174773)then T=999;return true elseif ay(K.TigerPalm)and g:ChiDeficit()>=2 and g:BuffDown(K.StormEarthAndFireBuff)and aB:GUID()==h:GUID()then U=100780;return true elseif ay(K.TigerPalm)and g:ChiDeficit()>=2 and g:BuffDown(K.StormEarthAndFireBuff)and not string.find(aB:GUID(),174773)then return true end end;local function aW(aB)if ay(K.BlackoutKick)and(K.Serenity:IsAvailable()and K.Serenity:CooldownRemains()<3 or K.RisingSunKick:CooldownRemains()>1 and(K.FistsOfFury:CooldownRemains()>1 or w)or K.RisingSunKick:CooldownRemains()<3 and(K.FistsOfFury:CooldownRemains()>3 or w)and g:Chi()>2 or K.RisingSunKick:CooldownRemains()>3 and K.FistsOfFury:CooldownRemains()<3 and g:Chi()>3 or g:Chi()>5 or g:BuffUp(K.BlackoutKickBuff))and aB:GUID()==f("mouseover"):GUID()and a8.Windwalker.TargetSwap=="Mouseover"then T=1100784;return true elseif ay(K.BlackoutKick)and(K.Serenity:IsAvailable()and K.Serenity:CooldownRemains()<3 or K.RisingSunKick:CooldownRemains()>1 and(K.FistsOfFury:CooldownRemains()>1 or w)or K.RisingSunKick:CooldownRemains()<3 and(K.FistsOfFury:CooldownRemains()>3 or w)and g:Chi()>2 or K.RisingSunKick:CooldownRemains()>3 and K.FistsOfFury:CooldownRemains()<3 and g:Chi()>3 or g:Chi()>5 or g:BuffUp(K.BlackoutKickBuff))and a8.Windwalker.TargetSwap=="AutoSwap"and aB:GUID()~=h:GUID()and not C then T=999;return true elseif ay(K.BlackoutKick)and(K.Serenity:IsAvailable()and K.Serenity:CooldownRemains()<3 or K.RisingSunKick:CooldownRemains()>1 and(K.FistsOfFury:CooldownRemains()>1 or w)or K.RisingSunKick:CooldownRemains()<3 and(K.FistsOfFury:CooldownRemains()>3 or w)and g:Chi()>2 or K.RisingSunKick:CooldownRemains()>3 and K.FistsOfFury:CooldownRemains()<3 and g:Chi()>3 or g:Chi()>5 or g:BuffUp(K.BlackoutKickBuff))and aB:GUID()==h:GUID()then U=100784;return true elseif ay(K.BlackoutKick)and(K.Serenity:IsAvailable()and K.Serenity:CooldownRemains()<3 or K.RisingSunKick:CooldownRemains()>1 and(K.FistsOfFury:CooldownRemains()>1 or w)or K.RisingSunKick:CooldownRemains()<3 and(K.FistsOfFury:CooldownRemains()>3 or w)and g:Chi()>2 or K.RisingSunKick:CooldownRemains()>3 and K.FistsOfFury:CooldownRemains()<3 and g:Chi()>3 or g:Chi()>5 or g:BuffUp(K.BlackoutKickBuff))then return true end;return end;local function aX(aB)if ay(K.BlackoutKick)and(K.FistsOfFury:CooldownRemains()<3 and g:Chi()==2 and g:PrevGCD(1,K.TigerPalm)and g:EnergyTimeToX(50)<1)and aB:GUID()==f("mouseover"):GUID()and a8.Windwalker.TargetSwap=="Mouseover"then T=1100784;return true elseif ay(K.BlackoutKick)and(K.FistsOfFury:CooldownRemains()<3 and g:Chi()==2 and g:PrevGCD(1,K.TigerPalm)and g:EnergyTimeToX(50)<1)and a8.Windwalker.TargetSwap=="AutoSwap"and aB:GUID()~=h:GUID()and not C then T=999;return true elseif ay(K.BlackoutKick)and(K.FistsOfFury:CooldownRemains()<3 and g:Chi()==2 and g:PrevGCD(1,K.TigerPalm)and g:EnergyTimeToX(50)<1)and aB:GUID()==h:GUID()then U=100784;return true elseif ay(K.BlackoutKick)and(K.FistsOfFury:CooldownRemains()<3 and g:Chi()==2 and g:PrevGCD(1,K.TigerPalm)and g:EnergyTimeToX(50)<1)then return true end end;local function aY(aB)if ay(K.BlackoutKick)and aw()<2 and(g:ChiDeficit()<=1 or g:PrevGCD(1,K.TigerPalm))and aB:GUID()==f("mouseover"):GUID()and a8.Windwalker.TargetSwap=="Mouseover"then T=1100784;return true elseif ay(K.BlackoutKick)and aw()<2 and(g:ChiDeficit()<=1 or g:PrevGCD(1,K.TigerPalm))and a8.Windwalker.TargetSwap=="AutoSwap"and aB:GUID()~=h:GUID()and not C then T=999;return true elseif ay(K.BlackoutKick)and aw()<2 and(g:ChiDeficit()<=1 or g:PrevGCD(1,K.TigerPalm))and aB:GUID()==h:GUID()then U=100784;return true elseif ay(K.BlackoutKick)and aw()<2 and(g:ChiDeficit()<=1 or g:PrevGCD(1,K.TigerPalm))then return true end end;local function aZ()local a_=g:GetUseableTrinkets(M)if a_ then if a_:ID()==GetInventoryItemID("player",13)and a8.Commons.Enabled.TopTrinket then if m.Cast(a_,nil,nil)then U=24;return"top trinket 1"end elseif a_:ID()==GetInventoryItemID("player",14)and a8.Commons.Enabled.BottomTrinket then if m.Cast(a_,nil,nil)then U=35;return"bot trinket 1"end end end end;local function b0()if true then W=false end;if K.ChiBurst:IsReady()and h:IsInRange(30)and(not K.Serenity:IsAvailable()or not K.FistOfTheWhiteTiger:IsAvailable())then if m.Cast(K.ChiBurst,nil,nil,not h:IsInRange(40))then U=123986;return"Chi Burst 4"end end;if K.ChiWave:IsReady()and h:IsInRange(40)and not K.EnergizingElixir:IsAvailable()then if m.Cast(K.ChiWave,nil,nil,not h:IsInRange(40))then U=115098;return"Chi Wave 6"end end end;local function b1()if K.FistOfTheWhiteTiger:IsReady()and h:IsInRange(8)then if a6.CastTargetIf(K.FistOfTheWhiteTiger,Q,"min",aA,aG)then return"Fist of the White Tiger 200"end;if aA(h)and aG(h)then if m.Cast(K.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(K.FistOfTheWhiteTiger))then U=261947;return"Fist of the White Tiger 202"end end end;if K.ExpelHarm:IsReady()and h:IsInRange(8)and g:Level()>=43 and K.ChiBurst:IsAvailable()and g:ChiDeficit()>=3 then if m.Cast(K.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then U=322101;return"Expel Harm 204"end end;if K.TigerPalm:IsReady()and h:IsInRange(8)then if a6.CastTargetIf(K.TigerPalm,P,"min",aA,aH)then return"Tiger Palm 206"end;if aA(h)and aH(h)then if m.Cast(K.TigerPalm,nil,nil,not h:IsSpellInRange(K.TigerPalm))then U=100780;return"Tiger Palm 208"end end end;if K.ChiWave:IsReady()and h:IsInRange(40)and g:ChiDeficit()>=2 then if m.Cast(K.ChiWave,nil,nil,not h:IsInRange(40))then U=115098;return"Chi Wave 210"end end;if K.ExpelHarm:IsReady()and h:IsInRange(10)and g:Level()>=43 then if m.Cast(K.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then U=322101;return"Expel Harm 212"end end;if K.TigerPalm:IsReady()and h:IsInRange(8)then if a6.CastTargetIf(K.TigerPalm,P,"min",aA,aI)then return"Tiger Palm 214"end;if aA(h)and aI(h)then if m.Cast(K.TigerPalm,nil,nil,not h:IsSpellInRange(K.TigerPalm))then U=100780;return"Tiger Palm 216"end end end end;local function b2()if K.SpinningCraneKick:IsReady(BypassRecovery)and(ay(K.SpinningCraneKick)and UnitsWithBDBCount>0)and h:IsInRange(8)then if m.Cast(K.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then U=101546;return"Spinning Crane Kick 304"end end;if K.WhirlingDragonPunch:IsReady()and not _ and not u and g:BuffUp(K.WhirlingDragonPunchBuff)and h:IsInRange(8)and(not K.BonedustBrew:IsAvailable()or K.BonedustBrew:CooldownRemains()>=K.WhirlingDragonPunch:Cooldown()or not q)then if m.Cast(K.WhirlingDragonPunch,nil,nil,not h:IsInMeleeRange(8))then U=152175;return"Whirling Dragon Punch 300"end end;if K.EnergizingElixir:IsReady()and(g:ChiDeficit()>=2 and aw()>2 or g:ChiDeficit()>=4)and h:IsInRange(10)then if m.Cast(K.EnergizingElixir,nil)then U=115288;return"Energizing Elixir 302"end end;if K.SpinningCraneKick:IsReady(BypassRecovery)and(ay(K.SpinningCraneKick)or EnemiesWithMotC>=5 or EnemiesWithMotC==R and(K.WhirlingDragonPunch:CooldownRemains()>0 or not K.WhirlingDragonPunch:IsAvailable()or UnitsWithBDBCount>0))and(g:BuffUp(K.DanceOfChijiBuff)or UnitsWithBDBCount>0 or EnemiesWithMotC==R and(K.WhirlingDragonPunch:CooldownRemains()>0 or not K.WhirlingDragonPunch:IsAvailable()and(EnemiesWithMotC>=5 or EnemiesWithMotC==R)))and h:IsInRange(8)then if m.Cast(K.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then U=101546;return"Spinning Crane Kick 304"end end;if K.FistsOfFury:IsReady()and not w and UnitsWithBDBCount==0 and(aw()>K.FistsOfFury:ExecuteTime()or g:ChiDeficit()<=1)and g:BuffRemains(K.StormEarthAndFireBuff)<K.FistsOfFury:ExecuteTime()and h:IsInRange(8)and(not K.SpiritualFocus:IsAvailable()or not K.BonedustBrew:IsAvailable()or not q or K.BonedustBrew:CooldownRemains()>K.FistsOfFury:ExecuteTime()+5)then if m.Cast(K.FistsOfFury,nil,nil,not h:IsSpellInRange(K.FistsOfFury))then U=113656;return"Fists of Fury 306"end end;if K.RisingSunKick:IsReady()and(UnitsWithBDBCount==0 or K.BonedustBrew:CooldownRemains()<=0 and q and EnemiesWithMotC<5 and EnemiesWithMotC<R)then if a6.CastTargetIf(K.RisingSunKick,P,"min",aA,aJ)then return"Rising Sun Kick 308"end;if aA(h)and aJ(h)then if m.Cast(K.RisingSunKick,nil,nil,not h:IsSpellInRange(K.RisingSunKick))then U=107428;return"Rising Sun Kick 310"end end end;if K.RushingJadeWind:IsReady()and g:BuffDown(K.RushingJadeWindBuff)and h:IsInRange(8)then if m.Cast(K.RushingJadeWind,nil,nil,not h:IsInMeleeRange(8))then U=116847;return"Rushing Jade Wind 312"end end;if K.ExpelHarm:IsReady()and h:IsInRange(8)and g:Level()>=43 and g:ChiDeficit()>=1 and(aq==0 or EnemiesWithMotC>=R)then if m.Cast(K.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then U=322101;return"Expel Harm 316"end end;if K.FistOfTheWhiteTiger:IsReady()then if a6.CastTargetIf(K.FistOfTheWhiteTiger,Q,"min",aA,aG)then return"Fist of the White Tiger 318"end;if aA(h)and aG(h)then if m.Cast(K.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(K.FistOfTheWhiteTiger))then U=261947;return"Fist of the White Tiger 320"end end end;if K.ChiBurst:IsReady()and h:IsInRange(30)and g:ChiDeficit()>=2 then if m.Cast(K.ChiBurst,nil,nil,not h:IsInRange(40))then U=123986;return"Chi Burst 322"end end;if K.CracklingJadeLightning:IsReady()and(g:BuffStack(K.TheEmperorsCapacitor)>19 and aw()>K.CracklingJadeLightning:ExecuteTime()-1 and(K.FistsOfFury:CooldownRemains()>K.CracklingJadeLightning:ExecuteTime()or w))then if m.Cast(K.CracklingJadeLightning,nil,nil,not h:IsInRange(40))then U=117952;return"Crackling Jade Lightning 324"end end;if K.TigerPalm:IsReady()then if a6.CastTargetIf(K.TigerPalm,P,"min",aN,aK)then return"Tiger Palm 326"end;if aN(h)and aK(h)then if m.Cast(K.TigerPalm,nil,nil,not h:IsSpellInRange(K.TigerPalm))then U=100780;return"Tiger Palm 328"end end end;if K.ArcaneTorrent:IsReady()and h:IsInRange(8)and g:ChiDeficit()>=1 then if m.Cast(K.ArcaneTorrent,nil,nil,not h:IsInMeleeRange(8))then U=50613;return"Arcane Torrent 402"end end;if h:IsInRange(8)and K.SpinningCraneKick:IsReady()and(ay(K.SpinningCraneKick)or EnemiesWithMotC>=5)and((K.BonedustBrew:CooldownRemains()>2 or not q or not K.BonedustBrew:IsAvailable())and(g:Chi()>=5 or(K.FistsOfFury:CooldownRemains()>6 or w)or(K.FistsOfFury:CooldownRemains()>3 or w)and g:Chi()>=3 and g:EnergyTimeToX(50)<1 or aw()<=3+3*an(K.FistsOfFury:CooldownRemains()<5 and not w)or g:BuffUp(K.StormEarthAndFireBuff)))then if m.Cast(K.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then U=101546;return"Spinning Crane Kick 314"end end;if K.ChiWave:IsReady()and h:IsInRange(40)and ay(K.ChiWave)then if m.Cast(K.ChiWave,nil,nil,not h:IsInRange(40))then U=115098;return"Chi Wave 330"end end;if K.FlyingSerpentKickActionBarReplacement:IsReady()and not v and h:IsInRange(10)and not a8.Windwalker.IgnoreFSK then if m.Cast(K.FlyingSerpentKickActionBarReplacement,nil,nil,not h:IsInRange(40))then U=101545;return"Flying Serpent Kick Slam 332"end end;if K.FlyingSerpentKick:IsReady()and not v and h:IsInRange(10)and not a8.Windwalker.IgnoreFSK and g:BuffDown(K.BlackoutKickBuff)then if m.Cast(K.FlyingSerpentKick,nil,nil,not h:IsInRange(40))then U=101545;return"Flying Serpent Kick 334"end end;if K.BlackoutKick:IsReady()and(UnitsWithBDBCount==0 or K.BonedustBrew:CooldownRemains()<=0 and q and EnemiesWithMotC<5 and EnemiesWithMotC<R)then if a6.CastTargetIf(K.BlackoutKick,P,"min",aA,aO)then return"Blackout Kick 336"end;if aA(h)and aO(h)then if m.Cast(K.BlackoutKick,nil,nil,not h:IsSpellInRange(K.BlackoutKick))then U=100784;return"Blackout Kick 338"end end end;if K.TigerPalm:IsReady()and UnitsWithBDBCount>0 then if a6.CastTargetIf(K.TigerPalm,P,"min",aA,aL)then return"TigerPalm Kick 336"end;if aA(h)and aL(h)then if m.Cast(K.TigerPalm,nil,nil,not h:IsSpellInRange(K.TigerPalm))then U=100784;return"TigerPalm Kick 338"end end end;if K.SpinningCraneKick:IsReady(BypassRecovery)and(ay(K.SpinningCraneKick)or EnemiesWithMotC>=5 or EnemiesWithMotC==R and(K.WhirlingDragonPunch:CooldownRemains()>0 or not K.WhirlingDragonPunch:IsAvailable()or UnitsWithBDBCount>0))and h:IsInRange(8)then if m.Cast(K.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then U=101546;return"Spinning Crane Kick 304"end end end;local function b3()if K.InvokeXuenTheWhiteTiger:IsReady()and F and h:IsInRange(15)and(R<3 or R>=3 and(g:BuffUp(K.WhirlingDragonPunchBuff)or K.WhirlingDragonPunch:CooldownRemains()>2 or not K.WhirlingDragonPunch:IsAvailable()))and(not X and(K.RisingSunKick:CooldownRemains()<2 or not K.WeaponsOfOrder:IsAvailable())and(not K.BonedustBrew:IsAvailable()or K.BonedustBrew:CooldownRemains()<2 or not g:IsInRaid()and K.BonedustBrew:CooldownRemains()>10)or d.BossFilteredFightRemains("<",25))then if R>=3 and g:Chi()<5 and EnemiesWithMotC<5 and EnemiesWithMotC<R and a8.Windwalker.PoolBeforeBurst then _=true elseif EnemiesWithMotC>=5 or EnemiesWithMotC>=R or not a8.Windwalker.PoolBeforeBurst then if m.Cast(K.InvokeXuenTheWhiteTiger,nil,nil,not h:IsInRange(40))then U=123904;return"Invoke Xuen the White Tiger 400"end end end;if K.TouchOfDeath:IsReady()and h:IsInRange(8)and h:HealthPercentage()<=15 and(d.BossFilteredFightRemains(">",180-an(ab)*120)or g:BuffDown(K.StormEarthAndFireBuff)and K.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<24 and(C_Covenants.GetActiveCovenantID()==4 or h:BuffUp(K.BonedustBrew))or((d.BossFilteredFightRemains("<",K.InvokeXuenTheWhiteTiger:CooldownRemains())or not F)and h:BuffUp(K.BonedustBrew)or d.BossFilteredFightRemains("<",10)))then if m.Cast(K.TouchOfDeath,nil,nil,not h:IsSpellInRange(K.TouchOfDeath))then U=322109;return"Touch of Death 404"end end;if K.WeaponsOfOrder:IsReady()and q and h:IsInRange(8)and(K.RisingSunKick:CooldownRemains()<g:GCD()and(K.InvokeXuenTheWhiteTiger:CooldownRemains()>20+20*an(ac)or not F)or d.BossFilteredFightRemains("<",35))then if m.Cast(K.WeaponsOfOrder,nil,nil)then U=310454;return"Weapons Of Order 406"end end;if K.FaelineStomp:IsReady()and q and h:IsInRange(8)and ay(K.FaelineStomp)then if m.Cast(K.FaelineStomp,nil,nil)then U=327104;return"Faeline Stomp 408"end end;if K.FallenOrder:IsReady()and q and h:IsInRange(8)then if m.Cast(K.FallenOrder,nil,nil)then U=326860;return"Faeline Stomp 410"end end;if K.BonedustBrew:IsReady()and q and h:IsInRange(8)and(g:Chi()>=2 and d.BossFilteredFightRemains(">",60)and(K.StormEarthAndFire:Charges()>0 or K.StormEarthAndFire:CooldownRemains()>10)and(K.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or K.InvokeXuenTheWhiteTiger:CooldownRemains()>10 or hold_xuen or not F)or(g:Chi()>=2 and d.BossFilteredFightRemains("<=",60)and(K.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or(d.BossFilteredFightRemains("<",K.InvokeXuenTheWhiteTiger:CooldownRemains())or not F)and(K.StormEarthAndFire:Charges()>0 or d.BossFilteredFightRemains("<",K.StormEarthAndFire:CooldownRemains())or g:BuffUp(K.StormEarthAndFire)))or d.BossFilteredFightRemains("<",15)))then if R>=3 and g:Chi()<5 and EnemiesWithMotC<5 and EnemiesWithMotC<R and a8.Windwalker.PoolBeforeBurst then _=true elseif EnemiesWithMotC>=5 or EnemiesWithMotC>=R or not a8.Windwalker.PoolBeforeBurst then if m.Cast(K.BonedustBrew,nil,nil)then U=325216;return"Bonedust Brew 412"end end end;if K.StormEarthAndFire:IsReady()and G and h:IsInRange(10)and(K.StormEarthAndFire:Charges()==2 and(R<3 or R>=3 and(g:BuffUp(K.WhirlingDragonPunchBuff)or K.WhirlingDragonPunch:CooldownRemains()>5 or not K.WhirlingDragonPunch:IsAvailable()or K.FistsOfFury:CooldownRemains()>5))or d.BossFilteredFightRemains("<",90)or not K.WeaponsOfOrder:IsAvailable()and not K.BonedustBrew:IsAvailable()and(K.InvokeXuenTheWhiteTiger:CooldownRemains()>K.StormEarthAndFire:FullRechargeTime()or not F or X)and K.FistsOfFury:CooldownRemains()<=9 and g:Chi()>=2 and K.WhirlingDragonPunch:CooldownRemains()<=12)then if m.Cast(K.StormEarthAndFire,nil)then U=137639;return"Storm Earth and Fire 414"end end;if K.StormEarthAndFire:IsReady()and G and h:IsInRange(10)and K.WeaponsOfOrder:IsAvailable()and(g:BuffUp(K.WeaponsOfOrder)or(d.BossFilteredFightRemains("<",K.WeaponsOfOrder:CooldownRemains())or(K.WeaponsOfOrder:CooldownRemains()>K.StormEarthAndFire:FullRechargeTime()or not q))and K.FistsOfFury:CooldownRemains()<=9 and g:Chi()>=2 and K.WhirlingDragonPunch:CooldownRemains()<=12)then if m.Cast(K.StormEarthAndFire,nil)then U=137639;return"Storm Earth and Fire 416"end end;if K.StormEarthAndFire:IsReady()and G and h:IsInRange(10)and(K.BonedustBrew:IsAvailable()and UnitsWithBDBSEFCount>0 and(K.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or hold_xuen or(K.InvokeXuenTheWhiteTiger:CooldownRemains()>K.StormEarthAndFire:FullRechargeTime()or not F)or(K.InvokeXuenTheWhiteTiger:CooldownRemains()>30 or not F)))then if m.Cast(K.StormEarthAndFire,nil)then U=137639;return"Storm Earth and Fire 416"end end;if o()and(a8.Commons.Enabled.TopTrinket or a8.Commons.Enabled.BottomTrinket)and(not W or K.InvokeXuenTheWhiteTiger:CooldownRemains()<20 and F or d.BossFilteredFightRemains("<",20)or not ac)then if true then local S=aZ()if S then return S end end end;if K.BloodFury:IsCastable()and o()and h:IsInRange(8)and(K.InvokeXuenTheWhiteTiger:CooldownRemains()>30 or not F or X or d.BossFilteredFightRemains("<",20))then if m.Cast(K.BloodFury,nil)then U=20572;return"Blood Fury 420"end end;if K.Berserking:IsCastable()and o()and h:IsInRange(8)and(K.InvokeXuenTheWhiteTiger:CooldownRemains()>30 or not F or X or d.BossFilteredFightRemains("<",15))then if m.Cast(K.Berserking,nil)then U=26297;return"Berserking 422"end end;if K.LightsJudgment:IsCastable()and o()and h:IsInRange(8)then if m.Cast(K.LightsJudgment,nil,nil,not h:IsInRange(40))then U=255647;return"Lights Judgment 424"end end;if K.Fireblood:IsCastable()and o()and h:IsInRange(8)and(K.InvokeXuenTheWhiteTiger:CooldownRemains()>30 or not F or X or d.BossFilteredFightRemains("<",10))then if m.Cast(K.Fireblood,nil)then U=265221;return"Fireblood 426"end end;if K.AncestralCall:IsCastable()and o()and h:IsInRange(8)and(K.InvokeXuenTheWhiteTiger:CooldownRemains()>30 or not F or X or d.BossFilteredFightRemains("<",20))then if m.Cast(K.AncestralCall,nil)then U=274738;return"Ancestral Call 428"end end;if K.BagOfTricks:IsCastable()and o()and h:IsInRange(8)and g:BuffDown(K.StormEarthAndFire)then if m.Cast(K.BagOfTricks,nil,nil,not h:IsInRange(40))then U=312411;return"Bag of Tricks 430"end end end;local function b4()if true then Y=g:BuffRemains(K.SerenityBuff)<1 or K.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 and K.Serenity:CooldownRemains()<30 or d.BossFilteredFightRemains("<",20)end;if K.InvokeXuenTheWhiteTiger:IsReady()and F and h:IsInRange(8)and(not X or d.BossFilteredFightRemains("<",25))then if m.Cast(K.InvokeXuenTheWhiteTiger,nil,nil,not h:IsInRange(40))then U=123904;return"Invoke Xuen the White Tiger 500"end end;if o()and(a8.Commons.Enabled.TopTrinket or a8.Commons.Enabled.BottomTrinket)then if true then local S=aZ()if S then return S end end end;if K.BloodFury:IsCastable()and o()and h:IsInRange(8)and Y then if m.Cast(K.BloodFury,nil)then U=20572;return"Blood Fury 502"end end;if K.Berserking:IsCastable()and o()and h:IsInRange(8)and Y then if m.Cast(K.Berserking,nil)then U=26297;return"Berserking 504"end end;if K.ArcaneTorrent:IsCastable()and o()and h:IsInRange(8)and g:ChiDeficit()>=1 then if m.Cast(K.ArcaneTorrent,nil,nil,not h:IsInMeleeRange(8))then U=50613;return"Arcane Torrent 506"end end;if K.LightsJudgment:IsCastable()and o()and h:IsInRange(8)then if m.Cast(K.LightsJudgment,nil,nil,not h:IsInRange(40))then U=255647;return"Lights Judgment 508"end end;if K.Fireblood:IsCastable()and o()and h:IsInRange(8)and Y then if m.Cast(K.Fireblood,nil)then U=265221;return"Fireblood 510"end end;if K.AncestralCall:IsCastable()and o()and h:IsInRange(8)and Y then if m.Cast(K.AncestralCall,nil)then U=274738;return"Ancestral Call 512"end end;if K.TouchOfDeath:IsReady()and h:IsInRange(8)and h:HealthPercentage()<=15 and(d.BossFilteredFightRemains(">",180)or K.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or d.BossFilteredFightRemains("<",10))then if m.Cast(K.TouchOfDeath,nil,nil,not h:IsSpellInRange(K.TouchOfDeath))then U=322109;return"Touch of Death 514"end end;if K.WeaponsOfOrder:IsReady()and q and h:IsInRange(10)and q and K.RisingSunKick:CooldownRemains()<g:GCD()then if m.Cast(K.WeaponsOfOrder,nil,nil)then U=310454;return"Weapons Of Order 518"end end;if K.FaelineStomp:IsReady()and q and h:IsInRange(10)and ay(K.FaelineStomp)then if m.Cast(K.FaelineStomp,nil,nil)then U=327104;return"Faeline Stomp 520"end end;if K.FallenOrder:IsReady()and q and h:IsInRange(8)then if m.Cast(K.FallenOrder,nil,nil)then U=326860;return"Faeline Stomp 522"end end;if K.BonedustBrew:IsReady()and q and h:IsInRange(8)then if m.Cast(K.BonedustBrew,nil,nil)then U=325216;return"Bonedust Brew 524"end end;if K.Serenity:IsReady()and h:IsInRange(8)and(K.RisingSunKick:CooldownRemains()<2 or d.BossFilteredFightRemains("<",15))then if m.Cast(K.Serenity,nil)then U=152173;return"Serenity 526"end end;if K.BagOfTricks:IsCastable()and h:IsInRange(8)then if m.Cast(K.BagOfTricks,nil,nil,not h:IsInRange(40))then U=312411;return"Bag of Tricks 528"end end end;local function b5()if K.FistsOfFury:IsReady()and not w and h:IsInRange(8)and g:BuffRemains(K.SerenityBuff)<1 and(not UnitsWithBDBCount==0 or not m.AoEON()or R<=3)then if m.Cast(K.FistsOfFury,nil,nil,not h:IsSpellInRange(K.FistsOfFury))then U=113656;return"Fists of Fury 600"end end;if o()and(a8.Commons.Enabled.TopTrinket or a8.Commons.Enabled.BottomTrinket)then if true then local S=aZ()if S then return S end end end;if K.SpinningCraneKick:IsReady()and h:IsInRange(8)and(ay(K.SpinningCraneKick or EnemiesWithMotC>=5)and(m.AoEON()and R>=3 or R>1 and not K.RisingSunKick:CooldownUp()))then if m.Cast(K.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then U=101546;return"Spinning Crane Kick 602"end end;if K.RisingSunKick:IsReady()then if a6.CastTargetIf(K.RisingSunKick,P,"min",aA,aP)then return"Rising Sun Kick 604"end;if aA(h)and aP(h)then if m.Cast(K.RisingSunKick,nil,nil,not h:IsSpellInRange(K.RisingSunKick))then U=107428;return"Rising Sun Kick 606"end end end;if K.FistsOfFury:IsReady()and not w and m.AoEON()and R>=3 and h:IsInRange(8)and(not UnitsWithBDBCount==0 or not m.AoEON()or R<=3)then if m.Cast(K.FistsOfFury,nil,nil,not h:IsSpellInRange(K.FistsOfFury))then U=113656;return"Fists of Fury 608"end end;if K.SpinningCraneKick:IsReady()and h:IsInRange(8)and(ay(K.SpinningCraneKick)or EnemiesWithMotC>=5)and g:BuffUp(K.DanceOfChijiBuff)then if m.Cast(K.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then U=101546;return"Spinning Crane Kick 610"end end;if K.BlackoutKick:IsReady()then if a6.CastTargetIf(K.BlackoutKick,P,"min",aA,aQ)then return"Blackout Kick 612"end;if aA(h)and aQ(h)then if m.Cast(K.BlackoutKick,nil,nil,not h:IsSpellInRange(K.BlackoutKick))then U=100784;return"Blackout Kick 614"end end end;if K.FistsOfFury:IsReady()and not w and(not UnitsWithBDBCount==0 or not m.AoEON()or R<=3)then if m.Cast(K.FistsOfFury,nil,nil,not h:IsSpellInRange(K.FistsOfFury))then U=113656;H=true;return"Fists of Fury 616"end end;if K.SpinningCraneKick:IsReady()and h:IsInRange(8)and UnitsWithBDBCount==0 then if m.Cast(K.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then U=101546;return"Spinning Crane Kick 618"end end;if K.FistOfTheWhiteTiger:IsReady()then if a6.CastTargetIf(K.FistOfTheWhiteTiger,Q,"min",aA,aC)then return"Fist of the White Tiger 620"end;if aA(h)and aC(h)then if m.Cast(K.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(K.FistOfTheWhiteTiger))then U=261947;return"Fist of the White Tiger 622"end end end;if K.BlackoutKick:IsReady()then if a6.CastTargetIf(K.BlackoutKick,P,"min",aA,aR)then return"Blackout Kick 624"end;if aA(h)and aR(h)then if m.Cast(K.BlackoutKick,nil,nil,not h:IsSpellInRange(K.BlackoutKick))then U=100784;return"Blackout Kick 626"end end end;if K.SpinningCraneKick:IsReady()and h:IsInRange(8)then if m.Cast(K.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then U=101546;return"Spinning Crane Kick 628"end end end;local function b6()Z=g:BuffUp(K.WeaponsOfOrder)and(K.RisingSunKick:CooldownRemains()>g:BuffRemains(K.WeaponsOfOrder)and g:BuffRemains(K.WeaponsOfOrder)<2.1 or K.RisingSunKick:CooldownRemains()-g:BuffRemains(K.WeaponsOfOrder)>1.9 and g:BuffRemains(K.WeaponsOfOrder)<4.1 or g:BloodlustRemains()and g:BuffUp(K.InvokersDelightBuff)and g:BuffRemains(K.InvokersDelightBuff)<g:BuffRemains(K.WeaponsOfOrder))if m.CDsON()and not K.Serenity:IsAvailable()then local S=b3()if S then return S end end;if m.CDsON()and K.Serenity:IsAvailable()then local S=b4()if S then return S end end;if K.EnergizingElixir:IsReady()and h:IsInRange(8)and(g:ChiDeficit()>=2 and aw()>3)then if m.Cast(K.EnergizingElixir,nil)then U=115288;return"Energizing Elixir 700"end end;if K.RisingSunKick:IsReady()then if a6.CastTargetIf(K.RisingSunKick,P,"min",aA)then U=107428;return"Rising Sun Kick 702"end;if aA(h)then if m.Cast(K.RisingSunKick,nil,nil,not h:IsSpellInRange(K.RisingSunKick))then U=107428;return"Rising Sun Kick 704"end end end;if K.FistsOfFury:IsReady()and not w and h:IsInRange(8)and R>=2 and g:BuffRemains(K.WeaponsOfOrder)<1 then if m.Cast(K.FistsOfFury,nil,nil,not h:IsSpellInRange(K.FistsOfFury))then U=113656;return"Fists of Fury 708"end end;if K.WhirlingDragonPunch:IsReady()and not u and h:IsInRange(8)and g:BuffUp(K.WhirlingDragonPunchBuff)and R>=2 then if m.Cast(K.WhirlingDragonPunch,nil,nil,not h:IsInMeleeRange(8))then U=152175;return"Whirling Dragon Punch 710"end end;if K.SpinningCraneKick:IsReady()and h:IsInRange(8)and(ay(K.SpinningCraneKick)or EnemiesWithMotC>=5)and R>=3 and g:BuffUp(K.WeaponsOfOrder)then if m.Cast(K.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then U=101546;return"Spinning Crane Kick 706"end end;if K.BlackoutKick:IsReady()then if a6.CastTargetIf(K.BlackoutKick,P,"min",aA,aS)then return"Blackout Kick 712"end;if aA(h)and aS(h)then if m.Cast(K.BlackoutKick,nil,nil,not h:IsSpellInRange(K.BlackoutKick))then U=100784;return"Blackout Kick 714"end end end;if K.SpinningCraneKick:IsReady()and h:IsInMeleeRange(8)and(ay(K.SpinningCraneKick)or EnemiesWithMotC>=5)and g:BuffUp(K.DanceOfChijiBuff)then if m.Cast(K.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then U=101546;return"Spinning Crane Kick 710"end end;if K.ExpelHarm:IsReady()and h:IsInRange(8)and g:Chi()==0 and g:BuffRemains(K.WeaponsOfOrder)<4 then if m.Cast(K.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then U=322101;return"Expel Harm 756"end end;if K.FistOfTheWhiteTiger:IsReady()then if a6.CastTargetIf(K.FistOfTheWhiteTiger,Q,"min",aA,aE)then return"Fist of the White Tiger 722"end;if aA(h)and aE(h)then if m.Cast(K.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(K.FistOfTheWhiteTiger))then U=261947;return"Fist of the White Tiger 724"end end end;if K.WhirlingDragonPunch:IsReady()and not u and h:IsInRange(8)and g:BuffUp(K.WhirlingDragonPunchBuff)then if m.Cast(K.WhirlingDragonPunch,nil,nil,not h:IsInMeleeRange(8))then U=152175;return"Whirling Dragon Punch 716"end end;if K.TigerPalm:IsReady()then if a6.CastTargetIf(K.TigerPalm,P,"min",aN,aM)then return"Tiger Palm 730"end;if aN(h)and aM(h)then if m.Cast(K.TigerPalm,nil,nil,not h:IsSpellInRange(K.TigerPalm))then U=100780;return"Tiger Palm 732"end end end;if K.FistsOfFury:IsReady()and not w and h:IsInRange(8)and g:BuffUp(K.StormEarthAndFireBuff)then if m.Cast(K.FistsOfFury,nil,nil,not h:IsSpellInRange(K.FistsOfFury))then U=113656;I=true;return"Fists of Fury 718"end end;if K.SpinningCraneKick:IsReady()and h:IsInRange(8)and(ay(K.SpinningCraneKick)or EnemiesWithMotC>=5)and g:BuffStack(K.ChiEnergyBuff)>30-5*R then if m.Cast(K.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then U=101546;return"Spinning Crane Kick 720"end end;if K.FistOfTheWhiteTiger:IsReady()then if a6.CastTargetIf(K.FistOfTheWhiteTiger,Q,"min",aA,aC)then return"Fist of the White Tiger 722"end;if aA(h)and aC(h)then if m.Cast(K.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(K.FistOfTheWhiteTiger))then U=261947;return"Fist of the White Tiger 724"end end end;if K.ExpelHarm:IsReady()and h:IsInRange(8)and g:Level()>=43 and g:ChiDeficit()>=1 then if m.Cast(K.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then U=322101;return"Expel Harm 726"end end;if K.ChiBurst:IsReady()and h:IsInRange(30)and g:ChiDeficit()>=1+an(R>=1)then if m.Cast(K.ChiBurst,nil,nil,not h:IsInRange(40))then U=123986;return"Chi Burst 728"end end;if K.TigerPalm:IsReady()then if a6.CastTargetIf(K.TigerPalm,P,"min",aN,aK)then return"Tiger Palm 730"end;if aN(h)and aK(h)then if m.Cast(K.TigerPalm,nil,nil,not h:IsSpellInRange(K.TigerPalm))then U=100780;return"Tiger Palm 732"end end end;if K.BlackoutKick:IsReady()then if a6.CastTargetIf(K.BlackoutKick,P,"min",aA,aT)then return"Blackout Kick 736"end;if aA(h)and aT(h)then if m.Cast(K.BlackoutKick,nil,nil,not h:IsSpellInRange(K.BlackoutKick))then U=100784;return"Blackout Kick 738"end end end;if K.ChiWave:IsReady()and h:IsInRange(8)then if m.Cast(K.ChiWave,nil,nil,not h:IsInRange(40))then U=115098;return"Chi Wave 734"end end;if K.FlyingSerpentKickActionBarReplacement:IsReady()and not v and not a8.Windwalker.IgnoreFSK then if m.Cast(K.FlyingSerpentKickActionBarReplacement,nil,nil,not h:IsInRange(40))then U=101545;return"Flying Serpent Kick Slam 740"end end;if K.FlyingSerpentKick:IsReady()and not v and h:IsInRange(8)and not a8.Windwalker.IgnoreFSK then if m.Cast(K.FlyingSerpentKick,nil,nil,not h:IsInRange(40))then U=101545;return"Flying Serpent Kick 742"end end end;local function b7()if K.WhirlingDragonPunch:IsReady()and not u and h:IsInRange(8)and g:BuffUp(K.WhirlingDragonPunchBuff)then if m.Cast(K.WhirlingDragonPunch,nil,nil,not h:IsInMeleeRange(8))then U=152175;return"Whirling Dragon Punch 800"end end;if K.EnergizingElixir:IsReady()and h:IsInRange(8)and(g:ChiDeficit()>=2 and aw()>3 or g:ChiDeficit()>=4 and(aw()>2 or not g:PrevGCD(1,K.TigerPalm)))then if m.Cast(K.EnergizingElixir,nil)then U=115288;return"Energizing Elixir 802"end end;if K.SpinningCraneKick:IsReady()and h:IsInRange(8)and(ay(K.SpinningCraneKick)or EnemiesWithMotC>=5)and(g:BuffUp(K.DanceOfChijiBuff)or UnitsWithBDBCount>0 and R>=2)then if m.Cast(K.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then U=101546;return"Spinning Crane Kick 804"end end;if K.RisingSunKick:IsReady()and(not UnitsWithBDBCount==0 or EnemiesWithMotC<4 or not K.CalculatedStrikes:SoulbindEnabled())then if a6.CastTargetIf(K.RisingSunKick,P,"min",aA,aU)then return"Rising Sun Kick 806"end;if aA(h)and aU(h)then if m.Cast(K.RisingSunKick,nil,nil,not h:IsSpellInRange(K.RisingSunKick))then U=107428;return"Rising Sun Kick 808"end end end;if K.FistsOfFury:IsReady()and(not UnitsWithBDBCount==0 or EnemiesWithMotC<4 or not K.CalculatedStrikes:SoulbindEnabled())and not w and h:IsInRange(8)and(aw()>K.FistsOfFury:ExecuteTime()-1 or g:ChiDeficit()<=1 or g:BuffRemains(K.StormEarthAndFireBuff)<K.FistsOfFury:ExecuteTime()+1 or d.BossFilteredFightRemains("<",K.FistsOfFury:ExecuteTime()+1))then if m.Cast(K.FistsOfFury,nil,nil,not h:IsSpellInRange(K.FistsOfFury))then U=113656;return"Fists of Fury 810"end end;if K.CracklingJadeLightning:IsReady()and h:IsInRange(40)and(g:BuffStack(K.TheEmperorsCapacitor)>19 and aw()>K.CracklingJadeLightning:ExecuteTime()-1 and K.RisingSunKick:CooldownRemains()>K.CracklingJadeLightning:ExecuteTime()or g:BuffStack(K.TheEmperorsCapacitor)>14 and(K.Serenity:IsAvailable()and K.Serenity:CooldownRemains()<5 or K.WeaponsOfOrder:IsAvailable()and K.WeaponsOfOrder:CooldownRemains()<5 or d.BossFilteredFightRemains("<",20)))then if m.Cast(K.CracklingJadeLightning,nil,nil,not h:IsInRange(40))then U=117952;return"Crackling Jade Lightning 812"end end;if K.RushingJadeWind:IsReady()and h:IsInRange(8)and(g:BuffDown(K.RushingJadeWindBuff)and m.AoEON()and R>1)then if m.Cast(K.RushingJadeWind,nil,nil,not h:IsInMeleeRange(8))then U=116847;return"Rushing Jade Wind 814"end end;if K.FistOfTheWhiteTiger:IsReady()then if a6.CastTargetIf(K.FistOfTheWhiteTiger,Q,"min",aA,aC)then return"Fist of the White Tiger 816"end;if aA(h)and aC(h)then if m.Cast(K.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(K.FistOfTheWhiteTiger))then U=261947;return"Fist of the White Tiger 818"end end end;if K.ExpelHarm:IsReady()and h:IsInRange(8)and g:Level()>=43 and g:ChiDeficit()>=1 then if m.Cast(K.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then U=322101;return"Expel Harm 820"end end;if K.ChiBurst:IsReady()and h:IsInRange(30)and(g:ChiDeficit()>=1 and R==1 or g:ChiDeficit()>=2 and R>=2)then if m.Cast(K.ChiBurst,nil,nil,not h:IsInRange(40))then U=123986;return"Chi Burst 822"end end;if K.ChiWave:IsReady()and h:IsInRange(40)then if m.Cast(K.ChiWave,nil,nil,not h:IsInRange(40))then U=115098;return"Chi Wave 824"end end;if K.TigerPalm:IsReady()then if a6.CastTargetIf(K.TigerPalm,P,"min",aN,aV)then return"Tiger Palm 826"end;if aN(h)and aV(h)then if m.Cast(K.TigerPalm,nil,nil,not h:IsSpellInRange(K.TigerPalm))then U=100780;return"Tiger Palm 828"end end end;if K.SpinningCraneKick:IsReady()and h:IsInRange(8)and(g:BuffStack(K.ChiEnergyBuff)>30-5*R and g:BuffDown(K.StormEarthAndFireBuff)and(K.RisingSunKick:CooldownRemains()>2 and(K.FistsOfFury:CooldownRemains()>2 or w)or K.RisingSunKick:CooldownRemains()<3 and(K.FistsOfFury:CooldownRemains()>3 or w)and g:Chi()>3 or K.RisingSunKick:CooldownRemains()>3 and K.FistsOfFury:CooldownRemains()<3 and g:Chi()>4 or g:ChiDeficit()<=1 and aw()<2)or g:BuffStack(K.ChiEnergyBuff)>10 and d.BossFilteredFightRemains("<",7))then if m.Cast(K.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then U=101546;return"Spinning Crane Kick 830"end end;if K.BlackoutKick:IsReady()and(not UnitsWithBDBCount==0 or EnemiesWithMotC<3 or not K.CalculatedStrikes:SoulbindEnabled()and EnemiesWithMotC<2)then if a6.CastTargetIf(K.BlackoutKick,P,"min",aA,aW)then return"Blackout Kick 832"end;if aA(h)and aW(h)then if m.Cast(K.BlackoutKick,nil,nil,not h:IsSpellInRange(K.BlackoutKick))then U=100784;return"Blackout Kick 834"end end end;if K.TigerPalm:IsReady()then if a6.CastTargetIf(K.TigerPalm,P,"min",aN,aH)then return"Tiger Palm 836"end;if aN(h)and aH(h)then if m.Cast(K.TigerPalm,nil,nil,not h:IsSpellInRange(K.TigerPalm))then U=100780;return"Tiger Palm 838"end end end;if K.ArcaneTorrent:IsReady()and h:IsInRange(8)and g:ChiDeficit()>=1 then if m.Cast(K.ArcaneTorrent,nil,nil,not h:IsInMeleeRange(8))then U=50613;return"Arcane Torrent 402"end end;if K.FlyingSerpentKickActionBarReplacement:IsReady()and not v and not a8.Windwalker.IgnoreFSK then if m.Cast(K.FlyingSerpentKickActionBarReplacement,nil,nil,not h:IsInRange(40))then U=101545;return"Flying Serpent Kick Slam 840"end end;if K.FlyingSerpentKick:IsReady()and not v and h:IsInRange(8)and not a8.Windwalker.IgnoreFSK then if m.Cast(K.FlyingSerpentKick,nil,nil,not h:IsInRange(40))then U=101545;return"Flying Serpent Kick 842"end end;if K.BlackoutKick:IsReady()and(not UnitsWithBDBCount==0 or EnemiesWithMotC<3 or not K.CalculatedStrikes:SoulbindEnabled()and EnemiesWithMotC<2)then if a6.CastTargetIf(K.BlackoutKick,Q,"min",aA,aX)then return"Blackout Kick 844"end;if aA(h)and aX(h)then if m.Cast(K.BlackoutKick,nil,nil,not h:IsSpellInRange(K.BlackoutKick))then U=100784;return"Blackout Kick 846"end end end;if K.BlackoutKick:IsReady()and(not UnitsWithBDBCount==0 or EnemiesWithMotC<3 or not K.CalculatedStrikes:SoulbindEnabled()and EnemiesWithMotC<2)then if a6.CastTargetIf(K.BlackoutKick,Q,"min",aA,aY)then return"Blackout Kick 848"end;if aA(h)and aY(h)then if m.Cast(K.BlackoutKick,nil,nil,not h:IsSpellInRange(K.BlackoutKick))then U=100784;return"Blackout Kick 850"end end end end;local function b8()s=HeroRotationCharDB.Toggles[6]q=HeroRotationCharDB.Toggles[4]r=HeroRotationCharDB.Toggles[5]C=HeroRotationCharDB.Toggles[12]t=HeroRotationCharDB.Toggles[15]u=HeroRotationCharDB.Toggles[31]v=HeroRotationCharDB.Toggles[32]w=HeroRotationCharDB.Toggles[33]x=HeroRotationCharDB.Toggles[34]y=HeroRotationCharDB.Toggles[35]z=HeroRotationCharDB.Toggles[36]A=HeroRotationCharDB.Toggles[37]B=HeroRotationCharDB.Toggles[38]_=false;F=false;G=false;if a8.Windwalker.IncludedCooldowns.Xuen and o()or a8.Windwalker.IncludedSmallCooldowns.Xuen and(o()or r)or not a8.Windwalker.IncludedSmallCooldowns.Xuen and not a8.Windwalker.IncludedCooldowns.Xuen and not a8.Windwalker.IncludedSmallCooldowns.SEFEcho and not a8.Windwalker.IncludedCooldowns.SEFEco then F=true end;if a8.Windwalker.IncludedCooldowns.SEFFull and o()or a8.Windwalker.IncludedSmallCooldowns.SEFFull and(o()or r)or not a8.Windwalker.IncludedSmallCooldowns.SEFFull and not a8.Windwalker.IncludedCooldowns.SEFFull or(a8.Windwalker.IncludedCooldowns.SEFEco and o()and K.StormEarthAndFire:ChargesFractional()>a8.Windwalker.SEFEcoCharge or a8.Windwalker.IncludedSmallCooldowns.SEFEco and(o()or r)and K.StormEarthAndFire:ChargesFractional()>a8.Windwalker.SEFEcoCharge or not a8.Windwalker.IncludedSmallCooldowns.SEFEco and not a8.Windwalker.IncludedCooldowns.SEFEco and K.StormEarthAndFire:ChargesFractional()>a8.Windwalker.SEFEcoCharge)then G=true end end;local function b9()local ba=0;local bb={322968,319603,319611,325876,334493,334496,332605,328494,326836,336277,319669,323831,330725,333299}if UnitExists("mouseover")then if UnitIsDead("mouseover")==true and UnitCanAttack("player","mouseover")~=true then ba=9999 else for am=0,40 do local al,al,bc,bd,al,al,al,al,al,be=UnitDebuff("mouseover",am)for al,bf in pairs(bb)do if bf==be then if bd=="Magic"then ba=1 elseif bd=="Poison"then ba=2 elseif bd=="Disease"then ba=3 elseif bd=="Curse"then ba=4 end end end end end end;if ba==2 or DebuffCheckC==3 and K.Detox:IsReady()and f("mouseover"):IsInRange(40)then if m.Cast(K.Detox,nil,nil,not h:IsInRange(40))then U=218164;return"Detox MO"end end end;local function bg()P=g:GetEnemiesInMeleeRange(5)Q=g:GetEnemiesInMeleeRange(8)if p()then Enemies10ySplash=h:GetEnemiesInSplashRange(10)R=#Q else Enemies10ySplash=1;R=1 end;EnemiesWithMotC=GetSpellCount(101546)UnitsWithBDBCount=aq(Q)UnitsWithBDBSEFCount=av(Q)local bh=g:IsTankingAoE(8)or g:IsTanking(h)ak()if not BotOn then T=0;U=0;V=0 end;if T>0 then T=0 end;if U>0 then U=0 end;if V>0 then V=0 end;S=b8()S=b9()if g:IsInInstancedPvP()and not g:StealthUp(true,true)and not g:IsMounted()then if K.Paralysis:IsReady()and f("focus"):IsSpellInRange(K.Paralysis)and select(1,UnitCastingInfo("focus"))=="Convoke the Spirits"then V=1 end;if K.SpearHandStrike:IsReady()and f("focus"):IsSpellInRange(K.SpearHandStrike)and not g:StealthUp(true,true)and UnitExists("focus")and not UnitIsUnit("focus",player)and(select(2,UnitClass("focus"))=="DRUID"and select(1,UnitCastingInfo("focus"))=="Convoke the Spirits")and select(1,UnitCastingInfo("focus"))=="Convoke the Spirits"then V=2 end;if K.LegSweep:IsReady()and f("focus"):IsInRange(7)and not g:StealthUp(true,true)and UnitExists("focus")and not UnitIsUnit("focus",player)and(select(2,UnitClass("arena1"))=="DRUID"or select(2,UnitClass("arena2"))=="DRUID"or select(2,UnitClass("arena3"))=="DRUID")and f("focus"):IsInRange(7)and select(1,UnitCastingInfo("focus"))=="Convoke the Spirits"then V=3 end;local bi={327196,64843,2061,32546,207778,124682,191837,19750,289666,120517,2060,73920,8044,77472,82326,265202,289022,47540,184509,596,33076,8936,186263,115175,227344,740,116670,197995,48438,1064}for am=1,20 do local bj="nameplate"..am;if UnitIsEnemy("player",bj)then for bk=1,#bi do local bl=f("focus"):CastSpellID()if bl then end;if bl==bi[am]and not g:StealthUp(true,true)and f("focus"):IsSpellInRange(K.SpearHandStrike)and f("focus"):IsInterruptible()then V=2 end;if bl==bi[am]and not g:StealthUp(true,true)and f("focus"):IsSpellInRange(K.Paralysis)and f("focus"):CanBeStunned(IgnoreClassification)then V=1 end;if bl==bi[am]and not g:StealthUp(true,true)and f("focus"):IsInRange(8)and f("focus"):CanBeStunned(IgnoreClassification)then V=3 end end end end end;if a6.TargetIsValid()and not g:IsDeadOrGhost()then if not g:AffectingCombat()and s then local S=b0()if S then return S end end;if K.FlyingSerpentKickActionBarReplacement:IsReady()and not v and not a8.Windwalker.IgnoreFSK and g:AffectingCombat()then if m.Cast(K.FlyingSerpentKickActionBarReplacement,nil,nil,not h:IsInRange(40))then U=101545;return"Flying Serpent Kick Slam 740"end end;if g:IsChanneling(K.FistsOfFury)and B then if m.Cast(K.PoolEnergy,nil,nil,nil)then U=1000;return"Casting FoF"end end;if g:IsChanneling(K.FistsOfFury)and(not H or K.RisingSunKick:CooldownRemains()<=0)and not I and g:AffectingCombat()then if m.Cast(K.PoolEnergy,nil,nil,nil)then U=99999;return"Casting FoF"end elseif(H==true or I==true)and not g:IsChanneling(K.FistsOfFury)then H=false;I=false end;if x and K.LegSweep:IsUsableP()and K.LegSweep:CooldownRemains(BypassRecovery)<=0 then if m.Cast(K.LegSweep,nil,nil,nil)then U=119381;return"queue Leg Sweep"end elseif(not K.LegSweep:IsUsableP()or K.LegSweep:CooldownRemains(BypassRecovery)>0)and x then HeroRotationCharDB.Toggles[34]=not HeroRotationCharDB.Toggles[34]m.Print("Leg Sweep Queue is now "..(HeroRotationCharDB.Toggles[34]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if y and K.Paralysis:IsUsableP()and K.Paralysis:CooldownRemains(BypassRecovery)<=0 then if m.Cast(K.Paralysis,nil,nil,nil)then if f("mouseover"):GUID()~=nil and f("mouseover"):IsSpellInRange(K.Paralysis)then T=1115078;return"queue Paralysis MO"else U=115078;return"queue Paralysis"end end elseif(not K.Paralysis:IsUsableP()or K.Paralysis:CooldownRemains(BypassRecovery)>0)and y then HeroRotationCharDB.Toggles[35]=not HeroRotationCharDB.Toggles[35]m.Print("Paralysis Queue is now "..(HeroRotationCharDB.Toggles[35]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if z and K.RingOfPeace:IsAvailable()and K.RingOfPeace:IsUsableP()and K.RingOfPeace:CooldownRemains(BypassRecovery)<=0 then if m.Cast(K.RingOfPeace,nil,nil,nil)then U=116844;return"queue RingOfPeace"end elseif(not K.RingOfPeace:IsUsableP()or K.RingOfPeace:CooldownRemains(BypassRecovery)>0 or not K.RingOfPeace:IsAvailable())and z then HeroRotationCharDB.Toggles[36]=not HeroRotationCharDB.Toggles[36]m.Print("RingOfPeace Queue is now "..(HeroRotationCharDB.Toggles[36]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if A and K.BonedustBrew:IsUsableP()and K.BonedustBrew:CooldownRemains(BypassRecovery)<=0 then if m.Cast(K.BonedustBrew,nil,nil,nil)then U=325216;return"queue BonedustBrew"end elseif(not K.BonedustBrew:IsUsableP()or K.BonedustBrew:CooldownRemains(BypassRecovery)>0)and A then HeroRotationCharDB.Toggles[37]=not HeroRotationCharDB.Toggles[37]m.Print("BonedustBrew Queue is now "..(HeroRotationCharDB.Toggles[37]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if a8.Commons.UseDefensives and g:AffectingCombat()then if K.FortifyingBrew:IsReady()and g:HealthPercentage()<a8.Commons.FortifyingBrew then if m.Cast(K.FortifyingBrew,nil,nil,nil)then U=243435;return"Fortifying Brew 100"end end;if K.TouchOfKarma:IsReady()and g:HealthPercentage()<a8.Commons.TouchofKarma then if m.Cast(K.TouchOfKarma,nil,nil,nil)then U=122470;return"ToK 100"end end;if g:HealthPercentage()<a8.Commons.PhialHP and L.PhialofSerenity:IsReady()and L.PhialofSerenity:CooldownRemains()<=0 then if m.Cast(L.PhialofSerenity,nil)then U=55;return"PhialofSerenity HP"end end;if g:HealthPercentage()<a8.Commons.HealthstoneHP and L.Healthstone:IsReady()and L.Healthstone:CooldownRemains()<=0 then if m.Cast(L.Healthstone,nil)then U=40;return"Healthstone HP"end end;if g:HealthPercentage()<a8.Commons.HealPotHP and L.HealPot:IsReady()and L.HealPot:CooldownRemains()<=0 then if m.Cast(L.HealPot,nil)then U=41;return"HealPot HP"end end end;if true then X=(d.BossFilteredFightRemains("<",K.InvokeXuenTheWhiteTiger:CooldownRemains())or not F or(d.BossFilteredFightRemains("<",120+K.InvokeXuenTheWhiteTiger:CooldownRemains())or not F))and(K.Serenity:IsAvailable()and d.BossFilteredFightRemains(">",K.Serenity:CooldownRemains())and K.Serenity:CooldownRemains()>10 or d.BossFilteredFightRemains(">",K.StormEarthAndFire:FullRechargeTime())and K.StormEarthAndFire:FullRechargeTime()>15 or K.StormEarthAndFire:Charges()==0 and d.BossFilteredFightRemains(">",K.StormEarthAndFire:CooldownRemains()))or not F end;if L.PotionofPhantomFire:IsReady()and g:AffectingCombat()and h:IsInRange(8)and a8.Commons.UsePotions and((g:BuffUp(K.SerenityBuff)or g:BuffUp(K.StormEarthAndFireBuff))and K.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or d.BossFilteredFightRemains("<=",60))then if m.CastSuggested(L.PotionofPhantomFire)then U=32;return"Potion of Phantom Fire 102"end end;if L.PotionofSpectralAgility:IsReady()and g:AffectingCombat()and h:IsInRange(8)and a8.Commons.UsePotions and((g:BuffUp(K.SerenityBuff)or g:BuffUp(K.StormEarthAndFireBuff))and K.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or d.BossFilteredFightRemains("<=",60))then if m.CastSuggested(L.PotionofSpectralAgility)then U=32;return"Potion of Spectral Agility 104"end end;if L.PotionofDeathlyFixation:IsReady()and g:AffectingCombat()and h:IsInRange(8)and a8.Commons.UsePotions and((g:BuffUp(K.SerenityBuff)or g:BuffUp(K.StormEarthAndFireBuff))and K.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or d.BossFilteredFightRemains("<=",60))then if m.CastSuggested(L.PotionofDeathlyFixation)then U=32;return"Potion of Deathly Fixation 106"end end;if L.PotionofEmpoweredExorcisms:IsReady()and g:AffectingCombat()and h:IsInRange(8)and a8.Commons.UsePotions and((g:BuffUp(K.SerenityBuff)or g:BuffUp(K.StormEarthAndFireBuff))and K.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or d.BossFilteredFightRemains("<=",60))then if m.CastSuggested(L.PotionofEmpoweredExorcisms)then U=32;return"Potion of Empowered Exorcisms 108"end end;if L.PotionofHardenedShadows:IsReady()and g:AffectingCombat()and h:IsInRange(8)and a8.Commons.UsePotions and((g:BuffUp(K.SerenityBuff)or g:BuffUp(K.StormEarthAndFireBuff))and K.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or d.BossFilteredFightRemains("<=",60))then if m.CastSuggested(L.PotionofHardenedShadows)then U=32;return"Potion of Hardened Shadows 110"end end;if L.PotionofSpectralStamina:IsReady()and g:AffectingCombat()and h:IsInRange(8)and a8.Commons.UsePotions and((g:BuffUp(K.SerenityBuff)or g:BuffUp(K.StormEarthAndFireBuff))and K.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or d.BossFilteredFightRemains("<=",60))then if m.CastSuggested(L.PotionofSpectralStamina)then U=32;return"Potion of Spectral Stamina 112"end end;if g:BuffUp(K.SerenityBuff)and g:AffectingCombat()then local S=b5()if S then return S end end;if g:BuffUp(K.WeaponsOfOrder)and g:AffectingCombat()then local S=b6()if S then return S end end;if d.CombatTime()<4 and g:Chi()<5 and not(K.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24)and(g:AffectingCombat()or s)then local S=b1()if S then return S end end;if K.FistOfTheWhiteTiger:IsReady()and g:AffectingCombat()then if a6.CastTargetIf(K.FistOfTheWhiteTiger,P,"min",aA,aD)then return"Fist of the White Tiger 114"end;if aA(h)and aD(h)then if m.Cast(K.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(K.FistOfTheWhiteTiger))then U=261947;return"Fist of the White Tiger 116"end end end;if K.ExpelHarm:IsReady()and g:AffectingCombat()and h:IsInRange(8)and g:Level()>=43 and g:ChiDeficit()>=1 and(aw()<1 or K.Serenity:CooldownRemains()<2 or(aw()<4 and K.FistsOfFury:CooldownRemains()<1.5 or K.WeaponsOfOrder:CooldownRemains()<2))and not UnitsWithBDBCount==0 then if m.Cast(K.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then U=322101;return"Expel Harm 118"end end;if K.TigerPalm:IsReady()and g:AffectingCombat()then if a6.CastTargetIf(K.TigerPalm,Q,"min",aA,aF)then return"Tiger Palm 120"end;if aA(h)and aF(h)then if m.Cast(K.TigerPalm,nil,nil,not h:IsSpellInRange(K.TigerPalm))then U=100780;return"Tiger Palm 122"end end end;if(m.CDsON()or not m.CDsON())and not K.Serenity:IsAvailable()and g:AffectingCombat()then local S=b3()if S then return S end end;if(m.CDsON()or not m.CDsON())and K.Serenity:IsAvailable()and g:AffectingCombat()then local S=b4()if S then return S end end;if(R<3 or not m.AoEON())and g:AffectingCombat()then local S=b7()if S then return S end end;if m.AoEON()and R>=3 and g:AffectingCombat()then local S=b2()if S then return S end end;if g:AffectingCombat()then if m.Cast(K.PoolEnergy)and not a8.Windwalker.NoWindwalkerPooling then return"Pool Energy"end end end end;local function bm()end;function ReturnSpell()if U==0 then return 0 else return U end end;function ReturnSpellMO()if T==0 then return 0 else return T end end;function ReturnSpellFocus()if V==0 then return 0 else return V end end;m.SetAPL(269,bg,bm)