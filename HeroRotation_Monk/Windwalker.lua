local a,b=...local c=HeroDBC.DBC;local d=HeroLib;local e=HeroCache;local f=d.Unit;local g=f.Player;local h=f.Target;local i=f.Pet;local j=d.Spell;local k=d.MultiSpell;local l=d.Item;local m=HeroRotation;local n=m.Cast;local o=m.CDsON;local p=m.AoEON;local q=HeroRotationCharDB.Toggles[4]local r=HeroRotationCharDB.Toggles[5]local s=HeroRotationCharDB.Toggles[6]local t=HeroRotationCharDB.Toggles[15]local u=HeroRotationCharDB.Toggles[31]local v=HeroRotationCharDB.Toggles[32]local w=HeroRotationCharDB.Toggles[33]local x=HeroRotationCharDB.Toggles[34]local y=HeroRotationCharDB.Toggles[35]local z=HeroRotationCharDB.Toggles[36]local A=HeroRotationCharDB.Toggles[37]local B=HeroRotationCharDB.Toggles[38]local C=HeroRotationCharDB.Toggles[12]local D=0;local E=nil;local F=nil;local G=false;local H=false;local I=false;local J=false;local K=GetInventoryItemID("player",13)local L=GetInventoryItemID("player",14)local M=math.min;local pairs=pairs;local N=j.Monk.Windwalker;local O=l.Monk.Windwalker;local P={O.InscrutibleQuantumDevice:ID(),O.Wrathstone:ID(),O.ShadowgraspTotem:ID(),O.OverchargedAnimaBattery:ID(),O.GladiatorsBadgeCosmic:ID(),O.GladiatorsBadgeSinful:ID(),O.GladiatorsBadgeUnchained:ID(),O.TheFirstSigil:ID(),O.CacheofAcquiredTreasures:ID()}local Q;local R;local S;local T;local U;local V;local W;local X;local Y=0;local Z=0;local _=0;local a0=false;local a1=false;local a2=false;local a3=false;local a4;local a5=false;local a6={{N.SpearHandStrike,"Cast Spear Hand Strike (Interrupt)",function()return true end}}local a7={{N.LegSweep,"Cast Leg Sweep (Stun)",function()return true end}}local a8={{N.RingOfPeace,"Cast Ring Of Peace (Stun)",function()return true end}}local a9={{N.Paralysis,"Cast Paralysis (Stun)",function()return true end}}local aa=false;local ab=0;local ac=m.Commons.Everyone;local ad=m.Commons.Monk;local ae={General=m.GUISettings.General,Commons=m.GUISettings.APL.Monk.Commons,Windwalker=m.GUISettings.APL.Monk.Windwalker}local af=g:HasLegendaryEquipped(88)local ag=g:HasLegendaryEquipped(82)local ah=g:HasLegendaryEquipped(85)local ai=g:HasLegendaryEquipped(83)local aj=g:HasLegendaryEquipped(96)local ak=g:HasLegendaryEquipped(95)local al=g:HasLegendaryEquipped(97)local am=g:HasLegendaryEquipped(94)local an=g:HasLegendaryEquipped(257)d:RegisterForEvent(function()af=g:HasLegendaryEquipped(88)ag=g:HasLegendaryEquipped(82)ah=g:HasLegendaryEquipped(85)ai=g:HasLegendaryEquipped(83)aj=g:HasLegendaryEquipped(96)ak=g:HasLegendaryEquipped(95)al=g:HasLegendaryEquipped(97)am=g:HasLegendaryEquipped(94)an=g:HasLegendaryEquipped(257)end,"PLAYER_EQUIPMENT_CHANGED")local ao=g:CovenantID()d:RegisterForEvent(function()ao=g:CovenantID()end,"COVENANT_CHOSEN")d:RegisterForEvent(function()ab=0 end,"PLAYER_REGEN_ENABLED")local function ap(aq)if aq then return 1 else return 0 end end;local function ar(aq)return aq~=0 end;local function as(at)local au=0;for av in pairs(at)do local aw=at[av]if aw:DebuffUp(N.BonedustBrew)then au=au+1 end end;return au end;local function ax(at)local au=0;for av in pairs(at)do local aw=at[av]if aw:DebuffRemains(N.BonedustBrew)>2 then au=au+1 end end;return au end;local function ay()return math.floor(g:EnergyTimeToMaxPredicted()*10+0.5)/10 end;local function az()return math.floor(g:EnergyPredicted()+0.5)end;local function aA(aB)return not g:PrevGCD(1,aB)end;local function aC(aD)return aD:DebuffRemains(N.MarkOfTheCraneDebuff)end;local function aE(aD)return aD:DebuffRemains(N.MarkOfTheCraneDebuff)+ap(aD:DebuffUp(N.SkyreachExhaustion))*20 end;local function aF(aD)if g:Chi()<3 and aD:GUID()==f("mouseover"):GUID()then Y=1261947;return true elseif g:Chi()<3 and ae.Windwalker.TargetSwap=="AutoSwap"and aD:GUID()~=h:GUID()and not C and not string.find(aD:GUID(),174773)then Y=999;return true elseif g:Chi()<3 and aD:GUID()==h:GUID()then Z=261947;return true elseif g:Chi()<3 and not string.find(aD:GUID(),174773)then return true end end;local function aG(aD)if g:ChiDeficit()>=3 and(ay()<1 or ay()<4 and N.FistsOfFury:CooldownRemains()<1.5 or N.WeaponsOfOrder:CooldownRemains()<2)and UnitsWithBDBCount==0 and aD:IsInMeleeRange(10)and aD:GUID()==f("mouseover"):GUID()then Y=1261947;return true elseif g:ChiDeficit()>=3 and(ay()<1 or ay()<4 and N.FistsOfFury:CooldownRemains()<1.5 or N.WeaponsOfOrder:CooldownRemains()<2)and UnitsWithBDBCount==0 and aD:IsInMeleeRange(10)and ae.Windwalker.TargetSwap=="AutoSwap"and aD:GUID()~=h:GUID()and not C and not string.find(aD:GUID(),174773)then Y=999;return true elseif g:ChiDeficit()>=3 and(ay()<1 or ay()<4 and N.FistsOfFury:CooldownRemains()<1.5 or N.WeaponsOfOrder:CooldownRemains()<2)and UnitsWithBDBCount==0 and aD:IsInMeleeRange(10)and aD:GUID()==h:GUID()then Z=261947;return true elseif g:ChiDeficit()>=3 and(ay()<1 or ay()<4 and N.FistsOfFury:CooldownRemains()<1.5 or N.WeaponsOfOrder:CooldownRemains()<2)and UnitsWithBDBCount==0 and aD:IsInMeleeRange(10)and not string.find(aD:GUID(),174773)then return true end end;local function aH(aD)if aA(N.TigerPalm)and(g:ChiDeficit()>=2 or a4)and(ay()<1 or N.Serenity:CooldownRemains()<2 or ay()<4 and N.FistsOfFury:CooldownRemains()<1.5 or N.WeaponsOfOrder:CooldownRemains()<2)and UnitsWithBDBCount==0 and aD:IsInMeleeRange(10)and aD:GUID()==f("mouseover"):GUID()then Y=1100780;return true elseif aA(N.TigerPalm)and(g:ChiDeficit()>=2 or a4)and(ay()<1 or N.Serenity:CooldownRemains()<2 or ay()<4 and N.FistsOfFury:CooldownRemains()<1.5 or N.WeaponsOfOrder:CooldownRemains()<2)and UnitsWithBDBCount==0 and aD:IsInMeleeRange(10)and ae.Windwalker.TargetSwap=="AutoSwap"and aD:GUID()~=h:GUID()and not C and not string.find(aD:GUID(),174773)then Y=999;return true elseif aA(N.TigerPalm)and(g:ChiDeficit()>=2 or a4)and(ay()<1 or N.Serenity:CooldownRemains()<2 or ay()<4 and N.FistsOfFury:CooldownRemains()<1.5 or N.WeaponsOfOrder:CooldownRemains()<2)and UnitsWithBDBCount==0 and aD:IsInMeleeRange(10)and aD:GUID()==h:GUID()then Z=100780;return true elseif aA(N.TigerPalm)and(g:ChiDeficit()>=2 or a4)and(ay()<1 or N.Serenity:CooldownRemains()<2 or ay()<4 and N.FistsOfFury:CooldownRemains()<1.5 or N.WeaponsOfOrder:CooldownRemains()<2)and UnitsWithBDBCount==0 and aD:IsInMeleeRange(10)and not string.find(aD:GUID(),174773)then return true end end;local function aI(aD)if g:ChiDeficit()>=3 and aD:IsInMeleeRange(10)and aD:GUID()==f("mouseover"):GUID()then Y=1261947;return true elseif g:ChiDeficit()>=3 and aD:IsInMeleeRange(10)and ae.Windwalker.TargetSwap=="AutoSwap"and aD:GUID()~=h:GUID()and not C then Y=999;return true elseif g:ChiDeficit()>=3 and aD:IsInMeleeRange(10)and aD:GUID()==h:GUID()then Z=261947;return true elseif g:ChiDeficit()>=3 and aD:IsInMeleeRange(10)and not string.find(aD:GUID(),174773)then return true end end;local function aJ(aD)if aA(N.TigerPalm)and(g:ChiDeficit()>=2 or a4)and aD:IsInMeleeRange(10)and aD:GUID()==f("mouseover"):GUID()then Y=1100780;return true elseif aA(N.TigerPalm)and(g:ChiDeficit()>=2 or a4)and aD:IsInMeleeRange(10)and ae.Windwalker.TargetSwap=="AutoSwap"and aD:GUID()~=h:GUID()and not C and not string.find(aD:GUID(),174773)then Y=999;return true elseif aA(N.TigerPalm)and(g:ChiDeficit()>=2 or a4)and aD:IsInMeleeRange(10)and aD:GUID()==h:GUID()then Z=100780;return true elseif aA(N.TigerPalm)and(g:ChiDeficit()>=2 or a4)and aD:IsInMeleeRange(10)and not string.find(aD:GUID(),174773)then return true end end;local function aK(aD)if g:ChiDeficit()==2 and aD:IsInMeleeRange(10)and aD:GUID()==f("mouseover"):GUID()then Y=1100780;return true elseif g:ChiDeficit()==2 and aD:IsInMeleeRange(10)and ae.Windwalker.TargetSwap=="AutoSwap"and aD:GUID()~=h:GUID()and not C and not string.find(aD:GUID(),174773)then Y=999;return true elseif g:ChiDeficit()==2 and aD:IsInMeleeRange(10)and aD:GUID()==h:GUID()then Z=100780;return true elseif g:ChiDeficit()==2 and aD:IsInMeleeRange(10)and not string.find(aD:GUID(),174773)then return true end end;local function aL(aD)if N.WhirlingDragonPunch:IsAvailable()and 10/(1+g:HastePct()/100)>N.WhirlingDragonPunch:CooldownRemains()+4 and(N.FistsOfFury:CooldownRemains()>3 or w or g:Chi()>=5)and aD:IsInMeleeRange(10)and aD:GUID()==f("mouseover"):GUID()then Y=1107428;return true elseif N.WhirlingDragonPunch:IsAvailable()and 10/(1+g:HastePct()/100)>N.WhirlingDragonPunch:CooldownRemains()+4 and(N.FistsOfFury:CooldownRemains()>3 or w or g:Chi()>=5)and aD:IsInMeleeRange(10)and ae.Windwalker.TargetSwap=="AutoSwap"and aD:GUID()~=h:GUID()and not C and not string.find(aD:GUID(),174773)then Y=999;return true elseif N.WhirlingDragonPunch:IsAvailable()and 10/(1+g:HastePct()/100)>N.WhirlingDragonPunch:CooldownRemains()+4 and(N.FistsOfFury:CooldownRemains()>3 or w or g:Chi()>=5)and aD:IsInMeleeRange(10)and aD:GUID()==h:GUID()then Z=107428;return true elseif N.WhirlingDragonPunch:IsAvailable()and 10/(1+g:HastePct()/100)>N.WhirlingDragonPunch:CooldownRemains()+4 and(N.FistsOfFury:CooldownRemains()>3 or w or g:Chi()>=5)and aD:IsInMeleeRange(10)and not string.find(aD:GUID(),174773)then return true end end;local function aM(aD)if g:ChiDeficit()>=2 and(not N.HitCombo:IsAvailable()or aA(N.TigerPalm))and aD:IsInMeleeRange(10)and aD:GUID()==f("mouseover"):GUID()then Y=1100780;return true elseif g:ChiDeficit()>=2 and(not N.HitCombo:IsAvailable()or aA(N.TigerPalm))and aD:IsInMeleeRange(10)and ae.Windwalker.TargetSwap=="AutoSwap"and aD:GUID()~=h:GUID()and not C and not string.find(aD:GUID(),174773)then Y=999;return true elseif g:ChiDeficit()>=2 and(not N.HitCombo:IsAvailable()or aA(N.TigerPalm))and aD:IsInMeleeRange(10)and aD:GUID()==h:GUID()then Z=100780;return true elseif g:ChiDeficit()>=2 and(not N.HitCombo:IsAvailable()or aA(N.TigerPalm))and aD:IsInMeleeRange(10)and not string.find(aD:GUID(),174773)then return true end end;local function aN(aD)if aA(N.BlackoutKick)and(g:BuffUp(N.BlackoutKickBuff)or N.HitCombo:IsAvailable()and g:PrevGCD(1,N.TigerPalm)and g:Chi()==2 and N.FistsOfFury:CooldownRemains()<3 or g:ChiDeficit()<=1 and g:PrevGCD(1,N.SpinningCraneKick)and ay()<3)and aD:IsInMeleeRange(10)and aD:GUID()==f("mouseover"):GUID()then Y=1100784;return true elseif aA(N.BlackoutKick)and(g:BuffUp(N.BlackoutKickBuff)or N.HitCombo:IsAvailable()and g:PrevGCD(1,N.TigerPalm)and g:Chi()==2 and N.FistsOfFury:CooldownRemains()<3 or g:ChiDeficit()<=1 and g:PrevGCD(1,N.SpinningCraneKick)and ay()<3)and aD:IsInMeleeRange(10)and ae.Windwalker.TargetSwap=="AutoSwap"and aD:GUID()~=h:GUID()and not C and not string.find(aD:GUID(),174773)then Y=999;return true elseif aA(N.BlackoutKick)and(g:BuffUp(N.BlackoutKickBuff)or N.HitCombo:IsAvailable()and g:PrevGCD(1,N.TigerPalm)and g:Chi()==2 and N.FistsOfFury:CooldownRemains()<3 or g:ChiDeficit()<=1 and g:PrevGCD(1,N.SpinningCraneKick)and ay()<3)and aD:IsInMeleeRange(10)and aD:GUID()==h:GUID()then Z=100784;return true elseif aA(N.BlackoutKick)and(g:BuffUp(N.BlackoutKickBuff)or N.HitCombo:IsAvailable()and g:PrevGCD(1,N.TigerPalm)and g:Chi()==2 and N.FistsOfFury:CooldownRemains()<3 or g:ChiDeficit()<=1 and g:PrevGCD(1,N.SpinningCraneKick)and ay()<3)and aD:IsInMeleeRange(10)and not string.find(aD:GUID(),174773)then return true end end;local function aO(aD)if aA(N.RisingSunKick)and aD:IsInMeleeRange(10)and aD:GUID()==f("mouseover"):GUID()then Y=1107428;return true elseif aA(N.RisingSunKick)and aD:IsInMeleeRange(10)and ae.Windwalker.TargetSwap=="AutoSwap"and aD:GUID()~=h:GUID()and not C and not string.find(aD:GUID(),174773)then Y=999;return true elseif aA(N.RisingSunKick)and aD:IsInMeleeRange(10)and aD:GUID()==h:GUID()then Z=107428;return true elseif aA(N.RisingSunKick)and aD:IsInMeleeRange(10)and not string.find(aD:GUID(),174773)then return true end end;local function aP(aD)if aA(N.BlackoutKick)and g:BuffUp(N.WeaponsOfOrder)and N.RisingSunKick:CooldownRemains()>2 and aD:IsInMeleeRange(10)and aD:GUID()==f("mouseover"):GUID()then Y=1100784;return true elseif aA(N.BlackoutKick)and g:BuffUp(N.WeaponsOfOrder)and N.RisingSunKick:CooldownRemains()>2 and aD:IsInMeleeRange(10)and ae.Windwalker.TargetSwap=="AutoSwap"and aD:GUID()~=h:GUID()and not C and not string.find(aD:GUID(),174773)then Y=999;return true elseif aA(N.BlackoutKick)and g:BuffUp(N.WeaponsOfOrder)and N.RisingSunKick:CooldownRemains()>2 and aD:IsInMeleeRange(10)and aD:GUID()==h:GUID()then Z=100784;return true elseif aA(N.BlackoutKick)and g:BuffUp(N.WeaponsOfOrder)and N.RisingSunKick:CooldownRemains()>2 and aD:IsInMeleeRange(10)and not string.find(aD:GUID(),174773)then return true end end;local function aQ(aD)if(aA(N.BlackoutKick)or not N.HitCombo:IsAvailable())and aD:IsInMeleeRange(10)and aD:GUID()==f("mouseover"):GUID()then Y=1100784;return true elseif(aA(N.BlackoutKick)or not N.HitCombo:IsAvailable())and aD:IsInMeleeRange(10)and ae.Windwalker.TargetSwap=="AutoSwap"and aD:GUID()~=h:GUID()and not C and not string.find(aD:GUID(),174773)then Y=999;return true elseif(aA(N.BlackoutKick)or not N.HitCombo:IsAvailable())and aD:IsInMeleeRange(10)and aD:GUID()==h:GUID()then Z=100784;return true elseif(aA(N.BlackoutKick)or not N.HitCombo:IsAvailable())and aD:IsInMeleeRange(10)and not string.find(aD:GUID(),174773)then return true end end;local function aR(aD)if aA(N.BlackoutKick)and N.FistsOfFury:CooldownRemains()>0 and N.RisingSunKick:CooldownRemains()>0 and g:BuffUp(N.WeaponsOfOrderChiBuff)and aD:IsInMeleeRange(10)and aD:GUID()==f("mouseover"):GUID()then Y=1100784;return true elseif aA(N.BlackoutKick)and N.FistsOfFury:CooldownRemains()>0 and N.RisingSunKick:CooldownRemains()>0 and g:BuffUp(N.WeaponsOfOrderChiBuff)and aD:IsInMeleeRange(10)and ae.Windwalker.TargetSwap=="AutoSwap"and aD:GUID()~=h:GUID()and not C and not string.find(aD:GUID(),174773)then Y=999;return true elseif aA(N.BlackoutKick)and N.FistsOfFury:CooldownRemains()>0 and N.RisingSunKick:CooldownRemains()>0 and g:BuffUp(N.WeaponsOfOrderChiBuff)and aD:IsInMeleeRange(10)and aD:GUID()==h:GUID()then Z=100784;return true elseif aA(N.BlackoutKick)and N.FistsOfFury:CooldownRemains()>0 and N.RisingSunKick:CooldownRemains()>0 and g:BuffUp(N.WeaponsOfOrderChiBuff)and aD:IsInMeleeRange(10)and not string.find(aD:GUID(),174773)then return true end end;local function aS(aD)if(N.Serenity:CooldownRemains()>1 or not N.Serenity:IsAvailable()and(N.WeaponsOfOrder:CooldownRemains()>4 or ao~=1))and aD:IsInMeleeRange(10)and aD:GUID()==f("mouseover"):GUID()then Y=1107428;return true elseif(N.Serenity:CooldownRemains()>1 or not N.Serenity:IsAvailable()and(N.WeaponsOfOrder:CooldownRemains()>4 or ao~=1))and aD:IsInMeleeRange(10)and ae.Windwalker.TargetSwap=="AutoSwap"and aD:GUID()~=h:GUID()and not C and not string.find(aD:GUID(),174773)then Y=999;return true elseif(N.Serenity:CooldownRemains()>1 or not N.Serenity:IsAvailable()and(N.WeaponsOfOrder:CooldownRemains()>4 or ao~=1))and aD:IsInMeleeRange(10)and aD:GUID()==h:GUID()then Z=107428;return true elseif(N.Serenity:CooldownRemains()>1 or not N.Serenity:IsAvailable()and(N.WeaponsOfOrder:CooldownRemains()>4 or ao~=1))and aD:IsInMeleeRange(10)and not string.find(aD:GUID(),174773)then return true end end;local function aT(aD)if aA(N.TigerPalm)and g:ChiDeficit()>=2 and g:BuffDown(N.StormEarthAndFireBuff)and aD:IsInMeleeRange(10)and aD:GUID()==f("mouseover"):GUID()then Y=1100780;return true elseif aA(N.TigerPalm)and g:ChiDeficit()>=2 and g:BuffDown(N.StormEarthAndFireBuff)and aD:IsInMeleeRange(10)and ae.Windwalker.TargetSwap=="AutoSwap"and aD:GUID()~=h:GUID()and not C and not string.find(aD:GUID(),174773)then Y=999;return true elseif aA(N.TigerPalm)and g:ChiDeficit()>=2 and g:BuffDown(N.StormEarthAndFireBuff)and aD:IsInMeleeRange(10)and aD:GUID()==h:GUID()then Z=100780;return true elseif aA(N.TigerPalm)and g:ChiDeficit()>=2 and g:BuffDown(N.StormEarthAndFireBuff)and aD:IsInMeleeRange(10)and not string.find(aD:GUID(),174773)then return true end end;local function aU(aD)if aA(N.BlackoutKick)and(N.Serenity:IsAvailable()and N.Serenity:CooldownRemains()<3 or N.RisingSunKick:CooldownRemains()>1 and(N.FistsOfFury:CooldownRemains()>1 or w)or N.RisingSunKick:CooldownRemains()<3 and(N.FistsOfFury:CooldownRemains()>3 or w)and g:Chi()>2 or N.RisingSunKick:CooldownRemains()>3 and N.FistsOfFury:CooldownRemains()<3 and g:Chi()>3 or g:Chi()>5 or g:BuffUp(N.BlackoutKickBuff))and aD:IsInMeleeRange(10)and aD:GUID()==f("mouseover"):GUID()then Y=1100784;return true elseif aA(N.BlackoutKick)and(N.Serenity:IsAvailable()and N.Serenity:CooldownRemains()<3 or N.RisingSunKick:CooldownRemains()>1 and(N.FistsOfFury:CooldownRemains()>1 or w)or N.RisingSunKick:CooldownRemains()<3 and(N.FistsOfFury:CooldownRemains()>3 or w)and g:Chi()>2 or N.RisingSunKick:CooldownRemains()>3 and N.FistsOfFury:CooldownRemains()<3 and g:Chi()>3 or g:Chi()>5 or g:BuffUp(N.BlackoutKickBuff))and aD:IsInMeleeRange(10)and ae.Windwalker.TargetSwap=="AutoSwap"and aD:GUID()~=h:GUID()and not C then Y=999;return true elseif aA(N.BlackoutKick)and(N.Serenity:IsAvailable()and N.Serenity:CooldownRemains()<3 or N.RisingSunKick:CooldownRemains()>1 and(N.FistsOfFury:CooldownRemains()>1 or w)or N.RisingSunKick:CooldownRemains()<3 and(N.FistsOfFury:CooldownRemains()>3 or w)and g:Chi()>2 or N.RisingSunKick:CooldownRemains()>3 and N.FistsOfFury:CooldownRemains()<3 and g:Chi()>3 or g:Chi()>5 or g:BuffUp(N.BlackoutKickBuff))and aD:IsInMeleeRange(10)and aD:GUID()==h:GUID()then Z=100784;return true elseif aA(N.BlackoutKick)and(N.Serenity:IsAvailable()and N.Serenity:CooldownRemains()<3 or N.RisingSunKick:CooldownRemains()>1 and(N.FistsOfFury:CooldownRemains()>1 or w)or N.RisingSunKick:CooldownRemains()<3 and(N.FistsOfFury:CooldownRemains()>3 or w)and g:Chi()>2 or N.RisingSunKick:CooldownRemains()>3 and N.FistsOfFury:CooldownRemains()<3 and g:Chi()>3 or g:Chi()>5 or g:BuffUp(N.BlackoutKickBuff))and aD:IsInMeleeRange(10)then return true end;return end;local function aV(aD)if aA(N.BlackoutKick)and(N.FistsOfFury:CooldownRemains()<3 and g:Chi()==2 and g:PrevGCD(1,N.TigerPalm)and g:EnergyTimeToX(50)<1)and aD:IsInMeleeRange(10)and aD:GUID()==f("mouseover"):GUID()then Y=1100784;return true elseif aA(N.BlackoutKick)and(N.FistsOfFury:CooldownRemains()<3 and g:Chi()==2 and g:PrevGCD(1,N.TigerPalm)and g:EnergyTimeToX(50)<1)and aD:IsInMeleeRange(10)and ae.Windwalker.TargetSwap=="AutoSwap"and aD:GUID()~=h:GUID()and not C then Y=999;return true elseif aA(N.BlackoutKick)and(N.FistsOfFury:CooldownRemains()<3 and g:Chi()==2 and g:PrevGCD(1,N.TigerPalm)and g:EnergyTimeToX(50)<1)and aD:IsInMeleeRange(10)and aD:GUID()==h:GUID()then Z=100784;return true elseif aA(N.BlackoutKick)and(N.FistsOfFury:CooldownRemains()<3 and g:Chi()==2 and g:PrevGCD(1,N.TigerPalm)and g:EnergyTimeToX(50)<1)and aD:IsInMeleeRange(10)then return true end end;local function aW(aD)if(aA(N.BlackoutKick)and(ay()<2 and(g:ChiDeficit()<=1 or g:PrevGCD(1,N.TigerPalm)))or a4)and aD:IsInMeleeRange(10)and aD:GUID()==f("mouseover"):GUID()then Y=1100784;return true elseif(aA(N.BlackoutKick)and(ay()<2 and(g:ChiDeficit()<=1 or g:PrevGCD(1,N.TigerPalm)))or a4)and aD:IsInMeleeRange(10)and ae.Windwalker.TargetSwap=="AutoSwap"and aD:GUID()~=h:GUID()and not C then Y=999;return true elseif(aA(N.BlackoutKick)and(ay()<2 and(g:ChiDeficit()<=1 or g:PrevGCD(1,N.TigerPalm)))or a4)and aD:IsInMeleeRange(10)and aD:GUID()==h:GUID()then Z=100784;return true elseif(aA(N.BlackoutKick)and(ay()<2 and(g:ChiDeficit()<=1 or g:PrevGCD(1,N.TigerPalm)))or a4)and aD:IsInMeleeRange(10)then return true end end;local function aX(aD)if(not N.HitCombo:IsAvailable()or aA(N.TigerPalm))and aD:IsInMeleeRange(10)and aD:GUID()==f("mouseover"):GUID()then Y=1100780;return true elseif(not N.HitCombo:IsAvailable()or aA(N.TigerPalm))and aD:IsInMeleeRange(10)and ae.Windwalker.TargetSwap=="AutoSwap"and aD:GUID()~=h:GUID()and not C and not string.find(aD:GUID(),174773)then Y=999;return true elseif(not N.HitCombo:IsAvailable()or aA(N.TigerPalm))and aD:IsInMeleeRange(10)and aD:GUID()==h:GUID()then Z=100780;return true elseif(not N.HitCombo:IsAvailable()or aA(N.TigerPalm))and aD:IsInMeleeRange(10)and not string.find(aD:GUID(),174773)then return true end end;local function aY()local aZ=g:GetUseableTrinkets(P)if aZ then if aZ:ID()==GetInventoryItemID("player",13)and ae.Commons.Enabled.TopTrinket then if m.Cast(aZ,nil,nil)then Z=24;return"top trinket 1"end elseif aZ:ID()==GetInventoryItemID("player",14)and ae.Commons.Enabled.BottomTrinket then if m.Cast(aZ,nil,nil)then Z=35;return"bot trinket 1"end end end end;local function a_()a0=O.InscrutibleQuantumDevice:IsEquipped()or O.GladiatorsBadgeCosmic:IsEquipped()or O.GladiatorsBadgeSinful:IsEquipped()or O.GladiatorsBadgeUnchained:IsEquipped()or O.Wrathstone:IsEquipped()or O.OverchargedAnimaBattery:IsEquipped()or O.ShadowgraspTotem:IsEquipped()or O.TheFirstSigil:IsEquipped()or O.CacheofAcquiredTreasures:IsEquipped()if N.ChiBurst:IsReady()and h:IsInRange(30)and(D==0 or D>N.ChiBurst:CastTime()+0.5)and ao~=3 then if m.Cast(N.ChiBurst,nil,nil,not h:IsInRange(40))then Z=123986;return"Chi Burst 4"end end;if N.ChiWave:IsReady()and h:IsInRange(40)and not N.EnergizingElixir:IsAvailable()then if m.Cast(N.ChiWave,nil,nil,not h:IsInRange(40))then Z=115098;return"Chi Wave 6"end end end;local function b0()if N.FistOfTheWhiteTiger:IsReady()and h:IsInRange(8)then if ac.CastTargetIf(N.FistOfTheWhiteTiger,T,"min",aC,aI)then return"Fist of the White Tiger 200"end;if aC(h)and aI(h)then if m.Cast(N.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(N.FistOfTheWhiteTiger))then Z=261947;return"fist_of_the_white_tiger opener 2"end end end;if N.ExpelHarm:IsReady()and h:IsInRange(8)and(N.ChiBurst:IsAvailable()and g:ChiDeficit()>=3)then if m.Cast(N.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then Z=322101;return"expel_harm opener 4"end end;if N.TigerPalm:IsReady()and h:IsInRange(8)then if ac.CastTargetIf(N.TigerPalm,S,"min",aE,aJ)then return"Tiger Palm 206"end;if aE(h)and aJ(h)then if m.Cast(N.TigerPalm,nil,nil,not h:IsSpellInRange(N.TigerPalm))then Z=100780;return"tiger_palm opener 6"end end end;if N.ChiWave:IsReady()and h:IsInRange(40)and g:ChiDeficit()>=2 then if m.Cast(N.ChiWave,nil,nil,not h:IsInRange(40))then Z=115098;return"chi_wave opener 8"end end;if N.ExpelHarm:IsReady()and h:IsInRange(10)then if m.Cast(N.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then Z=322101;return"expel_harm opener 10"end end;if N.TigerPalm:IsReady()and h:IsInRange(8)then if ac.CastTargetIf(N.TigerPalm,S,"min",aE,aK)then return"Tiger Palm 214"end;if aE(h)and aK(h)then if m.Cast(N.TigerPalm,nil,nil,not h:IsSpellInRange(N.TigerPalm))then Z=100780;return"tiger_palm opener 12"end end end end;local function b1()if N.SpinningCraneKick:IsReady(BypassRecovery)and(not N.WhirlingDragonPunch:IsAvailable()or N.WhirlingDragonPunch:IsAvailable()and N.WhirlingDragonPunch:CooldownRemains()<=0)and(aA(N.SpinningCraneKick)and UnitsWithBDBCount>0 or UnitsWithBDBCount>=3 and U==UnitsWithBDBCount or UnitsWithBDBCount>=5)and h:IsInRange(8)then if m.Cast(N.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then Z=101546;return"Spinning Crane Kick 304"end end;if N.WhirlingDragonPunch:IsReady()and not a4 and not u and h:IsInRange(8)and(not N.BonedustBrew:IsAvailable()or N.BonedustBrew:CooldownRemains()>=5 or not q)then if m.Cast(N.WhirlingDragonPunch,nil,nil,not h:IsInMeleeRange(8))then Z=152175;return"Whirling Dragon Punch 300"end end;if N.EnergizingElixir:IsReady()and(g:ChiDeficit()>=2 and ay()>2 or g:ChiDeficit()>=4)and h:IsInRange(10)then if m.Cast(N.EnergizingElixir,nil)then Z=115288;return"Energizing Elixir 302"end end;if N.SpinningCraneKick:IsReady(BypassRecovery)and(not N.WhirlingDragonPunch:IsAvailable()or N.WhirlingDragonPunch:IsAvailable()and N.WhirlingDragonPunch:CooldownRemains()>0)and((aA(N.SpinningCraneKick)or EnemiesWithMotC>=5 and UnitsWithBDBCount>0 or EnemiesWithMotC==U and UnitsWithBDBCount>0)and(g:BuffUp(N.DanceOfChijiBuff)or UnitsWithBDBCount>0))and h:IsInRange(8)then if m.Cast(N.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then Z=101546;return"Spinning Crane Kick 306"end end;if N.FistsOfFury:IsReady()and not w and UnitsWithBDBCount==0 and(ay()>N.FistsOfFury:ExecuteTime()or g:ChiDeficit()<=1)and h:IsInRange(8)then if(EnemiesWithMotC>=U or EnemiesWithMotC>=5)and(not N.WhirlingDragonPunch:IsAvailable()or N.WhirlingDragonPunch:IsAvailable()and N.WhirlingDragonPunch:CooldownRemains()>0 or u)and U>=2 and N.SpinningCraneKick:IsReady(BypassRecovery)and N.BonedustBrew:CooldownRemains()>=2 then if m.Cast(N.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then Z=101546;return"Spinning Crane Kick 1304"end else if m.Cast(N.FistsOfFury,nil,nil,not h:IsSpellInRange(N.FistsOfFury))then Z=113656;return"Fists of Fury 306"end end end;if N.RisingSunKick:IsReady()and(UnitsWithBDBCount==0 or N.BonedustBrew:CooldownRemains()<=0 and q)then if U>=2 and(not N.WhirlingDragonPunch:IsAvailable()or N.WhirlingDragonPunch:IsAvailable()and N.WhirlingDragonPunch:CooldownRemains()>0 or u)and N.SpinningCraneKick:IsReady(BypassRecovery)and N.BonedustBrew:CooldownRemains()>=2 and(U==2 and(EnemiesWithMotC>=4 or EnemiesWithMotC>=2 and N.CalculatedStrikes:SoulbindEnabled())or U==3 and(EnemiesWithMotC>=3 or EnemiesWithMotC>=2 and N.CalculatedStrikes:SoulbindEnabled())or U>=4)then if m.Cast(N.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then Z=101546;return"Spinning Crane Kick 1306"end else if ac.CastTargetIf(N.RisingSunKick,S,"min",aC,aL)then return"Rising Sun Kick 308"end;if aC(h)and aL(h)then if m.Cast(N.RisingSunKick,nil,nil,not h:IsSpellInRange(N.RisingSunKick))then Z=107428;return"Rising Sun Kick 310"end end end end;if N.RushingJadeWind:IsReady()and g:BuffDown(N.RushingJadeWindBuff)and h:IsInRange(8)then if m.Cast(N.RushingJadeWind,nil,nil,not h:IsInMeleeRange(8))then Z=116847;return"Rushing Jade Wind 312"end end;if N.ExpelHarm:IsReady()and h:IsInRange(8)and g:ChiDeficit()>=1 then if m.Cast(N.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then Z=322101;return"Expel Harm 316"end end;if N.FistOfTheWhiteTiger:IsReady()then if ac.CastTargetIf(N.FistOfTheWhiteTiger,T,"min",aC,aI)then return"Fist of the White Tiger 318"end;if aC(h)and aI(h)then if m.Cast(N.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(N.FistOfTheWhiteTiger))then Z=261947;return"Fist of the White Tiger 320"end end end;if N.ChiBurst:IsReady()and UnitsWithBDBCount==0 and(D==0 or D>N.ChiBurst:CastTime()+0.5)and h:IsInRange(30)and g:ChiDeficit()>=2 then if m.Cast(N.ChiBurst,nil,nil,not h:IsInRange(40))then Z=123986;return"Chi Burst 322"end end;if N.CracklingJadeLightning:IsReady()and(g:BuffStack(N.TheEmperorsCapacitor)>19 and ay()>N.CracklingJadeLightning:ExecuteTime()-1 and(N.FistsOfFury:CooldownRemains()>N.CracklingJadeLightning:ExecuteTime()or w))then if m.Cast(N.CracklingJadeLightning,nil,nil,not h:IsInRange(40))then Z=117952;return"Crackling Jade Lightning 324"end end;if N.TigerPalm:IsReady()then if ac.CastTargetIf(N.TigerPalm,S,"min",aE,aM)then return"Tiger Palm 326"end;if aE(h)and aM(h)then if m.Cast(N.TigerPalm,nil,nil,not h:IsSpellInRange(N.TigerPalm))then Z=100780;return"Tiger Palm 328"end end end;if N.ArcaneTorrent:IsReady()and h:IsInRange(8)and g:ChiDeficit()>=1 then if m.Cast(N.ArcaneTorrent,nil,nil,not h:IsInMeleeRange(8))then Z=50613;return"Arcane Torrent 402"end end;if N.SpinningCraneKick:IsReady()and h:IsInMeleeRange(10)and((aA(N.SpinningCraneKick)or EnemiesWithMotC>=5)and(N.BonedustBrew:CooldownRemains()>2 or ao~=4)and(g:Chi()>=5 or N.FistsOfFury:CooldownRemains()>6 or N.FistsOfFury:CooldownRemains()>3 and g:Chi()>=3 and g:EnergyTimeToX(50)<1 or ay()<=3+3*ap(N.FistsOfFury:CooldownRemains()<5)or g:BuffUp(N.StormEarthAndFireBuff)))then if m.Cast(N.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then Z=101546;return"Spinning Crane Kick 314"end end;if N.ChiWave:IsReady()and h:IsInRange(40)and aA(N.ChiWave)then if m.Cast(N.ChiWave,nil,nil,not h:IsInRange(40))then Z=115098;return"Chi Wave 330"end end;local b2=N.FlyingSerpentKickActionBarReplacement:IsAvailable()and N.FlyingSerpentKickActionBarReplacement or N.FlyingSerpentKick;if N.FlyingSerpentKickActionBarReplacement:IsReady()and not v and h:IsInRange(10)and not ae.Windwalker.IgnoreFSK then if m.Cast(N.FlyingSerpentKickActionBarReplacement,nil,nil,not h:IsInRange(40))then Z=101545;return"Flying Serpent Kick Slam 332"end end;if N.FlyingSerpentKick:IsReady()and not v and h:IsInRange(10)and not ae.Windwalker.IgnoreFSK and g:BuffDown(N.BlackoutKickBuff)then if m.Cast(N.FlyingSerpentKick,nil,nil,not h:IsInRange(40))then Z=101545;return"Flying Serpent Kick 334"end end;if N.BlackoutKick:IsReady()and(UnitsWithBDBCount==0 or N.BonedustBrew:CooldownRemains()<=0 and q and EnemiesWithMotC<5 and EnemiesWithMotC<U)then if U>=2 and N.SpinningCraneKick:IsReady(BypassRecovery)then if m.Cast(N.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then Z=101546;return"Spinning Crane Kick 1304"end else if ac.CastTargetIf(N.BlackoutKick,S,"min",aC,aN)then return"Blackout Kick 336"end;if aC(h)and aN(h)then if m.Cast(N.BlackoutKick,nil,nil,not h:IsSpellInRange(N.BlackoutKick))then Z=100784;return"Blackout Kick 338"end end end end;if N.TigerPalm:IsReady()and UnitsWithBDBCount>0 then if ac.CastTargetIf(N.TigerPalm,S,"min",aC,aX)then return"TigerPalm Kick 336"end;if aC(h)and aX(h)then if m.Cast(N.TigerPalm,nil,nil,not h:IsSpellInRange(N.TigerPalm))then Z=100784;return"TigerPalm Kick 348"end end end;if N.SpinningCraneKick:IsReady(BypassRecovery)and(aA(N.SpinningCraneKick)or EnemiesWithMotC>=5 or EnemiesWithMotC==U and(N.WhirlingDragonPunch:CooldownRemains()>0 or not N.WhirlingDragonPunch:IsAvailable()or UnitsWithBDBCount>0))and h:IsInRange(8)then if m.Cast(N.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then Z=101546;return"Spinning Crane Kick 304"end end end;local function b3()a2=N.Serenity:CooldownRemains()<1 or W and N.Serenity:CooldownRemains()>30 or V<20;if N.InvokeXuenTheWhiteTiger:IsReady()and G and h:IsInRange(8)and(not a1 or V<25)then if m.Cast(N.InvokeXuenTheWhiteTiger,nil,nil,not h:IsInRange(40))then Z=123904;return"Invoke Xuen the White Tiger 500"end end;if a2 then if N.AncestralCall:IsCastable()and o()and h:IsInRange(8)then if m.Cast(N.AncestralCall,nil)then Z=274738;return"Ancestral Call 512"end end;if N.BloodFury:IsCastable()and o()and h:IsInRange(8)then if m.Cast(N.BloodFury,nil)then Z=20572;return"Blood Fury 502"end end;if N.Fireblood:IsCastable()and o()and h:IsInRange(8)then if m.Cast(N.Fireblood,nil)then Z=265221;return"Fireblood 510"end end;if N.Berserking:IsCastable()and o()and h:IsInRange(8)then if m.Cast(N.Berserking,nil)then Z=26297;return"Berserking 504"end end;if N.BagOfTricks:IsCastable()and h:IsInRange(8)then if m.Cast(N.BagOfTricks,nil,nil,not h:IsInRange(40))then Z=312411;return"Bag of Tricks 528"end end end;if N.LightsJudgment:IsCastable()and o()and h:IsInRange(8)then if m.Cast(N.LightsJudgment,nil,nil,not h:IsInRange(40))then Z=255647;return"Lights Judgment 508"end end;if N.TouchOfDeath:IsReady()and h:IsInRange(8)and(not ae.Windwalker.ToDExecute and h:HealthPercentage()<=15 or ae.Windwalker.ToDExecute and UnitHealth("target")<UnitHealth("player"))and(V>180-ap(ah)*120 or W and(ao~=4 or g:BuffUp(N.BonedustBrew))or N.InvokeXuenTheWhiteTiger:CooldownRemains()>V and g:BuffUp(N.BonedustBrew)or V<10)then if m.Cast(N.TouchOfDeath,nil,nil,not h:IsSpellInRange(N.TouchOfDeath))then Z=322109;return"Touch of Death 514"end end;if N.WeaponsOfOrder:IsReady()and q and h:IsInRange(10)and N.RisingSunKick:CooldownRemains()<N.WeaponsOfOrder:ExecuteTime()then if m.Cast(N.WeaponsOfOrder,nil,nil)then Z=310454;return"Weapons Of Order 518"end end;if a2 or V<20 then if O.Jotungeirr:IsEquippedAndReady()and o()then if n(O.Jotungeirr,nil,nil)then Z=16;return"jotungeirr_destinys_call cd_serenity 22"end end;if ae.Commons.Enabled.TopTrinket or ae.Commons.Enabled.BottomTrinket then local aZ=g:GetUseableTrinkets(P)if O.InscrutibleQuantumDevice:IsEquippedAndReady()then if O.InscrutibleQuantumDevice:ID()==K and ae.Commons.Enabled.TopTrinket then Z=24;return"top trinket InscrutibleQuantumDevice"elseif O.InscrutibleQuantumDevice:ID()==L and ae.Commons.Enabled.BottomTrinket then Z=35;return"bot trinket InscrutibleQuantumDevice"end end;if O.Wrathstone:IsEquippedAndReady()then if O.Wrathstone:ID()==K and ae.Commons.Enabled.TopTrinket then Z=24;return"top trinket Wrathstone"elseif O.Wrathstone:ID()==L and ae.Commons.Enabled.BottomTrinket then Z=35;return"bot trinket Wrathstone"end end;if O.OverchargedAnimaBattery:IsEquippedAndReady()then if O.OverchargedAnimaBattery:ID()==K and ae.Commons.Enabled.TopTrinket then Z=24;return"top trinket OverchargedAnimaBattery"elseif O.OverchargedAnimaBattery:ID()==L and ae.Commons.Enabled.BottomTrinket then Z=35;return"bot trinket OverchargedAnimaBattery"end end end end;if O.ShadowgraspTotem:IsEquippedAndReady()and(W or V<20 or not ai)then if O.ShadowgraspTotem:ID()==K and ae.Commons.Enabled.TopTrinket then Z=24;return"top trinket ShadowgraspTotem"elseif O.ShadowgraspTotem:ID()==L and ae.Commons.Enabled.BottomTrinket then Z=35;return"bot trinket ShadowgraspTotem"end end;if(ae.Commons.Enabled.TopTrinket or ae.Commons.Enabled.BottomTrinket)and(a2 or V<20)then if O.GladiatorsBadgeCosmic:IsEquippedAndReady()and(W or V<20 or not ai)then if O.GladiatorsBadgeCosmic:ID()==K and ae.Commons.Enabled.TopTrinket then Z=24;return"top trinket GladiatorsBadgeCosmic"elseif O.GladiatorsBadgeCosmic:ID()==L and ae.Commons.Enabled.BottomTrinket then Z=35;return"bot trinket GladiatorsBadgeCosmic"end end;if O.GladiatorsBadgeSinful:IsEquippedAndReady()and(W or V<20 or not ai)then if O.GladiatorsBadgeSinful:ID()==K and ae.Commons.Enabled.TopTrinket then Z=24;return"top trinket GladiatorsBadgeSinful"elseif O.GladiatorsBadgeSinful:ID()==L and ae.Commons.Enabled.BottomTrinket then Z=35;return"bot trinket GladiatorsBadgeSinful"end end;if O.GladiatorsBadgeUnchained:IsEquippedAndReady()and(W or V<20 or not ai)then if O.GladiatorsBadgeUnchained:ID()==K and ae.Commons.Enabled.TopTrinket then Z=24;return"top trinket GladiatorsBadgeUnchained"elseif O.GladiatorsBadgeUnchained:ID()==L and ae.Commons.Enabled.BottomTrinket then Z=35;return"bot trinket GladiatorsBadgeUnchained"end end;if O.TheFirstSigil:IsEquippedAndReady()then if O.TheFirstSigil:ID()==K and ae.Commons.Enabled.TopTrinket then Z=24;return"top trinket TheFirstSigil"elseif O.TheFirstSigil:ID()==L and ae.Commons.Enabled.BottomTrinket then Z=35;return"bot trinket TheFirstSigil"end end end;if not a0 or N.InvokeXuenTheWhiteTiger:CooldownRemains()>20 or a1 then local X=aY()if X then return X end end;if N.FaelineStomp:IsReady()and q and h:IsInRange(10)and aA(N.FaelineStomp)then if m.Cast(N.FaelineStomp,nil,nil)then Z=327104;return"Faeline Stomp 520"end end;if N.FallenOrder:IsReady()and q and h:IsInRange(8)then if m.Cast(N.FallenOrder,nil,nil)then Z=326860;return"Faeline Stomp 522"end end;if N.BonedustBrew:IsReady()and UnitsWithBDBCount==0 and q and h:IsInRange(8)and(V<15 or(g:Chi()>=2 and(V>60 and((N.Serenity:CooldownRemains()>10 or g:BuffUp(N.SerenityBuff)or N.Serenity:CooldownUp())and(W or N.InvokeXuenTheWhiteTiger:CooldownRemains()>10 or a1)))or V<=60 and(W or N.InvokeXuenTheWhiteTiger:CooldownRemains()>V)))then if m.Cast(N.BonedustBrew,nil,nil)then Z=325216;return"Bonedust Brew 524"end end;if N.Serenity:IsReady()and h:IsInRange(8)and(N.RisingSunKick:CooldownRemains()<2 or V<15)then if m.Cast(N.Serenity,nil)then Z=152173;return"Serenity 526"end end;if N.BagOfTricks:IsCastable()and h:IsInRange(8)then if m.Cast(N.BagOfTricks,nil,nil,not h:IsInRange(40))then Z=312411;return"Bag of Tricks 528"end end end;local function b4()if N.InvokeXuenTheWhiteTiger:IsReady()and G and h:IsInRange(15)and(U<3 or U>=3 and(g:BuffUp(N.WhirlingDragonPunchBuff)or N.WhirlingDragonPunch:CooldownRemains()>2 or not N.WhirlingDragonPunch:IsAvailable()))and(not a1 and(N.RisingSunKick:CooldownRemains()<2 or ao~=1)and(ao~=4 or N.BonedustBrew:CooldownRemains()<2)or V<25)then if U>=3 and g:Chi()<5 and EnemiesWithMotC<5 and EnemiesWithMotC<U and ae.Windwalker.PoolBeforeBurst then a4=true elseif EnemiesWithMotC>=5 or EnemiesWithMotC>=U or not ae.Windwalker.PoolBeforeBurst then if m.Cast(N.InvokeXuenTheWhiteTiger,nil,nil,not h:IsInRange(40))then Z=123904;return"Invoke Xuen the White Tiger 400"end end end;if N.TouchOfDeath:IsReady()and h:IsInRange(8)and(not ae.Windwalker.ToDExecute and h:HealthPercentage()<=15 or ae.Windwalker.ToDExecute and UnitHealth("target")<UnitHealth("player"))and(V>180-ap(ah)*120 or g:BuffDown(N.StormEarthAndFireBuff)and W and(ao~=4 or g:BuffUp(N.BonedustBrew))or N.InvokeXuenTheWhiteTiger:CooldownRemains()>V and g:BuffUp(N.BonedustBrew)or V<10)then if m.Cast(N.TouchOfDeath,nil,nil,not h:IsSpellInRange(N.TouchOfDeath))then Z=322109;return"Touch of Death 404"end end;if N.WeaponsOfOrder:IsReady()and q and h:IsInRange(8)and(N.RisingSunKick:CooldownRemains()<N.WeaponsOfOrder:ExecuteTime()and N.InvokeXuenTheWhiteTiger:CooldownRemains()>20+20*ap(ai)or V<35)then if m.Cast(N.WeaponsOfOrder,nil,nil)then Z=310454;return"Weapons Of Order 406"end end;if N.FaelineStomp:IsReady()and q and h:IsInRange(8)and aA(N.FaelineStomp)then if m.Cast(N.FaelineStomp,nil,nil)then Z=327104;return"Faeline Stomp 408"end end;if N.FallenOrder:IsReady()and q and h:IsInRange(8)then if m.Cast(N.FallenOrder,nil,nil)then Z=326860;return"Faeline Stomp 410"end end;if N.BonedustBrew:IsReady()and UnitsWithBDBCount==0 and q and h:IsInRange(8)and(g:BuffDown(N.BonedustBrew)and(g:Chi()>=2 and V>60 and(N.StormEarthAndFire:Charges()>0 or N.StormEarthAndFire:CooldownRemains()>10)and(W or N.InvokeXuenTheWhiteTiger:CooldownRemains()>10 or a1)or g:Chi()>=2 and V<=60 and(W or N.InvokeXuenTheWhiteTiger:CooldownRemains()>V)and(N.StormEarthAndFire:Charges()>0 or N.StormEarthAndFire:CooldownRemains()>V or g:BuffUp(N.StormEarthAndFireBuff))or V<15)or V<10 and N.LeadByExample:SoulbindEnabled())then if(U>=3 and g:Chi()<5 and EnemiesWithMotC<5 and EnemiesWithMotC<U or U<3 and N.RisingSunKick:CooldownRemains()>0)and ae.Windwalker.PoolBeforeBurst then a4=true else if m.Cast(N.BonedustBrew,nil,nil)then Z=325216;return"Bonedust Brew 412"end end end;if N.StormEarthAndFireFixate:IsCastable()and H and h:IsInRange(10)and(g:BuffUp(N.StormEarthAndFireBuff)and N.StormEarthAndFireFixate:TimeSinceLastCast()>15)and N.CoordinatedOffensive:ConduitEnabled()and(EnemiesWithMotC>=U or U<2 or EnemiesWithMotC>=5)then if m.Cast(N.StormEarthAndFire,nil)then Z=137639;return"storm_earth_and_fire_fixate cd_sef 14"end end;if N.StormEarthAndFire:IsReady()and H and h:IsInRange(10)and ao~=4 and(N.StormEarthAndFire:Charges()==2 or V<20 or ao~=1 and ao~=4 and(N.InvokeXuenTheWhiteTiger:CooldownRemains()>N.StormEarthAndFire:FullRechargeTime()or a1)and N.FistsOfFury:CooldownRemains()<=9 and g:Chi()>=2 and N.WhirlingDragonPunch:CooldownRemains()<=12)then if m.Cast(N.StormEarthAndFire,nil)then Z=137639;return"Storm Earth and Fire 416"end end;if N.StormEarthAndFire:IsReady()and(ao==1 and(g:BuffUp(N.WeaponsOfOrder)or(V<N.WeaponsOfOrder:CooldownRemains()or N.WeaponsOfOrder:CooldownRemains()>N.StormEarthAndFire:FullRechargeTime())and N.FistsOfFury:CooldownRemains()<=9 and g:Chi()>=2 and N.WhirlingDragonPunch:CooldownRemains()<=12))then if m.Cast(N.StormEarthAndFire,nil)then Z=137639;return"Storm Earth and Fire 418"end end;if N.StormEarthAndFire:IsReady()and H and h:IsInRange(10)and(ao==4 and UnitsWithBDBSEFCount>0 and(W or a1 or N.InvokeXuenTheWhiteTiger:CooldownRemains()>N.StormEarthAndFire:FullRechargeTime()or N.InvokeXuenTheWhiteTiger:CooldownRemains()>30))then if m.Cast(N.StormEarthAndFire,nil)then Z=137639;return"Storm Earth and Fire 420"end end;if O.Jotungeirr:IsEquippedAndReady()and o()and(W or N.InvokeXuenTheWhiteTiger:CooldownRemains()>60 and V>180 or V<20)then if n(O.Jotungeirr,nil,nil)then Z=16;return"jotungeirr_destinys_call bear 8"end end;if ae.Commons.Enabled.TopTrinket or ae.Commons.Enabled.BottomTrinket then local aZ=g:GetUseableTrinkets(P)if O.InscrutibleQuantumDevice:IsEquippedAndReady()and(W or N.InvokeXuenTheWhiteTiger:CooldownRemains()>60 and V>180 or V<20)then if O.InscrutibleQuantumDevice:ID()==K and ae.Commons.Enabled.TopTrinket then Z=24;return"top trinket InscrutibleQuantumDevice"elseif O.InscrutibleQuantumDevice:ID()==L and ae.Commons.Enabled.BottomTrinket then Z=35;return"bot trinket InscrutibleQuantumDevice"end end;if O.Wrathstone:IsEquippedAndReady()and(W or V<20)then if O.Wrathstone:ID()==K and ae.Commons.Enabled.TopTrinket then Z=24;return"top trinket Wrathstone"elseif O.Wrathstone:ID()==L and ae.Commons.Enabled.BottomTrinket then Z=35;return"bot trinket Wrathstone"end end;if O.ShadowgraspTotem:IsEquippedAndReady()and(W or V<20 or not ai)then if O.ShadowgraspTotem:ID()==K and ae.Commons.Enabled.TopTrinket then Z=24;return"top trinket ShadowgraspTotem"elseif O.ShadowgraspTotem:ID()==L and ae.Commons.Enabled.BottomTrinket then Z=35;return"bot trinket ShadowgraspTotem"end end;if O.OverchargedAnimaBattery:IsEquippedAndReady()and(W or N.InvokeXuenTheWhiteTiger:CooldownRemains()>90 or V<20)then if O.OverchargedAnimaBattery:ID()==K and ae.Commons.Enabled.TopTrinket then Z=24;return"top trinket OverchargedAnimaBattery"elseif O.OverchargedAnimaBattery:ID()==L and ae.Commons.Enabled.BottomTrinket then Z=35;return"bot trinket OverchargedAnimaBattery"end end;if O.GladiatorsBadgeCosmic:IsEquippedAndReady()and(N.InvokeXuenTheWhiteTiger:CooldownRemains()>55 or a1 or V<15)then if O.GladiatorsBadgeCosmic:ID()==K and ae.Commons.Enabled.TopTrinket then Z=24;return"top trinket GladiatorsBadgeCosmic"elseif O.GladiatorsBadgeCosmic:ID()==L and ae.Commons.Enabled.BottomTrinket then Z=35;return"bot trinket GladiatorsBadgeCosmic"end end;if O.GladiatorsBadgeSinful:IsEquippedAndReady()and(N.InvokeXuenTheWhiteTiger:CooldownRemains()>55 or a1 or V<15)then if O.GladiatorsBadgeSinful:ID()==K and ae.Commons.Enabled.TopTrinket then Z=24;return"top trinket GladiatorsBadgeSinful"elseif O.GladiatorsBadgeSinful:ID()==L and ae.Commons.Enabled.BottomTrinket then Z=35;return"bot trinket GladiatorsBadgeSinful"end end;if O.GladiatorsBadgeUnchained:IsEquippedAndReady()and(N.InvokeXuenTheWhiteTiger:CooldownRemains()>55 or a1 or V<15)then if O.GladiatorsBadgeUnchained:ID()==K and ae.Commons.Enabled.TopTrinket then Z=24;return"top trinket GladiatorsBadgeUnchained"elseif O.GladiatorsBadgeUnchained:ID()==L and ae.Commons.Enabled.BottomTrinket then Z=35;return"bot trinket GladiatorsBadgeUnchained"end end;if O.TheFirstSigil:IsEquippedAndReady()and(N.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<9 or N.InvokeXuenTheWhiteTiger:CooldownRemains()>60 and V>300 or V<20)then if O.TheFirstSigil:ID()==K and ae.Commons.Enabled.TopTrinket then Z=24;return"top trinket TheFirstSigil"elseif O.TheFirstSigil:ID()==L and ae.Commons.Enabled.BottomTrinket then Z=35;return"bot trinket TheFirstSigil"end end;if O.CacheofAcquiredTreasures:IsEquippedAndReady()and(U<2 and g:BuffUp(N.AcquiredWandBuff)or U>1 and g:BuffUp(N.AcquiredAxeBuff)or V<20)then if O.CacheofAcquiredTreasures:ID()==K and ae.Commons.Enabled.TopTrinket then Z=24;return"top trinket CacheofAcquiredTreasures"elseif O.CacheofAcquiredTreasures:ID()==L and ae.Commons.Enabled.BottomTrinket then Z=35;return"bot trinket CacheofAcquiredTreasures"end end;if not a0 or N.InvokeXuenTheWhiteTiger:CooldownRemains()>20 and W and N.InvokeXuenTheWhiteTiger:TimeSinceLastCast()>4 or a1 then local X=aY()if X then return X end end end;if N.BloodFury:IsCastable()and o()and h:IsInRange(8)and(N.InvokeXuenTheWhiteTiger:CooldownRemains()>30 or not G or VarXuenHold or d.BossFilteredFightRemains("<",20))then if m.Cast(N.BloodFury,nil)then Z=20572;return"Blood Fury 420"end end;if N.Berserking:IsCastable()and o()and h:IsInRange(8)and(N.InvokeXuenTheWhiteTiger:CooldownRemains()>30 or not G or VarXuenHold or d.BossFilteredFightRemains("<",15))then if m.Cast(N.Berserking,nil)then Z=26297;return"Berserking 422"end end;if N.LightsJudgment:IsCastable()and o()and h:IsInRange(8)then if m.Cast(N.LightsJudgment,nil,nil,not h:IsInRange(40))then Z=255647;return"Lights Judgment 424"end end;if N.Fireblood:IsCastable()and o()and h:IsInRange(8)and(N.InvokeXuenTheWhiteTiger:CooldownRemains()>30 or not G or VarXuenHold or d.BossFilteredFightRemains("<",10))then if m.Cast(N.Fireblood,nil)then Z=265221;return"Fireblood 426"end end;if N.AncestralCall:IsCastable()and o()and h:IsInRange(8)and(N.InvokeXuenTheWhiteTiger:CooldownRemains()>30 or not G or VarXuenHold or d.BossFilteredFightRemains("<",20))then if m.Cast(N.AncestralCall,nil)then Z=274738;return"Ancestral Call 428"end end;if N.BagOfTricks:IsCastable()and o()and h:IsInRange(8)and g:BuffDown(N.StormEarthAndFire)then if m.Cast(N.BagOfTricks,nil,nil,not h:IsInRange(40))then Z=312411;return"Bag of Tricks 430"end end end;local function b5()if N.FistsOfFury:IsReady()and not w and h:IsInRange(8)and g:BuffRemains(N.SerenityBuff)<1 and(not UnitsWithBDBCount==0 or not m.AoEON()or U<=3)then if m.Cast(N.FistsOfFury,nil,nil,not h:IsSpellInRange(N.FistsOfFury))then Z=113656;return"Fists of Fury 600"end end;if o()and(ae.Commons.Enabled.TopTrinket or ae.Commons.Enabled.BottomTrinket)then if true then local X=aY()if X then return X end end end;if N.SpinningCraneKick:IsReady()and h:IsInRange(8)and(aA(N.SpinningCraneKick or EnemiesWithMotC>=5)and(m.AoEON()and U>=3 or U>1 and not N.RisingSunKick:CooldownUp()))then if m.Cast(N.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then Z=101546;return"Spinning Crane Kick 602"end end;if N.RisingSunKick:IsReady()then if ac.CastTargetIf(N.RisingSunKick,S,"min",aC,aO)then return"Rising Sun Kick 604"end;if aC(h)and aO(h)then if m.Cast(N.RisingSunKick,nil,nil,not h:IsSpellInRange(N.RisingSunKick))then Z=107428;return"Rising Sun Kick 606"end end end;if N.FistsOfFury:IsReady()and not w and m.AoEON()and U>=3 and h:IsInRange(8)and(not UnitsWithBDBCount==0 or not m.AoEON()or U<=3)then if m.Cast(N.FistsOfFury,nil,nil,not h:IsSpellInRange(N.FistsOfFury))then Z=113656;return"Fists of Fury 608"end end;if N.SpinningCraneKick:IsReady()and h:IsInRange(8)and(aA(N.SpinningCraneKick)or EnemiesWithMotC>=5)and g:BuffUp(N.DanceOfChijiBuff)then if m.Cast(N.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then Z=101546;return"Spinning Crane Kick 610"end end;if N.BlackoutKick:IsReady()then if ac.CastTargetIf(N.BlackoutKick,S,"min",aC,aP)then return"Blackout Kick 612"end;if aC(h)and aP(h)then if m.Cast(N.BlackoutKick,nil,nil,not h:IsSpellInRange(N.BlackoutKick))then Z=100784;return"Blackout Kick 614"end end end;if N.FistsOfFury:IsReady()and not w and(not UnitsWithBDBCount==0 or not m.AoEON()or U<=3)then if m.Cast(N.FistsOfFury,nil,nil,not h:IsSpellInRange(N.FistsOfFury))then Z=113656;I=true;return"Fists of Fury 616"end end;if N.SpinningCraneKick:IsReady()and h:IsInRange(8)and UnitsWithBDBCount==0 then if m.Cast(N.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then Z=101546;return"Spinning Crane Kick 618"end end;if N.FistOfTheWhiteTiger:IsReady()then if ac.CastTargetIf(N.FistOfTheWhiteTiger,T,"min",aC,aF)then return"Fist of the White Tiger 620"end;if aC(h)and aF(h)then if m.Cast(N.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(N.FistOfTheWhiteTiger))then Z=261947;return"Fist of the White Tiger 622"end end end;if N.BlackoutKick:IsReady()then if ac.CastTargetIf(N.BlackoutKick,S,"min",aC,aQ)then return"Blackout Kick 624"end;if aC(h)and aQ(h)then if m.Cast(N.BlackoutKick,nil,nil,not h:IsSpellInRange(N.BlackoutKick))then Z=100784;return"Blackout Kick 626"end end end;if N.SpinningCraneKick:IsReady()and h:IsInRange(8)then if m.Cast(N.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then Z=101546;return"Spinning Crane Kick 628"end end end;local function b6()if m.CDsON()and not N.Serenity:IsAvailable()then local X=b4()if X then return X end end;if m.CDsON()and N.Serenity:IsAvailable()then local X=b3()if X then return X end end;if N.EnergizingElixir:IsReady()and h:IsInRange(8)and(g:ChiDeficit()>=2 and ay()>3)then if m.Cast(N.EnergizingElixir,nil)then Z=115288;return"Energizing Elixir 700"end end;if N.RisingSunKick:IsReady()then if ac.CastTargetIf(N.RisingSunKick,S,"min",aC)then Z=107428;return"Rising Sun Kick 702"end;if aC(h)then if m.Cast(N.RisingSunKick,nil,nil,not h:IsSpellInRange(N.RisingSunKick))then Z=107428;return"Rising Sun Kick 704"end end end;if N.FistsOfFury:IsReady()and not w and h:IsInRange(8)and U>=2 and g:BuffRemains(N.WeaponsOfOrder)<1 then if m.Cast(N.FistsOfFury,nil,nil,not h:IsSpellInRange(N.FistsOfFury))then Z=113656;return"Fists of Fury 708"end end;if N.WhirlingDragonPunch:IsReady()and not u and h:IsInRange(8)and g:BuffUp(N.WhirlingDragonPunchBuff)and U>=2 then if m.Cast(N.WhirlingDragonPunch,nil,nil,not h:IsInMeleeRange(8))then Z=152175;return"Whirling Dragon Punch 710"end end;if N.SpinningCraneKick:IsReady()and h:IsInRange(8)and(aA(N.SpinningCraneKick)and(U>=3 and g:BuffUp(N.WeaponsOfOrderChiBuff)or g:BuffUp(N.DanceOfChijiBuff)))then if m.Cast(N.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then Z=101546;return"Spinning Crane Kick 706"end end;if N.ExpelHarm:IsReady()and h:IsInRange(8)and g:Chi()==0 and g:BuffRemains(N.WeaponsOfOrder)<4 then if m.Cast(N.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then Z=322101;return"Expel Harm 756"end end;if N.FistOfTheWhiteTiger:IsReady()and(g:Chi()==0 and g:BuffRemains(N.WeaponsOfOrderChiBuff)<4)then if ac.CastTargetIf(N.FistOfTheWhiteTiger,T,"min",aC)then return"Fist of the White Tiger 722"end;if aC(h)then if m.Cast(N.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(N.FistOfTheWhiteTiger))then Z=261947;return"Fist of the White Tiger 724"end end end;if N.WhirlingDragonPunch:IsReady()and not u and h:IsInRange(8)and g:BuffUp(N.WhirlingDragonPunchBuff)then if m.Cast(N.WhirlingDragonPunch,nil,nil,not h:IsInMeleeRange(8))then Z=152175;return"Whirling Dragon Punch 716"end end;if N.BlackoutKick:IsReady()then if ac.CastTargetIf(N.BlackoutKick,S,"min",aE)then return"Blackout Kick 718"end;if aE(h)then if m.Cast(N.BlackoutKick,nil,nil,not h:IsSpellInRange(N.BlackoutKick))then Z=100784;return"Blackout Kick 718"end end end;if N.TigerPalm:IsReady()and(g:Chi()==0 and g:BuffRemains(N.WeaponsOfOrderChiBuff)<4)then if ac.CastTargetIf(N.TigerPalm,S,"min",aE)then return"Tiger Palm 730"end;if aE(h)then if m.Cast(N.TigerPalm,nil,nil,not h:IsSpellInRange(N.TigerPalm))then Z=100780;return"Tiger Palm 732"end end end;if N.FistsOfFury:IsReady()and not w and h:IsInRange(8)and(g:BuffUp(N.WeaponsOfOrderChiBuff)and g:BuffUp(N.StormEarthAndFireBuff))then if m.Cast(N.FistsOfFury,nil,nil,not h:IsSpellInRange(N.FistsOfFury))then Z=113656;J=true;return"Fists of Fury 718"end end;if N.SpinningCraneKick:IsReady()and h:IsInRange(8)and g:BuffStack(N.ChiEnergyBuff)>30-5*U then if m.Cast(N.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then Z=101546;return"Spinning Crane Kick 720"end end;if N.FistOfTheWhiteTiger:IsReady()then if ac.CastTargetIf(N.FistOfTheWhiteTiger,T,"min",aC,aF)then return"Fist of the White Tiger 722"end;if aC(h)and aF(h)then if m.Cast(N.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(N.FistOfTheWhiteTiger))then Z=261947;return"Fist of the White Tiger 724"end end end;if N.ExpelHarm:IsReady()and h:IsInRange(8)and g:ChiDeficit()>=1 then if m.Cast(N.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then Z=322101;return"Expel Harm 726"end end;if N.ChiBurst:IsReady()and h:IsInRange(30)and(D==0 or D>N.ChiBurst:CastTime()+0.5)and g:ChiDeficit()>=1+ap(U>1)then if m.Cast(N.ChiBurst,nil,nil,not h:IsInRange(40))then Z=123986;return"Chi Burst 728"end end;if N.TigerPalm:IsReady()then if ac.CastTargetIf(N.TigerPalm,S,"min",aE,aM)then return"Tiger Palm 730"end;if aE(h)and aM(h)then if m.Cast(N.TigerPalm,nil,nil,not h:IsSpellInRange(N.TigerPalm))then Z=100780;return"Tiger Palm 732"end end end;if N.BlackoutKick:IsReady()and(aA(N.BlackoutKick)and U<=3 and g:Chi()>=3 or g:BuffUp(N.WeaponsOfOrderChiBuff))then if ac.CastTargetIf(N.BlackoutKick,S,"min",aC)then return"Blackout Kick 736"end;if aC(h)then if m.Cast(N.BlackoutKick,nil,nil,not h:IsSpellInRange(N.BlackoutKick))then Z=100784;return"Blackout Kick 738"end end end;if N.ChiWave:IsReady()and h:IsInRange(8)then if m.Cast(N.ChiWave,nil,nil,not h:IsInRange(40))then Z=115098;return"Chi Wave 734"end end;if N.FlyingSerpentKickActionBarReplacement:IsReady()and not v and not ae.Windwalker.IgnoreFSK then if m.Cast(N.FlyingSerpentKickActionBarReplacement,nil,nil,not h:IsInRange(40))then Z=101545;return"Flying Serpent Kick Slam 740"end end;if N.FlyingSerpentKick:IsReady()and not v and h:IsInRange(8)and not ae.Windwalker.IgnoreFSK then if m.Cast(N.FlyingSerpentKick,nil,nil,not h:IsInRange(40))then Z=101545;return"Flying Serpent Kick 742"end end end;local function b7()if N.WhirlingDragonPunch:IsReady()and not u and not a4 and h:IsInRange(8)and(g:BuffStack(N.PrimordialPotentialBuff)<9 or g:BuffRemains(N.BonedustBrew)<N.RisingSunKick:CooldownRemains()and g:BuffUp(N.BonedustBrew)and W)then if m.Cast(N.WhirlingDragonPunch,nil,nil,not h:IsInMeleeRange(8))then Z=152175;return"Whirling Dragon Punch 800"end end;if N.EnergizingElixir:IsReady()and h:IsInRange(8)and(g:ChiDeficit()>=2 and ay()>3 or g:ChiDeficit()>=4 and(ay()>2 or not g:PrevGCD(1,N.TigerPalm)))then if m.Cast(N.EnergizingElixir,nil)then Z=115288;return"Energizing Elixir 802"end end;if N.SpinningCraneKick:IsReady()and h:IsInRange(8)and(aA(N.SpinningCraneKick)and g:BuffUp(N.DanceOfChijiBuff))then if m.Cast(N.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then Z=101546;return"Spinning Crane Kick 804"end end;if N.RisingSunKick:IsReady()and not a4 then if ac.CastTargetIf(N.RisingSunKick,S,"min",aC,aS)then return"Rising Sun Kick 806"end;if aC(h)and aS(h)then if m.Cast(N.RisingSunKick,nil,nil,not h:IsSpellInRange(N.RisingSunKick))then Z=107428;return"Rising Sun Kick 808"end end end;if N.FistsOfFury:IsReady()and not a4 and not w and(ay()>N.FistsOfFury:ExecuteTime()-1 or g:ChiDeficit()<=1 or g:BuffRemains(N.StormEarthAndFireBuff)<N.FistsOfFury:ExecuteTime()+1 or V<N.FistsOfFury:ExecuteTime()+1 or UnitsWithBDBCount>0 or g:BuffUp(N.PrimordialPowerBuff))then if m.Cast(N.FistsOfFury,nil,nil,not h:IsSpellInRange(N.FistsOfFury))then Z=113656;return"Fists of Fury 810"end end;if N.CracklingJadeLightning:IsReady()and h:IsInRange(40)and(g:BuffStack(N.TheEmperorsCapacitor)>19 and ay()>N.CracklingJadeLightning:ExecuteTime()-1 and N.RisingSunKick:CooldownRemains()>N.CracklingJadeLightning:ExecuteTime()or g:BuffStack(N.TheEmperorsCapacitor)>14 and(N.Serenity:IsAvailable()and N.Serenity:CooldownRemains()<5 or ao==1 and N.WeaponsOfOrder:CooldownRemains()<5 or V<5))then if m.Cast(N.CracklingJadeLightning,nil,nil,not h:IsInRange(40))then Z=117952;return"Crackling Jade Lightning 812"end end;if N.RushingJadeWind:IsReady()and h:IsInRange(8)and(g:BuffDown(N.RushingJadeWindBuff)and U>1)then if m.Cast(N.RushingJadeWind,nil,nil,not h:IsInMeleeRange(8))then Z=116847;return"Rushing Jade Wind 814"end end;if N.FistOfTheWhiteTiger:IsReady()then if ac.CastTargetIf(N.FistOfTheWhiteTiger,T,"min",aC,aF)then return"Fist of the White Tiger 816"end;if aC(h)and aF(h)then if m.Cast(N.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(N.FistOfTheWhiteTiger))then Z=261947;return"Fist of the White Tiger 818"end end end;if N.ExpelHarm:IsReady()and h:IsInRange(8)and g:ChiDeficit()>=1 then if m.Cast(N.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then Z=322101;return"Expel Harm 820"end end;if N.ChiBurst:IsReady()and h:IsInRange(30)and(D==0 or D>N.ChiBurst:CastTime()+0.5)and(g:ChiDeficit()>=1 and U==1 or g:ChiDeficit()>=2 and U>=2)then if m.Cast(N.ChiBurst,nil,nil,not h:IsInRange(40))then Z=123986;return"Chi Burst 822"end end;if N.ChiWave:IsReady()and h:IsInRange(40)and g:BuffDown(N.PrimordialPowerBuff)then if m.Cast(N.ChiWave,nil,nil,not h:IsInRange(40))then Z=115098;return"Chi Wave 824"end end;if N.TigerPalm:IsReady()then if ac.CastTargetIf(N.TigerPalm,S,"min",aE,aT)then return"Tiger Palm 826"end;if aE(h)and aT(h)then if m.Cast(N.TigerPalm,nil,nil,not h:IsSpellInRange(N.TigerPalm))then Z=100780;return"Tiger Palm 828"end end end;if N.SpinningCraneKick:IsReady()and h:IsInRange(8)and(g:BuffStack(N.ChiEnergyBuff)>30-5*U and g:BuffDown(N.StormEarthAndFireBuff)and(N.RisingSunKick:CooldownRemains()>2 and N.FistsOfFury:CooldownRemains()>2 or N.RisingSunKick:CooldownRemains()<3 and N.FistsOfFury:CooldownRemains()>3 and g:Chi()>3 or N.RisingSunKick:CooldownRemains()>3 and N.FistsOfFury:CooldownRemains()<3 and g:Chi()>4 or g:ChiDeficit()<=1 and ay()<2)or g:BuffStack(N.ChiEnergyBuff)>10 and V<7)then if m.Cast(N.SpinningCraneKick,nil,nil,not h:IsInMeleeRange(8))then Z=101546;return"Spinning Crane Kick 830"end end;if N.BlackoutKick:IsReady()and(not UnitsWithBDBCount==0 or EnemiesWithMotC<3 or not N.CalculatedStrikes:SoulbindEnabled()and EnemiesWithMotC<2)then if ac.CastTargetIf(N.BlackoutKick,S,"min",aC,aU)then return"Blackout Kick 832"end;if aC(h)and aU(h)then if m.Cast(N.BlackoutKick,nil,nil,not h:IsSpellInRange(N.BlackoutKick))then Z=100784;return"Blackout Kick 834"end end end;if N.TigerPalm:IsReady()then if ac.CastTargetIf(N.TigerPalm,S,"min",aE,aJ)then return"Tiger Palm 836"end;if aE(h)and aJ(h)then if m.Cast(N.TigerPalm,nil,nil,not h:IsSpellInRange(N.TigerPalm))then Z=100780;return"Tiger Palm 838"end end end;if N.ArcaneTorrent:IsReady()and o()and h:IsInRange(8)and g:ChiDeficit()>=1 then if m.Cast(N.ArcaneTorrent,nil,nil,not h:IsInMeleeRange(8))then Z=50613;return"Arcane Torrent 402"end end;if N.FlyingSerpentKickActionBarReplacement:IsReady()and not v and not ae.Windwalker.IgnoreFSK then if m.Cast(N.FlyingSerpentKickActionBarReplacement,nil,nil,not h:IsInRange(40))then Z=101545;return"Flying Serpent Kick Slam 840"end end;if N.FlyingSerpentKick:IsReady()and not v and h:IsInRange(8)and not ae.Windwalker.IgnoreFSK then if m.Cast(N.FlyingSerpentKick,nil,nil,not h:IsInRange(40))then Z=101545;return"Flying Serpent Kick 842"end end;if N.BlackoutKick:IsReady()then if ac.CastTargetIf(N.BlackoutKick,T,"min",aC,aV)then return"Blackout Kick 844"end;if aC(h)and aV(h)then if m.Cast(N.BlackoutKick,nil,nil,not h:IsSpellInRange(N.BlackoutKick))then Z=100784;return"Blackout Kick 846"end end end;if N.BlackoutKick:IsReady()then if ac.CastTargetIf(N.BlackoutKick,T,"min",aC,aW)then return"Blackout Kick 848"end;if aC(h)and aW(h)then if m.Cast(N.BlackoutKick,nil,nil,not h:IsSpellInRange(N.BlackoutKick))then Z=100784;return"Blackout Kick 850"end end end;if N.TigerPalm:IsReady()and UnitsWithBDBCount==0 and not o()then if ac.CastTargetIf(N.TigerPalm,S,"min",aC,aX)then return"TigerPalm Kick 336"end;if aC(h)and aX(h)then if m.Cast(N.TigerPalm,nil,nil,not h:IsSpellInRange(N.TigerPalm))then Z=100784;return"TigerPalm Kick 338"end end end end;local function b8()s=HeroRotationCharDB.Toggles[6]q=HeroRotationCharDB.Toggles[4]r=HeroRotationCharDB.Toggles[5]C=HeroRotationCharDB.Toggles[12]t=HeroRotationCharDB.Toggles[15]u=HeroRotationCharDB.Toggles[31]v=HeroRotationCharDB.Toggles[32]w=HeroRotationCharDB.Toggles[33]x=HeroRotationCharDB.Toggles[34]y=HeroRotationCharDB.Toggles[35]z=HeroRotationCharDB.Toggles[36]A=HeroRotationCharDB.Toggles[37]B=HeroRotationCharDB.Toggles[38]a4=false;G=false;H=false;if ae.Windwalker.IncludedCooldowns.Xuen and o()or ae.Windwalker.IncludedSmallCooldowns.Xuen and(o()or r)or not ae.Windwalker.IncludedSmallCooldowns.Xuen and not ae.Windwalker.IncludedCooldowns.Xuen and not ae.Windwalker.IncludedSmallCooldowns.SEFEcho and not ae.Windwalker.IncludedCooldowns.SEFEco then G=true end;if ae.Windwalker.IncludedCooldowns.SEFFull and o()or ae.Windwalker.IncludedSmallCooldowns.SEFFull and(o()or r)or not ae.Windwalker.IncludedSmallCooldowns.SEFFull and not ae.Windwalker.IncludedCooldowns.SEFFull or(ae.Windwalker.IncludedCooldowns.SEFEco and o()and N.StormEarthAndFire:ChargesFractional()>ae.Windwalker.SEFEcoCharge or ae.Windwalker.IncludedSmallCooldowns.SEFEco and(o()or r)and N.StormEarthAndFire:ChargesFractional()>ae.Windwalker.SEFEcoCharge or not ae.Windwalker.IncludedSmallCooldowns.SEFEco and not ae.Windwalker.IncludedCooldowns.SEFEco and N.StormEarthAndFire:ChargesFractional()>ae.Windwalker.SEFEcoCharge)then H=true end;D=0;for b9=1,20 do if select(10,UnitDebuff("player",b9))==240447 then if select(6,UnitDebuff("player",b9))~=nil then D=select(6,UnitDebuff("player",b9))-GetTime()end end end end;local function ba()local bb=0;local bc={322968,319603,319611,325876,334493,334496,332605,328494,326836,336277,319669,323831,330725,333299}if UnitExists("mouseover")then if UnitIsDead("mouseover")==true and UnitCanAttack("player","mouseover")~=true then bb=9999 else for b9=0,40 do local bd,bd,be,bf,bd,bd,bd,bd,bd,bg=UnitDebuff("mouseover",b9)for bd,bh in pairs(bc)do if bh==bg then if bf=="Magic"then bb=1 elseif bf=="Poison"then bb=2 elseif bf=="Disease"then bb=3 elseif bf=="Curse"then bb=4 end end end end end end;if bb==2 or DebuffCheckC==3 and N.Detox:IsReady()and f("mouseover"):IsInRange(40)then if m.Cast(N.Detox,nil,nil,not h:IsInRange(40))then Z=218164;return"Detox MO"end end end;local function bi()S=g:GetEnemiesInMeleeRange(5)T=g:GetEnemiesInMeleeRange(8)if p()then Enemies10ySplash=h:GetEnemiesInSplashRange(10)U=#T else Enemies10ySplash=1;U=1 end;EnemiesWithMotC=GetSpellCount(101546)UnitsWithBDBCount=as(T)UnitsWithBDBSEFCount=ax(T)local bj=g:IsTankingAoE(8)or g:IsTanking(h)V=d.FightRemains(T,false)W=N.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24;if not BotOn then Y=0;Z=0;_=0 end;if Y>0 then Y=0 end;if Z>0 then Z=0 end;if _>0 then _=0 end;X=b8()if not h:IsInMeleeRange(10)and U>0 and ae.Windwalker.TargetSwap=="AutoSwap"and not C then Y=999 end;X=ba()if ac.TargetIsValid()and not g:IsDeadOrGhost()then if not g:AffectingCombat()and s then local X=a_()if X then return X end end;if N.FlyingSerpentKickActionBarReplacement:IsReady()and not v and not ae.Windwalker.IgnoreFSK and g:AffectingCombat()then if m.Cast(N.FlyingSerpentKickActionBarReplacement,nil,nil,not h:IsInRange(40))then Z=101545;return"Flying Serpent Kick Slam 740"end end;if g:IsChanneling(N.FistsOfFury)and B then if m.Cast(N.PoolEnergy,nil,nil,nil)then Z=1000;return"Casting FoF"end end;if g:IsChanneling(N.FistsOfFury)and(not I or N.RisingSunKick:CooldownRemains()<=0)and not J and g:AffectingCombat()then if m.Cast(N.PoolEnergy,nil,nil,nil)then Z=99999;return"Casting FoF"end elseif(I==true or J==true)and not g:IsChanneling(N.FistsOfFury)then I=false;J=false end;if x and N.LegSweep:IsUsableP()and N.LegSweep:CooldownRemains(BypassRecovery)<=0 then if m.Cast(N.LegSweep,nil,nil,nil)then Z=119381;return"queue Leg Sweep"end elseif(not N.LegSweep:IsUsableP()or N.LegSweep:CooldownRemains(BypassRecovery)>0)and x then HeroRotationCharDB.Toggles[34]=not HeroRotationCharDB.Toggles[34]m.Print("Leg Sweep Queue is now "..(HeroRotationCharDB.Toggles[34]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if y and N.Paralysis:IsUsableP()and N.Paralysis:CooldownRemains(BypassRecovery)<=0 then if m.Cast(N.Paralysis,nil,nil,nil)then if f("mouseover"):GUID()~=nil and f("mouseover"):IsSpellInRange(N.Paralysis)then Y=1115078;return"queue Paralysis MO"else Z=115078;return"queue Paralysis"end end elseif(not N.Paralysis:IsUsableP()or N.Paralysis:CooldownRemains(BypassRecovery)>0)and y then HeroRotationCharDB.Toggles[35]=not HeroRotationCharDB.Toggles[35]m.Print("Paralysis Queue is now "..(HeroRotationCharDB.Toggles[35]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if z and N.RingOfPeace:IsAvailable()and N.RingOfPeace:IsUsableP()and N.RingOfPeace:CooldownRemains(BypassRecovery)<=0 then if m.Cast(N.RingOfPeace,nil,nil,nil)then Z=116844;return"queue RingOfPeace"end elseif(not N.RingOfPeace:IsUsableP()or N.RingOfPeace:CooldownRemains(BypassRecovery)>0 or not N.RingOfPeace:IsAvailable())and z then HeroRotationCharDB.Toggles[36]=not HeroRotationCharDB.Toggles[36]m.Print("RingOfPeace Queue is now "..(HeroRotationCharDB.Toggles[36]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if A and N.BonedustBrew:IsUsableP()and N.BonedustBrew:CooldownRemains(BypassRecovery)<=0 then if m.Cast(N.BonedustBrew,nil,nil,nil)then Z=325216;return"queue BonedustBrew"end elseif(not N.BonedustBrew:IsUsableP()or N.BonedustBrew:CooldownRemains(BypassRecovery)>0)and A then HeroRotationCharDB.Toggles[37]=not HeroRotationCharDB.Toggles[37]m.Print("BonedustBrew Queue is now "..(HeroRotationCharDB.Toggles[37]and"|cff00ff00on|r."or"|cffff0000off|r."))end;if ae.Commons.UseDefensives and g:AffectingCombat()then if N.FortifyingBrew:IsReady()and g:HealthPercentage()<ae.Commons.FortifyingBrew then if m.Cast(N.FortifyingBrew,nil,nil,nil)then Z=243435;return"Fortifying Brew 100"end end;if N.TouchOfKarma:IsReady()and g:HealthPercentage()<ae.Commons.TouchofKarma then if m.Cast(N.TouchOfKarma,nil,nil,nil)then Z=122470;return"ToK 100"end end;if g:HealthPercentage()<ae.Commons.PhialHP and O.PhialofSerenity:IsReady()and O.PhialofSerenity:CooldownRemains()<=0 then if m.Cast(O.PhialofSerenity,nil)then Z=55;return"PhialofSerenity HP"end end;if g:HealthPercentage()<ae.Commons.HealthstoneHP and O.Healthstone:IsReady()and O.Healthstone:CooldownRemains()<=0 then if m.Cast(O.Healthstone,nil)then Z=40;return"Healthstone HP"end end;if g:HealthPercentage()<ae.Commons.HealPotHP and O.HealPot:IsReady()and O.HealPot:CooldownRemains()<=0 then if m.Cast(O.HealPot,nil)then Z=41;return"HealPot HP"end end end;a1=N.InvokeXuenTheWhiteTiger:CooldownRemains()>V or V-N.InvokeXuenTheWhiteTiger:CooldownRemains()<120 and(N.Serenity:IsAvailable()and V>N.Serenity:CooldownRemains()and N.Serenity:CooldownRemains()>10 or N.StormEarthAndFire:FullRechargeTime()<V and N.StormEarthAndFire:FullRechargeTime()>15 or N.StormEarthAndFire:Charges()==0 and N.StormEarthAndFire:CooldownRemains()<V)if O.PotionofPhantomFire:IsReady()and g:AffectingCombat()and h:IsInRange(8)and ae.Commons.UsePotions and(((g:BuffUp(N.SerenityBuff)or g:BuffUp(N.StormEarthAndFireBuff))and N.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or d.BossFilteredFightRemains("<=",60))and not m.GUISettings.General.HoldPotforBL or m.GUISettings.General.HoldPotforBL and g:BloodlustUp())then if m.CastSuggested(O.PotionofPhantomFire)then Z=32;return"Potion of Phantom Fire 102"end end;if O.PotionofSpectralAgility:IsReady()and g:AffectingCombat()and h:IsInRange(8)and ae.Commons.UsePotions and(((g:BuffUp(N.SerenityBuff)or g:BuffUp(N.StormEarthAndFireBuff))and N.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or d.BossFilteredFightRemains("<=",60))and not m.GUISettings.General.HoldPotforBL or m.GUISettings.General.HoldPotforBL and g:BloodlustUp())then if m.CastSuggested(O.PotionofSpectralAgility)then Z=32;return"Potion of Spectral Agility 104"end end;if O.PotionofDeathlyFixation:IsReady()and g:AffectingCombat()and h:IsInRange(8)and ae.Commons.UsePotions and(((g:BuffUp(N.SerenityBuff)or g:BuffUp(N.StormEarthAndFireBuff))and N.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or d.BossFilteredFightRemains("<=",60))and not m.GUISettings.General.HoldPotforBL or m.GUISettings.General.HoldPotforBL and g:BloodlustUp())then if m.CastSuggested(O.PotionofDeathlyFixation)then Z=32;return"Potion of Deathly Fixation 106"end end;if O.PotionofEmpoweredExorcisms:IsReady()and g:AffectingCombat()and h:IsInRange(8)and ae.Commons.UsePotions and(((g:BuffUp(N.SerenityBuff)or g:BuffUp(N.StormEarthAndFireBuff))and N.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or d.BossFilteredFightRemains("<=",60))and not m.GUISettings.General.HoldPotforBL or m.GUISettings.General.HoldPotforBL and g:BloodlustUp())then if m.CastSuggested(O.PotionofEmpoweredExorcisms)then Z=32;return"Potion of Empowered Exorcisms 108"end end;if O.PotionofHardenedShadows:IsReady()and g:AffectingCombat()and h:IsInRange(8)and ae.Commons.UsePotions and(((g:BuffUp(N.SerenityBuff)or g:BuffUp(N.StormEarthAndFireBuff))and N.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or d.BossFilteredFightRemains("<=",60))and not m.GUISettings.General.HoldPotforBL or m.GUISettings.General.HoldPotforBL and g:BloodlustUp())then if m.CastSuggested(O.PotionofHardenedShadows)then Z=32;return"Potion of Hardened Shadows 110"end end;if O.PotionofSpectralStamina:IsReady()and g:AffectingCombat()and h:IsInRange(8)and ae.Commons.UsePotions and(((g:BuffUp(N.SerenityBuff)or g:BuffUp(N.StormEarthAndFireBuff))and N.InvokeXuenTheWhiteTiger:TimeSinceLastCast()<=24 or d.BossFilteredFightRemains("<=",60))and not m.GUISettings.General.HoldPotforBL or m.GUISettings.General.HoldPotforBL and g:BloodlustUp())then if m.CastSuggested(O.PotionofSpectralStamina)then Z=32;return"Potion of Spectral Stamina 112"end end;if g:BuffUp(N.SerenityBuff)and g:AffectingCombat()then local X=b5()if X then return X end end;if g:BuffUp(N.WeaponsOfOrder)and g:AffectingCombat()then local X=b6()if X then return X end end;if N.FaelineStomp:IsCastable()and q and h:IsInMeleeRange(10)and(g:AffectingCombat()or s)and(aA(N.FaelineStomp)and(an or N.GroveInvigoration:SoulbindEnabled()or U<3 and g:BuffDown(N.StormEarthAndFireBuff)))then if n(N.FaelineStomp,nil)then Z=327104;return"faeline_stomp main 6"end end;if d.CombatTime()<4 and g:Chi()<5 and not W and(g:AffectingCombat()or s)then local X=b0()if X then return X end end;if N.FistOfTheWhiteTiger:IsReady()and g:AffectingCombat()then if ac.CastTargetIf(N.FistOfTheWhiteTiger,S,"min",aC,aG)then return"Fist of the White Tiger 114"end;if aC(h)and aG(h)then if m.Cast(N.FistOfTheWhiteTiger,nil,nil,not h:IsSpellInRange(N.FistOfTheWhiteTiger))then Z=261947;return"Fist of the White Tiger 116"end end end;if N.ExpelHarm:IsReady()and(UnitsWithBDBCount==0 or N.RisingSunKick:CooldownRemains(BypassRecovery)>0 or U<=2)and g:AffectingCombat()and h:IsInRange(8)and(g:ChiDeficit()>=1 and(ay()<1 or N.Serenity:CooldownRemains()<2 or ay()<4 and N.FistsOfFury:CooldownRemains()<1.5 or N.WeaponsOfOrder:CooldownRemains()<2)and UnitsWithBDBCount==0)then if m.Cast(N.ExpelHarm,nil,nil,not h:IsInMeleeRange(8))then Z=322101;return"Expel Harm 118"end end;if N.TigerPalm:IsReady()and g:AffectingCombat()and(UnitsWithBDBCount==0 or N.RisingSunKick:CooldownRemains(BypassRecovery)>0 or U<=2)then if ac.CastTargetIf(N.TigerPalm,T,"min",aC,aH)then return"Tiger Palm 120"end;if aC(h)and aH(h)then if m.Cast(N.TigerPalm,nil,nil,not h:IsSpellInRange(N.TigerPalm))then Z=100780;return"Tiger Palm 122"end end end;if N.ChiBurst:IsReady()and(ao==3 and N.FaelineStomp:CooldownRemains()>25 and(g:ChiDeficit()>=1 and U==1 or g:ChiDeficit()>=2 and U>=2))then if m.Cast(N.ChiBurst,nil,nil,not h:IsInRange(40))then Z=123986;return"chi_burst main 16"end end;if(m.CDsON()or not m.CDsON())and not N.Serenity:IsAvailable()and g:AffectingCombat()then local X=b4()if X then return X end end;if N.RisingSunKick:IsReady()and not a4 and UnitsWithBDBCount>0 then if ac.CastTargetIf(N.RisingSunKick,S,"min",aC,aS)then return"Rising Sun Kick 806"end;if aC(h)and aS(h)then if m.Cast(N.RisingSunKick,nil,nil,not h:IsSpellInRange(N.RisingSunKick))then Z=107428;return"Rising Sun Kick 808"end end end;if(m.CDsON()or not m.CDsON())and N.Serenity:IsAvailable()and g:AffectingCombat()then local X=b3()if X then return X end end;if(U<3 or not m.AoEON())and g:AffectingCombat()then local X=b7()if X then return X end end;if m.AoEON()and U>=3 and g:AffectingCombat()then local X=b1()if X then return X end end;if g:AffectingCombat()then if m.Cast(N.PoolEnergy)and not ae.Windwalker.NoWindwalkerPooling then return"Pool Energy"end end end end;local function bk()end;function ReturnSpell()if Z==0 then return 0 else return Z end end;function ReturnSpellMO()if Y==0 then return 0 else return Y end end;function ReturnSpellFocus()if _==0 then return 0 else return _ end end;m.SetAPL(269,bi,bk)